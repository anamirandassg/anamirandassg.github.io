const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-DnGfEQUa.js","assets/index-7ZM3jTwu.js","assets/index-BRlA1Q7g.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-DYUkBgjK.js","assets/SVG-JQaKQi55.js","assets/Util-D6Peje1o.js"])))=>i.map(i=>d[i]);
import{l as q,_ as V,r as Z,c as z,a as Q,o as ee,b as te,d as ie,i as r,e as l,S as x,z as se,F as re,E as ne,f as G,j as w,k as ae,s as le,m as T,h as ce,t as $,A as H}from"./index-7ZM3jTwu.js";import{g as J,f as U,m as oe,e as C,O as de,b as me,u as ue,G as ge,K as Y,H as fe,I as _e}from"./Util-D6Peje1o.js";import{u as he}from"./debounces-kmK87E1s.js";import"./ButonHrm-CFrXzA_f.js";import{P as ve}from"./ShowQRPrintLabel-CXovudQK.js";import{handleListManifest as be}from"./DashManifest-b3GgOoAj.js";/* empty css                 */import"./SVG-JQaKQi55.js";import"./fontkit.es-jEU4QD-9.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-Y_2rRhtM.js";import"./Toast-B5mORVrG.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-Pn91f8dh.js";var X=$("<h5>"),ye=$('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),pe=$("<div> <!>."),$e=$("<div> "),ke=$('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),xe=$('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Se=$('<div class="icon_status centerBx">'),Be=$("<h5 class=rpto>"),we=$('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const Ie=q(()=>V(()=>import("./LoadingColorSpinner-DnGfEQUa.js"),__vite__mapDeps([0,1,2,3]))),R=q(()=>V(()=>import("./FlexSpace-DYUkBgjK.js"),__vite__mapDeps([4,1,2]))),N=q(()=>V(()=>import("./SVG-JQaKQi55.js"),__vite__mapDeps([5,1,2,6])));function Qe(){const[e,m]=Z(),[s,d]=z({search:""}),[h,a]=z(),[u,O]=Q(0),[E,j]=z(),[A,W]=Q("");he(W,400),ee(()=>{}),te(()=>{});const D=async()=>{if(e?.mId&&u()<Y()){O(Y()+7e3);let i={id:e?.mId},c=await Ce(i);d("manifestObj",void 0),a("linked",void 0),d("manifestObj",c),a("linked",{...c?.linkedBags}),s?.province||(d("province",c?.province),d("city",c?.city))}};ie(async()=>{let i=[];[33,46,40,41,42,50,52,54,56].map(y=>{let t=y,g=C("M023009")?.whStList?.[t];H?.roles?.[g?.id]?.isActive&&i.push(g)}),j("list",i);let _=[];C("M023009")?.provincias.map(y=>{let t=y.label;H?.roles?.[t]?.isActive&&_.push(y)}),j("prov",_),D()});const f=i=>i||"",v=i=>i?" "+i:"",M=i=>(f(i?.estate)+"_"+f(i?.city)+"_"+f(i?.reparto)+"_"+f(i?.streetName)+"_"+f(i?.streetNo)).toLowerCase(),n=i=>{let c=i?.consigneeInfo;return v(c?.firstName)+v(c?.middleName)+v(c?.lastName)+v(c?.lastName2)},b=i=>{let c=i?.consigneeInfo,_=v(c?.altPhoneNumber);return v(c?.phoneNumber)+(_?" |"+_:"")},k=async()=>{let i={},c={},_={};s?.manifestObj?.linkedBagsInfo?.map(t=>{if(t?.currentStatus!="YABA_99"){let g=M(t?.consigneeInfo),S=t?.cidentity,L=t?.address?.estate||t?.estate||t?.consigneeInfo?.ybestate,I=t?.address?.city||t?.city||t?.consigneeInfo?.ybcity,B=t?.address?.rpto||t?.consigneeInfo?.ybreparto;if(_[B]||(_[B]=1),c[I]||(c[I]=1),i[g]||(i[g]={city:I,estate:L,rpto:B,address:{streetNo:t?.address?.streetNo,street:t?.address?.streetName,apt:t?.address?.apt,betwen:t?.address?.betwen,ybbetwen2:t?.consigneeInfo?.ybbetwen2},currentStatus:t?.currentStatus,customers:{},bagsNo:0}),!i[g].customers[S]){let o={name:n(t),phoneNumber:b(t),cid:t?.cidentity,nameshipper:t?.nameshipper},p={...t,...o};p.bagsNumb={},i[g].customers[S]=p}let P={bagnumber:t?.bagnumber,idairguide:"all",tracking:t?.tracking,hbls:t?.hbls};i[g].customers[S].bagsNumb[t?.ssg_track_key]=P,i[g].bagsNo+=1}});let y=await ve(de(i),i);window.open(y)};return(()=>{var i=ye(),c=i.firstChild,_=c.firstChild,y=_.firstChild,t=y.nextSibling,g=t.nextSibling,S=g.nextSibling,L=S.firstChild,I=S.nextSibling,B=I.nextSibling,P=c.nextSibling;return r(y,()=>s?.manifestObj?.name),r(_,l(x,{get when(){return s?.manifestObj?.city},get children(){return["|",(()=>{var o=X();return r(o,()=>s?.manifestObj?.city),o})()]}}),t),r(g,()=>s?.manifestObj?.province),S.$$click=()=>{},r(L,l(N,{name:"link",size:22})),B.$$click=k,r(B,l(N,{name:"printer",size:24,color:"firebrick"})),r(P,l(ne,{fallback:o=>(()=>{var p=pe(),F=p.firstChild,K=F.nextSibling;return K.nextSibling,r(p,()=>o.toString(),K),p})(),get children(){return l(se,{get fallback(){return(()=>{var o=$e();return o.firstChild,r(o,l(Ie,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){return l(x,{get when(){return s?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(re,{get each(){return s?.manifestObj?.linkedBagsInfo},children:o=>l(Ne,{item:o,get city(){return s?.manifestObj?.city},get manifestObj(){return s?.manifestObj},get isAlready(){return s?.manifestObj?.linkedBags?.[o.ssg_track_key]},setFormsM:d,get mId(){return e?.mId}})})}})}})}})),G(o=>{var p=`/link-manifest?mId=${e?.mId}`,F=` ${w(),"width:86vw;"} margin: 0 auto;`;return p!==o.e&&ae(L,"href",o.e=p),o.t=le(P,F,o.t),o},{e:void 0,t:void 0}),i})()}const Ne=e=>{const m=()=>{console.log(e.item);let a=e?.item?.street.split(",");return a.slice(0,a.length-2).join(",")},s=a=>a?" "+a:"",d=()=>{let a=e?.item?.consigneeInfo;return s(a?.firstName)+s(a?.middleName)+s(a?.lastName)+s(a?.lastName2)},h=async a=>{if(e?.item?.currentStatus!=="99"){let u=me(C("manifestList"));u[e?.mId].linkedBags[e?.item?.ssg_track_key]&&(delete u[e?.mId].linkedBags[e?.item?.ssg_track_key],ue("manifestList",u),await ge(_e,fe,u)),e?.setFormsM("manifestObj","linkedBags",e?.item?.ssg_track_key,void 0)}};return l(x,{get when(){return e?.manifestObj?.linkedBags[e?.item?.ssg_track_key]},get children(){var a=we(),u=a.firstChild,O=u.firstChild,E=O.firstChild,j=E.nextSibling,A=O.nextSibling,W=A.firstChild,D=W.firstChild,f=u.nextSibling,v=f.firstChild,M=v.nextSibling;return r(a,l(x,{get when(){return w()},get children(){var n=ke(),b=n.firstChild,k=b.nextSibling;return r(b,d),r(n,l(R,{}),k),k.$$click=h,r(k,l(N,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),n}}),u),r(E,l(N,{name:"open_package_file_outline",size:20})),r(j,()=>e?.item?.bagnumber),r(u,l(x,{get when(){return!w()},get children(){var n=xe(),b=n.firstChild;return r(b,d),n}}),A),r(u,l(R,{}),A),r(D,()=>e?.item?.idairguide),r(u,l(x,{get when(){return!w()},get children(){var n=Se();return n.$$click=h,r(n,l(N,{get name(){return e?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return e?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),n}}),null),r(v,m),r(f,l(R,{}),M),r(f,l(x,{get when(){return e?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var n=Be();return r(n,()=>e?.item?.consigneeInfo?.ybreparto),n})(),"|"]}}),M),r(f,l(x,{get when(){return!e?.city&&e?.item?.city},get children(){var n=X();return r(n,()=>e?.item?.city),n}}),null),G(n=>{var b=`client_item_box gWXAaj jlytmu manifest ${w()?"isMobile":""}`,k=` ${w(),"centerBx"} bottombx flxWrp  centerBx`;return b!==n.e&&T(a,n.e=b),k!==n.t&&T(f,n.t=k),n},{e:void 0,t:void 0}),a}})},Te=async(e,m)=>{let s={params:e,data2update:m},d=J(709002);return s={...s,...d},await U(s)},Ce=async e=>{let m={...C("manifestList")?.[e?.id]};m||(m=await be());let s=[],d=m?.linkedBags;return d&&Object.keys(d)?.map(async h=>{if(h){let a=C("manifestByKeys")?.[h];s.push(a)}}),m.linkedBagsInfo=s,m},He=async e=>{let m=[];e.map(s=>{let d={params:{id:s?.ssg_track_key,idairguide:"all"}},h=J(802002);d={...d,...h},m.push(d)}),oe(m,Oe)},Oe=async e=>{const s=await U(e);if(s)return s};ce(["click"]);export{Qe as default,Oe as fetchCSVInve,He as loadManifest,Te as updLinkedBags};
