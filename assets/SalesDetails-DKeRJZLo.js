const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-D0jtX9Ue.js","assets/index-DltPbqHD.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch--e5RSuwW.js","assets/debounces-DLGJQUQ8.js","assets/SVG-CT3adiDl.js","assets/DropDwnSearch-DMkLkRPc.css","assets/CheckBoxSlide-Cz1zeBmv.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/FlexSpace-DKQYefyC.js","assets/ButonHrm-Y4kFJ0cs.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-Cv2lT8Jq.js","assets/DialogHRM-ByNTJ52m.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts-C9T0ZvvN.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-UnN3COgO.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as R,_ as U,c as T,G as Se,a as Y,o as Ie,b as Oe,d as J,i as l,e as a,S as I,F as le,n as M,b0 as we,J as ke,E as ce,h as B,w as pe,r as oe,x as me,j as D,k as L,U as Ee,C as Pe,z as Ae,t as S,q as ne,p as G,b1 as ue,O as Z,aj as he,at as qe}from"./index-DltPbqHD.js";import{u as Ne}from"./debounces-DLGJQUQ8.js";import{OpenModal as Be}from"./DialogHRM-ByNTJ52m.js";import{g as ge,a as _e}from"./handelImagesServices-CcFPtec6.js";import{LookupInventory as $e}from"./DashInventoryMov-DCLAtjn9.js";import{LookupProducts as ie}from"./DashProducts-C9T0ZvvN.js";import{a as je}from"./print_invoice_service-Bbi9GWio.js";import{OpenToast as re}from"./Toast-DMBf6yw2.js";import"./browser-image-compression-BVJ4p9S0.js";import"./AddInventory-DsuZx8Tu.js";import"./FlexSpace-DKQYefyC.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-C2dYeGbh.js";import"./InitPrintServices-Cygf5LSe.js";import"./qrcode-DHy8FFhS.js";var Te=S('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),De=S('<div style=margin:15px class=" spaceAround centerBx">'),Le=S('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise></select><div class="centerBx bottombx "><h5 class="">Solo Arancel</h5></div></section><div style=margin:15px class=" spaceAround centerBx"><div style=margin:7px></div><div style=margin:7px>'),Re=S('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),Ue=S("<option> "),Ve=S('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Estimated tax</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Estimated total</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class=JM2zDb>'),ye=S("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Fe=S('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Me=S("<span class=arancelSep> | "),Qe=S('<span class="arancel pricePq"> $'),Ye=S('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Ge=S('<div class="icon_status centerBx "style="margin:0 4px">'),Je=S("<div style=padding:4px>"),He=S('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx spaceAround "><h5></h5><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div><p class=" textleft "></p></div><div style=padding:4px>'),ze=S('<section class="h6rxkc ">'),We=S('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),Ke=S('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Xe=S('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),Ze=S('<div class="centerBx flxWrp">'),et=S('<div><div class=QCNFEe><p class=jhB0af>Enviar a Solve D Cargo</p></div><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Esta seguro de querer enviar a Solve D Cargo tenga en cuenta que puede duplicar la informacion</span></p><div class=separator></div><div style=margin:15px class=" spaceAround centerBx">');R(()=>U(()=>import("./LoadingColorSpinner-D0jtX9Ue.js"),__vite__mapDeps([0,1,2,3])));const fe=R(()=>U(()=>import("./DropDwnSearch--e5RSuwW.js"),__vite__mapDeps([4,1,2,5,6,7]))),tt=R(()=>U(()=>import("./CheckBoxSlide-Cz1zeBmv.js"),__vite__mapDeps([8,1,2,9]))),ee=R(()=>U(()=>import("./FlexSpace-DKQYefyC.js"),__vite__mapDeps([10,1,2]))),F=R(()=>U(()=>import("./ButonHrm-Y4kFJ0cs.js"),__vite__mapDeps([11,1,2,6,12])));R(()=>U(()=>import("./UpdInventory-Cv2lT8Jq.js"),__vite__mapDeps([13,1,2,14,15,5,16,17,18,10])));const te=R(()=>U(()=>import("./InputHr-UnN3COgO.js"),__vite__mapDeps([19,1,2,20]))),se=R(()=>U(()=>import("./SVG-CT3adiDl.js"),__vite__mapDeps([6,1,2]))),[E,N]=T({manifestObj:{}});let lt=864e5;function kt(){const[e,s]=Se();T(),T(),T();const[c,f]=Y("");Ne(f,400),Ie(()=>{}),Oe(()=>{});const _=async()=>{if(e?.mId){let o={":search0":e?.mId,businessId:B?.profile?.businessYId},r=await ve(o);N("manifestObj",r[e?.mId])}};return J(async()=>{N("manifestObj",void 0),_()}),(()=>{var o=Te(),r=o.firstChild,n=r.firstChild,v=n.firstChild;return l(o,a(I,{get when(){return E?.manifestObj?.packagesOrder},get children(){return a(rt,{})}}),r),l(v,a(I,{get when(){return E?.manifestObj?.products},get children(){return a(le,{get each(){return E?.manifestObj?.products},children:($,h)=>a(nt,{itm:$})})}})),l(r,a(I,{get when(){return E?.manifestObj?.packagesOrder&&!E?.manifestObj?.isCompleted},get children(){return a(dt,{})}}),null),l(r,a(st,{get item(){return E?.manifestObj},get list(){return E?.manifestObj}}),null),o})()}let it=[{label:"escojer",id:""},{label:"MISCELANEAS",id:"MISCELANEAS"},{label:"UTILES DEL HOGAR",id:"UTILES DEL HOGAR"},{label:"VENTILADOR",id:"VENTILADOR"},{label:"TV",id:"TV"},{label:"CELULAR",id:"CELULAR"},{label:"TABLETS",id:"TABLETS"},{label:"LAPTOPS",id:"LAPTOPS"},{label:"PLAYSTATION",id:"PLAYSTATION"},{label:"BICICLETAS",id:"BICICLETAS"},{label:"GENERADOR",id:"GENERADOR"},{label:"SERVICIO DE RAPEADO",id:"SERVICIO DE RAPEADO"},{label:"TRANSPORTACION",id:"TRANSPORTACION"},{label:"OTROS SERVICIO",id:"OTROS SERVICIO"}];const rt=e=>{const s={type:"",qty:0,arancel:0,price:0},[c,f]=T({frm:{...s}}),_=(r,n)=>{f("frm",r,n)},o=r=>{let n={...c?.frm};n.key=qe();let v=E?.manifestObj?.reservas||[],$=ne(v);$.push(n),console.log(n),N("manifestObj","reservas",$),f("frm",{...s})};return(()=>{var r=Re(),n=r.firstChild,v=n.firstChild,$=n.nextSibling,h=$.firstChild,g=h.firstChild;return l(v,a(I,{get when(){return E?.manifestObj?.reservas},get children(){return a(le,{get each(){return E?.manifestObj?.reservas},children:(b,u)=>a(at,{itm:b})})}})),l(r,a(I,{get when(){return!E?.manifestObj?.isCompleted},get children(){var b=Le(),u=b.firstChild,d=u.firstChild,t=d.firstChild,i=t.nextSibling,m=i.firstChild,p=m.nextSibling,y=p.nextSibling,O=y.firstChild,w=i.nextSibling,k=w.firstChild,x=k.nextSibling;return p.addEventListener("change",C=>{_("type",C?.target?.value)}),l(p,a(le,{each:it,children:(C,V)=>(()=>{var q=Ue();return q.firstChild,l(q,()=>C.label,null),M(()=>q.selected=C.id===c?.frm?.type),M(()=>q.value=C.id),q})()})),l(y,a(tt,{get initValue(){return c?.frm?.onlyTariff},updChange:C=>_("onlyTariff",C),color:"var(--background-red-ssg)"}),O),l(w,a(I,{get when(){return!c?.frm?.onlyTariff&&c?.frm?.type},get children(){return a(te,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return c?.frm?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",type:"number",handleClick:C=>_("qty",we(C))})}}),k),l(w,a(I,{get when(){return c?.frm?.qty&&c?.frm?.type},get children(){return a(te,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.price||""},label:"precio",colors:"#2b2b2b",handleClick:C=>_("price",C)})}}),x),l(w,a(I,{get when(){return c?.frm?.type},get children(){return a(te,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:C=>_("arancel",C)})}}),null),l(d,a(I,{get when(){return(c?.frm?.price&&c?.frm?.qty||c?.frm?.onlyTariff&&c?.frm?.arancel)&&c?.frm?.type},get children(){var C=De();return l(C,a(F,{color:"#646cff",label:"Agregar",handleClick:o})),C}}),null),b}}),$),l(g,a(ct,{get item(){return E?.manifestObj?.shipper_consignee}})),r})()},st=e=>{const s=o=>{let r=0;return e?.item?.products?.map(n=>{r+=Q(n?.qty)*Q(n?.salePrice)*-1}),e?.item?.reservas?.map(n=>{r+=Q(n?.qty)*Q(n?.price)+Q(n?.arancel)}),r},c=async o=>{let r={...e?.item};r.amount=s();let n=await je(r);window.open(n)},f=async()=>{let o={...e?.item},r={params:{businessId:B?.profile?.businessYId,id:o.ssg_sorder_key},form:{isCompleted:!1}},n=D(431007);r={...r,...n}},_=async o=>{let r=ne(e?.item);r.isCompleted=!0,r.dayNum=r?.createDate/lt;let n={params:{businessId:B?.profile?.businessYId,id:r.ssg_sorder_key},form:r},v=D(431007);n={...n,...v},await L(n);let $={params:{businessId:B?.profile?.businessYId},form:r},h=D(139003);$={...$,...h},await L($);let g={":search0":r.ssg_sorder_key,businessId:B?.profile?.businessYId},b=await ve(g);N("manifestObj",b[r.ssg_sorder_key])};return(()=>{var o=Ve(),r=o.firstChild,n=r.firstChild,v=n.firstChild,$=v.firstChild,h=$.nextSibling,g=h.firstChild,b=g.firstChild,u=b.nextSibling;u.firstChild;var d=g.nextSibling,t=d.firstChild,i=t.nextSibling;i.firstChild;var m=d.nextSibling,p=m.firstChild,y=p.nextSibling;y.firstChild;var O=v.nextSibling,w=O.firstChild,k=w.firstChild,x=k.firstChild,C=x.nextSibling;C.firstChild;var V=k.nextSibling,q=V.firstChild,ae=q.nextSibling,H=V.nextSibling,z=H.firstChild,W=z.nextSibling;W.firstChild;var j=O.nextSibling;return l(u,()=>s().toFixed(2),null),l(i,()=>(s()*.06).toFixed(2),null),l(y,()=>(s()*.06+s()).toFixed(2),null),l(C,()=>ke(e?.item?.createDate),null),l(ae,()=>e?.item?.invoice),l(W,()=>ce("storeGroupBy")?.[e?.item?.store]?.label,null),l(j,a(I,{get when(){return e?.item?.isCompleted},get children(){return a(F,{color:"#646cff",label:"Imprimir",handleClick:c})}}),null),l(j,a(I,{get when(){return!e?.item?.isCompleted},get children(){return a(F,{color:"#646cff",label:"Confirmar",handleClick:_})}}),null),l(j,a(I,{get when(){return e?.item?.isCompleted&&B?.profile?.isAdmin},get children(){return a(F,{color:"#646cff",label:"arrow",handleClick:f})}}),null),o})()},nt=e=>{const[s,c]=T(),f=()=>s?.[e?.itm?.product?.id]?.productImageUrl?ge()+_e()+"/"+s?.[e?.itm?.product?.id]?.productImageUrl:null,_=async()=>{let r=e?.itm?.product?.id,n=`${r}`,v=await ie(n);v?.[r]?.productImageUrl&&c(r,v?.[r])};J(()=>{_()});const o=()=>{let r=ne(E?.manifestObj?.products);delete r[e?.itm?.product?.id],N("manifestObj","products",r)};return(()=>{var r=Fe(),n=r.firstChild,v=n.firstChild,$=v.firstChild,h=$.firstChild,g=h.firstChild,b=h.nextSibling,u=b.firstChild,d=u.firstChild,t=d.firstChild;t.firstChild;var i=u.nextSibling,m=i.firstChild,p=m.firstChild,y=p.nextSibling,O=m.nextSibling,w=O.firstChild;return w.firstChild,l(t,()=>e?.itm?.product?.label,null),l(y,()=>e?.itm?.qty*-1),l(w,()=>(e?.itm?.salePrice*1).toFixed(2),null),l(i,a(I,{get when(){return!E?.manifestObj?.isCompleted},get children(){var k=ye(),x=k.firstChild,C=x.firstChild;return C.$$click=o,k}}),null),M(()=>pe(g,"src",f())),r})()},at=e=>{const[s,c]=T(),f=async()=>{let o=e?.itm?.product?.id,r=`${o}`,n=await ie(r);n?.[o]?.productImageUrl&&c(o,n?.[o])};J(()=>{f()});const _=()=>{let r=ne(E?.manifestObj?.reservas).filter(n=>n.key!==e?.itm?.key);N("manifestObj","reservas",r)};return(()=>{var o=Ye(),r=o.firstChild,n=r.firstChild,v=n.firstChild,$=v.firstChild,h=$.firstChild,g=h.firstChild,b=g.firstChild;b.firstChild;var u=h.nextSibling,d=u.firstChild,t=d.firstChild,i=t.nextSibling,m=d.nextSibling,p=m.firstChild;return p.firstChild,l(b,()=>e?.itm?.type,null),l(i,()=>e?.itm?.qty*1),l(p,()=>(e?.itm?.price*1).toFixed(2),null),l(m,a(I,{get when(){return e?.itm?.arancel},get children(){return[Me(),(()=>{var y=Qe();return y.firstChild,l(y,()=>(e?.itm?.arancel*1).toFixed(2),null),y})()]}}),null),l(u,a(I,{get when(){return!E?.manifestObj?.isCompleted},get children(){var y=ye(),O=y.firstChild,w=O.firstChild;return w.$$click=_,y}}),null),o})()},ct=e=>{const[s,c]=Y(),[f,_]=Y(!0),o=t=>t?" "+t:"",r=t=>o(t?.firstName)+o(t?.middleName)+o(t?.lastName)+o(t?.lastName2),n=t=>{let i=o(t?.altPhoneNumber);return o(t?.phoneNumber)+(i?" |"+i:"")},v=async()=>{let t={};t.id=G(),t.closeEvent=()=>{},t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=a(ut,{confirm:$}),Be(t)},$=async()=>{let t=B?.profile?.agency?.id;if(t&&e?.item?.citiId&&s()?.id){let i=e?.item,m=`;${A(i?.firstName)};${A(i?.middleName)};${A(i?.lastName)};${A(i?.lastName2)};N/A;${A(i?.cid)};CUB;${A(i?.phoneNumber)};${A(i?.altPhoneNumber)};${A(i?.ybstreet)};${A(i?.ybstreetNo)};${A(i?.ybbetwen1)};${A(i?.ybbetwen2)};${A(i?.ybreparto)};;${i?.citiId};${s()?.id};${A(i?.email)};;${t}`;h("consignee",m)}},h=async(t,i,m)=>{let p=`funcname=insertRecord&option=${t}&params=${i}`,y={query:"querySolveGlobal"};y.params={query:p},await L(y)},g=async()=>{let t={params:{id:e?.item?.name,key:"shipper"}},i=D(181009);t={...t,...i};const m=await L(t);let p=ue(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],m,e?.item);console.log(p),m.cid===e?.item?.cid&&console.log()},b=async()=>{let t={params:{id:e?.item?.cid,key:"consignee"}},i=D(181009);t={...t,...i};const m=await L(t);return ue(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],m,e?.item).hasChange&&m.cid===e?.item?.cid?e?.item:m},u=(t,i)=>{N("manifestObj","shipper_consignee",t,i)},d=async(t,i)=>{let m=await b();console.log(m)};return J(()=>{if(e?.item?.ybestate){let t=ce("M023009")?.provincias?.filter?.(i=>i.label===e?.item?.ybestate)?.[0];if(t?.id&&c(t),e?.item?.ybcity){let i=t?.cities?.filter?.(m=>m.label===e?.item?.ybcity)?.[0];i?.id&&N("manifestObj","shipper_consignee","citiId",i?.id)}}d()}),a(I,{get when(){return e?.item?.name},get children(){var t=He(),i=t.firstChild;i.firstChild;var m=i.nextSibling,p=m.firstChild,y=p.nextSibling,O=m.nextSibling,w=O.nextSibling,k=w.firstChild,x=k.nextSibling,C=w.nextSibling,V=C.firstChild,q=V.nextSibling,ae=q.nextSibling,H=C.nextSibling,z=H.firstChild,W=z.nextSibling,j=H.nextSibling,Ce=j.firstChild,xe=j.nextSibling;return l(i,a(ee,{}),null),l(p,()=>e?.item?.name),y.$$click=g,l(y,()=>e?.item?.phoneNumberS),l(w,a(ee,{}),x),x.$$click=b,l(x,a(se,{name:"success",size:22,get color(){return f()?"#37be5fff":"#c6c6c6"}})),l(w,a(I,{get when(){return!f()},get children(){var P=Ge();return P.$$click=v,l(P,a(se,{name:"send",size:22,color:"#646cff"})),P}}),null),l(V,()=>e?.item?.cid),l(q,()=>r(e?.item)),l(ae,()=>n(e?.item)),l(z,()=>be(e?.item)),l(W,()=>e?.item?.ybreparto),l(Ce,be),l(j,a(ee,{}),null),l(xe,a(fe,{get list(){return ce("M023009")?.provincias},lbl_empty:"Provincia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return s()?.id},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:P=>c(P),width:"260px"})),l(t,a(I,{get when(){return s()},get children(){var P=Je();return l(P,a(fe,{get list(){return s()?.cities},lbl_empty:"Cities",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.item?.citiId},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:K=>u("citiId",K.id),width:"260px"})),P}}),null),M(P=>{var K=`    ${oe()?"isMobile":""}`,de=` ${oe(),"centerBx"} bottombx flxWrp  centerBx`;return K!==P.e&&me(t,P.e=K),de!==P.t&&me(j,P.t=de),P},{e:void 0,t:void 0}),t}})},Et=async(e,s)=>{let c={params:e,data2update:s},f=D(431007);return c={...c,...f},await L(c)},ve=async e=>{let s={params:e},c=D(431002);return s={...s,...c},await L(s)},Pt=async e=>{let s=[];e.map(c=>{let f={params:{id:c?.ssg_track_key,idairguide:"all"}},_=D(802002);f={...f,..._},s.push(f)}),Ee(s,ot)},ot=async e=>{const c=await L(e);if(c)return c},dt=e=>{const[s,c]=Y(""),[f,_]=Y(1),o=()=>{f()===1&&s().length>8&&r(s())},r=async h=>{let g=B?.profile?.agencyStore?.id,b=`${h}`,u=await ie(b),d=Z(u)?.[0],t=`${d} ${g}`,i=await $e(t),m=0,p=0;Z(i)?.map(k=>{i[k]?.products?.map(x=>{d===x?.product?.id&&(m+=x?.price*1*x?.qty*1,p+=x?.qty*1)})});let y=1,O={};E?.manifestObj?.products?.map(k=>{let x={...k};d===k.product.id&&(x.qty=x.qty*-1),O[k.product.id]=x}),O?.[d]&&(y=O?.[d].qty*1+1);const w=p?m/p:0;if(p&&p-y>=0){if(O?.[d])O[d].qty=y*-1;else{let x={product:{id:d,label:u?.[d]?.name,code:u?.[d]?.code},qty:y*-1,price:w,salePrice:u?.[d]?.salePrice};O[d]=x}let k=he(O);N("manifestObj","products",k),c(""),re({text:u?.[d]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:G()})}else re({text:"Sin Existencia",timeout:3500,theme:"red",id:G()})},[n,{refetch:v}]=Pe(s,async h=>{if(f()===2&&h.length>4){const g=await ie(h);let b=[];return Z(g).map(u=>{let d=g[u];b.push(d)}),b}else return[]}),$=()=>{c(""),_(1)};return(()=>{var h=We(),g=h.firstChild,b=g.firstChild,u=b.firstChild,d=u.nextSibling,t=d.firstChild,i=t.nextSibling;return l(b,a(I,{get when(){return n()?.length>0},get children(){var m=ze();return l(m,a(le,{get each(){return n()},children:(p,y)=>a(mt,{itm:p,clearTx:$})})),m}}),d),l(d,a(te,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return s()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:c,onEnter:o}),t),t.$$click=()=>_(1),l(t,a(se,{name:"qrcode-scan",size:22,get color(){return f()===1?"#646cff":""}})),i.$$click=()=>_(2),l(i,a(se,{name:"keyboard",size:22,get color(){return f()===2?"#646cff":""}})),h})()},mt=e=>{const[s,c]=T(),f=()=>s?.prod?.productImageUrl?ge()+_e()+"/"+s?.prod?.productImageUrl:null;J(()=>{c("prod",e?.itm)}),Array.from(Array(10).keys());const _=async o=>{let r=B?.profile?.agencyStore?.id,n=s?.prod?.ssg_product_key,v=`${n} ${r}`,$=await $e(v),h=0,g=0;Z($)?.map(t=>{$[t]?.products?.map(i=>{n===i?.product?.id&&(h+=i?.price*1*i?.qty*1,g+=i?.qty*1)})});let b=1,u={};E?.manifestObj?.products?.map(t=>{let i={...t};n===t.product.id&&(i.qty=i.qty*-1),u[t.product.id]=i}),u?.[n]&&(b=u?.[n].qty*1+1);const d=g?h/g:0;if(console.log(d,g,h),g&&g-b>=0){if(u?.[n])u[n].qty=b*-1;else{let i={product:{id:n,label:s?.prod?.name,code:s?.prod?.code},qty:b*-1,price:d,salePrice:s?.prod?.salePrice};u[n]=i}let t=he(u);N("manifestObj","products",t),e?.clearTx(),re({text:s?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:G()})}else e?.clearTx(),re({text:"Sin Existencia",timeout:3500,theme:"red",id:G()})};return(()=>{var o=Ke(),r=o.firstChild,n=r.firstChild,v=n.firstChild,$=v.firstChild,h=$.firstChild,g=$.nextSibling,b=g.firstChild,u=b.firstChild,d=u.firstChild;d.firstChild;var t=b.nextSibling,i=t.firstChild,m=i.nextSibling,p=m.firstChild;return p.firstChild,l(d,()=>e?.itm?.name,null),l(i,a(F,{color:"#646cff",label:"Agregar",handleClick:_})),l(p,()=>(e?.itm?.salePrice*1).toFixed(2),null),M(()=>pe(h,"src",f())),o})()},X=(e,s)=>s?(()=>{var c=Xe(),f=c.firstChild,_=f.nextSibling;return l(f," "+e),l(_,s),c})():"",be=e=>(()=>{var s=Ze();return l(s,()=>X("Calle",e?.ybstreet),null),l(s,()=>X("#",e?.ybstreetNo),null),l(s,()=>X("E/",e?.ybbetwen1),null),l(s,()=>X("y",e?.ybbetwen2),null),s})(),Q=e=>e?e*1:0,A=e=>e?e.toString().toUpperCase().trim():"";function ut(e){return(()=>{var s=et(),c=s.firstChild,f=c.nextSibling,_=f.nextSibling,o=_.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#fff"),s.style.setProperty("border-radius","11px"),s.style.setProperty("padding"," 0 21px"),c.style.setProperty("padding","21px"),l(o,a(ee,{}),null),l(o,a(F,{color:"#646cff",icon:"send",label:"Enviar",get handleClick(){return e.confirm}}),null),M(r=>(r=oe()?"96vw":"420px")!=null?s.style.setProperty("width",r):s.style.removeProperty("width")),s})()}Ae(["click"]);export{kt as default,ot as fetchCSVInve,be as getAddress,Q as isValNum,Pt as loadInventory,Et as updConfirmSale};
