import{a as n,c as U,h as V,o as X,m as ee,d as o,S as P,G as te,i as a,f as re,g as H,t as _}from"./index-Clup2ogB.js";import{a as se,u as oe,g as h}from"./Util-uEfv1z7O.js";import{H as ae,a as ne}from"./html5-qrcode-scanner-Cl8XE5pu.js";import{u as le}from"./debounces-rCcjhiqm.js";import l from"./FlexSpace-D62V_qGK.js";import{h as ie,S as ce}from"./ShowSSG-BbXS7emk.js";import{OpenToast as de}from"./Toast-ChLiEhC1.js";import{OpenModal as me,CloseModal as pe}from"./DialogHRM-CgU5ia_x.js";import"./index-Ci0zXM0r.js";import"./globalSignal-74eRzxm3.js";var ve=_('<div class=scanWrp><div><div class=" _dsplFlx"><h3 class="errTxt err centerBx "></h3></div><div class=" _dsplFlx"><h3 class="errTxt ybcity centerBx"></h3></div><div class=" _dsplFlx"><h3 class="errTxt centerBx"></h3></div></div><div></div><div id=qr-reader style=width:300px>'),ue=_("<slot name=plans style=margin-top:35px><div>"),he=_("<div>esta funcion es solo para dispositivos mobiles");function $e(L){const[q,N]=n([]),[c,$]=U({}),[Q,j]=n(""),[I,T]=n(),[W,z]=n(),[R,Y]=n(""),[k,A]=n(""),[y,D]=n("");V(()=>{}),X(()=>{T(!1),se("cameraScanLoc")?.clear()}),ee(()=>{setTimeout(()=>{K()},90)});const E=(t,e)=>{Y(e),A(t),setTimeout(()=>{A("")},1300)},F=t=>{D(t),setTimeout(()=>{D("")},2e3)},G=(t,e)=>{t!==W()&&(z(t),setTimeout(()=>{z("")},3e3),Z(t))},Z=t=>{t||(t=Q()),t=t.split("'").join("-"),j(""),!y()&&J(t)},J=async t=>{let e=await ie(t,L?.status);if(e?.data){if(e?.data?.isSSG)M();else{E("","success"),de({text:`Pertenece a ${e?.data?.city?e?.data?.city:""}${e?.data?.estate?" :: "+e?.data?.estate:""}`,timeout:3500,theme:"green",id:h()});let s={consigneeInfo:{ybcity:e?.data?.city,ybestate:e?.data?.estate}};$(s),F(h())}N([...q(),e.data])}else e?.error&&(e?.error?.isSSG?M():(E("",e?.error?.alert),$(e?.error?.scanData),F(h())))},K=()=>{T(!0);let t={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[ae.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},e=new ne("qr-reader",t);e.render(G),oe("cameraScanLoc",e)};le(G,400);const M=t=>{let e=h(),s={};s.id=e,s.overlayColor="rgb(200 25 60)",s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=o(ce,{modalId:e}),me(s),setTimeout(()=>{pe(e)},1e3)};return o(P,{when:!0,get fallback(){return he()},get children(){return o(P,{get when(){return I()},get children(){var t=ue(),e=t.firstChild;return t._$owner=te(),a(t,o(P,{get when(){return I()},style:"margin-top: 35px",get children(){var s=ve(),i=s.firstChild,d=i.firstChild,m=d.firstChild,p=d.nextSibling,v=p.firstChild,f=p.nextSibling,u=f.firstChild,S=i.nextSibling;return a(d,o(l,{}),m),a(m,k),a(d,o(l,{}),null),a(p,o(l,{}),v),a(v,()=>c?.consigneeInfo?.ybcity),a(p,o(l,{}),null),a(f,o(l,{}),u),a(u,()=>c?.consigneeInfo?.ybestate),a(f,o(l,{}),null),re(r=>{var O=`scanOverlayFront ${R()}`,g=y()?"block":"none",b=300/k()?.length*1.73+"px",w=300/c?.consigneeInfo?.ybcity?.length*1.13+"px",x=300/c?.consigneeInfo?.ybestate?.length*1.23+"px",B=`scanOverlay  ${R()} `,C=y()?"block":"none";return O!==r.e&&H(i,r.e=O),g!==r.t&&((r.t=g)!=null?i.style.setProperty("display",g):i.style.removeProperty("display")),b!==r.a&&((r.a=b)!=null?m.style.setProperty("font-size",b):m.style.removeProperty("font-size")),w!==r.o&&((r.o=w)!=null?v.style.setProperty("font-size",w):v.style.removeProperty("font-size")),x!==r.i&&((r.i=x)!=null?u.style.setProperty("font-size",x):u.style.removeProperty("font-size")),B!==r.n&&H(S,r.n=B),C!==r.s&&((r.s=C)!=null?S.style.setProperty("display",C):S.style.removeProperty("display")),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),s}}),e),t}})}})}export{$e as default};
