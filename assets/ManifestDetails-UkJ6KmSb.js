const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CKKQI4Ys.js","assets/index-CUN7jLOh.js","assets/index-lCkr9jrN.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-DXd_FWvw.js","assets/SVG-FbxMcwLj.js","assets/Util-D2O-IqKB.js"])))=>i.map(i=>d[i]);
import{l as D,_ as F,u as ee,c as L,a as Q,o as te,j as ne,n as re,i,d as l,S as _,w as ie,F as se,E as ae,e as G,s as le,g as S,f as V,h as ce,t as h,x as T,y as oe}from"./index-CUN7jLOh.js";import{C as de,b as q,f as z,e as me,a as I,O as ue,D as H}from"./Util-D2O-IqKB.js";import{u as ge}from"./debounces-BisIIeUN.js";import fe from"./ButonHrm-BREcL4CT.js";import{P as _e}from"./ShowQRPrintLabel-BcOywmsN.js";/* empty css                 */import"./SVG-FbxMcwLj.js";import"./PDFButton-85Y0gBbC.js";import"./qrcode-DHy8FFhS.js";import"./fontkit.es-AFz-JHBR.js";import"./InitPrintServices-DgotkDNu.js";import"./Toast-DFm3ct9f.js";var J=h("<h5>"),he=h('<div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx">'),be=h("<div><div>"),Y=h("<div> "),ye=h("<div> <!>."),pe=h('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),ve=h('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),ke=h('<div class="icon_status centerBx">'),$e=h("<h5 class=rpto>"),xe=h('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const K=D(()=>F(()=>import("./LoadingColorSpinner-CKKQI4Ys.js"),__vite__mapDeps([0,1,2,3]))),W=D(()=>F(()=>import("./FlexSpace-DXd_FWvw.js"),__vite__mapDeps([4,1,2]))),A=D(()=>F(()=>import("./SVG-FbxMcwLj.js"),__vite__mapDeps([5,1,2,6])));function qe(){const[r,g]=ee(),[e,d]=L({search:""}),[b,c]=L(),[f,x]=Q(0),[M,O]=L(),[C,P]=Q("");ge(P,400),te(()=>{}),ne(()=>{});const N=async()=>{if(r?.mId&&f()<H()){x(H()+7e3);let t={id:r?.mId},o=await Se(t);d("manifestObj",void 0),c("linked",void 0),d("manifestObj",o),c("linked",{...o?.linkedBags}),e?.province||(d("province",o?.province),d("city",o?.city))}};re(async()=>{let t=[];[33,46,40,41,42,50,52,54,56].map(u=>{let n=u,m=I("M023009")?.whStList?.[n];T?.roles?.[m?.id]?.isActive&&t.push(m)}),O("list",t);let s=[];I("M023009")?.provincias.map(u=>{let n=u.label;T?.roles?.[n]?.isActive&&s.push(u)}),O("prov",s),N()});const $=async()=>{await we({ssg_manifest_key:r?.mId},{linkedBags:e?.manifestObj?.linkedBags}),N()},v=t=>t||"",y=t=>t?" "+t:"",a=t=>(v(t?.ybestate)+"_"+v(t?.ybcity)+"_"+v(t?.ybreparto)+"_"+v(t?.ybstreet)+"_"+v(t?.ybstreetNo)).toLowerCase(),p=t=>{let o=t?.consigneeInfo;return y(o?.firstName)+y(o?.middleName)+y(o?.lastName)+y(o?.lastName2)},k=t=>{let o=t?.consigneeInfo,s=y(o?.altPhoneNumber);return y(o?.phoneNumber)+(s?" |"+s:"")},U=async()=>{let t={},o={},s={};e?.manifestObj?.linkedBagsInfo?.map(n=>{if(n?.currentStatus!="YABA_99"){let m=a(n?.consigneeInfo),B=n?.cidentity,j=n?.estate||n?.consigneeInfo?.ybestate,w=n?.city||n?.consigneeInfo?.ybcity,E=n?.consigneeInfo?.ybreparto;if(s[E]||(s[E]=1),o[w]||(o[w]=1),t[m]||(t[m]={city:w,estate:j,rpto:E,address:{ybstreetNo:n?.consigneeInfo?.ybstreetNo,ybstreet:n?.consigneeInfo?.ybstreet,ybapt:n?.consigneeInfo?.ybapt,ybbetwen1:n?.consigneeInfo?.ybbetwen1,ybbetwen2:n?.consigneeInfo?.ybbetwen2},currentStatus:n?.currentStatus,customers:{},bagsNo:0}),!t[m].customers[B]){let Z={name:p(n),phoneNumber:k(n),cid:n?.cidentity,nameshipper:n?.nameshipper},R={...n,...Z};R.bagsNumb={},t[m].customers[B]=R}let X={bagnumber:n?.bagnumber,idairguide:"all",tracking:n?.tracking,hbls:n?.hbls};t[m].customers[B].bagsNumb[n?.ssg_track_key]=X,t[m].bagsNo+=1}});let u=await _e(ue(t),t);window.open(u)};return(()=>{var t=be(),o=t.firstChild;return i(t,l(_,{get when(){return e?.manifestObj?.province},get fallback(){return(()=>{var s=Y();return s.firstChild,i(s,l(K,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){var s=he(),u=s.firstChild,n=u.firstChild,m=n.nextSibling,B=m.nextSibling,j=B.nextSibling;return i(n,()=>e?.manifestObj?.name),i(u,l(_,{get when(){return e?.manifestObj?.city},get children(){return["|",(()=>{var w=J();return i(w,()=>e?.manifestObj?.city),w})()]}}),m),i(B,()=>e?.manifestObj?.province),j.$$click=U,i(j,l(A,{name:"printer",size:24,color:"firebrick"})),i(u,l(_,{get when(){return!de(e?.manifestObj?.linkedBags,b?.linked)},get children(){return l(fe,{color:"#c8193c",label:"updManifest",handleClick:$})}}),null),s}}),o),i(o,l(ae,{fallback:s=>(()=>{var u=ye(),n=u.firstChild,m=n.nextSibling;return m.nextSibling,i(u,()=>s.toString(),m),u})(),get children(){return l(ie,{get fallback(){return(()=>{var s=Y();return s.firstChild,i(s,l(K,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return l(_,{get when(){return e?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(se,{get each(){return e?.manifestObj?.linkedBagsInfo},children:s=>l(Be,{item:s,get city(){return e?.manifestObj?.city},get manifestObj(){return e?.manifestObj},get isAlready(){return e?.manifestObj?.linkedBags?.[s.ssg_track_key]},setFormsM:d})})}})}})}})),G(s=>le(o,` ${S(),"width:86vw;"} margin: 0 auto;`,s)),t})()}const Be=r=>{const g=()=>{let c=r?.item?.street.split(",");return c.slice(0,c.length-2).join(",")},e=c=>c?" "+c:"",d=()=>{let c=r?.item?.consigneeInfo;return e(c?.firstName)+e(c?.middleName)+e(c?.lastName)+e(c?.lastName2)},b=c=>{r?.item?.currentStatus!=="99"&&r?.setFormsM("manifestObj","linkedBags",r?.item?.ssg_track_key,void 0)};return l(_,{get when(){return r?.manifestObj?.linkedBags[r?.item?.ssg_track_key]},get children(){var c=xe(),f=c.firstChild,x=f.firstChild,M=x.firstChild,O=M.nextSibling,C=x.nextSibling,P=C.firstChild,N=P.firstChild,$=f.nextSibling,v=$.firstChild,y=v.nextSibling;return i(c,l(_,{get when(){return S()},get children(){var a=pe(),p=a.firstChild,k=p.nextSibling;return i(p,d),i(a,l(W,{}),k),k.$$click=b,i(k,l(A,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),a}}),f),i(M,l(A,{name:"open_package_file_outline",size:20})),i(O,()=>r?.item?.bagnumber),i(f,l(_,{get when(){return!S()},get children(){var a=ve(),p=a.firstChild;return i(p,d),a}}),C),i(f,l(W,{}),C),i(N,()=>r?.item?.idairguide),i(f,l(_,{get when(){return!S()},get children(){var a=ke();return a.$$click=b,i(a,l(A,{get name(){return r?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return r?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),a}}),null),i(v,g),i($,l(W,{}),y),i($,l(_,{get when(){return r?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var a=$e();return i(a,()=>r?.item?.consigneeInfo?.ybreparto),a})(),"|"]}}),y),i($,l(_,{get when(){return!r?.city&&r?.item?.city},get children(){var a=J();return i(a,()=>r?.item?.city),a}}),null),G(a=>{var p=`client_item_box gWXAaj jlytmu manifest ${S()?"isMobile":""}`,k=` ${S(),"centerBx"} bottombx flxWrp  centerBx`;return p!==a.e&&V(c,a.e=p),k!==a.t&&V($,a.t=k),a},{e:void 0,t:void 0}),c}})},we=async(r,g)=>{let e={params:r,data2update:g},d=q(709002);return e={...e,...d},await z(e)},Se=async r=>{let g={params:r};if(oe()){let e={...I("manifestList")?.[r?.id]},d=[],b=I("alinkM")?.[r?.id]?.data2update?.linkedBags||{},c=Object.assign({},e?.linkedBags,b);return e.linkedBags=c,c&&Object.keys(c)?.map(async f=>{if(f){let x=I("manifestByKeys")?.[f];d.push(x)}}),e.linkedBagsInfo=d,e}else{let e=q(703003);return g={...g,...e},await z(g)}},ze=async r=>{let g=[];r.map(e=>{let d={params:{id:e?.ssg_track_key,idairguide:"all"}},b=q(802002);d={...d,...b},g.push(d)}),me(g,Ie)},Ie=async r=>{const e=await z(r);if(e)return e};ce(["click"]);export{qe as default,Ie as fetchCSVInve,ze as loadManifest,we as updLinkedBags};
