const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CtJNfkpq.js","assets/index-BF9hvZNs.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-Cx8tHhKI.js","assets/debounces-D0HWmYPa.js","assets/SVG-BlhfNCeJ.js","assets/DropDwnSearch-DMkLkRPc.css","assets/CheckBoxSlide-BP8QYOi9.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/FlexSpace-Di3dxmqH.js","assets/ButonHrm-Cm0riiMt.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-CWtuA4AV.js","assets/DialogHRM-Dn8EnKLU.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts-DEW-40Y7.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-Bf34Fm9N.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as V,_ as M,c as U,G as ke,a as z,o as Oe,b as Pe,d as K,i as t,e as n,S as x,F as ie,b3 as Ie,p as J,b4 as qe,J as je,h as oe,j as T,x as he,v as de,y as ue,k as F,m as Q,U as Be,D as Ne,A as Ae,t as w,b5 as Ee,r as ae,q as W,b6 as fe,O as te,aj as ge,aw as Te}from"./index-BF9hvZNs.js";import{u as De}from"./debounces-D0HWmYPa.js";import{OpenModal as Ue}from"./DialogHRM-Dn8EnKLU.js";import{g as _e,a as $e}from"./handelImagesServices-DNkNXBFK.js";import{LookupInventory as ve}from"./DashInventoryMov-BqTTMFJ0.js";import{LookupProducts as le}from"./DashProducts-DEW-40Y7.js";import{a as Fe}from"./print_invoice_service-D-Jv_zEB.js";import{OpenToast as se}from"./Toast-C9kBFYJJ.js";import"./browser-image-compression-BVJ4p9S0.js";import"./AddInventory-DA8MshWb.js";import"./FlexSpace-Di3dxmqH.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-DCR2sDLo.js";import"./InitPrintServices-BDyDo5sB.js";import"./qrcode-DHy8FFhS.js";var Qe=w('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),ye=w('<div style=margin:15px class=" spaceAround centerBx">'),Ve=w('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise></select><div class="centerBx bottombx "><h5 class="">Solo Arancel</h5></div></section><div style=margin:15px class=" spaceAround centerBx"><div style=margin:7px></div><div style=margin:7px>'),Me=w('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),Le=w("<option> "),Ye=w('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">Taxes'),Je=w('<p class=B7xUP><span data-test-integ-cart-subtotal-label="">Taxes Estimado</span><span data-test-integ-cart-subtotal-value="">$'),Ge=w('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la Orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Total Estimado</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class=JM2zDb>'),Ce=w("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Re=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),He=w("<span class=arancelSep> | "),ze=w('<span class="arancel pricePq"> $'),We=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Ke=w('<div class="icon_status centerBx "style="margin:0 4px">'),Xe=w("<div style=padding:4px>"),Ze=w('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx spaceAround "><h5></h5><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div><p class=" textleft "></p></div><div style=padding:4px>'),et=w('<section class="h6rxkc ">'),tt=w('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),rt=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),it=w('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),lt=w('<div class="centerBx flxWrp">'),st=w('<div><div class=QCNFEe><p class=jhB0af>Enviar a Solve D Cargo</p></div><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Esta seguro de querer enviar a Solve D Cargo tenga en cuenta que puede duplicar la informacion</span></p><div class=separator></div><div style=margin:15px class=" spaceAround centerBx">');V(()=>M(()=>import("./LoadingColorSpinner-CtJNfkpq.js"),__vite__mapDeps([0,1,2,3])));const be=V(()=>M(()=>import("./DropDwnSearch-Cx8tHhKI.js"),__vite__mapDeps([4,1,2,5,6,7]))),xe=V(()=>M(()=>import("./CheckBoxSlide-BP8QYOi9.js"),__vite__mapDeps([8,1,2,9]))),re=V(()=>M(()=>import("./FlexSpace-Di3dxmqH.js"),__vite__mapDeps([10,1,2]))),Y=V(()=>M(()=>import("./ButonHrm-Cm0riiMt.js"),__vite__mapDeps([11,1,2,6,12])));V(()=>M(()=>import("./UpdInventory-CWtuA4AV.js"),__vite__mapDeps([13,1,2,14,15,5,16,17,18,10])));const H=V(()=>M(()=>import("./InputHr-Bf34Fm9N.js"),__vite__mapDeps([19,1,2,20]))),ne=V(()=>M(()=>import("./SVG-BlhfNCeJ.js"),__vite__mapDeps([6,1,2]))),[v,B]=U({manifestObj:{}});let nt=864e5;function jt(){const[e,s]=ke();U(),U(),U();const[c,f]=z("");De(f,400),Oe(()=>{}),Pe(()=>{});const _=async()=>{if(e?.mId){let o={":search0":e?.mId,businessId:T?.profile?.businessYId},l=await Se(o);B("manifestObj",l[e?.mId])}};return K(async()=>{B("manifestObj",void 0),_(),Ee()}),(()=>{var o=Qe(),l=o.firstChild,a=l.firstChild,C=a.firstChild;return t(o,n(x,{get when(){return v?.manifestObj?.packagesOrder},get children(){return n(at,{})}}),l),t(C,n(x,{get when(){return v?.manifestObj?.products},get children(){return n(ie,{get each(){return v?.manifestObj?.products},children:($,p)=>n(ot,{itm:$})})}})),t(l,n(x,{get when(){return v?.manifestObj?.packagesOrder&&!v?.manifestObj?.isCompleted},get children(){return n(ft,{})}}),null),t(l,n(ct,{get item(){return v?.manifestObj},get list(){return v?.manifestObj}}),null),o})()}const at=e=>{const s={type:"",qty:0,arancel:0,price:0},[c,f]=U({frm:{...s}}),_=(l,a)=>{f("frm",l,a)},o=l=>{let a={...c?.frm};a.key=Te();let C=v?.manifestObj?.reservas||[],$=ae(C);$.push(a),console.log(a),B("manifestObj","reservas",$),f("frm",{...s})};return(()=>{var l=Me(),a=l.firstChild,C=a.firstChild,$=a.nextSibling,p=$.firstChild,g=p.firstChild;return t(C,n(x,{get when(){return v?.manifestObj?.reservas},get children(){return n(ie,{get each(){return v?.manifestObj?.reservas},children:(b,u)=>n(dt,{itm:b})})}})),t(l,n(x,{get when(){return!v?.manifestObj?.isCompleted},get children(){var b=Ve(),u=b.firstChild,d=u.firstChild,r=d.firstChild,i=r.nextSibling,m=i.firstChild,h=m.nextSibling,y=h.nextSibling,I=y.firstChild,O=i.nextSibling,P=O.firstChild,k=P.nextSibling;return h.addEventListener("change",S=>{_("type",S?.target?.value)}),t(h,n(ie,{get each(){return Ie?.list},children:(S,G)=>(()=>{var A=Le();return A.firstChild,t(A,()=>S.label,null),J(()=>A.selected=S.id===c?.frm?.type),J(()=>A.value=S.id),A})()})),t(y,n(xe,{get initValue(){return c?.frm?.onlyTariff},updChange:S=>_("onlyTariff",S),color:"var(--background-red-ssg)"}),I),t(O,n(x,{get when(){return!c?.frm?.onlyTariff&&c?.frm?.type},get children(){return n(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return c?.frm?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",type:"number",handleClick:S=>_("qty",qe(S))})}}),P),t(O,n(x,{get when(){return c?.frm?.qty&&c?.frm?.type},get children(){return n(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.price||""},label:"precio",colors:"#2b2b2b",handleClick:S=>_("price",S)})}}),k),t(O,n(x,{get when(){return c?.frm?.type},get children(){return n(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:S=>_("arancel",S)})}}),null),t(d,n(x,{get when(){return(c?.frm?.price&&c?.frm?.qty||c?.frm?.onlyTariff&&c?.frm?.arancel)&&c?.frm?.type},get children(){var S=ye();return t(S,n(Y,{color:"#646cff",label:"Agregar",handleClick:o})),S}}),null),b}}),$),t(g,n(mt,{get item(){return v?.manifestObj?.shipper_consignee}})),l})()},ct=e=>{const s=o=>{let l=0;return e?.item?.products?.map(a=>{l+=R(a?.qty)*R(a?.salePrice)*-1}),e?.item?.reservas?.map(a=>{l+=R(a?.qty)*R(a?.price)+R(a?.arancel)}),l},c=async o=>{let l={...e?.item};l.amount=s();let a=await Fe(l);window.open(a)},f=async()=>{let o={...e?.item},l={params:{businessId:T?.profile?.businessYId,id:o.ssg_sorder_key},form:{isCompleted:!1}},a=F(431007);l={...l,...a}},_=async o=>{let l=ae(e?.item);l.isCompleted=!0,l.dayNum=l?.createDate/nt;let a={params:{businessId:T?.profile?.businessYId,id:l.ssg_sorder_key},form:l},C=F(431007);a={...a,...C},await Q(a);let $={params:{businessId:T?.profile?.businessYId},form:l},p=F(139003);$={...$,...p},await Q($);let g={":search0":l.ssg_sorder_key,businessId:T?.profile?.businessYId},b=await Se(g);B("manifestObj",b[l.ssg_sorder_key])};return(()=>{var o=Ge(),l=o.firstChild,a=l.firstChild,C=a.firstChild,$=C.firstChild,p=$.nextSibling,g=p.firstChild,b=g.firstChild,u=b.nextSibling;u.firstChild;var d=g.nextSibling,r=d.firstChild,i=r.nextSibling;i.firstChild;var m=C.nextSibling,h=m.firstChild,y=h.firstChild,I=y.firstChild,O=I.nextSibling;O.firstChild;var P=y.nextSibling,k=P.firstChild,S=k.nextSibling,G=P.nextSibling,A=G.firstChild,X=A.nextSibling;X.firstChild;var L=m.nextSibling;return t(C,n(x,{get when(){return!v?.manifestObj?.isCompleted},get children(){return[(()=>{var N=Ye(),D=N.firstChild,E=D.firstChild;return t(D,n(xe,{get initValue(){return v?.manifestObj?.hasTax},updChange:ce=>B("manifestObj","hasTax",ce),color:"var(--background-red-ssg)"}),E),N})(),(()=>{var N=ye();return t(N,n(x,{get when(){return v?.manifestObj?.hasTax},get children(){return n(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return v?.manifestObj?.TaxPercent||""},label:"Porciento de Impuestos",colors:"#2b2b2b",type:"number",handleClick:D=>B("manifestObj","TaxPercent",D)})}})),N})()]}}),p),t(u,()=>s().toFixed(2),null),t(p,n(x,{get when(){return v?.manifestObj?.hasTax&&v?.manifestObj?.TaxPercent},get children(){var N=Je(),D=N.firstChild,E=D.nextSibling;return E.firstChild,t(E,()=>(s()*(v?.manifestObj?.TaxPercent/100)).toFixed(2),null),N}}),d),t(i,()=>(s()*((v?.manifestObj?.TaxPercent?v?.manifestObj?.TaxPercent:0)/100)+s()).toFixed(2),null),t(O,()=>je(e?.item?.createDate),null),t(S,()=>e?.item?.invoice),t(X,()=>oe("storeGroupBy")?.[e?.item?.store]?.label,null),t(L,n(x,{get when(){return e?.item?.isCompleted},get children(){return n(Y,{color:"#646cff",label:"Imprimir",handleClick:c})}}),null),t(L,n(x,{get when(){return!e?.item?.isCompleted},get children(){return n(Y,{color:"#646cff",label:"Confirmar",handleClick:_})}}),null),t(L,n(x,{get when(){return e?.item?.isCompleted&&T?.profile?.isAdmin},get children(){return n(Y,{color:"#646cff",label:"arrow",handleClick:f})}}),null),o})()},ot=e=>{const[s,c]=U(),f=()=>s?.[e?.itm?.product?.id]?.productImageUrl?_e()+$e()+"/"+s?.[e?.itm?.product?.id]?.productImageUrl:null,_=async()=>{let l=e?.itm?.product?.id,a=`${l}`,C=await le(a);C?.[l]?.productImageUrl&&c(l,C?.[l])};K(()=>{_()});const o=()=>{console.log(e?.itm);let l=ae(v?.manifestObj?.products);delete l[e?.itm?.product?.id],B("manifestObj","products",l)};return n(x,{get when(){return e?.itm?.salePrice},get children(){var l=Re(),a=l.firstChild,C=a.firstChild,$=C.firstChild,p=$.firstChild,g=p.firstChild,b=p.nextSibling,u=b.firstChild,d=u.firstChild,r=d.firstChild;r.firstChild;var i=u.nextSibling,m=i.firstChild,h=m.firstChild,y=h.nextSibling,I=m.nextSibling,O=I.firstChild;return O.firstChild,t(r,()=>e?.itm?.product?.label,null),t(y,()=>e?.itm?.qty*-1),t(O,()=>(e?.itm?.salePrice*1).toFixed(2),null),t(i,n(x,{get when(){return!v?.manifestObj?.isCompleted},get children(){var P=Ce(),k=P.firstChild,S=k.firstChild;return S.$$click=o,P}}),null),J(()=>he(g,"src",f())),l}})},dt=e=>{const[s,c]=U(),f=async()=>{let o=e?.itm?.product?.id,l=`${o}`,a=await le(l);a?.[o]?.productImageUrl&&c(o,a?.[o])};K(()=>{f()});const _=()=>{let l=ae(v?.manifestObj?.reservas).filter(a=>a.key!==e?.itm?.key);B("manifestObj","reservas",l)};return(()=>{var o=We(),l=o.firstChild,a=l.firstChild,C=a.firstChild,$=C.firstChild,p=$.firstChild,g=p.firstChild,b=g.firstChild;b.firstChild;var u=p.nextSibling,d=u.firstChild,r=d.firstChild,i=r.nextSibling,m=d.nextSibling,h=m.firstChild;return h.firstChild,t(b,()=>e?.itm?.type,null),t(i,()=>e?.itm?.qty*1),t(h,()=>(e?.itm?.price*1).toFixed(2),null),t(m,n(x,{get when(){return e?.itm?.arancel},get children(){return[He(),(()=>{var y=ze();return y.firstChild,t(y,()=>(e?.itm?.arancel*1).toFixed(2),null),y})()]}}),null),t(u,n(x,{get when(){return!v?.manifestObj?.isCompleted},get children(){var y=Ce(),I=y.firstChild,O=I.firstChild;return O.$$click=_,y}}),null),o})()},mt=e=>{const[s,c]=z(),[f,_]=z(!0),o=r=>r?" "+r:"",l=r=>o(r?.firstName)+o(r?.middleName)+o(r?.lastName)+o(r?.lastName2),a=r=>{let i=o(r?.altPhoneNumber);return o(r?.phoneNumber)+(i?" |"+i:"")},C=async()=>{let r={};r.id=W(),r.closeEvent=()=>{},r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=n(pt,{confirm:$}),Ue(r)},$=async()=>{let r=T?.profile?.agency?.id;if(r&&e?.item?.citiId&&e?.item?.provinceId){let i=e?.item,m=`;${j(i?.firstName)};${j(i?.middleName)};${j(i?.lastName)};${j(i?.lastName2)};N/A;${j(i?.cid)};CUB;${j(i?.phoneNumber)};${j(i?.altPhoneNumber)};${j(i?.ybstreet)};${j(i?.ybstreetNo)};${j(i?.ybbetwen1)};${j(i?.ybbetwen2)};${j(i?.ybreparto)};;${i?.citiId};${i?.provinceId};${j(i?.email)};;${r}`;p("consignee",m)}},p=async(r,i,m)=>{let h=`funcname=insertRecord&option=${r}&params=${i}`,y={query:"querySolveGlobal"};y.params={query:h},await Q(y)},g=async()=>{let r={params:{id:e?.item?.name,key:"shipper"}},i=F(181009);r={...r,...i};const m=await Q(r);let h=fe(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],m,e?.item);console.log(h),m.cid===e?.item?.cid&&console.log()},b=async()=>{let r={params:{id:e?.item?.cid,key:"consignee"}},i=F(181009);r={...r,...i};const m=await Q(r);return console.log(m),fe(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],m,e?.item).hasChange&&m.cid===e?.item?.cid?e?.item:m},u=(r,i)=>{B("manifestObj","shipper_consignee",r,i)},d=async(r,i)=>{let m=await b();console.log(m)};return K(()=>{if(e?.item?.ybestate){let r=oe("M023009")?.provincias?.filter?.(i=>i.label===e?.item?.ybestate)?.[0];if(r?.id&&c(r),e?.item?.ybcity){let i=r?.cities?.filter?.(m=>m.label===e?.item?.ybcity)?.[0];i?.id&&B("manifestObj","shipper_consignee","citiId",i?.id)}}d()}),n(x,{get when(){return e?.item?.name},get children(){var r=Ze(),i=r.firstChild;i.firstChild;var m=i.nextSibling,h=m.firstChild,y=h.nextSibling,I=m.nextSibling,O=I.nextSibling,P=O.firstChild,k=P.nextSibling,S=O.nextSibling,G=S.firstChild,A=G.nextSibling,X=A.nextSibling,L=S.nextSibling,N=L.firstChild,D=N.nextSibling,E=L.nextSibling,ce=E.firstChild,we=E.nextSibling;return t(i,n(re,{}),null),t(h,()=>e?.item?.name),y.$$click=g,t(y,()=>e?.item?.phoneNumberS),t(O,n(re,{}),k),k.$$click=b,t(k,n(ne,{name:"success",size:22,get color(){return f()?"#37be5fff":"#c6c6c6"}})),t(O,n(x,{get when(){return!f()},get children(){var q=Ke();return q.$$click=C,t(q,n(ne,{name:"send",size:22,color:"#646cff"})),q}}),null),t(G,()=>e?.item?.cid),t(A,()=>l(e?.item)),t(X,()=>a(e?.item)),t(N,()=>pe(e?.item)),t(D,()=>e?.item?.ybreparto),t(ce,pe),t(E,n(re,{}),null),t(we,n(be,{get list(){return oe("M023009")?.provincias},lbl_empty:"Provincia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return s()?.id},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:q=>c(q),width:"260px"})),t(r,n(x,{get when(){return s()},get children(){var q=Xe();return t(q,n(be,{get list(){return s()?.cities},lbl_empty:"Cities",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.item?.citiId},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:Z=>u("citiId",Z.id),width:"260px"})),q}}),null),J(q=>{var Z=`    ${de()?"isMobile":""}`,me=` ${de(),"centerBx"} bottombx flxWrp  centerBx`;return Z!==q.e&&ue(r,q.e=Z),me!==q.t&&ue(E,q.t=me),q},{e:void 0,t:void 0}),r}})},Bt=async(e,s)=>{let c={params:e,data2update:s},f=F(431007);return c={...c,...f},await Q(c)},Se=async e=>{let s={params:e},c=F(431002);return s={...s,...c},await Q(s)},Nt=async e=>{let s=[];e.map(c=>{let f={params:{id:c?.ssg_track_key,idairguide:"all"}},_=F(802002);f={...f,..._},s.push(f)}),Be(s,ut)},ut=async e=>{const c=await Q(e);if(c)return c},ft=e=>{const[s,c]=z(""),[f,_]=z(1),o=()=>{f()===1&&s().length>8&&l(s())},l=async p=>{let g=T?.profile?.agencyStore?.id,b=`${p}`,u=await le(b),d=te(u)?.[0],r=`${d} ${g}`,i=await ve(r),m=0,h=0;te(i)?.map(P=>{i[P]?.products?.map(k=>{d===k?.product?.id&&(m+=k?.price*1*k?.qty*1,h+=k?.qty*1)})});let y=1,I={};v?.manifestObj?.products?.map(P=>{let k={...P};d===P.product.id&&(k.qty=k.qty*-1),I[P.product.id]=k}),I?.[d]&&(y=I?.[d].qty*1+1);const O=h?m/h:0;if(h&&h-y>=0){if(I?.[d])I[d].qty=y*-1;else{let k={product:{id:d,label:u?.[d]?.name,code:u?.[d]?.code},qty:y*-1,price:O,salePrice:u?.[d]?.salePrice};I[d]=k}let P=ge(I);B("manifestObj","products",P),c(""),se({text:u?.[d]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:W()})}else se({text:"Sin Existencia",timeout:3500,theme:"red",id:W()})},[a,{refetch:C}]=Ne(s,async p=>{if(f()===2&&p.length>4){const g=await le(p);let b=[];return te(g).map(u=>{let d=g[u];b.push(d)}),b}else return[]}),$=()=>{c(""),_(1)};return(()=>{var p=tt(),g=p.firstChild,b=g.firstChild,u=b.firstChild,d=u.nextSibling,r=d.firstChild,i=r.nextSibling;return t(b,n(x,{get when(){return a()?.length>0},get children(){var m=et();return t(m,n(ie,{get each(){return a()},children:(h,y)=>n(bt,{itm:h,clearTx:$})})),m}}),d),t(d,n(H,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return s()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:c,onEnter:o}),r),r.$$click=()=>_(1),t(r,n(ne,{name:"qrcode-scan",size:22,get color(){return f()===1?"#646cff":""}})),i.$$click=()=>_(2),t(i,n(ne,{name:"keyboard",size:22,get color(){return f()===2?"#646cff":""}})),p})()},bt=e=>{const[s,c]=U(),f=()=>s?.prod?.productImageUrl?_e()+$e()+"/"+s?.prod?.productImageUrl:null;K(()=>{c("prod",e?.itm)}),Array.from(Array(10).keys());const _=async o=>{let l=T?.profile?.agencyStore?.id,a=s?.prod?.ssg_product_key,C=`${a} ${l}`,$=await ve(C),p=0,g=0;te($)?.map(r=>{$[r]?.products?.map(i=>{a===i?.product?.id&&(p+=i?.price*1*i?.qty*1,g+=i?.qty*1)})});let b=1,u={};v?.manifestObj?.products?.map(r=>{let i={...r};a===r.product.id&&(i.qty=i.qty*-1),u[r.product.id]=i}),u?.[a]&&(b=u?.[a].qty*1+1);const d=g?p/g:0;if(console.log(d,g,p),g&&g-b>=0){if(u?.[a])u[a].qty=b*-1;else{let i={product:{id:a,label:s?.prod?.name,code:s?.prod?.code},qty:b*-1,price:d,salePrice:s?.prod?.salePrice};u[a]=i}let r=ge(u);B("manifestObj","products",r),e?.clearTx(),se({text:s?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:W()})}else e?.clearTx(),se({text:"Sin Existencia",timeout:3500,theme:"red",id:W()})};return n(x,{get when(){return e?.itm?.salePrice},get children(){var o=rt(),l=o.firstChild,a=l.firstChild,C=a.firstChild,$=C.firstChild,p=$.firstChild,g=$.nextSibling,b=g.firstChild,u=b.firstChild,d=u.firstChild;d.firstChild;var r=b.nextSibling,i=r.firstChild,m=i.nextSibling,h=m.firstChild;return h.firstChild,t(d,()=>e?.itm?.name,null),t(i,n(Y,{color:"#646cff",label:"Agregar",handleClick:_})),t(h,()=>(e?.itm?.salePrice*1).toFixed(2),null),J(()=>he(p,"src",f())),o}})},ee=(e,s)=>s?(()=>{var c=it(),f=c.firstChild,_=f.nextSibling;return t(f," "+e),t(_,s),c})():"",pe=e=>(()=>{var s=lt();return t(s,()=>ee("Calle",e?.ybstreet),null),t(s,()=>ee("#",e?.ybstreetNo),null),t(s,()=>ee("E/",e?.ybbetwen1),null),t(s,()=>ee("y",e?.ybbetwen2),null),s})(),R=e=>e?e*1:0,j=e=>e?e.toString().toUpperCase().trim():"";function pt(e){return(()=>{var s=st(),c=s.firstChild,f=c.nextSibling,_=f.nextSibling,o=_.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#fff"),s.style.setProperty("border-radius","11px"),s.style.setProperty("padding"," 0 21px"),c.style.setProperty("padding","21px"),t(o,n(re,{}),null),t(o,n(Y,{color:"#646cff",icon:"send",label:"Enviar",get handleClick(){return e.confirm}}),null),J(l=>(l=de()?"96vw":"420px")!=null?s.style.setProperty("width",l):s.style.removeProperty("width")),s})()}Ae(["click"]);export{jt as default,ut as fetchCSVInve,pe as getAddress,R as isValNum,Nt as loadInventory,Bt as updConfirmSale};
