const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BSXJ70zK.js","assets/index-CFUY4uOd.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-BEXyF6ab.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-joP20i3P.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-C1dI9ja4.js","assets/debounces-LvJD_SNN.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-B-cQlUPU.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-BTDXpuzw.js","assets/Util-uEfv1z7O.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DFHQ0duZ.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-QFlo-RMy.js","assets/DialogHRM-D8S84T5k.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-CsSzoQh8.js","assets/ShowQRPrintLabel-BFMwFot3.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-khaE0HRx.js","assets/Toast-CHTYjclQ.js","assets/Toast-DLpFKn-Q.css","assets/ShowPdfResume-DGESwgdt.js"])))=>i.map(i=>d[i]);
import{l as A,_ as D,c as ne,a as M,o as Re,h as Te,b as je,m as qe,i as r,d as t,f as q,e as Qe,t as f,k as le,S as _,j as We,E as ce,q as Z,F as K,g as ee,s as He,r as te}from"./index-CFUY4uOd.js";import{b as Q,e as he,f as re,a as O,O as j,g as G,h as Xe,s as Ue}from"./Util-uEfv1z7O.js";import{u as Ye}from"./debounces-LvJD_SNN.js";import{i as X}from"./globalSignal-CsSzoQh8.js";import{g as ue,l as Je}from"./ShowQRPrintLabel-BFMwFot3.js";import"./Toast-CHTYjclQ.js";import{OpenModal as Ke}from"./DialogHRM-D8S84T5k.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-khaE0HRx.js";var Ze=f("<div style=padding:4px>"),J=f('<div class="icon_status centerBx">'),et=f('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),tt=f('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),rt=f('<div><div class="_dsplFlx flxWrp spaceAround ">'),nt=f('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),lt=f('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),st=f('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),de=f("<div> <!>."),ge=f("<div> "),it=f("<div class=centerBx><h5 style=margin-left:12px>generando excel"),me=f("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),at=f("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),_e=f("<h5 class=totalBagsNo> <!> / "),fe=f('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),ve=f("<div class=leftMrg> "),ot=f("<div class=bottombx><h4>"),ct=f('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),ut=f("<div style=padding:16px;margin-left:20px;>"),dt=f("<div>"),gt=f('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const L=A(()=>D(()=>import("./LoadingColorSpinner-BSXJ70zK.js"),__vite__mapDeps([0,1,2,3]))),mt=A(()=>D(()=>import("./InputHr-BEXyF6ab.js"),__vite__mapDeps([4,1,2,5]))),P=A(()=>D(()=>import("./SVG-joP20i3P.js"),__vite__mapDeps([6,1,2,7]))),ht=A(()=>D(()=>import("./DropDwnSearch-C1dI9ja4.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),_t=A(()=>D(()=>import("./ContainerElasticView-B-cQlUPU.js"),__vite__mapDeps([11,1,2,6,7,12]))),ft=A(()=>D(()=>import("./ButonHrm-BTDXpuzw.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),se=A(()=>D(()=>import("./CheckBoxSlide-DFHQ0duZ.js"),__vite__mapDeps([16,1,2,17]))),vt=A(()=>D(()=>import("./ItemOnEnvios-QFlo-RMy.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27]))),bt=A(()=>D(()=>import("./ShowPdfResume-DGESwgdt.js"),__vite__mapDeps([28,1,2,21,22,23,7,24,25,14,26,27])));function Vt(){const[e,i]=ne({list:{manifest:{id:"",label:""},search:"",status:""}}),[n,a]=ne({}),[g,c]=ne({}),[y,k]=M(""),[m,W]=M(!1),[U,E]=M(64),[B,N]=M(!1),[V,Y]=M(!1),[$e,pe]=M(""),z=Ye(k,500),[ye,It]=M(!1),[ke,ie]=M(!1),[xe,ae]=M(!1),H=(u,l)=>{i("list",{[u]:l}),z(G())},Ce=()=>{N(!B()),z(G())},we=()=>{W(!m()),z(G())},Se=()=>{Y(!V()),z(G())};Re(()=>{}),Te(()=>{});const Ie=()=>{E(u=>u+64)},Me=u=>{let l=Math.ceil(u?.length/64);Ue(Ie,1250,l)},[F,{refetch:Mt}]=je(y,async u=>{a(void 0),c("prov",void 0);let l=e?.list?.manifest?.id;$e()!==l&&pe(l);let I={},x=[],w={};var C={};if(l&&(I=await kt(l)),!m())a(I?.sumary),c("prov",I?.provinceGroup);else{C=await yt(e?.list?.search,l,e?.list?.status,e?.list?.estate,e?.list?.city),a(I?.sumary),E(0);let T={};B()?j(C).map(p=>{let $=C[p],v=$?.estate||$?.consigneeInfo?.ybestate;T[p]?x.push($):T[p]=1,O("M023009")?.ZoneCity?.[$?.zone]?.[v]||x.push($)}):V()?j(C).map(p=>{let $=C[p];$?.estate||$?.consigneeInfo?.ybestate,$?.bagnumber||x.push($)}):(j(C).map(p=>{let $=C[p],v=$?.estate||$?.consigneeInfo?.ybestate,s=$?.city||$?.consigneeInfo?.ybcity;(v||s)&&(w[v]||(w[v]={cities:{},total:0}),w[v].cities?.[s]||(w[v].cities[s]=0),w[v].cities[s]+=1,w[v].total+=1),x.push($)}),c("prov",w)),Me(x)}return x}),oe=()=>F()?.length,Ee=u=>{i("list",{manifest:u,status:void 0}),z(G())},Be=()=>{Ct(F())},Ge=()=>{wt(F())},Pe=()=>{},Ae=(u,l)=>{H("estate",u),H("city",l)},De=(u,l)=>{i("list",{estate:void 0,city:void 0}),z(G())},R=u=>u?" "+u:"",Oe=u=>{let l=u?.consigneeInfo;return R(l?.firstName)+R(l?.middleName)+R(l?.lastName)+R(l?.lastName2)},ze=u=>{let l=u?.consigneeInfo,I=R(l?.altPhoneNumber);return R(l?.phoneNumber)+(I?" | "+I:"")},Fe=async()=>{let u=[];ae(!0),setTimeout(async()=>{let l=3,I=900204,x=[],w=new Date().getFullYear().toString().slice(2,4);for(let p=0;p<l;p++)x.push(p);const C=x.map(async(p,$)=>{let v=I+p*2,s=v+1,d="scanner"+w;d="scanner_",console.log(d+""+v);const h=await ue(d+""+v),b=await ue(d+""+s);let o={mtrx:h,mtrx2:b,lbl:d+""+v,lbl2:d+""+s};u.push(o)});await Promise.all(C);let T=await Je(u);window.open(T),ae(!1)},760)},Le=async()=>{ie(!0);let u=[];F().map(async(l,I)=>{let x=l?.estate||l?.consigneeInfo?.ybestate,w=l?.city||l?.consigneeInfo?.ybcity,C={provincia:x,ciudad:w,nombre:Oe(l),telefonos:ze(l),guia:l?.idairguide,bulto:l?.bagnumber,hbls:l?.hblS};u.push(C)}),Xe(`listas_caneados_${G()}.csv`,u),ie(!1)},Ne=u=>{let l={};l.id=G(),l.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},l.content=t(bt,{get list(){return F()}}),Ke(l)},Ve=async u=>{await xt(e?.list?.manifest?.id)};return qe(()=>{}),(()=>{var u=st(),l=u.firstChild,I=l.firstChild,x=I.nextSibling,w=x.firstChild,C=x.nextSibling,T=C.firstChild,p=l.nextSibling,$=p.firstChild,v=p.nextSibling;return r(w,()=>e?.list?.manifest?.id),r(C,t(se,{get initValue(){return m()},updChange:we,color:"var(--background-red-ssg)"}),T),r(u,t(_,{get when(){return le?.profile?.isAdmin},get children(){return t(ft,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Be})}}),p),r($,t(ht,{get list(){return O("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:s=>Ee(s),width:"260px"})),r(p,t(_,{get when(){return We(()=>!!e?.list?.manifest?.id)()&&m()},get children(){return[(()=>{var s=Ze();return r(s,t(mt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:d=>H("search",d)})),s})(),(()=>{var s=tt(),d=s.firstChild,h=d.firstChild;return r(d,t(se,{get initValue(){return B()},updChange:Ce,color:"var(--background-red-ssg)"}),h),r(s,t(_,{get when(){return le?.profile?.isAdmin},get children(){var b=et(),o=b.firstChild;return r(b,t(se,{get initValue(){return V()},updChange:Se,color:"var(--background-red-ssg)"}),o),r(b,t(_,{get when(){return V()},get children(){var S=J();return S.$$click=Ge,r(S,t(P,{name:"outline_delete",size:24})),S}}),null),b}}),null),s})()]}}),null),r(v,t(_,{get when(){return e?.list?.manifest?.id},get children(){var s=rt(),d=s.firstChild;return r(d,t(ce,{fallback:h=>(()=>{var b=de(),o=b.firstChild,S=o.nextSibling;return S.nextSibling,r(b,()=>h.toString(),S),b})(),get children(){return t(Z,{get fallback(){return(()=>{var h=ge();return h.firstChild,r(h,t(L,{stroke:"rgb(200 25 60 / 1)",size:62}),null),h})()},get children(){return t(_,{get when(){return n?.total},get children(){return t(K,{get each(){return j(n)},children:(h,b)=>X()?t(pt,{keyG:h,total:oe,get status(){return e?.list?.status},get amount(){return n?.[h]},get showItems(){return m()},updForm:H}):t($t,{keyG:h,total:oe,get showItems(){return m()},get status(){return e?.list?.status},get amount(){return n?.[h]},updForm:H})})}})}})}})),q(()=>ee(s,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),s}}),null),r(v,t(_,{get when(){return le?.profile?.isAdmin},get children(){var s=nt(),d=s.firstChild,h=d.firstChild,b=h.nextSibling;return r(d,t(_,{get when(){return m()},get children(){return t(_,{get when(){return!ke()},get fallback(){return(()=>{var o=it(),S=o.firstChild;return r(o,t(L,{stroke:"rgb(200 25 60 / 1)",size:32}),S),o})()},get children(){var o=J();return o.$$click=Le,r(o,t(P,{name:"grid",size:24,color:"firebrick"})),o}})}}),h),r(d,t(_,{get when(){return!xe()},get fallback(){return(()=>{var o=me(),S=o.firstChild;return r(o,t(L,{stroke:"rgb(200 25 60 / 1)",size:32}),S),o})()},get children(){var o=J();return o.$$click=Fe,r(o,t(P,{name:"printer",size:24,color:"firebrick"})),o}}),h),h.$$click=Ve,r(h,t(P,{name:"tag-outline",size:24})),b.$$click=Pe,r(b,t(P,{name:"outline_renew",size:24})),r(d,t(_,{get when(){return!ye()},get fallback(){return(()=>{var o=me(),S=o.firstChild;return r(o,t(L,{stroke:"rgb(200 25 60 / 1)",size:32}),S),o})()},get children(){var o=J();return o.$$click=Ne,r(o,t(P,{name:"printer",size:32})),o}}),null),s}}),null),r(v,t(_,{get when(){return g?.prov},get children(){var s=lt(),d=s.firstChild,h=d.firstChild,b=d.nextSibling;return r(h,t(_,{get when(){return g?.prov},get children(){return t(K,{get each(){return j(g?.prov)},children:(o,S)=>t(St,{ism:o,get item(){return g?.prov?.[o]},updS:Ae})})}})),b.$$click=De,r(b,t(P,{name:"Xclose",size:22})),q(()=>ee(s,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),s}}),null),r(v,t(ce,{fallback:s=>(()=>{var d=de(),h=d.firstChild,b=h.nextSibling;return b.nextSibling,r(d,()=>s.toString(),b),d})(),get children(){return t(Z,{get fallback(){return(()=>{var s=ge();return s.firstChild,r(s,t(L,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return t(_,{get when(){return F()},get children(){return t(K,{get each(){return F()?.slice(0,U())},children:(s,d)=>t(vt,{item:s,refresh:()=>z(G())})})}})}})}}),null),q(s=>He(v,` ${X()?"":"width:94vw;"} margin: 0 auto;`,s)),u})()}const $t=e=>{const[i,n]=M(!1),[a,g]=M(0),c=()=>{let m=e?.keyG;e?.keyG==="total"&&(m=null),e?.updForm("status",m)},y=()=>{i()||!X()&&e?.keyG!=="total"&&(g(O("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),n(!0))},k=()=>{g("0px"),i()&&n(!1)};return t(_,{get when(){return e?.amount>0},get children(){return t(Z,{get fallback(){return(()=>{var m=ve();return m.firstChild,r(m,t(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),m})()},get children(){var m=fe(),W=m.firstChild,U=W.nextSibling;return m.$$mouseout=k,m.$$mousemove=y,m.$$click=c,r(m,t(_,{get when(){return i()},get children(){var E=at(),B=E.firstChild,N=B.firstChild,V=N.firstChild;return r(V,()=>O("M023009")?.statusObjDesc?.[e?.keyG]),q(Y=>(Y=a())!=null?B.style.setProperty("width",Y):B.style.removeProperty("width")),E}}),W),r(W,t(P,{get name(){return O("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(m,t(_,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var E=_e(),B=E.firstChild,N=B.nextSibling;return N.nextSibling,r(E,()=>e?.total(),N),E}}),U),r(U,()=>e?.amount),q(()=>ee(m,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),m}})}})},pt=e=>{const i=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t(_,{get when(){return e?.amount>0},get children(){return t(Z,{get fallback(){return(()=>{var n=ve();return n.firstChild,r(n,t(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=fe(),a=n.firstChild,g=a.nextSibling;return n.$$click=i,r(a,t(P,{get name(){return O("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(n,t(_,{get when(){return O("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var c=ot(),y=c.firstChild;return r(y,()=>O("M023009")?.statusObjDesc?.[e?.keyG]),c}}),g),r(n,t(_,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var c=_e(),y=c.firstChild,k=y.nextSibling;return k.nextSibling,r(c,()=>e?.total(),k),c}}),g),r(g,()=>e?.amount),q(()=>ee(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},yt=async(e,i,n,a,g)=>{let c={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime"]};e&&e.split(" ").map((k,m)=>{k&&(c.params[":search"+m]=k.trim())}),n&&(c.params[":status"]=n),a&&(c.params[":estate"]=a),g&&(c.params[":city"]=g),te?.roles?.agency&&(c.params[":agency"]=te?.roles?.agency+"");let y=Q(802001);if(c={...c,...y},i&&Object.keys(c.params)?.length>=2){const k=await re(c);return k?.data?.error?{}:k}return{}},kt=async e=>{let i={params:{idairguide:e}},n=Q(802004);i={...i,...n},te?.roles?.agency&&(i.params[":agency"]=te?.roles?.agency+"");const a=await re(i);return a?.error?{}:a},xt=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n=Q(802001);i={...i,...n};const a=await re(i);return a?.error?{}:a},Ct=async e=>{e.map(i=>{let n={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},a=Q(802002);n={...n,...a}})},wt=async e=>{let i=[];e.map(n=>{let a={params:{ssg_track_key:n?.ssg_track_key,idairguide:n?.idairguide}},g=Q(809005);a={...a,...g},i.push(a)}),he(i,be)},Rt=async(e,i)=>{let n=[];e.map(a=>{let g={params:{ssg_track_key:a?.ssg_track_key,idairguide:a?.idairguide},data2update:{currentStatus:i}},c=Q(802004);g={...g,...c},n.push(g)}),he(n,be)},be=async e=>{const n=await re(e);if(n)return n},St=e=>(()=>{var i=dt();return r(i,t(_,{get when(){return e?.item?.total>0},get children(){var n=ct(),a=n.firstChild,g=a.firstChild,c=g.firstChild,y=g.nextSibling;return a.$$click=()=>e?.updS(e?.ism),r(g,()=>e?.ism,c),r(y,()=>e?.item?.total),n}}),null),r(i,t(_t,{get children(){var n=ut();return r(n,t(_,{get when(){return e?.item?.cities},get children(){return t(K,{get each(){return j(e?.item?.cities)},children:(a,g)=>(()=>{var c=gt(),y=c.firstChild,k=y.nextSibling;return c.$$click=()=>e?.updS(e?.ism,a),r(y,a),r(k,()=>e?.item?.cities?.[a]),c})()})}})),n}}),null),i})();Qe(["click","mousemove","mouseout"]);export{$t as StatusGroupItem,Vt as default,wt as deleteManifest,be as fetchCSVInve,Ct as loadManifest,Rt as updateManifest};
