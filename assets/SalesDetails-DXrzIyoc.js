const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-DU-Y13d_.js","assets/index-C1irK0dV.js","assets/index-BYl1CvbN.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-jOAmRbus.js","assets/debounces-DxqfX1UD.js","assets/SVG-C-TiIR9g.js","assets/DropDwnSearch-DMkLkRPc.css","assets/CheckBoxSlide-BKJkUaPX.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/FlexSpace-DXS7Y6Vg.js","assets/ButonHrm-Cd9fcfwc.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-BA9ObU_j.js","assets/DialogHRM-DVx32KGw.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts-cNBN2PVd.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-DuzsdUxm.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as F,_ as Q,c as U,G as ye,a as z,o as ve,b as Ce,d as X,i as s,e as a,S,F as se,b5 as xe,p as M,b6 as Se,J as we,h as oe,j as E,x as de,y as Oe,v as me,k as D,m as T,U as ke,D as Pe,A as Ie,t as w,b7 as qe,r as ne,q as K,b8 as ce,O as te,al as fe,ax as je}from"./index-C1irK0dV.js";import{u as Be}from"./debounces-DxqfX1UD.js";import{OpenModal as Ne}from"./DialogHRM-DVx32KGw.js";import{g as ue,a as be}from"./handelImagesServices-NL9C6kpA.js";import{LookupInventory as pe}from"./DashInventoryMov-eDEA5m4u.js";import{LookupProducts as le}from"./DashProducts-cNBN2PVd.js";import{a as Ae}from"./print_invoice_service-D2Bu0fbZ.js";import{OpenToast as re}from"./Toast-eDfkih7h.js";import"./browser-image-compression-BVJ4p9S0.js";import"./AddInventory-B4NUxHr6.js";import"./FlexSpace-DXS7Y6Vg.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-B09vuK7D.js";import"./InitPrintServices-CQdu1Rrj.js";import"./qrcode-DHy8FFhS.js";var Ee=w('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),he=w('<div style=margin:15px class=" spaceAround centerBx">'),Te=w('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise></select><div class="centerBx bottombx "><h5 class="">Solo Arancel</h5></div></section><div style=margin:15px class=" spaceAround centerBx"><div style=margin:7px></div><div style=margin:7px>'),Ue=w('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),De=w("<option> "),Fe=w('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">Taxes'),Qe=w('<p class=B7xUP><span data-test-integ-cart-subtotal-label="">Taxes Estimado</span><span data-test-integ-cart-subtotal-value="">$'),Ve=w('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la Orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Total Estimado</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class="JM2zDb RW86"><div class="centerBx bottombx flxWrp spaceAround">'),ge=w("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Le=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Me=w("<span class=arancelSep> | "),Ye=w('<span class="arancel pricePq"> $'),Je=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Ge=w('<div class="icon_status centerBx "style="margin:0 4px">'),Re=w('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx spaceAround "><h5></h5><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div class="bottombx flxWrp spaceAround centerBx"><h5 class="textleft "></h5><h4>'),He=w('<section class="h6rxkc ">'),We=w('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),ze=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Ke=w('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),Xe=w('<div class="centerBx flxWrp">'),Ze=w('<div><div class=QCNFEe><p class=jhB0af>Enviar a Solve D Cargo</p></div><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Esta seguro de querer enviar a Solve D Cargo tenga en cuenta que puede duplicar la informacion</span></p><div class=separator></div><div style=margin:15px class=" spaceAround centerBx">');F(()=>Q(()=>import("./LoadingColorSpinner-DU-Y13d_.js"),__vite__mapDeps([0,1,2,3])));F(()=>Q(()=>import("./DropDwnSearch-jOAmRbus.js"),__vite__mapDeps([4,1,2,5,6,7])));const _e=F(()=>Q(()=>import("./CheckBoxSlide-BKJkUaPX.js"),__vite__mapDeps([8,1,2,9]))),ae=F(()=>Q(()=>import("./FlexSpace-DXS7Y6Vg.js"),__vite__mapDeps([10,1,2]))),L=F(()=>Q(()=>import("./ButonHrm-Cd9fcfwc.js"),__vite__mapDeps([11,1,2,6,12])));F(()=>Q(()=>import("./UpdInventory-BA9ObU_j.js"),__vite__mapDeps([13,1,2,14,15,5,16,17,18,10])));const W=F(()=>Q(()=>import("./InputHr-DuzsdUxm.js"),__vite__mapDeps([19,1,2,20]))),ie=F(()=>Q(()=>import("./SVG-C-TiIR9g.js"),__vite__mapDeps([6,1,2]))),[$,j]=U({manifestObj:{}});let et=864e5;function Ot(){const[e,i]=ye();U(),U(),U();const[c,f]=z("");Be(f,400),ve(()=>{}),Ce(()=>{});const h=async()=>{if(e?.mId){let d={":search0":e?.mId,businessId:E?.profile?.businessYId},l=await $e(d);j("manifestObj",l[e?.mId])}};return X(async()=>{j("manifestObj",void 0),h(),qe()}),(()=>{var d=Ee(),l=d.firstChild,n=l.firstChild,v=n.firstChild;return s(d,a(S,{get when(){return $?.manifestObj?.packagesOrder},get children(){return a(tt,{})}}),l),s(v,a(S,{get when(){return $?.manifestObj?.products},get children(){return a(se,{get each(){return $?.manifestObj?.products},children:(g,b)=>a(lt,{itm:g})})}})),s(l,a(S,{get when(){return $?.manifestObj?.packagesOrder&&!$?.manifestObj?.isCompleted},get children(){return a(at,{})}}),null),s(l,a(st,{get item(){return $?.manifestObj},get list(){return $?.manifestObj}}),null),d})()}const tt=e=>{const i={type:"",qty:0,arancel:0,price:0},[c,f]=U({frm:{...i}}),h=(l,n)=>{f("frm",l,n)},d=l=>{let n={...c?.frm};n.key=je();let v=$?.manifestObj?.reservas||[],g=ne(v);g.push(n),console.log(n),j("manifestObj","reservas",g),f("frm",{...i})};return(()=>{var l=Ue(),n=l.firstChild,v=n.firstChild,g=n.nextSibling,b=g.firstChild,p=b.firstChild;return s(v,a(S,{get when(){return $?.manifestObj?.reservas},get children(){return a(se,{get each(){return $?.manifestObj?.reservas},children:(u,m)=>a(rt,{itm:u})})}})),s(l,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){var u=Te(),m=u.firstChild,t=m.firstChild,r=t.firstChild,o=r.nextSibling,y=o.firstChild,_=y.nextSibling,x=_.nextSibling,O=x.firstChild,I=o.nextSibling,k=I.firstChild,P=k.nextSibling;return _.addEventListener("change",C=>{h("type",C?.target?.value)}),s(_,a(se,{get each(){return xe?.list},children:(C,Y)=>(()=>{var N=De();return N.firstChild,s(N,()=>C.label,null),M(()=>N.selected=C.id===c?.frm?.type),M(()=>N.value=C.id),N})()})),s(x,a(_e,{get initValue(){return c?.frm?.onlyTariff},updChange:C=>h("onlyTariff",C),color:"var(--background-red-ssg)"}),O),s(I,a(S,{get when(){return!c?.frm?.onlyTariff&&c?.frm?.type},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return c?.frm?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",type:"number",handleClick:C=>h("qty",Se(C))})}}),k),s(I,a(S,{get when(){return c?.frm?.qty&&c?.frm?.type},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.price||""},label:"precio",colors:"#2b2b2b",handleClick:C=>h("price",C)})}}),P),s(I,a(S,{get when(){return c?.frm?.type},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:C=>h("arancel",C)})}}),null),s(t,a(S,{get when(){return(c?.frm?.price&&c?.frm?.qty||c?.frm?.onlyTariff&&c?.frm?.arancel)&&c?.frm?.type},get children(){var C=he();return s(C,a(L,{color:"#646cff",label:"Agregar",handleClick:d})),C}}),null),u}}),g),s(p,a(it,{get item(){return $?.manifestObj?.shipper_consignee}})),l})()},st=e=>{const i=d=>{let l=0;return e?.item?.products?.map(n=>{l+=H(n?.qty)*H(n?.salePrice)*-1}),e?.item?.reservas?.map(n=>{l+=H(n?.qty)*H(n?.price)+H(n?.arancel)}),l},c=async d=>{let l={...e?.item};l.amount=i();let n=await Ae(l);window.open(n)},f=async()=>{let d={...e?.item},l={params:{businessId:E?.profile?.businessYId,id:d.ssg_sorder_key},form:{isCompleted:!1}},n=D(431007);l={...l,...n},await T(l)},h=async d=>{let l=ne(e?.item);l.isCompleted=!0,l.dayNum=l?.createDate/et;let n={params:{businessId:E?.profile?.businessYId,id:l.ssg_sorder_key},form:l},v=D(431007);n={...n,...v},await T(n);let g={params:{businessId:E?.profile?.businessYId},form:l},b=D(139003);g={...g,...b},await T(g);let p={":search0":l.ssg_sorder_key,businessId:E?.profile?.businessYId},u=await $e(p);j("manifestObj",u[l.ssg_sorder_key])};return(()=>{var d=Ve(),l=d.firstChild,n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.nextSibling,p=b.firstChild,u=p.firstChild,m=u.nextSibling;m.firstChild;var t=p.nextSibling,r=t.firstChild,o=r.nextSibling;o.firstChild;var y=v.nextSibling,_=y.firstChild,x=_.firstChild,O=x.firstChild,I=O.nextSibling;I.firstChild;var k=x.nextSibling,P=k.firstChild,C=P.nextSibling,Y=k.nextSibling,N=Y.firstChild,J=N.nextSibling;J.firstChild;var Z=y.nextSibling,G=Z.firstChild;return s(v,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){return[(()=>{var B=Fe(),A=B.firstChild,V=A.firstChild;return s(A,a(_e,{get initValue(){return $?.manifestObj?.hasTax},updChange:R=>j("manifestObj","hasTax",R),color:"var(--background-red-ssg)"}),V),B})(),(()=>{var B=he();return s(B,a(S,{get when(){return $?.manifestObj?.hasTax},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return $?.manifestObj?.TaxPercent||""},label:"Porciento de Impuestos",colors:"#2b2b2b",type:"number",handleClick:A=>j("manifestObj","TaxPercent",A)})}})),B})()]}}),b),s(m,()=>i().toFixed(2),null),s(b,a(S,{get when(){return $?.manifestObj?.hasTax&&$?.manifestObj?.TaxPercent},get children(){var B=Qe(),A=B.firstChild,V=A.nextSibling;return V.firstChild,s(V,()=>(i()*($?.manifestObj?.TaxPercent/100)).toFixed(2),null),B}}),t),s(o,()=>(i()*(($?.manifestObj?.TaxPercent?$?.manifestObj?.TaxPercent:0)/100)+i()).toFixed(2),null),s(I,()=>we(e?.item?.createDate),null),s(C,()=>e?.item?.invoice),s(J,()=>oe("storeGroupBy")?.[e?.item?.store]?.label,null),s(G,a(L,{color:"#646cff",label:"Imprimir",handleClick:c}),null),s(G,a(S,{get when(){return!e?.item?.isCompleted},get children(){return a(L,{color:"#646cff",label:"Confirmar",handleClick:h})}}),null),s(G,a(S,{get when(){return e?.item?.isCompleted&&E?.profile?.isAdmin},get children(){return a(L,{color:"#646cff",label:"arrow",handleClick:f})}}),null),d})()},lt=e=>{const[i,c]=U(),f=()=>i?.[e?.itm?.product?.id]?.productImageUrl?ue()+be()+"/"+i?.[e?.itm?.product?.id]?.productImageUrl:null,h=async()=>{let l=e?.itm?.product?.id,n=`${l}`,v=await le(n);v?.[l]?.productImageUrl&&c(l,v?.[l])};X(()=>{h()});const d=()=>{console.log(e?.itm);let l=ne($?.manifestObj?.products);delete l[e?.itm?.product?.id],j("manifestObj","products",l)};return a(S,{get when(){return e?.itm?.salePrice},get children(){var l=Le(),n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.firstChild,p=b.firstChild,u=b.nextSibling,m=u.firstChild,t=m.firstChild,r=t.firstChild;r.firstChild;var o=m.nextSibling,y=o.firstChild,_=y.firstChild,x=_.nextSibling,O=y.nextSibling,I=O.firstChild;return I.firstChild,s(r,()=>e?.itm?.product?.label,null),s(x,()=>e?.itm?.qty*-1),s(I,()=>(e?.itm?.salePrice*1).toFixed(2),null),s(o,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){var k=ge(),P=k.firstChild,C=P.firstChild;return C.$$click=d,k}}),null),M(()=>de(p,"src",f())),l}})},rt=e=>{const[i,c]=U(),f=async()=>{let d=e?.itm?.product?.id,l=`${d}`,n=await le(l);n?.[d]?.productImageUrl&&c(d,n?.[d])};X(()=>{f()});const h=()=>{let l=ne($?.manifestObj?.reservas).filter(n=>n.key!==e?.itm?.key);j("manifestObj","reservas",l)};return(()=>{var d=Je(),l=d.firstChild,n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.firstChild,p=b.firstChild,u=p.firstChild;u.firstChild;var m=b.nextSibling,t=m.firstChild,r=t.firstChild,o=r.nextSibling,y=t.nextSibling,_=y.firstChild;return _.firstChild,s(u,()=>e?.itm?.type,null),s(o,()=>e?.itm?.qty*1),s(_,()=>(e?.itm?.price*1).toFixed(2),null),s(y,a(S,{get when(){return e?.itm?.arancel},get children(){return[Me(),(()=>{var x=Ye();return x.firstChild,s(x,()=>(e?.itm?.arancel*1).toFixed(2),null),x})()]}}),null),s(m,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){var x=ge(),O=x.firstChild,I=O.firstChild;return I.$$click=h,x}}),null),d})()},it=e=>{const[i,c]=z(),[f,h]=z(!0),d=t=>t?" "+t:"",l=t=>d(t?.firstName)+d(t?.middleName)+d(t?.lastName)+d(t?.lastName2),n=t=>{let r=d(t?.altPhoneNumber);return d(t?.phoneNumber)+(r?" |"+r:"")},v=async()=>{let t={};t.id=K(),t.closeEvent=()=>{},t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=a(dt,{confirm:g}),Ne(t)},g=async()=>{let t=E?.profile?.agency?.id;if(t&&e?.item?.citiId&&e?.item?.provinceId){let r=e?.item,o=`;${q(r?.firstName)};${q(r?.middleName)};${q(r?.lastName)};${q(r?.lastName2)};N/A;${q(r?.cid)};CUB;${q(r?.phoneNumber)};${q(r?.altPhoneNumber)};${q(r?.ybstreet)};${q(r?.ybstreetNo)};${q(r?.ybbetwen1)};${q(r?.ybbetwen2)};${q(r?.ybreparto)};;${r?.citiId};${r?.provinceId};${q(r?.email)};;${t}`;b("consignee",o)}},b=async(t,r,o)=>{let y=`funcname=insertRecord&option=${t}&params=${r}`,_={query:"querySolveGlobal"};_.params={query:y},await T(_)},p=async()=>{let t={params:{id:e?.item?.name,key:"shipper"}},r=D(181009);t={...t,...r};const o=await T(t);let y=ce(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],o,e?.item);console.log(y),o.cid===e?.item?.cid&&console.log()},u=async()=>{let t={params:{id:e?.item?.cid,key:"consignee"}},r=D(181009);t={...t,...r};const o=await T(t);return console.log(o),ce(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],o,e?.item).hasChange&&o.cid===e?.item?.cid?e?.item:o},m=async(t,r)=>{let o=await u();console.log(o)};return X(()=>{if(e?.item?.ybestate){let t=oe("M023009")?.provincias?.filter?.(r=>r.label===e?.item?.ybestate)?.[0];if(t?.id&&c(t),e?.item?.ybcity){let r=t?.cities?.filter?.(o=>o.label===e?.item?.ybcity)?.[0];r?.id&&j("manifestObj","shipper_consignee","citiId",r?.id)}}m()}),a(S,{get when(){return e?.item?.name},get children(){var t=Re(),r=t.firstChild;r.firstChild;var o=r.nextSibling,y=o.firstChild,_=y.nextSibling,x=o.nextSibling,O=x.nextSibling,I=O.firstChild,k=I.nextSibling,P=O.nextSibling,C=P.firstChild,Y=C.nextSibling,N=Y.nextSibling,J=P.nextSibling,Z=J.firstChild,G=Z.nextSibling,B=J.nextSibling,A=B.firstChild,V=A.nextSibling;return s(r,a(ae,{}),null),s(y,()=>e?.item?.name),_.$$click=p,s(_,()=>e?.item?.phoneNumberS),s(O,a(ae,{}),k),k.$$click=u,s(k,a(ie,{name:"success",size:22,get color(){return f()?"#37be5fff":"#c6c6c6"}})),s(O,a(S,{get when(){return!f()},get children(){var R=Ge();return R.$$click=v,s(R,a(ie,{name:"send",size:22,color:"#646cff"})),R}}),null),s(C,()=>e?.item?.cid),s(Y,()=>l(e?.item)),s(N,()=>n(e?.item)),s(Z,()=>ot(e?.item)),s(G,()=>e?.item?.ybreparto),s(A,()=>e?.item?.ybcity),s(V,()=>e?.item?.ybestate),M(()=>Oe(t,`    ${me()?"isMobile":""}`)),t}})},kt=async(e,i)=>{let c={params:e,data2update:i},f=D(431007);return c={...c,...f},await T(c)},$e=async e=>{let i={params:e},c=D(431002);return i={...i,...c},await T(i)},Pt=async e=>{let i=[];e.map(c=>{let f={params:{id:c?.ssg_track_key,idairguide:"all"}},h=D(802002);f={...f,...h},i.push(f)}),ke(i,nt)},nt=async e=>{const c=await T(e);if(c)return c},at=e=>{const[i,c]=z(""),[f,h]=z(1),d=()=>{f()===1&&i().length>8&&l(i())},l=async b=>{let p=E?.profile?.agencyStore?.id,u=`${b}`,m=await le(u),t=te(m)?.[0],r=`${t} ${p}`,o=await pe(r),y=0,_=0;te(o)?.map(k=>{o[k]?.products?.map(P=>{t===P?.product?.id&&(y+=P?.price*1*P?.qty*1,_+=P?.qty*1)})});let x=1,O={};$?.manifestObj?.products?.map(k=>{let P={...k};t===k.product.id&&(P.qty=P.qty*-1),O[k.product.id]=P}),O?.[t]&&(x=O?.[t].qty*1+1);const I=_?y/_:0;if(_&&_-x>=0){if(O?.[t])O[t].qty=x*-1;else{let P={product:{id:t,label:m?.[t]?.name,code:m?.[t]?.code},qty:x*-1,price:I,salePrice:m?.[t]?.salePrice};O[t]=P}let k=fe(O);j("manifestObj","products",k),c(""),re({text:m?.[t]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:K()})}else re({text:"Sin Existencia",timeout:3500,theme:"red",id:K()})},[n,{refetch:v}]=Pe(i,async b=>{if(f()===2&&b.length>4){const p=await le(b);let u=[];return te(p).map(m=>{let t=p[m];u.push(t)}),u}else return[]}),g=()=>{c(""),h(1)};return(()=>{var b=We(),p=b.firstChild,u=p.firstChild,m=u.firstChild,t=m.nextSibling,r=t.firstChild,o=r.nextSibling;return s(u,a(S,{get when(){return n()?.length>0},get children(){var y=He();return s(y,a(se,{get each(){return n()},children:(_,x)=>a(ct,{itm:_,clearTx:g})})),y}}),t),s(t,a(W,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return i()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:c,onEnter:d}),r),r.$$click=()=>h(1),s(r,a(ie,{name:"qrcode-scan",size:22,get color(){return f()===1?"#646cff":""}})),o.$$click=()=>h(2),s(o,a(ie,{name:"keyboard",size:22,get color(){return f()===2?"#646cff":""}})),b})()},ct=e=>{const[i,c]=U(),f=()=>i?.prod?.productImageUrl?ue()+be()+"/"+i?.prod?.productImageUrl:null;X(()=>{c("prod",e?.itm)}),Array.from(Array(10).keys());const h=async d=>{let l=E?.profile?.agencyStore?.id,n=i?.prod?.ssg_product_key,v=`${n} ${l}`,g=await pe(v),b=0,p=0;te(g)?.map(r=>{g[r]?.products?.map(o=>{n===o?.product?.id&&(b+=o?.price*1*o?.qty*1,p+=o?.qty*1)})});let u=1,m={};$?.manifestObj?.products?.map(r=>{let o={...r};n===r.product.id&&(o.qty=o.qty*-1),m[r.product.id]=o}),m?.[n]&&(u=m?.[n].qty*1+1);const t=p?b/p:0;if(console.log(t,p,b),p&&p-u>=0){if(m?.[n])m[n].qty=u*-1;else{let o={product:{id:n,label:i?.prod?.name,code:i?.prod?.code},qty:u*-1,price:t,salePrice:i?.prod?.salePrice};m[n]=o}let r=fe(m);j("manifestObj","products",r),e?.clearTx(),re({text:i?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:K()})}else e?.clearTx(),re({text:"Sin Existencia",timeout:3500,theme:"red",id:K()})};return a(S,{get when(){return e?.itm?.salePrice},get children(){var d=ze(),l=d.firstChild,n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.firstChild,p=g.nextSibling,u=p.firstChild,m=u.firstChild,t=m.firstChild;t.firstChild;var r=u.nextSibling,o=r.firstChild,y=o.nextSibling,_=y.firstChild;return _.firstChild,s(t,()=>e?.itm?.name,null),s(o,a(L,{color:"#646cff",label:"Agregar",handleClick:h})),s(_,()=>(e?.itm?.salePrice*1).toFixed(2),null),M(()=>de(b,"src",f())),d}})},ee=(e,i)=>i?(()=>{var c=Ke(),f=c.firstChild,h=f.nextSibling;return s(f," "+e),s(h,i),c})():"",ot=e=>(()=>{var i=Xe();return s(i,()=>ee("Calle",e?.ybstreet),null),s(i,()=>ee("#",e?.ybstreetNo),null),s(i,()=>ee("E/",e?.ybbetwen1),null),s(i,()=>ee("y",e?.ybbetwen2),null),i})(),H=e=>e?e*1:0,q=e=>e?e.toString().toUpperCase().trim():"";function dt(e){return(()=>{var i=Ze(),c=i.firstChild,f=c.nextSibling,h=f.nextSibling,d=h.nextSibling;return i.style.setProperty("max-height","80vh"),i.style.setProperty("overflow","auto"),i.style.setProperty("background","#fff"),i.style.setProperty("border-radius","11px"),i.style.setProperty("padding"," 0 21px"),c.style.setProperty("padding","21px"),s(d,a(ae,{}),null),s(d,a(L,{color:"#646cff",icon:"send",label:"Enviar",get handleClick(){return e.confirm}}),null),M(l=>(l=me()?"96vw":"420px")!=null?i.style.setProperty("width",l):i.style.removeProperty("width")),i})()}Ie(["click"]);export{Ot as default,nt as fetchCSVInve,ot as getAddress,H as isValNum,Pt as loadInventory,kt as updConfirmSale};
