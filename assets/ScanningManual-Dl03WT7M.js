const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CnLteNTZ.js","assets/index-Bqe7kUWr.js","assets/index-DVaqc53U.css","assets/InputHr-i0js8DVw.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as B,_ as P,a as b,c as U,k as J,r as K,s as ee,b as te,i,d as c,e as w,w as se,S as O,B as re,F as ne,T as ae,y as ie,g as z,f as G,U as le,h as oe,t as m,I as M,n as ce,j as v,R as de,p as V}from"./index-Bqe7kUWr.js";import{status as T,scannedQRs as ue}from"./Scanning-BXtUlvVn.js";import ge from"./FlexSpace-CnNoKLys.js";var pe=m('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),ye=m('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div class=scrollH>'),be=m("<div> <!>."),fe=m("<div> "),he=m('<div class=itm0hist><div><div class="centerBx bottombx"><div class="icon_status centerBx"></div><p></p></div><div class="centerBx bottombx"><h5></h5><div class=vertseparator></div><h4>');const _e=B(()=>P(()=>import("./LoadingColorSpinner-CnLteNTZ.js"),__vite__mapDeps([0,1,2]))),ve=B(()=>P(()=>import("./InputHr-i0js8DVw.js"),__vite__mapDeps([3,1,2,4]))),A=B(()=>P(()=>import("./index-Bqe7kUWr.js").then(d=>d.a9),__vite__mapDeps([1,2])));function Ee(d){const[u,I]=b([]),[R,g]=U({}),[D,C]=b(""),[N,xe]=b(""),[k,W]=b(""),[$e,L]=b(""),[E,q]=b("");J(()=>{}),K(()=>{}),ee(()=>{});const f=(r,a)=>{W(a),L(r),setTimeout(()=>{L("")},300)},h=r=>{q(r),setTimeout(()=>{q("")},3e3)},Q=r=>{r||(r=D()),r=r.split("'").join("-"),C(""),E();let a={timeStamp:new Date().getTime(),latitude:M?.latitude,longitude:M?.longitude,statusId:T(),userId:ce?.profile?.userId},t=r.split("/");r.split("-").length>3&&(t=r.split("-"));let e=t?.[0],p="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const s=new RegExp(p);let l=t.length>4&&e.length===12,o=e.length===13&&s.test(e),n={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};o&&(n={idairguide:"175-2383"+e.slice(3,7),":search0":e});let S="^[0-9]{4}-[1-9]{4}";const x=new RegExp(S);let y=e.length===9&&x.test(e);y&&(n={idairguide:"175-2383"+e.slice(0,4),":search0":e}),o||l||y?X(n,a):(f("","error"),g({consigneeInfo:{ybestate:"Codigo Incorrecto"}}),h(v()))},X=async(r,a)=>{let t=await me(r),e=Object.keys(t)?.[0];if(t[e]?.idairguide){let p=t[e]?.statusHistory||[];p.push(a),r.ssg_track_key=e;let s=t[e]?.estate||t[e]?.consigneeInfo?.ybestate,l=t[e]?.city||t[e]?.consigneeInfo?.ybcity,o={estate:s,city:l,tracking:t[e]?.tracking,currentStatus:T(),timeStamp:new Date().getTime()};if(g(""),g(t[e]),h(v()),f("","success"),!de?.roles?.[s])f("","warning"),g({consigneeInfo:{ybestate:"Zona incorrecta"}}),h(v());else if(t[e]?.currentStatus!==a.statusId){let n={statusHistory:p,currentStatus:a.statusId};await Se(r,n),I([...u(),o])}else f("","warning"),g({consigneeInfo:{ybcity:"Fue escaneado",ybestate:t[e]?.consigneeInfo?.ybestate}}),h(v())}else f("","error"),g({consigneeInfo:{ybestate:"Error con manifiesto"}}),h(v())};return te(N,async r=>ue?.codes),(()=>{var r=ye(),a=r.firstChild,t=a.nextSibling,e=t.firstChild,p=t.nextSibling;return a.style.setProperty("padding","16px"),i(a,c(O,{get when(){return E()},get children(){var s=pe(),l=s.firstChild,o=l.nextSibling;return i(l,c(A,{get name(){return themeAlert?.[k()]?.icon},size:32,get color(){return themeAlert?.[k()]?.svg}})),i(o,()=>R?.consigneeInfo?.ybestate),w(n=>se(s,themeAlert?.[k()],n)),s}})),t.style.setProperty("padding","16px"),t.style.setProperty("margin-top","35px"),i(t,c(ve,{width:"250px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--hrm-palette-tertiary80)",get value(){return D()},placeholder:"codigo ...",colors:"#2b2b2b",handleClick:C,onEnter:Q}),e),e.$$click=()=>C(""),i(e,c(A,{name:"Xclose",size:32,color:"#2b2b2b"})),i(p,c(le,{fallback:s=>(()=>{var l=be(),o=l.firstChild,n=o.nextSibling;return n.nextSibling,i(l,()=>s.toString(),n),l})(),get children(){return c(re,{get fallback(){return(()=>{var s=fe();return s.firstChild,i(s,c(_e,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return c(O,{get when(){return u()},get children(){return c(ne,{get each(){return ae(u(),"timeStamp",0)},children:(s,l)=>(()=>{var o=he(),n=o.firstChild,S=n.firstChild,x=S.firstChild,y=x.nextSibling,$=S.nextSibling,F=$.firstChild,Y=F.nextSibling,Z=Y.nextSibling;return i(x,c(A,{get name(){return ie?.[s?.currentStatus]},size:32})),y.style.setProperty("padding","8px"),i(y,()=>s?.tracking),i(n,c(ge,{}),$),i(F,()=>s?.city),i(Z,()=>s?.estate),w(_=>{var j=`client_item_box gWXAaj jlytmu manifest  ${z()?"isMobile":"centerBx"}`,H=` title_scan centerBx ${z(),""} `;return j!==_.e&&G(n,_.e=j),H!==_.t&&G(y,_.t=H),_},{e:void 0,t:void 0}),o})()})}})}})}})),w(s=>(s=E()?"block":"none")!=null?a.style.setProperty("display",s):a.style.removeProperty("display")),r})()}const me=async d=>await V({params:d,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2",fldsQry:["idairguide","currentStatus","ssg_track_key","statusHistory","tracking","estate","city","cidentity","consigneeInfo:ybestate","consigneeInfo:ybcity"]}),Se=async(d,u)=>await V({params:d,query:"updateLogisticYabaExpress",data2update:u});oe(["click"]);export{Ee as default};
