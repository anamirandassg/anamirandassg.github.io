import{P as v,r as l}from"./PDFButton-B_0lS8EG.js";import{f as A}from"./fontkit.es-BqrvdTa9.js";import{i as N,t as n}from"./InitPrintServices-DzdLVHm-.js";import{OpenToast as R}from"./Toast-C6E6n1zC.js";import{g as I,a as G,O as L}from"./Util-C77m685E.js";const U=s=>{let c=window?.DATAMatrix;return c?c({msg:s,dim:256,rct:0,pad:2,pal:["#000000","#ffffff"],vrb:1}):null},D=s=>{let d=s.cloneNode(!0).outerHTML,o=new Blob([d],{type:"image/svg+xml;charset=utf-8"});return(window.URL||window.webkitURL||window).createObjectURL(o)},F=async(s,c)=>{const d=document.createElement("img");document.body.appendChild(d),d.onload=function(){const o=document.createElement("canvas");o.width=d.clientWidth,o.height=d.clientHeight,o.getContext("2d").drawImage(d,0,0);const f=o.toDataURL("image/png");document.body.removeChild(d),c(f)},d.src=s},Y=s=>new Promise(async(c,d)=>{let o=U(s),e=o&&D(o);e&&F(e,async f=>{var h=await M(f,"image/png");let t=URL.createObjectURL(h);c(t)})}),M=async(s,c)=>{let o=await(await fetch(s)).blob();return o=o.slice(0,o.size,c),o},Z=s=>{window.navigator.clipboard.writeText(s),R({text:s+"  copiado",timeout:1500,id:I()})};function O(s){let c=new Blob([s],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(c)}const _=(s,c,d)=>{const o=c.widthOfTextAtSize(s,40),e=c.widthOfTextAtSize(s,10);return Math.floor(d/((o-e)/30))},q=async(s,c,d)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o);let f=265;const h=s.map(async(t,m)=>{const a=o.addPage([426,284]),{height:i}=a.getSize();let r=i-34;const y=await fetch(t?.qr).then(g=>g.arrayBuffer()),w=await o.embedPng(y);a&&w&&a.drawImage(w,{x:10,y:i-220,width:150,height:150});let b=_(n(t?.state),e.roboto_bold,f);b>42&&(b=42,r=r-6);let z=n(t?.bulto).trim();const S=e.Lexend_700?.widthOfTextAtSize(n(z),40);if(t?.isSSG){t?.state&&a.drawText(n(t?.state),{x:5,y:r-6,size:b,font:e.roboto_bold,color:l(0,0,0)}),a.drawText(n(z),{x:18,y:i-270,size:40,font:e.GSansBold,color:l(0,0,0)});const g=await fetch(G("SSG-black.png")).then(T=>T.arrayBuffer()),p=await o.embedPng(g);a&&p&&a.drawImage(p,{x:210,y:i-232,width:190,height:190})}else{let g=_(n(t?.name),e.GSansItalic,f);var u=e.GSansItalic?.widthOfTextAtSize(n(t?.name),g);if(u>f&&(g=g-1,u=e.GSansItalic?.widthOfTextAtSize(n(t?.name),g)),g=300/u*21,g=g>25?25:g*1,a.drawText(n(t?.name),{x:10,y:r-0,size:g,font:e.GSansItalic,color:l(0,0,0)}),t?.state){const C=e.roboto_bold?.widthOfTextAtSize(n(t?.state),b);a.drawText(n(t?.state),{x:420-C,y:r-46,size:b,font:e.roboto_bold,color:l(0,0,0)}),r=r-g}let p=29;const T=e.Lexend_700?.widthOfTextAtSize(n(t?.phoneNumber),p);a.drawText(n(t?.phoneNumber),{x:400-T,y:r-70,size:p,font:e.Lexend_700,color:l(0,0,0)});const B=e.Lexend_700?.widthOfTextAtSize(n(t?.altPhoneNumber),p);a.drawText(n(t?.altPhoneNumber),{x:400-B,y:r-105,size:p,font:e.Lexend_700,color:l(0,0,0)}),a.drawText(n(z),{x:418-S,y:r-205,size:40,font:e.GSansBold,color:l(0,0,0)})}});await Promise.all(h);{const t=await o.save();return O(t)}},Q=async(s,c,d)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o),f=s.map(async(h,t)=>{let m=2.795;const a=o.addPage([45*m,24*m]),{height:i}=a.getSize(),r=await fetch(h?.mtrx).then(x=>x.arrayBuffer()),y=await o.embedPng(r),w=await fetch(h?.mtrx2).then(x=>x.arrayBuffer()),b=await o.embedPng(w);a&&y&&a.drawImage(y,{x:0,y:i-32,width:30,height:30}),a.drawText(n(h?.lbl),{x:33,y:i-20,size:13,font:e.Lexend_700,color:l(0,0,0)}),a&&b&&a.drawImage(b,{x:0,y:i-66,width:30,height:30}),a.drawText(n(h?.lbl2),{x:33,y:i-56,size:13,font:e.Lexend_700,color:l(0,0,0)})});await Promise.all(f);{const h=await o.save();return O(h)}},K=async(s,c,d)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o);let f=265;const h=s.map(async(t,m)=>{const a=o.addPage([426,284]),{height:i}=a.getSize();let r=i-34,y=_(n(t?.state),e.roboto_bold,f);y>42&&(y=42,r=r-6);let b=n(t?.bulto).trim();a.drawText("$"+(n(t?.amount)*1).toFixed(2),{x:10,y:i-260,size:50,font:e.Lexend_700,color:l(0,0,0)});let x=_(n(t?.name),e.GSansItalic,f);var z=e.GSansItalic?.widthOfTextAtSize(n(t?.name),x);z>f&&(x=x-1,z=e.GSansItalic?.widthOfTextAtSize(n(t?.name),x)),x=300/z*21,x=x>25?25:x,a.drawText(n(t?.name),{x:10,y:r-0,size:x,font:e.GSansItalic,color:l(0,0,0)});let S=29;if(t?.state){let p="CID: "+t?.state;const T=e.roboto_bold?.widthOfTextAtSize(n(p),S);a.drawText(n(p),{x:410-T,y:r-46,size:S,font:e.roboto_bold,color:l(0,0,0)}),r=r-S}let u=29;const g=e.Lexend_700?.widthOfTextAtSize(n(t?.phoneNumber),u);a.drawText(n(t?.phoneNumber),{x:400-g,y:r-60,size:u,font:e.Lexend_700,color:l(0,0,0)}),a.drawText(n(b),{x:10,y:r-95,size:10,font:e.GSansBold,color:l(0,0,0)}),a.drawText(n(t?.rpto),{x:10,y:r-115,size:12,font:e.Lexend_700,color:l(0,0,0)}),a.drawText(n(t?.city),{x:10,y:r-135,size:15,font:e.roboto_bold,color:l(0,0,0)})});await Promise.all(h);{const t=await o.save();return O(t)}},P=(s,c)=>c?" "+s+" "+c:"",E=s=>`${P("Calle",s?.ybstreet)}${P("#",s?.ybstreetNo)}${P("E/",s?.ybbetwen1)}${P("y",s?.ybbetwen2)}`,J=async(s,c,d)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o);let f=0,h=0,t={0:[]};s.map(m=>{let a=0,i=c[m];a=12,L(i?.customers).map(r=>{a+=12,L(i?.customers?.[r]?.bagsNumb).map(y=>{a+=13})}),f+a<800?(f+=a,i.height=a,t[h].push(i)):(h+=1,f=0,t[h]||(t[h]=[]))}),console.log(t),L(t).map((m,a)=>{const i=o.addPage(),{height:r,width:y}=i.getSize();let w=r-34;t[m].map(async(b,x)=>{x%2&&i?.drawRectangle({x:5,y:w-b.height,width:580,height:b.height+15,color:l(.79,.79,.79)});let z=E(b?.address)+", Rpto "+n(b?.rpto)+" |  "+n(b?.city)+"  |  "+n(b?.estate);i.drawText(""+z.toUpperCase(),{x:13,y:w,size:7,font:e.roboto_bold,color:l(0,0,0)}),w=w-12,L(b?.customers).map(S=>{let u=b?.customers[S],g=""+S+"  |  "+u?.name+" |  "+u?.phoneNumber;i.drawText(""+g,{x:23,y:w,size:7.5,font:e.Lexend_700,color:l(0,0,0)}),w=w-11,L(u?.bagsNumb).map(p=>{let T="  "+u?.bagsNumb?.[p]?.bagnumber+";    HBLS:  ";u?.bagsNumb?.[p]?.hbls.map(C=>{T+=C?.hbl+"; "});let B=" Envio:  "+T;i.drawText(""+B,{x:29,y:w,size:8,font:e.roboto_bold,color:l(0,0,0)}),w=w-13})}),w=w-13})});{const m=await o.save();return O(m)}};export{K as C,J as P,q as S,Z as c,Y as g,Q as l};
