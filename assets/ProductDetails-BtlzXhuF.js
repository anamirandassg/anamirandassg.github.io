const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-DZcow4f9.js","assets/index-DprIyRsx.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-GDqabSpV.js","assets/debounces-D37dEXMp.js","assets/SVG--ni8zbBv.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ButonHrm-Bsr35mtA.js","assets/ButonHrm-BSeWNUGQ.css","assets/FlexSpace-CIIwHLrW.js","assets/ButonUploadHrm-BXzw0-X0.js","assets/CheckBoxSlide-DDMhTiwQ.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-C6du9vTz.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as M,_ as F,G as $e,c as te,a as D,o as Ce,b as Se,d as Ie,i as t,e as r,S as k,p as re,x as oe,y as we,E as ke,Y as Be,h as de,F as le,O as ce,ar as Pe,J as Ee,j as Q,k as Y,m as z,U as Oe,A as Le,t as c,q as R,v as Ae,as as je,at as Ue,au as Me}from"./index-DprIyRsx.js";import{u as Fe}from"./debounces-D37dEXMp.js";import{c as qe,i as De,g as Xe,a as Ne,b as Re,u as Ve}from"./handelImagesServices-B_6ozm7_.js";import{LookupInventory as Te}from"./DashInventory-4YPXh8zr.js";import{OpenModal as We}from"./DialogHRM-DpoVtvbp.js";import{a as Ze,b as Qe,d as Ye}from"./ShowQRPrintLabel-CpqPtTrX.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-bufx-MRX.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-DGrcQKgN.js";import"./Toast-Dv30G4Se.js";var ze=c('<div class="icon_status centerBx">'),Ge=c("<div style=width:300px;max-height:300px;position:relative;><img alt=sf><div>"),He=c("<div style=width:300px;position:relative;><img alt=sf>"),Ke=c('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Je=c('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px><div style=margin:15px class=" spaceAround centerBx"></div></div><div class="centerBx flxWrp "style=margin:16px></div><div style=margin:16px><div class=bottombx><h4>Codigos X tallas:</h4></div><div class="centerBx flxWrp "style=margin:16px>'),et=c("<div class=hseparator>"),tt=c('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),rt=c('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),lt=c('<div class="bottombx centerBx unit"style=padding:30px>'),it=c('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),st=c('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class="icon_status centerBx "style=margin-right:52px></div><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><div class=" centerBx spaceAround"><h4>Factura</h4></div></div><div class="tr_bar_40 centerBx spaceAround"><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),at=c("<div> "),nt=c("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),ot=c('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),dt=c('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),ue=c("<div style=margin:8px>"),ct=c('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>:'),ut=c("<div class=unitBx><h5>"),_t=c('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>'),pt=c('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Imprimir Etiqueta</h5></div></div></div><div>'),bt=c('<div class="_dsplFlx bottombx "><h4></h4><div class="icon_status centerBx">');const _e=M(()=>F(()=>import("./LoadingColorSpinner-DZcow4f9.js"),__vite__mapDeps([0,1,2,3]))),vt=M(()=>F(()=>import("./DropDwnSearch-GDqabSpV.js"),__vite__mapDeps([4,1,2,5,6,7]))),ht=M(()=>F(()=>import("./ButonHrm-Bsr35mtA.js"),__vite__mapDeps([8,1,2,6,9]))),mt=M(()=>F(()=>import("./FlexSpace-CIIwHLrW.js"),__vite__mapDeps([10,1,2]))),gt=M(()=>F(()=>import("./ButonUploadHrm-BXzw0-X0.js"),__vite__mapDeps([11,1,2,6,9]))),xt=M(()=>F(()=>import("./CheckBoxSlide-DDMhTiwQ.js"),__vite__mapDeps([12,1,2,13]))),ft=M(()=>F(()=>import("./InputHr-C6du9vTz.js"),__vite__mapDeps([14,1,2,15]))),ie=M(()=>F(()=>import("./SVG--ni8zbBv.js"),__vite__mapDeps([6,1,2])));function Dt(l){const[i,n]=$e(),[e,u]=te({search:""});te(),te();const[h,S]=D(null),[L,B]=D(!1),[A,j]=D(!1),[q,G]=D(""),[wt,ve]=D("");Fe(ve,400),Ce(()=>{}),Se(()=>{});const se=async()=>{if(i?.mId){let s={id:i?.mId,businessId:Q?.profile?.businessYId},o=await be(s);if(!o?.codeN){let p="9209"+Me(8),d={id:p,businessId:Q?.profile?.businessYId};(await be(d))?.ssg_product_key||b("codeN",p)}let v=await Te(i?.mId),y=0,P=0,a=[],_={};ce(v)?.map(p=>{let d=v[p]?.store;v[p]?.products?.map($=>{if(i?.mId===$?.product?.id){let C={...v[p]};delete C.products,C.qty=$?.qty*1,C.price=$?.price*1,y+=$?.price*1*$?.qty*1,_[d]||(_[d]={total:0}),_[d].total+=C.qty,P+=$?.qty*1,a.push(C)}})});const x=y/P;G(Xe()+Ne()+"/"+o?.productImageUrl),u("stockList",a),u("stock",{Balance:y,Total:P,priceCost:x,stockByStore:_}),u("productObj",o)}},he=async()=>{const s=await je("stores");let o={};s.map(v=>{v.bussinesId===Q?.profile?.businessYId&&(console.log(v),o[v?.id]=v)}),Ue("list",o)};Ie(async()=>{he(),se()});const H=async s=>{await $t(i?.mId,s),se()},ae=async(s,o)=>{let v=await Re(s.type,o,1);if(await Ve(v,s)){let P={...e?.productObj?.thumbnails};P[o]=1,await H({productImageUrl:o,thumbnails:P}),j(!1),B(!1)}else j(!1)},me=async()=>{if(j(!0),h()?.name.split(".").pop()==="webp"){let s=e?.productObj?.code+"/"+R()+R()+".webp";ae(h()?.file,s)}else{let s=await qe(h()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),o=await De(s),y=await(await fetch(o)).blob(),P=e?.productObj?.code+"/"+R()+R()+".webp";ae(y,P)}},ge=s=>{S(s),B(!0)},xe=s=>{H({isPublic:s?"9":null})},b=async(s,o)=>{H({[s]:o})},fe=async(s,o)=>{Ct(e?.productObj,s)},ye=async(s,o)=>{let v=R(),y={};y.id=v,y.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},y.content=r(It,{modalId:v,get item(){return e?.productObj}}),We(y)};return(()=>{var s=st(),o=s.firstChild,v=o.firstChild,y=v.nextSibling,P=y.nextSibling;return P.nextSibling,t(s,r(k,{get when(){return e?.productObj?.code},get fallback(){return(()=>{var a=at();return a.firstChild,t(a,r(_e,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){var a=Je(),_=a.firstChild,x=_.firstChild,p=x.firstChild,d=p.nextSibling,$=d.firstChild,C=d.nextSibling,V=_.nextSibling,K=V.nextSibling,T=K.firstChild,E=T.nextSibling,I=E.nextSibling,O=I.firstChild,X=I.nextSibling,J=X.nextSibling,ee=J.firstChild,f=ee.nextSibling;return t(_,r(k,{get when(){return h()?.source},get children(){var U=Ge(),N=U.firstChild,W=N.nextSibling;return t(W,r(k,{get when(){return!A()},get fallback(){return(()=>{var m=nt(),Z=m.firstChild;return t(m,r(_e,{stroke:"rgb(200 25 60 / 1)",size:32}),Z),m})()},get children(){var m=ze();return m.$$click=me,t(m,r(ie,{name:"arrow_up_large",size:24})),m}})),re(m=>{var Z=h()?.source,ne=A()?"floatBtn loading":"floatBtn ";return Z!==m.e&&oe(N,"src",m.e=Z),ne!==m.t&&we(W,m.t=ne),m},{e:void 0,t:void 0}),U}}),x),t(_,r(k,{get when(){return ke(()=>!!q())()&&!h()?.source},get children(){var U=He(),N=U.firstChild;return re(()=>oe(N,"src",q())),U}}),x),t(p,()=>e?.productObj?.name),t(d,r(xt,{get initValue(){return e?.productObj?.isPublic},updChange:xe,color:"var(--background-red-ssg)"}),$),t(C,r(gt,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ge})),t(x,r(k,{get when(){return Be()},get children(){var U=Ke(),N=U.firstChild,W=N.nextSibling;return t(W,r(vt,{get list(){return de("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:m=>fe(m.id),width:"260px"})),U}}),null),t(T,r(g,{get value(){return e?.productObj?.name},label:"Nombre",key:"name",updItem:b,width:"600px"})),t(E,r(pe,{get value(){return e?.productObj?.category},label:"Categoria",key:"category",updItem:b}),null),t(E,r(w,{}),null),t(E,r(pe,{get value(){return e?.productObj?.unit},label:"U/M",key:"unit",updItem:b}),null),t(E,r(w,{}),null),t(E,r(g,{get value(){return e?.productObj?.brand},label:"Marca",key:"brand",updItem:b}),null),t(E,r(w,{}),null),t(E,r(g,{get value(){return e?.productObj?.model},label:"Modelo",key:"model",updItem:b}),null),t(I,r(g,{get value(){return e?.productObj?.ASIN},label:"ASIN",key:"ASIN",updItem:b}),O),t(I,r(w,{}),O),t(I,r(g,{get value(){return e?.productObj?.UPC},label:"UPC",key:"UPC",updItem:b}),O),t(I,r(w,{}),O),t(I,r(g,{get value(){return e?.productObj?.code},label:"codigo SSG",key:"code",updItem:b}),O),t(I,r(g,{get value(){return e?.productObj?.codeN},label:"codigo numerico",key:"codeN",updItem:b}),O),t(O,r(ht,{color:"#016ee6",icon:"printer",label:"Imprimir",handleClick:ye})),t(X,r(g,{get value(){return e?.productObj?.description},label:"Description",key:"description",updItem:b}),null),t(X,r(w,{}),null),t(X,r(g,{get value(){return e?.productObj?.salePrice},label:"Precio Venta",key:"salePrice",updItem:b}),null),t(f,r(g,{get value(){return e?.productObj?.UPC_SIZE_XXXL},label:"XXXL",key:"UPC_SIZE_XXXL",updItem:b}),null),t(f,r(w,{}),null),t(f,r(g,{get value(){return e?.productObj?.UPC_SIZE_XXL},label:"XXL",key:"UPC_SIZE_XXL",updItem:b}),null),t(f,r(w,{}),null),t(f,r(g,{get value(){return e?.productObj?.UPC_SIZE_XL},label:"XL",key:"UPC_SIZE_XL",updItem:b}),null),t(f,r(w,{}),null),t(f,r(g,{get value(){return e?.productObj?.UPC_SIZE_L},label:"L",key:"UPC_SIZE_L",updItem:b}),null),t(f,r(w,{}),null),t(f,r(g,{get value(){return e?.productObj?.UPC_SIZE_M},label:"M",key:"UPC_SIZE_M",updItem:b}),null),t(f,r(w,{}),null),t(f,r(g,{get value(){return e?.productObj?.UPC_SIZE_S},label:"S",key:"UPC_SIZE_S",updItem:b}),null),a}}),o),t(o,r(k,{get when(){return e?.stockList},get children(){return[et(),(()=>{var a=lt();return t(a,r(k,{get when(){return e?.stock?.Total>0},get children(){return[(()=>{var _=tt(),x=_.firstChild,p=x.nextSibling,d=p.firstChild;return t(d,()=>(e?.stock?.Total*1).toFixed(2)),_})(),r(mt,{}),(()=>{var _=rt(),x=_.firstChild,p=x.nextSibling,d=p.firstChild;return d.firstChild,t(d,()=>(e?.stock?.priceCost*1).toFixed(2),null),_})()]}})),a})(),(()=>{var a=it();return a.firstChild,t(a,r(le,{get each(){return ce(e?.stock?.stockByStore)},children:(_,x)=>(()=>{var p=ot(),d=p.firstChild,$=d.firstChild,C=d.nextSibling,V=C.firstChild;return t(d,()=>Pe?.list?.[_]?.label,$),t(V,()=>(e?.stock?.stockByStore?.[_]?.total*1).toFixed(2)),p})()}),null),a})()]}}),v),t(o,r(le,{get each(){return e?.stockList},children:(a,_)=>(()=>{var x=dt(),p=x.firstChild,d=p.nextSibling,$=d.firstChild,C=d.nextSibling,V=C.firstChild,K=V.firstChild,T=C.nextSibling,E=T.firstChild,I=T.nextSibling,O=I.firstChild,X=O.firstChild,J=I.nextSibling,ee=J.firstChild,f=ee.firstChild;return f.firstChild,t(p,r(ie,{get name(){return yt[a?.type]},size:24,color:"var(--background-red-ssg)"})),t($,()=>Ee(a?.createDate)),t(K,()=>(a?.qty*1).toFixed(2)),t(E,()=>a?.invoice),t(O,()=>de("storeGroupBy")?.[a?.store]?.label,X),t(f,()=>(a?.price*1).toFixed(2),null),x})()}),null),s})()}let yt={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const w=()=>[ue(),"|",ue()],g=l=>{const[i,n]=D(!1),[e,u]=D(""),h=()=>{l?.updItem(l?.key,e()),n(!1)},S=()=>{let L=i();L||u(l?.value),n(!L)};return(()=>{var L=ct(),B=L.firstChild,A=B.firstChild,j=A.firstChild;return A.$$click=S,t(A,()=>l?.label,j),t(B,r(k,{get when(){return i()},get fallback(){return r(k,{get when(){return l?.value},get children(){var q=ut(),G=q.firstChild;return t(G,()=>l?.value),q}})},get children(){return r(ft,{get width(){return l?.width||"160px"},backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e()||""},get placeholder(){return l?.label},colors:"#2b2b2b",handleClick:q=>u(q),onEnter:h})}}),null),L})()},pe=l=>r(k,{get when(){return l?.value},get children(){var i=_t(),n=i.firstChild,e=n.firstChild,u=e.nextSibling,h=u.firstChild;return t(e,()=>l?.label),t(h,()=>l?.value),i}}),$t=async(l,i)=>{let n={params:{id:l,businessId:Q?.profile?.businessYId},form:i},e=Y(129004);return n={...n,...e},await z(n)},Ct=async(l,i)=>{let n={...l};n.ssg_product_key=R(),n.businessId=i;let e={params:{businessId:i},form:n},u=Y(129003);e={...e,...u};{const h=await z(e);return h?.data?.error?{}:h?.data}},be=async l=>{let i={params:l},n=Y(122002);return i={...i,...n},await z(i)},Xt=async l=>{let i=[];l.map(n=>{let e={params:{id:n?.ssg_track_key,idairguide:"all"}},u=Y(802002);e={...e,...u},i.push(e)}),Oe(i,St)},St=async l=>{const n=await z(l);if(n)return n};function It(l){const i=async e=>{let u=Ze(e);var h=await Qe(u,"image/png");let L={qr:URL.createObjectURL(h),lbl:e,lbl2:l?.item?.name?.toUpperCase()},B=await Ye([L]);window.open(B)};let n=[["ASIN","ASIN"],["UPC","UPC"],["code","codigo SSG"],["codeN","codigo numerico"]];return(()=>{var e=pt(),u=e.firstChild;u.firstChild;var h=u.nextSibling;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),t(u,r(le,{each:n,children:(S,L)=>r(k,{get when(){return l?.item?.[S[0]]},get children(){var B=bt(),A=B.firstChild,j=A.nextSibling;return t(A,()=>S[1]),j.$$click=()=>i(l?.item?.[S[0]]),t(j,r(ie,{name:"printer",size:32})),B}})}),null),h.style.setProperty("margin","25px"),re(S=>(S=Ae()?"96vw":"420px")!=null?e.style.setProperty("width",S):e.style.removeProperty("width")),e})()}Le(["click"]);export{Dt as default,St as fetchCSVInve,Xt as loadProduct,$t as updProducts};
