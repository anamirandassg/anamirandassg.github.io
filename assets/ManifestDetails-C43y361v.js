const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CtccZnzM.js","assets/index-QyFZRsay.js","assets/index-BRlA1Q7g.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-CxbxncVK.js","assets/SVG-CAKwlgPS.js","assets/Util-84vxEF7d.js"])))=>i.map(i=>d[i]);
import{l as q,_ as z,r as X,c as D,a as H,o as Z,b as ee,d as te,i as r,e as l,S as p,z as ne,F as ie,E as re,f as G,s as se,j as w,m as K,h as ae,t as v,A as T,J as le}from"./index-QyFZRsay.js";import{a0 as ce,g as R,f as Q,m as oe,e as I,u as de,G as me,O as ue,K as Y,H as ge,I as fe}from"./Util-84vxEF7d.js";import{u as _e}from"./debounces-CPySIorQ.js";import he from"./ButonHrm-DE3t3Ey6.js";import{P as be}from"./ShowQRPrintLabel-Bikis3Zu.js";/* empty css                 */import"./SVG-CAKwlgPS.js";import"./fontkit.es-DqBWNyQn.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-IUGNA4E5.js";import"./Toast-DA0Z0m64.js";var J=v("<h5>"),ye=v('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"></div></div></div><div>'),pe=v("<div> <!>."),ve=v("<div> "),$e=v('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),ke=v('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),xe=v('<div class="icon_status centerBx">'),Be=v("<h5 class=rpto>"),Se=v('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const we=q(()=>z(()=>import("./LoadingColorSpinner-CtccZnzM.js"),__vite__mapDeps([0,1,2,3]))),F=q(()=>z(()=>import("./FlexSpace-CxbxncVK.js"),__vite__mapDeps([4,1,2]))),L=q(()=>z(()=>import("./SVG-CAKwlgPS.js"),__vite__mapDeps([5,1,2,6])));function ze(){const[n,m]=X(),[t,o]=D({search:""}),[f,a]=D(),[_,N]=H(0),[P,O]=D(),[C,E]=H("");_e(E,400),Z(()=>{}),ee(()=>{});const j=async()=>{if(n?.mId&&_()<Y()){N(Y()+7e3);let e={id:n?.mId},c=await Ne(e);o("manifestObj",void 0),a("linked",void 0),o("manifestObj",c),a("linked",{...c?.linkedBags}),t?.province||(o("province",c?.province),o("city",c?.city))}};te(async()=>{let e=[];[33,46,40,41,42,50,52,54,56].map(y=>{let i=y,g=I("M023009")?.whStList?.[i];T?.roles?.[g?.id]?.isActive&&e.push(g)}),O("list",e);let u=[];I("M023009")?.provincias.map(y=>{let i=y.label;T?.roles?.[i]?.isActive&&u.push(y)}),O("prov",u),j()});const x=async()=>{let e={...I("manifestList")};e[n?.mId].linkedBags=t?.manifestObj?.linkedBags,de("manifestList",e),me(fe,ge,e),j()},$=e=>e||"",h=e=>e?" "+e:"",s=e=>($(e?.ybestate)+"_"+$(e?.ybcity)+"_"+$(e?.ybreparto)+"_"+$(e?.ybstreet)+"_"+$(e?.ybstreetNo)).toLowerCase(),b=e=>{let c=e?.consigneeInfo;return h(c?.firstName)+h(c?.middleName)+h(c?.lastName)+h(c?.lastName2)},k=e=>{let c=e?.consigneeInfo,u=h(c?.altPhoneNumber);return h(c?.phoneNumber)+(u?" |"+u:"")},U=async()=>{let e={},c={},u={};t?.manifestObj?.linkedBagsInfo?.map(i=>{if(i?.currentStatus!="YABA_99"){let g=s(i?.consigneeInfo),B=i?.cidentity,A=i?.estate||i?.consigneeInfo?.ybestate,d=i?.city||i?.consigneeInfo?.ybcity,S=i?.consigneeInfo?.ybreparto;if(u[S]||(u[S]=1),c[d]||(c[d]=1),e[g]||(e[g]={city:d,estate:A,rpto:S,address:{ybstreetNo:i?.consigneeInfo?.ybstreetNo,ybstreet:i?.consigneeInfo?.ybstreet,ybapt:i?.consigneeInfo?.ybapt,ybbetwen1:i?.consigneeInfo?.ybbetwen1,ybbetwen2:i?.consigneeInfo?.ybbetwen2},currentStatus:i?.currentStatus,customers:{},bagsNo:0}),!e[g].customers[B]){let M={name:b(i),phoneNumber:k(i),cid:i?.cidentity,nameshipper:i?.nameshipper},V={...i,...M};V.bagsNumb={},e[g].customers[B]=V}let W={bagnumber:i?.bagnumber,idairguide:"all",tracking:i?.tracking,hbls:i?.hbls};e[g].customers[B].bagsNumb[i?.ssg_track_key]=W,e[g].bagsNo+=1}});let y=await be(ue(e),e);window.open(y)};return(()=>{var e=ye(),c=e.firstChild,u=c.firstChild,y=u.firstChild,i=y.nextSibling,g=i.nextSibling,B=g.nextSibling,A=c.nextSibling;return r(y,()=>t?.manifestObj?.name),r(u,l(p,{get when(){return t?.manifestObj?.city},get children(){return["|",(()=>{var d=J();return r(d,()=>t?.manifestObj?.city),d})()]}}),i),r(g,()=>t?.manifestObj?.province),r(u,l(p,{get when(){return!ce(t?.manifestObj?.linkedBags,f?.linked)},get children(){return l(he,{color:"#c8193c",label:"updManifest",handleClick:x})}}),B),B.$$click=U,r(B,l(L,{name:"printer",size:24,color:"firebrick"})),r(A,l(re,{fallback:d=>(()=>{var S=pe(),W=S.firstChild,M=W.nextSibling;return M.nextSibling,r(S,()=>d.toString(),M),S})(),get children(){return l(ne,{get fallback(){return(()=>{var d=ve();return d.firstChild,r(d,l(we,{stroke:"rgb(200 25 60 / 1)",size:62}),null),d})()},get children(){return l(p,{get when(){return t?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(ie,{get each(){return t?.manifestObj?.linkedBagsInfo},children:d=>l(Ie,{item:d,get city(){return t?.manifestObj?.city},get manifestObj(){return t?.manifestObj},get isAlready(){return t?.manifestObj?.linkedBags?.[d.ssg_track_key]},setFormsM:o,get mId(){return n?.mId}})})}})}})}})),G(d=>se(A,` ${w(),"width:86vw;"} margin: 0 auto;`,d)),e})()}const Ie=n=>{const m=()=>{let a=n?.item?.street.split(",");return a.slice(0,a.length-2).join(",")},t=a=>a?" "+a:"",o=()=>{let a=n?.item?.consigneeInfo;return t(a?.firstName)+t(a?.middleName)+t(a?.lastName)+t(a?.lastName2)},f=a=>{n?.item?.currentStatus!=="99"&&n?.setFormsM("manifestObj","linkedBags",n?.item?.ssg_track_key,void 0)};return l(p,{get when(){return n?.manifestObj?.linkedBags[n?.item?.ssg_track_key]},get children(){var a=Se(),_=a.firstChild,N=_.firstChild,P=N.firstChild,O=P.nextSibling,C=N.nextSibling,E=C.firstChild,j=E.firstChild,x=_.nextSibling,$=x.firstChild,h=$.nextSibling;return r(a,l(p,{get when(){return w()},get children(){var s=$e(),b=s.firstChild,k=b.nextSibling;return r(b,o),r(s,l(F,{}),k),k.$$click=f,r(k,l(L,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),s}}),_),r(P,l(L,{name:"open_package_file_outline",size:20})),r(O,()=>n?.item?.bagnumber),r(_,l(p,{get when(){return!w()},get children(){var s=ke(),b=s.firstChild;return r(b,o),s}}),C),r(_,l(F,{}),C),r(j,()=>n?.item?.idairguide),r(_,l(p,{get when(){return!w()},get children(){var s=xe();return s.$$click=f,r(s,l(L,{get name(){return n?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return n?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),s}}),null),r($,m),r(x,l(F,{}),h),r(x,l(p,{get when(){return n?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var s=Be();return r(s,()=>n?.item?.consigneeInfo?.ybreparto),s})(),"|"]}}),h),r(x,l(p,{get when(){return!n?.city&&n?.item?.city},get children(){var s=J();return r(s,()=>n?.item?.city),s}}),null),G(s=>{var b=`client_item_box gWXAaj jlytmu manifest ${w()?"isMobile":""}`,k=` ${w(),"centerBx"} bottombx flxWrp  centerBx`;return b!==s.e&&K(a,s.e=b),k!==s.t&&K(x,s.t=k),s},{e:void 0,t:void 0}),a}})},Re=async(n,m)=>{let t={params:n,data2update:m},o=R(709002);return t={...t,...o},await Q(t)},Ne=async n=>{let m={params:n};if(le()){let t={...I("manifestList")?.[n?.id]},o=[],f=t?.linkedBags;return f&&Object.keys(f)?.map(async a=>{if(a){let _=I("manifestByKeys")?.[a];o.push(_)}}),t.linkedBagsInfo=o,t}else{let t=R(703003);return m={...m,...t},await Q(m)}},Qe=async n=>{let m=[];n.map(t=>{let o={params:{id:t?.ssg_track_key,idairguide:"all"}},f=R(802002);o={...o,...f},m.push(o)}),oe(m,Oe)},Oe=async n=>{const t=await Q(n);if(t)return t};ae(["click"]);export{ze as default,Oe as fetchCSVInve,Qe as loadManifest,Re as updLinkedBags};
