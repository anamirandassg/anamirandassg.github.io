const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-B3berfe5.js","assets/index-ulQ-TQRi.js","assets/index-lCkr9jrN.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-DowtU6xW.js","assets/SVG-HbM4daMy.js"])))=>i.map(i=>d[i]);
import{l as q,_ as F,u as ee,c as L,a as Q,r as te,k as ne,s as re,i,d as l,S as _,ag as ie,H as se,F as ae,G as le,e as G,w as ce,g as S,f as V,p as D,q as z,I as oe,h as de,t as h,o as I,K as H,O as ue,ai as T,M as me}from"./index-ulQ-TQRi.js";import{u as ge}from"./debounces-CvBw6x0E.js";import fe from"./ButonHrm-BqLyfWia.js";import{P as _e}from"./ShowQRPrintLabel-BYQ9prbT.js";/* empty css                 */import"./SVG-HbM4daMy.js";import"./PDFButton-Dz6VzGAS.js";import"./qrcode-DHy8FFhS.js";import"./fontkit.es-CsdXM_oZ.js";import"./InitPrintServices-Bo3sBUqm.js";import"./Toast-BqY88JNg.js";var J=h("<h5>"),he=h('<div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx">'),be=h("<div><div>"),K=h("<div> "),ye=h("<div> <!>."),pe=h('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),ve=h('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),ke=h('<div class="icon_status centerBx">'),$e=h("<h5 class=rpto>"),xe=h('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const Y=q(()=>F(()=>import("./LoadingColorSpinner-B3berfe5.js"),__vite__mapDeps([0,1,2,3]))),W=q(()=>F(()=>import("./FlexSpace-DowtU6xW.js"),__vite__mapDeps([4,1,2]))),M=q(()=>F(()=>import("./SVG-HbM4daMy.js"),__vite__mapDeps([5,1,2])));function Fe(){const[r,g]=ee(),[e,d]=L({search:""}),[b,c]=L(),[f,x]=Q(0),[A,O]=L(),[N,P]=Q("");ge(P,400),te(()=>{}),ne(()=>{});const C=async()=>{if(r?.mId&&f()<T()){x(T()+7e3);let t={id:r?.mId},o=await Se(t);d("manifestObj",void 0),c("linked",void 0),d("manifestObj",o),c("linked",{...o?.linkedBags}),e?.province||(d("province",o?.province),d("city",o?.city))}};re(async()=>{let t=[];[33,46,40,41,42,50,52,54,56].map(m=>{let n=m,u=I("M023009")?.whStList?.[n];H?.roles?.[u?.id]?.isActive&&t.push(u)}),O("list",t);let s=[];I("M023009")?.provincias.map(m=>{let n=m.label;H?.roles?.[n]?.isActive&&s.push(m)}),O("prov",s),C()});const $=async()=>{await we({ssg_manifest_key:r?.mId},{linkedBags:e?.manifestObj?.linkedBags}),C()},v=t=>t||"",y=t=>t?" "+t:"",a=t=>(v(t?.ybestate)+"_"+v(t?.ybcity)+"_"+v(t?.ybreparto)+"_"+v(t?.ybstreet)+"_"+v(t?.ybstreetNo)).toLowerCase(),p=t=>{let o=t?.consigneeInfo;return y(o?.firstName)+y(o?.middleName)+y(o?.lastName)+y(o?.lastName2)},k=t=>{let o=t?.consigneeInfo,s=y(o?.altPhoneNumber);return y(o?.phoneNumber)+(s?" |"+s:"")},U=async()=>{let t={},o={},s={};e?.manifestObj?.linkedBagsInfo?.map(n=>{if(n?.currentStatus!="YABA_99"){let u=a(n?.consigneeInfo),B=n?.cidentity,j=n?.estate||n?.consigneeInfo?.ybestate,w=n?.city||n?.consigneeInfo?.ybcity,E=n?.consigneeInfo?.ybreparto;if(s[E]||(s[E]=1),o[w]||(o[w]=1),t[u]||(t[u]={city:w,estate:j,rpto:E,address:{ybstreetNo:n?.consigneeInfo?.ybstreetNo,ybstreet:n?.consigneeInfo?.ybstreet,ybapt:n?.consigneeInfo?.ybapt,ybbetwen1:n?.consigneeInfo?.ybbetwen1,ybbetwen2:n?.consigneeInfo?.ybbetwen2},currentStatus:n?.currentStatus,customers:{},bagsNo:0}),!t[u].customers[B]){let Z={name:p(n),phoneNumber:k(n),cid:n?.cidentity,nameshipper:n?.nameshipper},R={...n,...Z};R.bagsNumb={},t[u].customers[B]=R}let X={bagnumber:n?.bagnumber,idairguide:"all",tracking:n?.tracking,hbls:n?.hbls};t[u].customers[B].bagsNumb[n?.ssg_track_key]=X,t[u].bagsNo+=1}});let m=await _e(ue(t),t);window.open(m)};return(()=>{var t=be(),o=t.firstChild;return i(t,l(_,{get when(){return e?.manifestObj?.province},get fallback(){return(()=>{var s=K();return s.firstChild,i(s,l(Y,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){var s=he(),m=s.firstChild,n=m.firstChild,u=n.nextSibling,B=u.nextSibling,j=B.nextSibling;return i(n,()=>e?.manifestObj?.name),i(m,l(_,{get when(){return e?.manifestObj?.city},get children(){return["|",(()=>{var w=J();return i(w,()=>e?.manifestObj?.city),w})()]}}),u),i(B,()=>e?.manifestObj?.province),j.$$click=U,i(j,l(M,{name:"printer",size:24,color:"firebrick"})),i(m,l(_,{get when(){return!ie(e?.manifestObj?.linkedBags,b?.linked)},get children(){return l(fe,{color:"#c8193c",label:"updManifest",handleClick:$})}}),null),s}}),o),i(o,l(le,{fallback:s=>(()=>{var m=ye(),n=m.firstChild,u=n.nextSibling;return u.nextSibling,i(m,()=>s.toString(),u),m})(),get children(){return l(se,{get fallback(){return(()=>{var s=K();return s.firstChild,i(s,l(Y,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return l(_,{get when(){return e?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(ae,{get each(){return e?.manifestObj?.linkedBagsInfo},children:s=>l(Be,{item:s,get city(){return e?.manifestObj?.city},get manifestObj(){return e?.manifestObj},get isAlready(){return e?.manifestObj?.linkedBags?.[s.ssg_track_key]},setFormsM:d})})}})}})}})),G(s=>ce(o,` ${S(),"width:86vw;"} margin: 0 auto;`,s)),t})()}const Be=r=>{const g=()=>{let c=r?.item?.street.split(",");return c.slice(0,c.length-2).join(",")},e=c=>c?" "+c:"",d=()=>{let c=r?.item?.consigneeInfo;return e(c?.firstName)+e(c?.middleName)+e(c?.lastName)+e(c?.lastName2)},b=c=>{r?.item?.currentStatus!=="99"&&r?.setFormsM("manifestObj","linkedBags",r?.item?.ssg_track_key,void 0)};return l(_,{get when(){return r?.manifestObj?.linkedBags[r?.item?.ssg_track_key]},get children(){var c=xe(),f=c.firstChild,x=f.firstChild,A=x.firstChild,O=A.nextSibling,N=x.nextSibling,P=N.firstChild,C=P.firstChild,$=f.nextSibling,v=$.firstChild,y=v.nextSibling;return i(c,l(_,{get when(){return S()},get children(){var a=pe(),p=a.firstChild,k=p.nextSibling;return i(p,d),i(a,l(W,{}),k),k.$$click=b,i(k,l(M,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),a}}),f),i(A,l(M,{name:"open_package_file_outline",size:20})),i(O,()=>r?.item?.bagnumber),i(f,l(_,{get when(){return!S()},get children(){var a=ve(),p=a.firstChild;return i(p,d),a}}),N),i(f,l(W,{}),N),i(C,()=>r?.item?.idairguide),i(f,l(_,{get when(){return!S()},get children(){var a=ke();return a.$$click=b,i(a,l(M,{get name(){return r?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return r?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),a}}),null),i(v,g),i($,l(W,{}),y),i($,l(_,{get when(){return r?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var a=$e();return i(a,()=>r?.item?.consigneeInfo?.ybreparto),a})(),"|"]}}),y),i($,l(_,{get when(){return!r?.city&&r?.item?.city},get children(){var a=J();return i(a,()=>r?.item?.city),a}}),null),G(a=>{var p=`client_item_box gWXAaj jlytmu manifest ${S()?"isMobile":""}`,k=` ${S(),"centerBx"} bottombx flxWrp  centerBx`;return p!==a.e&&V(c,a.e=p),k!==a.t&&V($,a.t=k),a},{e:void 0,t:void 0}),c}})},we=async(r,g)=>{let e={params:r,data2update:g},d=D(709002);return e={...e,...d},await z(e)},Se=async r=>{let g={params:r};if(me()){let e={...I("manifestList")?.[r?.id]},d=[],b=I("alinkM")?.[r?.id]?.data2update?.linkedBags||{},c=Object.assign({},e?.linkedBags,b);return e.linkedBags=c,c&&Object.keys(c)?.map(async f=>{if(f){let x=I("manifestByKeys")?.[f];d.push(x)}}),e.linkedBagsInfo=d,e}else{let e=D(703003);return g={...g,...e},await z(g)}},De=async r=>{let g=[];r.map(e=>{let d={params:{id:e?.ssg_track_key,idairguide:"all"}},b=D(802002);d={...d,...b},g.push(d)}),oe(g,Ie)},Ie=async r=>{const e=await z(r);if(e)return e};de(["click"]);export{Fe as default,Ie as fetchCSVInve,De as loadManifest,we as updLinkedBags};
