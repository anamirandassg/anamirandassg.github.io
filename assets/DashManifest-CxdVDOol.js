const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-DAgurGuX.js","assets/index-KY5iNI6o.js","assets/index-DI_XrWgU.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-RcuKhyku.js","assets/SVG-CsVmbTGt.js","assets/ButonHrm-BSeWNUGQ.css","assets/LoadingColorSpinner-DNnK3GdV.js","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-C7CqDF6j.js","assets/AddManifest-DfGHk1Mg.js","assets/DialogHRM-CwGa849n.js","assets/DialogHRM-V9_lZntj.css","assets/debounces-0rrhWFKC.js","assets/InputHr-Cj4xeqKz.js","assets/InputHr-BXFw4d2l.css","assets/ItemOnManifest-DkHzESn4.js","assets/components-Cq3xUmKn.js"])))=>i.map(i=>d[i]);
import{l as y,_ as v,c as ee,a as I,d as oe,i as d,e as c,aW as w,S as W,O as S,F as ce,f as de,x as se,N as me,m as be,n as R,p as N,aq as ue,aR as T,aM as q,aQ as H,an as te,$ as P,t as x,k as M,U as E,v as B,aS as re,aT as ne,aX as ye,aN as ve,aO as xe,aP as pe,o as Se,b as we,D as $e,R as ke,Q as Pe,g as Ce,Z as Oe,M as Me,r as Le,ap as Ae}from"./index-KY5iNI6o.js";import{s as De}from"./App.module-CbHnVtRQ.js";import{OpenModal as Ee}from"./DialogHRM-CwGa849n.js";import{a as Be,b as Ie}from"./ScanningServices-CldyoCqI.js";import{OpenToast as G}from"./Toast-C70N2f8w.js";var Te=x('<div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Subir Pendientes '),qe=x('<div class="_dsplFlx flxWrp spaceAround ">'),Re=x('<div class="centerBx bottombx spaceAround flxWrp"style=margin-top:20px><div style=padding:6px></div><div style=padding:6px></div><div style=padding:6px>'),je=x('<div><div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx grid2Col"></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>'),Qe=x('<div class="centerBx bottombx "><h5> subiendo al servidor <!> / <!> '),Ve=x('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class=""></h5>|<h4 style=font-size:13px>'),Fe=x('<div class="centerBx bottombx "><h5> descargando guias... ');const Ge=y(()=>v(()=>import("./CheckBoxSlide-DAgurGuX.js"),__vite__mapDeps([0,1,2,3]))),z=y(()=>v(()=>import("./ButonHrm-RcuKhyku.js"),__vite__mapDeps([4,1,2,5,6]))),ie=y(()=>v(()=>import("./LoadingColorSpinner-DNnK3GdV.js"),__vite__mapDeps([7,1,2,8]))),[le,ze]=ee({}),fe=()=>M("M023009")?.manifestList?S(M("M023009")?.manifestList):[];function We(t){const[e,a]=ee({}),[l,i]=ee({list:[]}),[g,o]=I(!1),[u,_]=I(0);I("");const h=async s=>{if(_(w()),w()>30){let r=4,b=Array.from(Array(r).keys()),V=Math.ceil(w()/r);const Y=b.map(async n=>{let f=V*n,p=V*(n+1)-1;p>w()&&(p=w()),await E(s.slice(f,p),L)});await Promise.all(Y)}else await E(s,L);_(0)},L=async s=>{let r=M("dbScannedStore"),b=await He(r?.[s]);return delete r[s],P("dbScannedStore",r),pe(S(r)?.length),Ie(),b},C=async()=>{h(Object.keys(M("dbScannedStore")))};let O={};const Z=async s=>{let r=await Ne("guia",s);O=Object.assign({},O,r)},j=async()=>{let s=[];if(S(e).map(r=>{e[r]&&s.push(r)}),o(!0),s.length>0){console.log(s),await E(s,Z);let r=await q(T,H),b=Object.assign({},r,O);await te(T,H,b),await K(),G({text:"El modo offline esta listo para escanear",timeout:2500,id:B()})}else G({text:"Debe selecionar una guia",timeout:2500,id:B()});o(!1)};let A={};const X=async s=>{let r=await Ue(s);A=Object.assign({},A,r)},m=async()=>{let s=[];if(S(e).map(r=>{e[r]&&s.push(r)}),o(!0),s.length>0){await E(s,X);let r=await q(ne,re),b=Object.assign({},r,A);await te(ne,re,b),await K(),G({text:"se descargo con exito la lista de escaneos",timeout:2500,id:B()})}else G({text:"Debe selecionar una guia",timeout:2500,id:B()});o(!1)},$=async()=>{Q()},J=()=>{ye(),setTimeout(()=>{$()},600)},Q=async()=>{await K();let s=[];fe().map(r=>{s.push({guia:r,qty:M("total_guia")?.[r]?M("total_guia")?.[r]:0})}),i("list",s)};return oe(()=>{ae(),$()}),(()=>{var s=je(),r=s.firstChild,b=r.firstChild,V=b.nextSibling,Y=r.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#ffffff"),s.style.setProperty("border-radius","13"),d(r,c(W,{get when(){return w()>0},get children(){return[Te(),c(W,{get when(){return!u()},get fallback(){return(()=>{var n=Qe(),f=n.firstChild,p=f.firstChild,k=p.nextSibling,D=k.nextSibling,F=D.nextSibling;return F.nextSibling,d(n,c(ie,{stroke:"rgb(200 25 60 / 1)",size:32}),f),d(f,()=>u()-w(),k),d(f,u,F),n})()},get children(){var n=qe();return d(n,c(z,{icon:"arrow_up_large",color:"#c8193c",get label(){return`Subir pendientes ${w()}`},handleClick:C})),n}})]}}),b),d(V,c(ce,{get each(){return S(le?.qty)},children:(n,f)=>(()=>{var p=Ve(),k=p.firstChild,D=k.firstChild,F=D.nextSibling,he=F.nextSibling;return d(k,c(Ge,{get initValue(){return e?.[n]},updChange:()=>a(n,!e?.[n]),color:"var(--background-red-ssg)"}),D),d(D,n||""),d(he,()=>le?.qty?.[n]),p})()})),d(s,c(W,{get when(){return!g()},get fallback(){return(()=>{var n=Fe();return d(n,c(ie,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=Re(),f=n.firstChild,p=f.nextSibling,k=p.nextSibling;return d(f,c(z,{icon:"cancel",color:"#4a4a4a",label:"Limpiar",handleClick:J})),d(p,c(z,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar Guias",handleClick:j})),d(k,c(z,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar locaciones",handleClick:m})),n}}),Y),de(n=>{var f=se()?"86vw":"420px",p=se()?"15px 5px":"15px 25px";return f!==n.e&&((n.e=f)!=null?s.style.setProperty("width",f):s.style.removeProperty("width")),p!==n.t&&((n.t=p)!=null?s.style.setProperty("padding",p):s.style.removeProperty("padding")),n},{e:void 0,t:void 0}),s})()}const Ke=t=>{let e=t,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(a);return e.length===13&&l.test(e)&&(e=e.slice(3,12)),e},He=async t=>{let e={};t?.params&&(e.params=t?.params),t?.data2update&&(e.data2update=t?.data2update),t?.form&&(e.form=t?.form);let a=R(t?.actionKey);return e={...e,...a},await N(e)},Ue=async(t,e)=>{let a={params:{airguide:t,":search0":"ssg"}},l=R(815002);a={...a,...l};const i=await N(a);return i?.data?.error?{}:i},Ne=async(t,e)=>{let a={params:{idairguide:e,guia:e,groupBy:"referenceHId",":search0":"guia"}};t.split(" ").map((g,o)=>{g&&(a.params[":search"+o]=g.trim())}),a.params[":guia"]=e+"";let l=R(802001);a={...a,...l};const i=await N(a);return console.log(a),console.log(i),i?.data?.error?{}:i},Ze=async(t,e)=>{let a={params:{":search0":" "},fldsjQry:["createDate","linkedUser","status","name","city","province","workgroup","ssg_manifest_key","isPending"]};me()||(a.params.workgroup=be?.profile?.workgroup?.id+"");let l=R(703001);a={...a,...l};const i=await N(a);if(i?.error)return{};{let g=[];return S(i).map(o=>{let u=i[o];u._id=u?.ssg_manifest_key,ue.put(u,function(h,L){h||console.log("Successfully posted on manifest list")}),g.push(u)}),g}},Xe=()=>new Promise((t,e)=>{T.allDocs({include_docs:!0,descending:!0},function(a,l){t(l.rows)})}),Je=async()=>{let t=await q(xe,ve);P("dbScannedStore",t),pe(S(t)?.length)},ae=()=>{Be(),K(),Je()},K=async()=>{let t=await q(T,H);t||await te(T,H,{});let e={},a={},l={},i={};return fe().map(g=>{i[g]=0}),t&&S(t)?.map(g=>{let o=t?.[g];o?.hbls?.map(u=>{a[u?.hbl]||(a[u?.hbl]=o?.ssg_track_key,l[u?.hbl]=o)}),e[o?.ssg_track_key]||(e[o?.ssg_track_key]=o),o?.guia&&(i[o?.guia]?i[o?.guia]+=1:i[o?.guia]=1)}),ze("qty",i),P("total_guia",i),P("manifestByKeys",e),P("manifestByHbls",a),P("hblsObjDBInd",l),e},mt=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets2:Ze,default:We,initializePouchD:ae,loadManifestOffline:Xe,parseTrcking:Ke},Symbol.toStringTag,{value:"Module"}));var Ye=x('<div><div class="_dsplFlx flxWrp spaceAround centerBx"style="padding:16px 4vw"><h2>Manifiestos</h2><div class="icon_status centerBx"></div><div class="centerBx bottombx "><h5 class="">Entregados</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:16px><div style=padding:4px></div></div><div class=" flxWrp spaceAround "style="padding:16px 5vw">'),et=x("<div> <!>."),tt=x("<div> ");const at=y(()=>v(()=>import("./FlexSpace-C7CqDF6j.js"),__vite__mapDeps([9,1,2]))),st=y(()=>v(()=>import("./SVG-CsVmbTGt.js"),__vite__mapDeps([5,1,2]))),rt=y(()=>v(()=>import("./AddManifest-DfGHk1Mg.js"),__vite__mapDeps([10,1,2,11,12,13]))),nt=y(()=>v(()=>import("./LoadingColorSpinner-DNnK3GdV.js"),__vite__mapDeps([7,1,2,8]))),it=y(()=>v(()=>import("./InputHr-Cj4xeqKz.js"),__vite__mapDeps([14,1,2,15]))),lt=y(()=>v(()=>import("./CheckBoxSlide-DAgurGuX.js"),__vite__mapDeps([0,1,2,3]))),ot=y(()=>v(()=>import("./ItemOnManifest-DkHzESn4.js"),__vite__mapDeps([16,1,2,13,11,12,17])));function ct(){const[t,e]=I(0),[a,l]=I("");Se(()=>{}),we(()=>{}),oe(async()=>{ae(),U()});const i=()=>{let _=B(),h={};h.id=_,h.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},h.content=c(rt,{modalId:_,refetch:u}),Ee(h)},g=_=>{e(_),u()},[o,{refetch:u}]=$e(a,async _=>await U());return(()=>{var _=Ye(),h=_.firstChild,L=h.firstChild,C=L.nextSibling,O=C.nextSibling,Z=O.firstChild,j=h.nextSibling,A=j.firstChild,X=j.nextSibling;return d(h,c(at,{}),C),C.$$click=i,d(C,c(st,{name:"plus",size:22})),d(O,c(lt,{get initValue(){return t()},updChange:g,color:"var(--background-red-ssg)"}),Z),d(A,c(it,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return a()},placeholder:"search...",colors:"#2b2b2b",handleClick:m=>l(m)})),d(X,c(Pe,{fallback:m=>(()=>{var $=et(),J=$.firstChild,Q=J.nextSibling;return Q.nextSibling,d($,()=>m.toString(),Q),$})(),get children(){return c(ke,{get fallback(){return(()=>{var m=tt();return m.firstChild,d(m,c(nt,{stroke:"rgb(200 25 60 / 1)",size:62}),null),m})()},get children(){return c(W,{get when(){return o()},get children(){return c(ce,{get each(){return o()},children:(m,$)=>c(ot,{item:m,refetch:u})})}})}})}})),de(()=>Ce(_,De.App)),_})()}const dt=async(t,e)=>{Oe()&&U()},U=async()=>{let t=await _e(),e=[];return S(t).map(a=>{let l=t?.[a];e.push(l)}),e},ut=async t=>{let e=[];t.map(a=>{let l={params:{id:a?.ssg_track_key,idairguide:"all"}},i=R(802002);l={...l,...i},e.push(l)}),E(e,ge)},ge=async t=>{const a=await Me(t);if(a)return a},_e=async()=>{let t=await q(ue,Ae);return P("manifestList",t),t};Le(["click"]);const bt=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets:dt,default:ct,fetchCSVInve:ge,handleListManifest:_e,loadManifest2:ut,loadManifestOffline:U},Symbol.toStringTag,{value:"Module"}));export{bt as D,mt as S,_e as h,ae as i,U as l};
