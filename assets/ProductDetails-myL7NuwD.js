const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BoG0YNPr.js","assets/index-CX08qMr9.js","assets/index-W9fcnr7G.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-DtfvfJaD.js","assets/debounces-Bxi15UZt.js","assets/SVG-DBuw3s_z.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-hKEW-O6U.js","assets/ButonUploadHrm-Dn1od-96.js","assets/Util-D2YTzGDx.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-YqzE3JCv.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-DSOoyUdn.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as P,_ as E,u as ve,c as W,a as I,o as he,h as me,m as ge,i as t,d as r,k as se,e as fe,t as _,S as C,f as X,n as Z,g as xe,j as $e,H as ye,F as ee}from"./index-CX08qMr9.js";import{b as V,f as T,e as Ce,a as Q,O as te,p as Se,g as q}from"./Util-D2YTzGDx.js";import{u as Be}from"./debounces-Bxi15UZt.js";import"./globalSignal-wLi-6lpX.js";import"./ButonHrm-BEC_Ro5Q.js";import{g as we,a as ke,c as Ie,i as Pe,b as Ee,u as Oe}from"./handelImagesServices-kQ3-lwp6.js";import{LookupInventory as Ae}from"./DashInventory-loWcc4A3.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-DBuw3s_z.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-Dg-o5fgk.js";var De=_('<div class="icon_status centerBx">'),Fe=_("<div style=width:300px;position:relative;><img alt=sf><div>"),je=_("<div style=width:300px;position:relative;><img alt=sf>"),qe=_('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Le=_('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px>'),Me=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Ve=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Te=_('<div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx centerBx unit"style=padding:30px></div><div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:</h4></div></div><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><h4>Factura</h4></div><div class="tr_bar_40 "><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator>'),Re=_("<div><div style=padding:30px>"),Ue=_("<div> "),We=_("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Qe=_('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ye=_('<div class="bottombx centerBx unit"><div class=tr_bar_20><h5></h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_40 "><h4></h4></div><div class="tr_bar_40 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),re=_("<div style=margin:8px>"),ze=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),Ge=_("<div class=unitBx><h5>"),He=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const le=P(()=>E(()=>import("./LoadingColorSpinner-BoG0YNPr.js"),__vite__mapDeps([0,1,2,3]))),Ke=P(()=>E(()=>import("./DropDwnSearch-DtfvfJaD.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),Je=P(()=>E(()=>import("./FlexSpace-hKEW-O6U.js"),__vite__mapDeps([9,1,2]))),Ne=P(()=>E(()=>import("./ButonUploadHrm-Dn1od-96.js"),__vite__mapDeps([10,1,2,6,7,11,12]))),Xe=P(()=>E(()=>import("./CheckBoxSlide-YqzE3JCv.js"),__vite__mapDeps([13,1,2,14]))),Ze=P(()=>E(()=>import("./InputHr-DSOoyUdn.js"),__vite__mapDeps([15,1,2,16]))),et=P(()=>E(()=>import("./SVG-DBuw3s_z.js"),__vite__mapDeps([6,1,2,7])));function gt(s){const[l,a]=ve(),[e,h]=W({search:""});W(),W();const[m,R]=I(null),[O,A]=I(!1),[D,S]=I(!1),[L,ae]=I(""),[st,ne]=I("");Be(ne,400),he(()=>{}),me(()=>{});const G=async()=>{if(l?.mId){let i={id:l?.mId,businessId:se?.profile?.businessYId},p=await lt(i),c=await Ae(l?.mId),g=0,b=0,$=[],y={};te(c)?.map(w=>{let n=c[w]?.store;c[w]?.products?.map(v=>{if(l?.mId===v?.product?.id){let d={...c[w]};delete d.products,d.qty=v?.qty*1,d.price=v?.price*1,g+=v?.price*1*v?.qty*1,y[n]||(y[n]={total:0}),y[n].total+=d.qty,b+=v?.qty*1,$.push(d)}})});const j=g/b;ae(we()+ke()+"/"+p?.productImageUrl),h("stockList",$),h("stock",{Balance:g,Total:b,priceCost:j,stockByStore:y}),h("productObj",p)}};ge(async()=>{G()});const U=async i=>{await tt(l?.mId,i),G()},H=async(i,p)=>{let c=await Ee(i.type,p,1);if(await Oe(c,i)){let b={...e?.productObj?.thumbnails};b[p]=1,await U({productImageUrl:p,thumbnails:b}),S(!1),A(!1)}else S(!1)},oe=async()=>{if(S(!0),m()?.name.split(".").pop()==="webp"){let i=e?.productObj?.code+"/"+q()+q()+".webp";H(m()?.file,i)}else{let i=await Ie(m()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),p=await Pe(i),g=await(await fetch(p)).blob(),b=e?.productObj?.code+"/"+q()+q()+".webp";H(g,b)}},ce=i=>{R(i),A(!0)},de=i=>{U({isPublic:i?"9":null})},F=async(i,p)=>{U({[i]:p})},ue=async(i,p)=>{rt(e?.productObj,i)};return(()=>{var i=Re(),p=i.firstChild;return t(i,r(C,{get when(){return e?.productObj?.code},get fallback(){return(()=>{var c=Ue();return c.firstChild,t(c,r(le,{stroke:"rgb(200 25 60 / 1)",size:62}),null),c})()},get children(){var c=Le(),g=c.firstChild,b=g.firstChild,$=b.firstChild,y=$.nextSibling,j=y.firstChild,w=y.nextSibling,n=g.nextSibling,v=n.nextSibling,d=v.firstChild,o=d.nextSibling;return t(g,r(C,{get when(){return m()?.source},get children(){var f=Fe(),x=f.firstChild,B=x.nextSibling;return t(B,r(C,{get when(){return!D()},get fallback(){return(()=>{var u=We(),k=u.firstChild;return t(u,r(le,{stroke:"rgb(200 25 60 / 1)",size:32}),k),u})()},get children(){var u=De();return u.$$click=oe,t(u,r(et,{name:"arrow_up_large",size:24})),u}})),X(u=>{var k=m()?.source,M=D()?"floatBtn loading":"floatBtn ";return k!==u.e&&Z(x,"src",u.e=k),M!==u.t&&xe(B,u.t=M),u},{e:void 0,t:void 0}),f}}),b),t(g,r(C,{get when(){return $e(()=>!!L())()&&!m()?.source},get children(){var f=je(),x=f.firstChild;return X(()=>Z(x,"src",L())),f}}),b),t($,()=>e?.productObj?.name),t(y,r(Xe,{get initValue(){return e?.productObj?.isPublic},updChange:de,color:"var(--background-red-ssg)"}),j),t(w,r(Ne,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ce})),t(b,r(C,{get when(){return ye()},get children(){var f=qe(),x=f.firstChild,B=x.nextSibling;return t(B,r(Ke,{get list(){return Q("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:u=>ue(u.id),width:"260px"})),f}}),null),t(d,r(z,{get value(){return e?.productObj?.name},label:"Nombre:",key:"name",updItem:F})),t(o,r(ie,{get value(){return e?.productObj?.category},label:"Categoria:",key:"category",updItem:F}),null),t(o,r(Y,{}),null),t(o,r(ie,{get value(){return e?.productObj?.unit},label:"U/M:",key:"unit",updItem:F}),null),t(o,r(Y,{}),null),t(o,r(z,{get value(){return e?.productObj?.brand},label:"Marca:",key:"brand",updItem:F}),null),t(o,r(Y,{}),null),t(o,r(z,{get value(){return e?.productObj?.model},label:"Modelo:",key:"model",updItem:F}),null),c}}),p),t(i,r(C,{get when(){return e?.stockList&&e?.stock?.Total>0},get children(){var c=Te(),g=c.firstChild,b=g.nextSibling,$=b.nextSibling;$.firstChild;var y=$.nextSibling,j=y.nextSibling,w=j.nextSibling;return w.nextSibling,t(b,r(C,{get when(){return e?.stock?.Total>0},get children(){return[(()=>{var n=Me(),v=n.firstChild,d=v.nextSibling,o=d.firstChild;return t(o,()=>(e?.stock?.Total*1).toFixed(2)),n})(),r(Je,{}),(()=>{var n=Ve(),v=n.firstChild,d=v.nextSibling,o=d.firstChild;return o.firstChild,t(o,()=>(e?.stock?.priceCost*1).toFixed(2),null),n})()]}})),t($,r(ee,{get each(){return te(e?.stock?.stockByStore)},children:(n,v)=>(()=>{var d=Qe(),o=d.firstChild,f=o.firstChild,x=o.nextSibling,B=x.firstChild;return t(o,()=>Q("storeGroupBy")?.[n]?.label,f),t(B,()=>(e?.stock?.stockByStore?.[n]?.total*1).toFixed(2)),d})()}),null),t(c,r(ee,{get each(){return e?.stockList},children:(n,v)=>(()=>{var d=Ye(),o=d.firstChild,f=o.firstChild,x=o.nextSibling,B=x.firstChild,u=B.firstChild,k=x.nextSibling,M=k.firstChild,K=k.nextSibling,J=K.firstChild,_e=J.firstChild,be=K.nextSibling,pe=be.firstChild,N=pe.firstChild;return N.firstChild,t(f,()=>Se(n?.createDate)),t(u,()=>(n?.qty*1).toFixed(2)),t(M,()=>n?.invoice),t(J,()=>Q("storeGroupBy")?.[n?.store]?.label,_e),t(N,()=>(n?.price*1).toFixed(2),null),d})()}),null),c}}),p),i})()}const Y=()=>[re(),"|",re()],z=s=>{const[l,a]=I(!1),[e,h]=I(""),m=()=>{s?.updItem(s?.key,e()),a(!1)},R=()=>{let O=l();O||h(s?.value),a(!O)};return r(C,{get when(){return s?.value},get children(){var O=ze(),A=O.firstChild,D=A.firstChild;return D.$$click=R,t(D,()=>s?.label),t(A,r(C,{get when(){return l()},get fallback(){return(()=>{var S=Ge(),L=S.firstChild;return t(L,()=>s?.value),S})()},get children(){return r(Ze,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:S=>h(S),onEnter:m})}}),null),O}})},ie=s=>r(C,{get when(){return s?.value},get children(){var l=He(),a=l.firstChild,e=a.firstChild,h=e.nextSibling,m=h.firstChild;return t(e,()=>s?.label),t(m,()=>s?.value),l}}),tt=async(s,l)=>{let a={params:{id:s,businessId:se?.profile?.businessYId},form:l},e=V(129004);return a={...a,...e},await T(a)},rt=async(s,l)=>{let a={...s};a.ssg_product_key=q(),a.businessId=l;let e={params:{businessId:l},form:a},h=V(129003);e={...e,...h};{const m=await T(e);return m?.data?.error?{}:m?.data}},lt=async s=>{let l={params:s},a=V(122002);return l={...l,...a},await T(l)},ft=async s=>{let l=[];s.map(a=>{let e={params:{id:a?.ssg_track_key,idairguide:"all"}},h=V(802002);e={...e,...h},l.push(e)}),Ce(l,it)},it=async s=>{const a=await T(s);if(a)return a};fe(["click"]);export{gt as default,it as fetchCSVInve,ft as loadProduct,tt as updProducts};
