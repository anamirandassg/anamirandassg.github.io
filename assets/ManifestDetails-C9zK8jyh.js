const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CAQbMN22.js","assets/index-MWcyRJ7Y.js","assets/index-BmzAZVve.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-P3esQWD3.js","assets/debounces-CWPhYdOE.js","assets/SVG-0DyuRqFt.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-D2xE4IT5.js","assets/InputHr-DgV7Wcxw.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as O,_ as N,u as ee,c as E,a as V,r as te,k as ne,s as re,i,d as l,S as _,aj as ie,H as se,F as ae,G as le,e as G,w as ce,g as S,f as T,p as F,q as R,I as oe,h as de,t as h,o as I,K as Q,O as ue,ak as H,M as me}from"./index-MWcyRJ7Y.js";import{u as ge}from"./debounces-CWPhYdOE.js";import fe from"./ButonHrm-DYarANhh.js";import{P as _e}from"./ShowQRPrintLabel-DV-3ePBv.js";/* empty css                 */import"./SVG-0DyuRqFt.js";import"./PDFButton-D6iUlA_X.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-DjiWixPQ.js";import"./InitPrintServices-DDjs88_M.js";import"./Toast-kUDxtYWW.js";var J=h("<h5>"),he=h('<div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx">'),be=h("<div><div>"),K=h("<div> "),pe=h("<div> <!>."),ye=h('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),ve=h('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),ke=h('<div class="icon_status centerBx">'),$e=h("<h5 class=rpto>"),xe=h('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const Y=O(()=>N(()=>import("./LoadingColorSpinner-CAQbMN22.js"),__vite__mapDeps([0,1,2,3])));O(()=>N(()=>import("./DropDwnSearch-P3esQWD3.js"),__vite__mapDeps([4,1,2,5,6,7])));const q=O(()=>N(()=>import("./FlexSpace-D2xE4IT5.js"),__vite__mapDeps([8,1,2])));O(()=>N(()=>import("./InputHr-DgV7Wcxw.js"),__vite__mapDeps([9,1,2,10])));const P=O(()=>N(()=>import("./SVG-0DyuRqFt.js"),__vite__mapDeps([6,1,2])));function qe(){const[r,g]=ee(),[e,d]=E({search:""});E();const[b,c]=E(),[f,x]=V(0),[L,j]=E(),[C,D]=V("");ge(D,400),te(()=>{}),ne(()=>{});const A=async()=>{if(r?.mId&&f()<H()){x(H()+7e3);let t={id:r?.mId},o=await Se(t);d("manifestObj",void 0),c("linked",void 0),d("manifestObj",o),c("linked",{...o?.linkedBags}),e?.province||(d("province",o?.province),d("city",o?.city))}};re(async()=>{let t=[];[33,46,40,41,42,50,52,54,56].map(m=>{let n=m,u=I("M023009")?.whStList?.[n];Q?.roles?.[u?.id]?.isActive&&t.push(u)}),j("list",t);let s=[];I("M023009")?.provincias.map(m=>{let n=m.label;Q?.roles?.[n]?.isActive&&s.push(m)}),j("prov",s),A()});const $=async()=>{await we({ssg_manifest_key:r?.mId},{linkedBags:e?.manifestObj?.linkedBags}),A()},v=t=>t||"",p=t=>t?" "+t:"",a=t=>(v(t?.ybestate)+"_"+v(t?.ybcity)+"_"+v(t?.ybreparto)+"_"+v(t?.ybstreet)+"_"+v(t?.ybstreetNo)).toLowerCase(),y=t=>{let o=t?.consigneeInfo;return p(o?.firstName)+p(o?.middleName)+p(o?.lastName)+p(o?.lastName2)},k=t=>{let o=t?.consigneeInfo,s=p(o?.altPhoneNumber);return p(o?.phoneNumber)+(s?" |"+s:"")},U=async()=>{let t={},o={},s={};e?.manifestObj?.linkedBagsInfo?.map(n=>{if(n?.currentStatus!="YABA_99"){let u=a(n?.consigneeInfo),B=n.cidentity,M=n?.estate||n?.consigneeInfo?.ybestate,w=n?.city||n?.consigneeInfo?.ybcity,W=n?.consigneeInfo?.ybreparto;if(s[W]||(s[W]=1),o[w]||(o[w]=1),t[u]||(t[u]={city:w,estate:M,rpto:W,address:{ybstreetNo:n?.consigneeInfo?.ybstreetNo,ybstreet:n?.consigneeInfo?.ybstreet,ybapt:n?.consigneeInfo?.ybapt,ybbetwen1:n?.consigneeInfo?.ybbetwen1,ybbetwen2:n?.consigneeInfo?.ybbetwen2},currentStatus:n?.currentStatus,customers:{},bagsNo:0}),!t[u].customers[B]){let Z={name:y(n),phoneNumber:k(n),cid:n?.cidentity,nameshipper:n?.nameshipper},z={...n,...Z};z.bagsNumb={},t[u].customers[B]=z}let X={bagnumber:n?.bagnumber,idairguide:"all",tracking:n?.tracking,hbls:n?.hbls};t[u].customers[B].bagsNumb[n?.ssg_track_key]=X,t[u].bagsNo+=1}});let m=await _e(ue(t),t);window.open(m)};return(()=>{var t=be(),o=t.firstChild;return i(t,l(_,{get when(){return e?.manifestObj?.province},get fallback(){return(()=>{var s=K();return s.firstChild,i(s,l(Y,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){var s=he(),m=s.firstChild,n=m.firstChild,u=n.nextSibling,B=u.nextSibling,M=B.nextSibling;return i(n,()=>e?.manifestObj?.name),i(m,l(_,{get when(){return e?.manifestObj?.city},get children(){return["|",(()=>{var w=J();return i(w,()=>e?.manifestObj?.city),w})()]}}),u),i(B,()=>e?.manifestObj?.province),M.$$click=U,i(M,l(P,{name:"printer",size:24,color:"firebrick"})),i(m,l(_,{get when(){return!ie(e?.manifestObj?.linkedBags,b?.linked)},get children(){return l(fe,{color:"#c8193c",label:"updManifest",handleClick:$})}}),null),s}}),o),i(o,l(le,{fallback:s=>(()=>{var m=pe(),n=m.firstChild,u=n.nextSibling;return u.nextSibling,i(m,()=>s.toString(),u),m})(),get children(){return l(se,{get fallback(){return(()=>{var s=K();return s.firstChild,i(s,l(Y,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return l(_,{get when(){return e?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(ae,{get each(){return e?.manifestObj?.linkedBagsInfo},children:s=>l(Be,{item:s,get city(){return e?.manifestObj?.city},get manifestObj(){return e?.manifestObj},get isAlready(){return e?.manifestObj?.linkedBags?.[s.ssg_track_key]},setFormsM:d})})}})}})}})),G(s=>ce(o,` ${S(),"width:86vw;"} margin: 0 auto;`,s)),t})()}const Be=r=>{const g=()=>{let c=r?.item?.street.split(",");return c.slice(0,c.length-2).join(",")},e=c=>c?" "+c:"",d=()=>{let c=r?.item?.consigneeInfo;return e(c?.firstName)+e(c?.middleName)+e(c?.lastName)+e(c?.lastName2)},b=c=>{r?.item?.currentStatus!=="99"&&r?.setFormsM("manifestObj","linkedBags",r?.item?.ssg_track_key,void 0)};return l(_,{get when(){return r?.manifestObj?.linkedBags[r?.item?.ssg_track_key]},get children(){var c=xe(),f=c.firstChild,x=f.firstChild,L=x.firstChild,j=L.nextSibling,C=x.nextSibling,D=C.firstChild,A=D.firstChild,$=f.nextSibling,v=$.firstChild,p=v.nextSibling;return i(c,l(_,{get when(){return S()},get children(){var a=ye(),y=a.firstChild,k=y.nextSibling;return i(y,d),i(a,l(q,{}),k),k.$$click=b,i(k,l(P,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),a}}),f),i(L,l(P,{name:"open_package_file_outline",size:20})),i(j,()=>r?.item?.bagnumber),i(f,l(_,{get when(){return!S()},get children(){var a=ve(),y=a.firstChild;return i(y,d),a}}),C),i(f,l(q,{}),C),i(A,()=>r?.item?.idairguide),i(f,l(_,{get when(){return!S()},get children(){var a=ke();return a.$$click=b,i(a,l(P,{get name(){return r?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return r?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),a}}),null),i(v,g),i($,l(q,{}),p),i($,l(_,{get when(){return r?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var a=$e();return i(a,()=>r?.item?.consigneeInfo?.ybreparto),a})(),"|"]}}),p),i($,l(_,{get when(){return!r?.city&&r?.item?.city},get children(){var a=J();return i(a,()=>r?.item?.city),a}}),null),G(a=>{var y=`client_item_box gWXAaj jlytmu manifest ${S()?"isMobile":""}`,k=` ${S(),"centerBx"} bottombx flxWrp  centerBx`;return y!==a.e&&T(c,a.e=y),k!==a.t&&T($,a.t=k),a},{e:void 0,t:void 0}),c}})},we=async(r,g)=>{let e={params:r,data2update:g},d=F(709002);return e={...e,...d},await R(e)},Se=async r=>{let g={params:r};if(me()){let e={...I("manifestList")?.[r?.id]},d=[],b=I("alinkM")?.[r?.id]?.data2update?.linkedBags||{},c=Object.assign({},e?.linkedBags,b);return c&&Object.keys(c)?.map(async f=>{if(f){let x=I("manifestByKeys")?.[f];d.push(x)}}),e.linkedBagsInfo=d,e}else{let e=F(703003);return g={...g,...e},await R(g)}},Fe=async r=>{let g=[];r.map(e=>{let d={params:{id:e?.ssg_track_key,idairguide:"all"}},b=F(802002);d={...d,...b},g.push(d)}),oe(g,Ie)},Ie=async r=>{const e=await R(r);if(e)return e};de(["click"]);export{qe as default,Ie as fetchCSVInve,Fe as loadManifest,we as updLinkedBags};
