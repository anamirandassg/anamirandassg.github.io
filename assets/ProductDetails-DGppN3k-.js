const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-7bm8QQMW.js","assets/index-D0zGioQA.js","assets/index-DvBVPk7j.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-DU2RokID.js","assets/debounces-BtxWZRx0.js","assets/SVG-BDd4Tgjc.js","assets/Util-C4Gv2Rs-.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-BP1xokXW.js","assets/ButonUploadHrm-DOTupcMM.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-D9nvJrU8.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-CYefr-yV.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as A,_ as E,p as ve,c as H,a as O,o as he,k as ge,b as me,i as e,d as r,S,e as ee,s as te,g as xe,m as fe,N as $e,F as re,n as oe,h as ye,t as d}from"./index-D0zGioQA.js";import{d as K,O as le,e as Ce,c as Q,f as Y,j as Se,b as R}from"./Util-C4Gv2Rs-.js";import{u as Be}from"./debounces-BtxWZRx0.js";import{c as we,i as ke,g as Ie,a as Pe,b as Oe,u as Ae}from"./handelImagesServices-BoTdpEOi.js";import{LookupInventory as Ee}from"./DashInventory-BKliK96h.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-Dm5hHt4I.js";var je=d('<div class="icon_status centerBx">'),De=d("<div style=width:300px;max-height:300px;position:relative;><img alt=sf><div>"),Fe=d("<div style=width:300px;position:relative;><img alt=sf>"),qe=d('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Le=d('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px>'),Me=d("<div class=hseparator>"),Ve=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Te=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Re=d('<div class="bottombx centerBx unit"style=padding:30px>'),Ue=d('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),We=d('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class="icon_status centerBx "style=margin-right:52px></div><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><div class=" centerBx spaceAround"><h4>Factura</h4></div></div><div class="tr_bar_40 centerBx spaceAround"><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),Qe=d("<div> "),Ye=d("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),ze=d('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ne=d('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),ie=d("<div style=margin:8px>"),Ge=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),He=d("<div class=unitBx><h5>"),Ke=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const se=A(()=>E(()=>import("./LoadingColorSpinner-7bm8QQMW.js"),__vite__mapDeps([0,1,2,3]))),Je=A(()=>E(()=>import("./DropDwnSearch-DU2RokID.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),Xe=A(()=>E(()=>import("./FlexSpace-BP1xokXW.js"),__vite__mapDeps([9,1,2]))),Ze=A(()=>E(()=>import("./ButonUploadHrm-DOTupcMM.js"),__vite__mapDeps([10,1,2,6,7,11]))),et=A(()=>E(()=>import("./CheckBoxSlide-D9nvJrU8.js"),__vite__mapDeps([12,1,2,13]))),tt=A(()=>E(()=>import("./InputHr-CYefr-yV.js"),__vite__mapDeps([14,1,2,15]))),ae=A(()=>E(()=>import("./SVG-BDd4Tgjc.js"),__vite__mapDeps([6,1,2,7])));function ht(a){const[l,n]=ve(),[t,v]=H({search:""});H(),H();const[h,z]=O(null),[j,L]=O(!1),[M,w]=O(!1),[U,ce]=O(""),[nt,de]=O("");Be(de,400),he(()=>{}),ge(()=>{});const J=async()=>{if(l?.mId){let s={id:l?.mId,businessId:oe?.profile?.businessYId},_=await st(s),f=await Ee(l?.mId),k=0,$=0,i=[],o={};le(f)?.map(b=>{let c=f[b]?.store;f[b]?.products?.map(g=>{if(l?.mId===g?.product?.id){let m={...f[b]};delete m.products,m.qty=g?.qty*1,m.price=g?.price*1,k+=g?.price*1*g?.qty*1,o[c]||(o[c]={total:0}),o[c].total+=m.qty,$+=g?.qty*1,i.push(m)}})});const p=k/$;ce(Ie()+Pe()+"/"+_?.productImageUrl),v("stockList",i),v("stock",{Balance:k,Total:$,priceCost:p,stockByStore:o}),v("productObj",_)}};me(async()=>{J()});const N=async s=>{await lt(l?.mId,s),J()},X=async(s,_)=>{let f=await Oe(s.type,_,1);if(await Ae(f,s)){let $={...t?.productObj?.thumbnails};$[_]=1,await N({productImageUrl:_,thumbnails:$}),w(!1),L(!1)}else w(!1)},ue=async()=>{if(w(!0),h()?.name.split(".").pop()==="webp"){let s=t?.productObj?.code+"/"+R()+R()+".webp";X(h()?.file,s)}else{let s=await we(h()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),_=await ke(s),k=await(await fetch(_)).blob(),$=t?.productObj?.code+"/"+R()+R()+".webp";X(k,$)}},_e=s=>{z(s),L(!0)},be=s=>{N({isPublic:s?"9":null})},x=async(s,_)=>{N({[s]:_})},pe=async(s,_)=>{it(t?.productObj,s)};return(()=>{var s=We(),_=s.firstChild,f=_.firstChild,k=f.nextSibling,$=k.nextSibling;return $.nextSibling,e(s,r(S,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var i=Qe();return i.firstChild,e(i,r(se,{stroke:"rgb(200 25 60 / 1)",size:62}),null),i})()},get children(){var i=Le(),o=i.firstChild,p=o.firstChild,b=p.firstChild,c=b.nextSibling,g=c.firstChild,m=c.nextSibling,V=o.nextSibling,G=V.nextSibling,T=G.firstChild,y=T.nextSibling,B=y.nextSibling,D=B.nextSibling;return e(o,r(S,{get when(){return h()?.source},get children(){var C=De(),I=C.firstChild,F=I.nextSibling;return e(F,r(S,{get when(){return!M()},get fallback(){return(()=>{var u=Ye(),W=u.firstChild;return e(u,r(se,{stroke:"rgb(200 25 60 / 1)",size:32}),W),u})()},get children(){var u=je();return u.$$click=ue,e(u,r(ae,{name:"arrow_up_large",size:24})),u}})),ee(u=>{var W=h()?.source,Z=M()?"floatBtn loading":"floatBtn ";return W!==u.e&&te(I,"src",u.e=W),Z!==u.t&&xe(F,u.t=Z),u},{e:void 0,t:void 0}),C}}),p),e(o,r(S,{get when(){return fe(()=>!!U())()&&!h()?.source},get children(){var C=Fe(),I=C.firstChild;return ee(()=>te(I,"src",U())),C}}),p),e(b,()=>t?.productObj?.name),e(c,r(et,{get initValue(){return t?.productObj?.isPublic},updChange:be,color:"var(--background-red-ssg)"}),g),e(m,r(Ze,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:_e})),e(p,r(S,{get when(){return $e()},get children(){var C=qe(),I=C.firstChild,F=I.nextSibling;return e(F,r(Je,{get list(){return K("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:u=>pe(u.id),width:"260px"})),C}}),null),e(T,r(P,{get value(){return t?.productObj?.name},label:"Nombre:",key:"name",updItem:x})),e(y,r(ne,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:x}),null),e(y,r(q,{}),null),e(y,r(ne,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:x}),null),e(y,r(q,{}),null),e(y,r(P,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:x}),null),e(y,r(q,{}),null),e(y,r(P,{get value(){return t?.productObj?.model},label:"Modelo:",key:"model",updItem:x}),null),e(B,r(P,{get value(){return t?.productObj?.ASIN},label:"ASIN:",key:"ASIN",updItem:x}),null),e(B,r(q,{}),null),e(B,r(P,{get value(){return t?.productObj?.UPC},label:"UPC:",key:"UPC",updItem:x}),null),e(B,r(q,{}),null),e(B,r(P,{get value(){return t?.productObj?.code},label:"codigo:",key:"code",updItem:x}),null),e(D,r(P,{get value(){return t?.productObj?.description},label:"Description:",key:"description",updItem:x}),null),e(D,r(q,{}),null),e(D,r(P,{get value(){return t?.productObj?.salePrice},label:"Precio Venta:",key:"salePrice",updItem:x}),null),i}}),_),e(_,r(S,{get when(){return t?.stockList},get children(){return[Me(),(()=>{var i=Re();return e(i,r(S,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Ve(),p=o.firstChild,b=p.nextSibling,c=b.firstChild;return e(c,()=>(t?.stock?.Total*1).toFixed(2)),o})(),r(Xe,{}),(()=>{var o=Te(),p=o.firstChild,b=p.nextSibling,c=b.firstChild;return c.firstChild,e(c,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),i})(),(()=>{var i=Ue();return i.firstChild,e(i,r(re,{get each(){return le(t?.stock?.stockByStore)},children:(o,p)=>(()=>{var b=ze(),c=b.firstChild,g=c.firstChild,m=c.nextSibling,V=m.firstChild;return e(c,()=>K("storeGroupBy")?.[o]?.label,g),e(V,()=>(t?.stock?.stockByStore?.[o]?.total*1).toFixed(2)),b})()}),null),i})()]}}),f),e(_,r(re,{get each(){return t?.stockList},children:(i,o)=>(()=>{var p=Ne(),b=p.firstChild,c=b.nextSibling,g=c.firstChild,m=c.nextSibling,V=m.firstChild,G=V.firstChild,T=m.nextSibling,y=T.firstChild,B=T.nextSibling,D=B.firstChild,C=D.firstChild,I=B.nextSibling,F=I.firstChild,u=F.firstChild;return u.firstChild,e(b,r(ae,{get name(){return rt[i?.type]},size:24,color:"var(--background-red-ssg)"})),e(g,()=>Ce(i?.createDate)),e(G,()=>(i?.qty*1).toFixed(2)),e(y,()=>i?.invoice),e(D,()=>K("storeGroupBy")?.[i?.store]?.label,C),e(u,()=>(i?.price*1).toFixed(2),null),p})()}),null),s})()}let rt={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const q=()=>[ie(),"|",ie()],P=a=>{const[l,n]=O(!1),[t,v]=O(""),h=()=>{a?.updItem(a?.key,t()),n(!1)},z=()=>{let j=l();j||v(a?.value),n(!j)};return(()=>{var j=Ge(),L=j.firstChild,M=L.firstChild;return M.$$click=z,e(M,()=>a?.label),e(L,r(S,{get when(){return l()},get fallback(){return r(S,{get when(){return a?.value},get children(){var w=He(),U=w.firstChild;return e(U,()=>a?.value),w}})},get children(){return r(tt,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:w=>v(w),onEnter:h})}}),null),j})()},ne=a=>r(S,{get when(){return a?.value},get children(){var l=Ke(),n=l.firstChild,t=n.firstChild,v=t.nextSibling,h=v.firstChild;return e(t,()=>a?.label),e(h,()=>a?.value),l}}),lt=async(a,l)=>{let n={params:{id:a,businessId:oe?.profile?.businessYId},form:l},t=Q(129004);return n={...n,...t},await Y(n)},it=async(a,l)=>{let n={...a};n.ssg_product_key=R(),n.businessId=l;let t={params:{businessId:l},form:n},v=Q(129003);t={...t,...v};{const h=await Y(t);return h?.data?.error?{}:h?.data}},st=async a=>{let l={params:a},n=Q(122002);return l={...l,...n},await Y(l)},gt=async a=>{let l=[];a.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},v=Q(802002);t={...t,...v},l.push(t)}),Se(l,at)},at=async a=>{const n=await Y(a);if(n)return n};ye(["click"]);export{ht as default,at as fetchCSVInve,gt as loadProduct,lt as updProducts};
