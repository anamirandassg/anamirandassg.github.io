import{$ as A,a0 as k,a1 as $,a2 as n,a3 as u,e as L,i as P,d as C,r as F,k as O,m as I,a4 as z,T as W,t as R,a5 as B,a6 as G}from"./index-GDNCXtZ5.js";function U(a){let f=new Blob([a],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(f)}const N=(a,f,d)=>{const c=f.widthOfTextAtSize(a,40),o=f.widthOfTextAtSize(a,10);return Math.floor(d/((c-o)/30))},Q=async(a,f,d)=>{const c=await A.create();c.registerFontkit(k);const o=await $(c);let e=265;const m=a.map(async(t,y)=>{const l=c.addPage([426,284]),{height:x}=l.getSize();let r=x-34;console.log(x);const g=await fetch(d).then(_=>_.arrayBuffer()),v=await c.embedPng(g);l&&v&&l.drawImage(v,{x:10,y:x-230,width:140,height:140}),l.drawText(n(t?.tracking),{x:2,y:r-230,size:30,font:o.Lexend_700,color:u(0,0,0)});let h=N(n(t?.state),o.roboto_bold,e);h>42&&(h=42,r=r-6);let i=N(n(t?.name),o.GSansItalic,e);var s=o.GSansItalic?.widthOfTextAtSize(n(t?.name),i);if(s>e&&(i=i-1,s=o.GSansItalic?.widthOfTextAtSize(n(t?.name),i)),i=300/s*21,i=i>25?25:i,l.drawText(n(t?.name),{x:10,y:r-0,size:i,font:o.GSansItalic,color:u(0,0,0)}),console.log(i),t?.state){const _=o.roboto_bold?.widthOfTextAtSize(n(t?.state),h);l.drawText(n(t?.state),{x:420-_,y:r-46,size:h,font:o.roboto_bold,color:u(0,0,0)}),r=r-i}let b=29;const p=o.Lexend_700?.widthOfTextAtSize(n(t?.phoneNumber),b);l.drawText(n(t?.phoneNumber),{x:400-p,y:r-70,size:b,font:o.Lexend_700,color:u(0,0,0)});const w=o.Lexend_700?.widthOfTextAtSize(n(t?.altPhoneNumber),b);l.drawText(n(t?.altPhoneNumber),{x:400-w,y:r-105,size:b,font:o.Lexend_700,color:u(0,0,0)}),console.log(t);let S=n(t?.bulto).trim();const T=o.Lexend_700?.widthOfTextAtSize(n(S),40);l.drawText(n(S),{x:418-T,y:r-155,size:40,font:o.GSansBold,color:u(0,0,0)})});await Promise.all(m);{const t=await c.save();return U(t)}};var D=R('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Codigo QR</h5></div><div class="_dsplFlx bottombx "><h4></h4><div class="icon_status centerBx"></div></div></div><div class="_dsplFlx flxWrp spaceAround "><img ref alt=qr></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h4>');function E(a){const f=e=>{B(a?.val)},d=e=>e?" "+e:"",c=()=>{let e=a?.item?.consigneeInfo;return d(e?.firstName)+d(e?.middleName)+d(e?.lastName)+d(e?.lastName2)},o=async()=>{let e=z(a?.val);var m=await G(e,"image/png");let t=URL.createObjectURL(m),y={state:a?.item?.consigneeInfo?.ybestate,name:c(),phoneNumber:a?.item?.consigneeInfo?.phoneNumber,altPhoneNumber:a?.item?.consigneeInfo?.altPhoneNumber,guiaWeek:a?.item?.guia,bulto:a?.item?.bagnumber,tracking:a?.item?.tracking},l=await Q([y],!0,t);window.open(l)};return(()=>{var e=D(),m=e.firstChild,t=m.firstChild,y=t.firstChild,l=y.nextSibling,x=l.firstChild,r=x.nextSibling,g=t.nextSibling,v=g.firstChild,h=g.nextSibling,i=h.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),P(x,()=>a?.item?.bagnumber),r.$$click=o,P(r,C(F,{name:"printer",size:32})),g.style.setProperty("padding","16px"),h.style.setProperty("padding","16px"),i.$$click=f,P(i,()=>a?.val),O(s=>{var b=I()?"96vw":"420px",p=z(a?.val),w=300/a?.val?.length*1.82+"px";return b!==s.e&&((s.e=b)!=null?e.style.setProperty("width",b):e.style.removeProperty("width")),p!==s.t&&W(v,"src",s.t=p),w!==s.a&&((s.a=w)!=null?i.style.setProperty("font-size",w):i.style.removeProperty("font-size")),s},{e:void 0,t:void 0,a:void 0}),e})()}L(["click"]);export{E as S};
