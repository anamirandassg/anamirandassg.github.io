const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CP0-gV5N.js","assets/index-BGOIoX1m.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-C1ESPhJ_.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-CwIR7Sbw.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-B9ichYpF.js","assets/debounces-DPu4ciPj.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-DcZZ7sY_.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-BMLveCv_.js","assets/Util-uEfv1z7O.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-C2txW7TR.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-BMgdAfq4.js","assets/DialogHRM-wi4aFdap.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-DReTlKO1.js","assets/ShowQRPrintLabel-DQih0po7.js","assets/PDFButton-B_0lS8EG.js","assets/qrcode-C5vWJp7P.js","assets/fontkit.es-BKe7DAJ7.js","assets/InitPrintServices-CprHcwF4.js","assets/Toast-B5drWTWD.js","assets/Toast-DLpFKn-Q.css","assets/ShowPdfResume-By7nHMOf.js"])))=>i.map(i=>d[i]);
import{l as P,_ as D,c as ie,a as S,o as We,h as He,b as Xe,m as Ue,i as n,d as r,f as U,e as Ye,t as _,k as ae,S as f,j as Je,q as Ke,E as ge,r as re,F as te,g as ne,s as Ze,v as le}from"./index-BGOIoX1m.js";import{b as Y,e as pe,f as se,a as B,O as X,g as A,h as et,s as tt}from"./Util-uEfv1z7O.js";import{u as rt}from"./debounces-DPu4ciPj.js";import{i as K}from"./globalSignal-DReTlKO1.js";import{g as me,l as nt}from"./ShowQRPrintLabel-DQih0po7.js";import"./Toast-B5drWTWD.js";import{OpenModal as lt}from"./DialogHRM-wi4aFdap.js";import"./index-Ci0zXM0r.js";import"./PDFButton-B_0lS8EG.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-BKe7DAJ7.js";import"./InitPrintServices-CprHcwF4.js";var he=_("<div style=padding:4px>"),H=_('<div class="icon_status centerBx">'),st=_('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),it=_('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),at=_('<div><div class="_dsplFlx flxWrp spaceAround ">'),ot=_('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),ct=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div><div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),fe=_("<div> <!>."),_e=_("<div> "),ut=_("<div class=centerBx><h5 style=margin-left:12px>generando excel"),ve=_("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),dt=_("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),$e=_("<h5 class=totalBagsNo> <!> / "),ye=_('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),ke=_("<div class=leftMrg> "),gt=_("<div class=bottombx><h4>"),mt=_('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),ht=_("<div style=padding:16px;margin-left:20px;>"),ft=_("<div>"),_t=_('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const L=P(()=>D(()=>import("./LoadingColorSpinner-CP0-gV5N.js"),__vite__mapDeps([0,1,2,3]))),vt=P(()=>D(()=>import("./InputHr-C1ESPhJ_.js"),__vite__mapDeps([4,1,2,5]))),G=P(()=>D(()=>import("./SVG-CwIR7Sbw.js"),__vite__mapDeps([6,1,2,7]))),be=P(()=>D(()=>import("./DropDwnSearch-B9ichYpF.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),bt=P(()=>D(()=>import("./ContainerElasticView-DcZZ7sY_.js"),__vite__mapDeps([11,1,2,6,7,12]))),pt=P(()=>D(()=>import("./ButonHrm-BMLveCv_.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),oe=P(()=>D(()=>import("./CheckBoxSlide-C2txW7TR.js"),__vite__mapDeps([16,1,2,17]))),$t=P(()=>D(()=>import("./ItemOnEnvios-BMgdAfq4.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27,28]))),yt=P(()=>D(()=>import("./ShowPdfResume-By7nHMOf.js"),__vite__mapDeps([29,1,2,21,22,23,7,24,25,26,14,27,28])));function qt(){const[e,i]=ie({list:{manifest:{id:"",label:""},search:"",status:""}}),[l,a]=ie({}),[u,g]=ie({}),[m,I]=S(""),[c,O]=S(!1),[Z,M]=S(64),[E,R]=S(!1),[T,ee]=S(!1),[Ce,we]=S(""),F=rt(I,500),[Se,At]=S(!1),[Ie,ce]=S(!1),[Me,ue]=S(!1),j=(o,s)=>{i("list",{[o]:s}),F(A())},Ee=()=>{R(!E()),F(A())},Ae=()=>{O(!c()),F(A())},Ge=()=>{ee(!T()),F(A())};We(()=>{}),He(()=>{});const Be=()=>{M(o=>o+64)},Pe=o=>{let s=Math.ceil(o?.length/64);tt(Be,1250,s)},[z,{refetch:Gt}]=Xe(m,async o=>{a(void 0),g("prov",void 0);let s=e?.list?.manifest?.id;Ce()!==s&&we(s);let w={},p=[],x={};var k={};if(s&&(w=await wt(s)),!c())a(w?.sumary),g("prov",w?.provinceGroup);else{k=await Ct(e?.list?.search,s,e?.list?.status,e?.list?.estate,e?.list?.city,e?.list?.agency?.id),a(w?.sumary),M(0);let Q={};E()?X(k).map($=>{let h=k[$],v=h?.estate||h?.consigneeInfo?.ybestate;Q[$]?p.push(h):Q[$]=1,B("M023009")?.ZoneCity?.[h?.zone]?.[v]||p.push(h)}):T()?X(k).map($=>{let h=k[$];h?.estate||h?.consigneeInfo?.ybestate||p.push(h),h?.bagnumber||p.push(h)}):(X(k).map($=>{let h=k[$],v=h?.estate||h?.consigneeInfo?.ybestate,C=h?.city||h?.consigneeInfo?.ybcity;(v||C)&&(x[v]||(x[v]={cities:{},total:0}),x[v].cities?.[C]||(x[v].cities[C]=0),x[v].cities[C]+=1,x[v].total+=1),p.push(h)}),g("prov",x)),Pe(p)}return p}),de=()=>z()?.length,De=o=>{i("list",{manifest:o,status:void 0}),F(A())},Oe=()=>{It(z())},Fe=()=>{Mt(z())},ze=()=>{},Ne=(o,s)=>{j("estate",o),j("city",s)},Ve=(o,s)=>{i("list",{estate:void 0,city:void 0}),F(A())},q=o=>o?" "+o:"",Le=o=>{let s=o?.consigneeInfo;return q(s?.firstName)+q(s?.middleName)+q(s?.lastName)+q(s?.lastName2)},Re=o=>{let s=o?.consigneeInfo,w=q(s?.altPhoneNumber);return q(s?.phoneNumber)+(w?" | "+w:"")},Te=async()=>{let o=[];ue(!0),setTimeout(async()=>{let s=30,w=900004,p=[],x=new Date().getFullYear().toString().slice(2,4);for(let $=0;$<s;$++)p.push($);const k=p.map(async($,h)=>{let v=w+$*2,C=v+1,N="SS"+x;const J=await me(N+""+v),t=await me(N+""+C);let d={mtrx:J,mtrx2:t,lbl:N+""+v,lbl2:N+""+C};o.push(d)});await Promise.all(k);let Q=await nt(o);window.open(Q),ue(!1)},760)},je=async()=>{ce(!0);let o=[];z().map(async(s,w)=>{let p=s?.estate||s?.consigneeInfo?.ybestate,x=s?.city||s?.consigneeInfo?.ybcity,k={provincia:p,ciudad:x,nombre:Le(s),telefonos:Re(s),guia:s?.idairguide,bulto:s?.bagnumber,hbls:s?.hblS};o.push(k)}),et(`listas_caneados_${A()}.csv`,o),ce(!1)},qe=o=>{let s={};s.id=A(),s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=r(yt,{get list(){return z()}}),lt(s)},Qe=async o=>{await St(e?.list?.manifest?.id)};return Ue(()=>{}),(()=>{var o=ct(),s=o.firstChild,w=s.firstChild,p=w.nextSibling,x=p.firstChild,k=p.nextSibling,Q=k.firstChild,$=s.nextSibling,h=$.nextSibling,v=h.firstChild,C=h.nextSibling,N=C.firstChild,J=N.firstChild;return n(x,()=>e?.list?.manifest?.id),n(k,r(oe,{get initValue(){return c()},updChange:Ae,color:"var(--background-red-ssg)"}),Q),n(o,r(f,{get when(){return ae?.profile?.isAdmin},get children(){return r(pt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Oe})}}),h),n(v,r(be,{get list(){return B("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:t=>De(t),width:"260px"})),n(h,r(f,{get when(){return Je(()=>!!e?.list?.manifest?.id)()&&c()},get children(){return[(()=>{var t=he();return n(t,r(f,{get when(){return Ke()},get children(){return r(be,{get list(){return B("M023009")?.agencies},lbl_empty:"Agencia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.agency?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:d=>j("agency",d),width:"260px"})}})),t})(),(()=>{var t=he();return n(t,r(vt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:d=>j("search",d)})),t})(),(()=>{var t=it(),d=t.firstChild,b=d.firstChild;return n(d,r(oe,{get initValue(){return E()},updChange:Ee,color:"var(--background-red-ssg)"}),b),n(t,r(f,{get when(){return ae?.profile?.isAdmin},get children(){var y=st(),W=y.firstChild;return n(y,r(oe,{get initValue(){return T()},updChange:Ge,color:"var(--background-red-ssg)"}),W),n(y,r(f,{get when(){return T()},get children(){var V=H();return V.$$click=Fe,n(V,r(G,{name:"outline_delete",size:24})),V}}),null),y}}),null),t})()]}}),null),n(C,r(f,{get when(){return e?.list?.manifest?.id},get children(){var t=at(),d=t.firstChild;return n(d,r(ge,{fallback:b=>(()=>{var y=fe(),W=y.firstChild,V=W.nextSibling;return V.nextSibling,n(y,()=>b.toString(),V),y})(),get children(){return r(re,{get fallback(){return(()=>{var b=_e();return b.firstChild,n(b,r(L,{stroke:"rgb(200 25 60 / 1)",size:62}),null),b})()},get children(){return r(f,{get when(){return l?.total},get children(){return r(te,{get each(){return X(l)},children:(b,y)=>K()?r(xt,{keyG:b,total:de,get status(){return e?.list?.status},get amount(){return l?.[b]},get showItems(){return c()},updForm:j}):r(kt,{keyG:b,total:de,get showItems(){return c()},get status(){return e?.list?.status},get amount(){return l?.[b]},updForm:j})})}})}})}})),U(()=>ne(t,`client_item_box gWXAaj jlytmu ${K()?"isMobile":""}`)),t}}),N),n(J,r(f,{get when(){return c()},get children(){return r(f,{get when(){return!Ie()},get fallback(){return(()=>{var t=ut(),d=t.firstChild;return n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),d),t})()},get children(){var t=H();return t.$$click=je,n(t,r(G,{name:"grid",size:24,color:"firebrick"})),t}})}}),null),n(J,r(f,{get when(){return ae?.profile?.isAdmin},get children(){return[r(f,{get when(){return!Me()},get fallback(){return(()=>{var t=ve(),d=t.firstChild;return n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),d),t})()},get children(){var t=H();return t.$$click=Te,n(t,r(G,{name:"printer",size:24,color:"firebrick"})),t}}),(()=>{var t=H();return t.$$click=Qe,n(t,r(G,{name:"tag-outline",size:24})),t})(),(()=>{var t=H();return t.$$click=ze,n(t,r(G,{name:"outline_renew",size:24})),t})()]}}),null),n(J,r(f,{get when(){return!Se()},get fallback(){return(()=>{var t=ve(),d=t.firstChild;return n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),d),t})()},get children(){var t=H();return t.$$click=qe,n(t,r(G,{name:"printer",size:32})),t}}),null),n(C,r(f,{get when(){return u?.prov},get children(){var t=ot(),d=t.firstChild,b=d.firstChild,y=d.nextSibling;return n(b,r(f,{get when(){return u?.prov},get children(){return r(te,{get each(){return X(u?.prov)},children:(W,V)=>r(Et,{ism:W,get item(){return u?.prov?.[W]},updS:Ne})})}})),y.$$click=Ve,n(y,r(G,{name:"Xclose",size:22})),U(()=>ne(t,`client_item_box gWXAaj jlytmu ${K()?"isMobile":""}`)),t}}),null),n(C,r(ge,{fallback:t=>(()=>{var d=fe(),b=d.firstChild,y=b.nextSibling;return y.nextSibling,n(d,()=>t.toString(),y),d})(),get children(){return r(re,{get fallback(){return(()=>{var t=_e();return t.firstChild,n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:62}),null),t})()},get children(){return r(f,{get when(){return z()},get children(){return r(te,{get each(){return z()?.slice(0,Z())},children:(t,d)=>r($t,{item:t,refresh:()=>F(A())})})}})}})}}),null),U(t=>Ze(C,` ${K()?"":"width:94vw;"} margin: 0 auto;`,t)),o})()}const kt=e=>{const[i,l]=S(!1),[a,u]=S(0),g=()=>{let c=e?.keyG;e?.keyG==="total"&&(c=null),e?.updForm("status",c)},m=()=>{i()||!K()&&e?.keyG!=="total"&&(u(B("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),l(!0))},I=()=>{u("0px"),i()&&l(!1)};return r(f,{get when(){return e?.amount>0},get children(){return r(re,{get fallback(){return(()=>{var c=ke();return c.firstChild,n(c,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),c})()},get children(){var c=ye(),O=c.firstChild,Z=O.nextSibling;return c.$$mouseout=I,c.$$mousemove=m,c.$$click=g,n(c,r(f,{get when(){return i()},get children(){var M=dt(),E=M.firstChild,R=E.firstChild,T=R.firstChild;return n(T,()=>B("M023009")?.statusObjDesc?.[e?.keyG]),U(ee=>(ee=a())!=null?E.style.setProperty("width",ee):E.style.removeProperty("width")),M}}),O),n(O,r(G,{get name(){return B("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(c,r(f,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var M=$e(),E=M.firstChild,R=E.nextSibling;return R.nextSibling,n(M,()=>e?.total(),R),M}}),Z),n(Z,()=>e?.amount),U(()=>ne(c,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),c}})}})},xt=e=>{const i=()=>{let l=e?.keyG;e?.keyG==="total"&&(l=null),e?.updForm("status",l)};return r(f,{get when(){return e?.amount>0},get children(){return r(re,{get fallback(){return(()=>{var l=ke();return l.firstChild,n(l,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),l})()},get children(){var l=ye(),a=l.firstChild,u=a.nextSibling;return l.$$click=i,n(a,r(G,{get name(){return B("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(l,r(f,{get when(){return B("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var g=gt(),m=g.firstChild;return n(m,()=>B("M023009")?.statusObjDesc?.[e?.keyG]),g}}),u),n(l,r(f,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var g=$e(),m=g.firstChild,I=m.nextSibling;return I.nextSibling,n(g,()=>e?.total(),I),g}}),u),n(u,()=>e?.amount),U(()=>ne(l,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),l}})}})},Ct=async(e,i,l,a,u,g)=>{let m={params:{idairguide:"all",":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG"]};e&&e.split(" ").map((c,O)=>{c&&(m.params[":search"+O]=c.trim())}),l&&(m.params[":status"]=l),a&&(m.params[":estate"]=a),u&&(m.params[":city"]=u),le?.roles?.agency&&(m.params[":agency"]=le?.roles?.agency+""),g&&(m.params[":agency"]=g);let I=Y(802001);if(m={...m,...I},i&&Object.keys(m.params)?.length>=2){const c=await se(m);return c?.data?.error?{}:c}return{}},wt=async e=>{let i={params:{idairguide:"all",":search0":e}},l=Y(802004);i={...i,...l},le?.roles?.agency&&(i.params[":agency"]=le?.roles?.agency+"");const a=await se(i);return a?.error?{}:a},St=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},l=Y(802001);i={...i,...l};const a=await se(i);return a?.error?{}:a},It=async e=>{e.map(i=>{let l={params:{id:i?.ssg_track_key,idairguide:"all"}},a=Y(802002);l={...l,...a}})},Mt=async e=>{let i=[];e.map(l=>{let a={params:{ssg_track_key:l?.ssg_track_key,idairguide:"all"}},u=Y(809005);a={...a,...u},i.push(a)}),pe(i,xe)},Qt=async(e,i)=>{let l=[];e.map(a=>{let u={params:{ssg_track_key:a?.ssg_track_key,idairguide:"all"},data2update:{currentStatus:i}},g=Y(802004);u={...u,...g},l.push(u)}),pe(l,xe)},xe=async e=>{const l=await se(e);if(l)return l},Et=e=>(()=>{var i=ft();return n(i,r(f,{get when(){return e?.item?.total>0},get children(){var l=mt(),a=l.firstChild,u=a.firstChild,g=u.firstChild,m=u.nextSibling;return a.$$click=()=>e?.updS(e?.ism),n(u,()=>e?.ism,g),n(m,()=>e?.item?.total),l}}),null),n(i,r(bt,{get children(){var l=ht();return n(l,r(f,{get when(){return e?.item?.cities},get children(){return r(te,{get each(){return X(e?.item?.cities)},children:(a,u)=>(()=>{var g=_t(),m=g.firstChild,I=m.nextSibling;return g.$$click=()=>e?.updS(e?.ism,a),n(m,a),n(I,()=>e?.item?.cities?.[a]),g})()})}})),l}}),null),i})();Ye(["click","mousemove","mouseout"]);export{kt as StatusGroupItem,qt as default,Mt as deleteManifest,xe as fetchCSVInve,It as loadManifest,Qt as updateManifest};
