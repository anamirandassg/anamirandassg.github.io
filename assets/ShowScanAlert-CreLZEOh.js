const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SVG-CnRMbWAr.js","assets/index-C41AzTw0.js","assets/index-BmzAZVve.css","assets/CheckBoxSlide-CwBjGrvo.js","assets/CheckBoxSlide-uVD3DHDO.css"])))=>i.map(i=>d[i]);
import"./Toast-BbtwG6WL.js";import{X as h,n as m,M as k,o as p,K as S,W as A,p as _,q as D,e as P,g as x,A as F,t as w,l as I,_ as C,h as W,a as E,b as G,s as L,a6 as M,i as b}from"./index-C41AzTw0.js";import{setTaskScan as R,taskScan as z}from"./Scanning-C3kqMCkk.js";import{g as O,c as j}from"./ShowQRPrintLabel-CfFOKe1M.js";let B=[400,300,400,300,400],$=[300,80,300,80,300,80,300];const q=e=>{e.split("-").length>3&&(e=e.split("-").join("")),e?.split("/")?.length>=5&&(e=e?.split("/")?.[3]),e=e.split(",")?.[0]?.trim(),e=e.split("'").join("-"),e=e.split(",").join("-"),e=e.split(";").join("-");let t=e.split("/")?.[0];return t.indexOf("230")>=0&&(t="230"+(t.split("230")?.[1]).slice(0,6)),t.indexOf("231")>=0&&(t="231"+(t.split("231")?.[1]).slice(0,5)),{params:{idairguide:"all",":search0":t},code:1}},Y=async(e,s)=>{let t=q(e),r={timeStamp:new Date().getTime(),latitude:h?.latitude,longitude:h?.longitude,statusId:s,userId:m?.profile?.userId,userName:m?.profile?.name};if(t?.params)return await H(t.params,r);{let a=t?.txt||t?.params?.search0;return navigator.vibrate($),{error:{alert:"error",color:"rgb(200 25 60)",scanData:{consigneeInfo:{ybestate:"Codigo Incorrecto",bagnumber:a}}}}}},H=async(e,s)=>{let t=null;if(k()){let r=p("manifestByHbls")?.[e?.[":search0"]],a=p("manifestByKeys")?.[r];t=K(a,s)}else console.log("fetch online"),t=(await N(e,s))?.data;if(console.log(t),t?.code===203||t?.code===303)return navigator.vibrate(B),{error:{alert:"warning",color:"#FF6F1D",scanData:t.data}};if(t?.code===200){navigator.vibrate(500);let r={...t.data};return r.tracking=e?.[":search0"],r.timeStamp=new Date().getTime(),R([...z(),r]),{error:{alert:"success",color:"#0f5223ff",scanData:t.data}}}else if(!t||t?.error){let r={consigneeInfo:{ybestate:"Codigo Incorrecto"}};return navigator.vibrate($),{error:{alert:"error",color:"rgb(200 25 60)",scanData:r}}}},K=(e,s)=>{let t=e?.statusHistory||[];t.push(s);let r={statusHistory:t,currentStatus:s?.statusId};if(e?.isSSG&&S?.roles?.SSG?.isActive,!S?.roles?.[e?.consigneeInfo?.ybestate]?.isActive)return{code:303,data:{ybestate:"Zona incorrecta",bagnumber:e?.bagnumber}};if(e?.currentStatus===s.statusId)return{code:203,data:{consigneeInfo:{ybcity:"Fue escaneado",ybestate:e?.consigneeInfo?.ybestate,bagnumber:e?.bagnumber}}};let a={idairguide:e?.idairguide,city:e?.consigneeInfo?.ybcity,estate:e?.consigneeInfo?.estate,consigneeInfo:{ybestate:e?.consigneeInfo?.ybestate,ybcity:e?.consigneeInfo?.ybcity},bagnumber:e?.bagnumber,isSSG:e?.isSSG},l={data2update:r,itmN:a,ssg_track_key:e?.ssg_track_key};return A.post(l,function(o,n){o||console.log("Successfully posted")}),{code:200,data:{...a,...r}}},N=async(e,s)=>{let t={params:e,form:s},r=_(802001);return r=_(802008),t={...t,...r},await D(t)};var Q=w('<div><div class="_dsplFlx flxWrp spaceAround "><img ref alt=ssg>');function T(){return(()=>{var e=Q(),s=e.firstChild,t=s.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#fff"),e.style.setProperty("border-radius","13"),s.style.setProperty("padding","16px"),P(r=>{var a=x()?"96vw":"420px",l=p("SSG.webp");return a!==r.e&&((r.e=a)!=null?e.style.setProperty("width",a):e.style.removeProperty("width")),l!==r.t&&F(t,"src",r.t=l),r},{e:void 0,t:void 0}),e})()}var V=w('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Codigo </h5></div><div class="_dsplFlx bottombx "><h4></h4></div></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h5></h5></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h5>');I(()=>C(()=>import("./SVG-CnRMbWAr.js"),__vite__mapDeps([0,1,2])));I(()=>C(()=>import("./CheckBoxSlide-CwBjGrvo.js"),__vite__mapDeps([3,1,2,4])));function ee(e){E(!1);const s=t=>{j(t)};return G(e?.val,async t=>await O(e?.val)),L(()=>{M()}),(()=>{var t=V(),r=t.firstChild,a=r.firstChild,l=a.firstChild,f=l.nextSibling,o=f.firstChild,n=a.nextSibling,c=n.firstChild,v=n.nextSibling,u=v.firstChild;return t.style.setProperty("max-height","80vh"),t.style.setProperty("overflow","auto"),t.style.setProperty("background","#ffffff"),t.style.setProperty("border-radius","13"),t.style.setProperty("padding","50px 25px"),o.$$click=()=>s(e?.bagnumber),b(o,()=>e?.bagnumber),n.style.setProperty("padding","16px"),c.$$click=()=>s(e?.msg1),b(c,()=>e?.msg1),v.style.setProperty("padding","16px"),u.$$click=()=>s(e?.msg2),b(u,()=>e?.msg2),P(i=>{var g=x()?"86vw":"420px",y=300/e?.msg1?.length*1.32+"px",d=300/e?.msg2?.length*1.32+"px";return g!==i.e&&((i.e=g)!=null?t.style.setProperty("width",g):t.style.removeProperty("width")),y!==i.t&&((i.t=y)!=null?c.style.setProperty("font-size",y):c.style.removeProperty("font-size")),d!==i.a&&((i.a=d)!=null?u.style.setProperty("font-size",d):u.style.removeProperty("font-size")),i},{e:void 0,t:void 0,a:void 0}),t})()}W(["click"]);export{T as S,ee as a,Y as h};
