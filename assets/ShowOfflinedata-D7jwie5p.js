const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-Bo3_nc43.js","assets/index-B0GUc9u6.js","assets/index-BRlA1Q7g.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-BbqqQLEH.js","assets/SVG-BhS5E-Wo.js","assets/Util-DVoBpjwO.js","assets/ButonHrm-BSeWNUGQ.css","assets/LoadingColorSpinner-B1rJcwQ8.js","assets/LoadingColorSpinner-DPNLfwBi.css"])))=>i.map(i=>d[i]);
import{l as T,_ as G,c as le,a as W,d as oe,i,e as d,a8 as b,S as E,F as ce,f as de,j as K,x as pe,g as ue,t as h,Y as R}from"./index-B0GUc9u6.js";import{g as C,f as I,O as w,q as ge,Y as q,e as F,m as k,S as Q,T as j,a as P,a5 as fe,W as V,I as z,u as H,X as Y,U as X,V as Z}from"./Util-DVoBpjwO.js";import"./DialogHRM-USu8E80H.js";import{c as be,b as J,i as me}from"./Scanning-mptGiqxK.js";import{OpenToast as $}from"./Toast-CP9W1pfV.js";import"./App.module-CbHnVtRQ.js";var ye=h('<div class="_dsplFlx flxWrp spaceAround ">'),he=h('<div class="centerBx bottombx spaceAround flxWrp"style=margin-top:20px><div style=padding:6px></div><div style=padding:6px></div><div style=padding:6px>'),_e=h('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Subir Pendientes </h5></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx grid2Col"></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Manifiestos </h5></div></div><div class="centerBx bottombx spaceAround"style=margin-top:20px>'),xe=h('<div class="centerBx bottombx "><h5> subiendo al servidor <!> / <!> '),ve=h('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">'),we=h('<div class="centerBx bottombx "><h5> descargando guias... ');const Se=T(()=>G(()=>import("./CheckBoxSlide-Bo3_nc43.js"),__vite__mapDeps([0,1,2,3]))),v=T(()=>G(()=>import("./ButonHrm-BbqqQLEH.js"),__vite__mapDeps([4,1,2,5,6,7]))),ee=T(()=>G(()=>import("./LoadingColorSpinner-B1rJcwQ8.js"),__vite__mapDeps([8,1,2,9])));function Me(r){const[t,s]=le({}),[l,o]=W(!1),[u,m]=W(0),y=async()=>{let e=await Q(z,V);H("dbScannedStore",e),R(w(e)?.length)};oe(()=>{J(),me(),y()});let N=[2503,2504,2505,2506];const L=async e=>{if(m(b()),b()>30){let n=4,g=Array.from(Array(n).keys()),_=Math.ceil(b()/n);const B=g.map(async x=>{let M=_*x,a=_*(x+1)-1;a>b()&&(a=b()),await k(e.slice(M,a),O)});await Promise.all(B)}else await k(e,O);j(z,V,F("dbScannedStore")),m(0)},O=async e=>{let n=F("dbScannedStore"),g=await ke(n?.[e]);return delete n[e],H("dbScannedStore",n),R(w(n)?.length),g},te=async()=>{L(Object.keys(F("dbScannedStore")))};let A={};const ae=async e=>{let n=await $e("guia",e);A=Object.assign({},A,n)},ne=async()=>{let e=[];if(w(t).map(n=>{t[n]&&e.push(n)}),o(!0),e.length>0){await k(e,ae);let n=await Q(q,Y),g=Object.assign({},n,A);j(q,Y,g),$({text:"El modo offline esta listo para escanear",timeout:2500,id:P()})}else $({text:"Debe selecionar una guia",timeout:2500,id:P()});o(!1)};let D={};const se=async e=>{let n=await Pe(e);D=Object.assign({},D,n)},re=async()=>{let e=[];if(w(t).map(n=>{t[n]&&e.push(n)}),o(!0),e.length>0){await k(e,se);let n=await Q(Z,X),g=Object.assign({},n,D);j(Z,X,g),$({text:"se descargo con exito la lista de escaneos",timeout:2500,id:P()})}else $({text:"Debe selecionar una guia",timeout:2500,id:P()});o(!1)},ie=()=>{fe(),setTimeout(()=>{J()},600)};return(()=>{var e=_e(),n=e.firstChild,g=n.firstChild,_=g.nextSibling,B=_.nextSibling,x=n.nextSibling,M=x.nextSibling;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),i(n,d(E,{get when(){return b()>0},get children(){return d(E,{get when(){return!u()},get fallback(){return(()=>{var a=xe(),c=a.firstChild,p=c.firstChild,f=p.nextSibling,S=f.nextSibling,U=S.nextSibling;return U.nextSibling,i(a,d(ee,{stroke:"rgb(200 25 60 / 1)",size:32}),c),i(c,()=>u()-b(),f),i(c,u,U),a})()},get children(){var a=ye();return i(a,d(v,{icon:"arrow_up_large",color:"#c8193c",label:"Subir pendientes",handleClick:te})),a}})}}),_),i(B,d(ce,{each:N,children:(a,c)=>(()=>{var p=ve(),f=p.firstChild,S=f.firstChild;return i(f,d(Se,{get initValue(){return t?.[a]},updChange:()=>s(a,!t?.[a]),color:"var(--background-red-ssg)"}),S),i(S,a),p})()})),i(e,d(E,{get when(){return!l()},get fallback(){return(()=>{var a=we();return i(a,d(ee,{stroke:"rgb(200 25 60 / 1)",size:32}),null),a})()},get children(){var a=he(),c=a.firstChild,p=c.nextSibling,f=p.nextSibling;return i(c,d(v,{icon:"cancel",color:"#4a4a4a",label:"Limpiar",handleClick:ie})),i(p,d(v,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar Guias",handleClick:ne})),i(f,d(v,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar locaciones",handleClick:re})),a}}),x),i(M,d(v,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar",handleClick:Ce})),de(a=>{var c=K()?"86vw":"420px",p=K()?"15px 5px":"15px 25px";return c!==a.e&&((a.e=c)!=null?e.style.setProperty("width",c):e.style.removeProperty("width")),p!==a.t&&((a.t=p)!=null?e.style.setProperty("padding",p):e.style.removeProperty("padding")),a},{e:void 0,t:void 0}),e})()}const Ee=r=>{let t=r,s="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(s);return t.length===13&&l.test(t)&&(t=t.slice(3,12)),t},ke=async r=>{let t={};r?.params&&(t.params=r?.params),r?.data2update&&(t.data2update=r?.data2update),r?.form&&(t.form=r?.form);let s=C(r?.actionKey);return t={...t,...s},await I(t)},Pe=async r=>{let t={params:{airguide:r,":search0":"ssg"}},s=C(815002);t={...t,...s};const l=await I(t);return l?.data?.error?{}:l},$e=async(r,t)=>{let s={params:{idairguide:t},fldswQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","guia","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","isLMH","isPaid","hbls","noteTag","nameshipper","billedBy"]};r.split(" ").map((u,m)=>{u&&(s.params[":search"+m]=u.trim())}),s.params[":guia"]=t+"";let l=C(802001);s={...s,...l};const o=await I(s);return o?.data?.error?{}:o},Ce=async(r,t)=>{await be();let s={params:{":search0":" "},fldsjQry:["createDate","linkedUser","status","name","city","province","workgroup","ssg_manifest_key","isPending"]};pe()||(s.params.workgroup=ue?.profile?.workgroup?.id+"");let l=C(703001);s={...s,...l};const o=await I(s);if(o?.error)return{};{let u=[];return w(o).map(m=>{let y=o[m];y._id=y?.ssg_manifest_key,ge.put(y,function(L,O){L||console.log("Successfully posted on manifest list")}),u.push(y)}),u}},Fe=()=>new Promise((r,t)=>{q.allDocs({include_docs:!0,descending:!0},function(s,l){r(l.rows)})});export{Ce as LookupManifets,Me as default,Fe as loadManifestOffline,Ee as parseTrcking};
