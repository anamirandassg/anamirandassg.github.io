const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-kICWZKGD.js","assets/index-BX_7Yvg-.js","assets/index-DHvNTsK7.css","assets/InputHr-Ct60HpPo.js","assets/InputHr-M3rJ9grQ.css","assets/DropDwnSearch-D-vZpbh5.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-WxpzjuPd.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-CimZnJnL.js","assets/ButonHrm-BPLzySnX.css","assets/CheckBoxSlide-BowKbB8s.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-lcZbf65v.js","assets/ItemOnEnviosMobile-CE9-q_sk.js"])))=>i.map(i=>d[i]);
import{l as C,_ as w,c as X,a as D,u as pe,p as $e,f as ye,b as xe,i as n,d as r,y as H,S as h,z as ke,F as T,j as O,m as F,k as B,A as V,B as U,g as E,E as Ce,s as we,x as q,w as ee,D as Se,n as Q,e as Ae,t as m,Z as Ie,G as Ee,H as W,I as De}from"./index-BX_7Yvg-.js";import{g as Ne,b as Be,S as Ge,a as Le,l as Pe}from"./ShowQRPrintLabel-9upii27B.js";var Me=m("<div style=padding:4px>"),Oe=m('<div class="icon_status centerBx">'),Fe=m('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),Re=m('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Ve=m('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),ze=m('<div><div class="_dsplFlx flxWrp spaceAround ">'),je=m('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Te=m('<div><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx">'),qe=m('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),We=m("<div> <!>."),Ye=m("<div> "),Xe=m("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),te=m("<h5 class=totalBagsNo> <!> / "),re=m('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),ne=m("<div class=leftMrg> "),He=m("<div class=bottombx><h4>"),Ue=m("<div>"),Qe=m('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),Ze=m("<div style=padding:16px;margin-left:20px;>"),Ke=m('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const Z=C(()=>w(()=>import("./LoadingColorSpinner-kICWZKGD.js"),__vite__mapDeps([0,1,2]))),Je=C(()=>w(()=>import("./InputHr-Ct60HpPo.js"),__vite__mapDeps([3,1,2,4]))),N=C(()=>w(()=>import("./index-BX_7Yvg-.js").then(e=>e.a7),__vite__mapDeps([1,2]))),et=C(()=>w(()=>import("./DropDwnSearch-D-vZpbh5.js"),__vite__mapDeps([5,1,2,6]))),tt=C(()=>w(()=>import("./ContainerElasticView-WxpzjuPd.js"),__vite__mapDeps([7,1,2,8]))),rt=C(()=>w(()=>import("./ButonHrm-CimZnJnL.js"),__vite__mapDeps([9,1,2,10]))),J=C(()=>w(()=>import("./CheckBoxSlide-BowKbB8s.js"),__vite__mapDeps([11,1,2,12]))),nt=C(()=>w(()=>import("./ItemOnEnvios-lcZbf65v.js"),__vite__mapDeps([13,1,2,7,8])));C(()=>w(()=>import("./ItemOnEnviosMobile-CE9-q_sk.js"),__vite__mapDeps([14,1,2,7,8])));function ht(){const[e,l]=X({list:{manifest:{id:"175-23834613",label:""},search:"",status:""}}),[s,_]=X({}),[g,o]=X({}),[f,x]=D(""),[v,G]=D(64),[L,S]=D(!1),[k,P]=D(!1),[Y,z]=D(""),M=pe(x,400),R=(c,d)=>{l("list",{[c]:d}),M(E())},ie=()=>{S(!L()),M(E())},se=()=>{P(!k()),M(E())};$e(()=>{}),ye(()=>{});const le=()=>{G(c=>c+64)},ae=c=>{let d=Math.ceil(c?.length/64);De(le,1250,d)},[I,{refetch:gt}]=xe(f,async c=>{let d=e?.list?.manifest?.id;Y()!==d&&z(d);const b=await lt(e?.list?.search,d,e?.list?.status,e?.list?.estate,e?.list?.city),$=await at(d);_($),o("prov",void 0),G(0);let p=[],t={};return L()?O(b).map(a=>{let i=b[a],u=i?.estate||i?.consigneeInfo?.ybestate;Ie?.[i?.zone]?.[u]||p.push(i)}):k()?O(b).map(a=>{let i=b[a];i?.currentStatus||p.push(i)}):(O(b).map(a=>{let i=b[a],u=i?.estate||i?.consigneeInfo?.ybestate,y=i?.city||i?.consigneeInfo?.ybcity;t[u]||(t[u]={cities:{},total:0}),t[u].cities?.[y]||(t[u].cities[y]=0),t[u].cities[y]+=1,t[u].total+=1,p.push(i)}),o("prov",t)),ae(p),p}),K=()=>I()?.length,ce=c=>{l("list",{manifest:c,status:void 0}),M(E())},oe=()=>{ct(I())},ue=()=>{ot(I())},de=()=>{},ge=(c,d)=>{R("estate",c),R("city",d)},me=(c,d)=>{l("list",{estate:void 0,city:void 0}),M(E())},j=c=>c?" "+c:"",_e=c=>{let d=c?.consigneeInfo;return j(d?.firstName)+j(d?.middleName)+j(d?.lastName)+j(d?.lastName2)},he=async()=>{let c=[];if(I().length<80){const d=I().map(async($,p)=>{let t=$?.tracking,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const i=new RegExp(a);t.length===13&&i.test(t)&&(t=t.slice(3,12));let y=Ne(t);var A=await Be(y,"image/png");let ve=URL.createObjectURL(A),be={state:$?.consigneeInfo?.ybestate,name:_e($),phoneNumber:$?.consigneeInfo?.phoneNumber,altPhoneNumber:$?.consigneeInfo?.altPhoneNumber,guiaWeek:$?.guia,bulto:$?.bagnumber,tracking:t,qr:ve};c.push(be)});await Promise.all(d);let b=await Ge(c);window.open(b)}else Ee({text:"El limite de etiquetas a imprimir es de 80",timeout:2500,id:E()})},fe=async()=>{let c=[],d=210080,b=d+5,$=[],p=new Date().getFullYear().toString().slice(2,4);for(let i=d;i<b;i++)$.push("Y"+p+i);const t=$.map(async(i,u)=>{let A={mtrx:await Le(i),lbl:i};c.push(A)});await Promise.all(t);let a=await Pe(c);window.open(a)};return(()=>{var c=qe(),d=c.firstChild,b=d.nextSibling,$=b.firstChild,p=b.nextSibling;return n(c,r(h,{get when(){return H?.profile?.isAdmin},get children(){return r(rt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:oe})}}),b),n($,r(et,{list:ke,lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:t=>ce(t),width:"260px"})),n(b,r(h,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var t=Me();return n(t,r(Je,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:a=>R("search",a)})),t})(),(()=>{var t=Re(),a=t.firstChild,i=a.firstChild;return n(a,r(J,{get initValue(){return L()},updChange:ie,color:"var(--background-red-ssg)"}),i),n(t,r(h,{get when(){return H?.profile?.isAdmin},get children(){var u=Fe(),y=u.firstChild;return n(u,r(J,{get initValue(){return k()},updChange:se,color:"var(--background-red-ssg)"}),y),n(u,r(h,{get when(){return k()},get children(){var A=Oe();return A.$$click=ue,n(A,r(N,{name:"outline_delete",size:24})),A}}),null),u}}),null),t})()]}}),null),n(p,r(h,{get when(){return H?.profile?.isAdmin},get children(){var t=Ve(),a=t.firstChild,i=a.firstChild,u=i.nextSibling;return i.$$click=fe,n(i,r(N,{name:"printer",size:24,color:"firebrick"})),u.$$click=de,n(u,r(N,{name:"outline_renew",size:24})),t}}),null),n(p,r(h,{get when(){return e?.list?.manifest?.id},get children(){var t=ze(),a=t.firstChild;return n(a,r(h,{get when(){return s?.total},get children(){return r(T,{get each(){return O(s)},children:(i,u)=>F()?r(st,{keyG:i,total:K,get status(){return e?.list?.status},get amount(){return s?.[i]},updForm:R}):r(it,{keyG:i,total:K,get status(){return e?.list?.status},get amount(){return s?.[i]},updForm:R})})}})),B(()=>V(t,`client_item_box gWXAaj jlytmu ${F()?"isMobile":""}`)),t}}),null),n(p,r(h,{get when(){return g?.prov},get children(){var t=je(),a=t.firstChild,i=a.firstChild,u=a.nextSibling;return n(i,r(h,{get when(){return g?.prov},get children(){return r(T,{get each(){return O(g?.prov)},children:(y,A)=>r(dt,{ism:y,get item(){return g?.prov?.[y]},updS:ge})})}})),u.$$click=me,n(u,r(N,{name:"Xclose",size:22})),B(()=>V(t,`client_item_box gWXAaj jlytmu ${F()?"isMobile":""}`)),t}}),null),n(p,r(h,{get when(){return e?.list?.manifest?.id},get children(){var t=Te(),a=t.firstChild,i=a.firstChild;return i.$$click=he,n(i,r(N,{name:"printer",size:32})),B(()=>V(t,`client_item_box gWXAaj jlytmu ${F()?"isMobile":""}`)),t}}),null),n(p,r(Ce,{fallback:t=>(()=>{var a=We(),i=a.firstChild,u=i.nextSibling;return u.nextSibling,n(a,()=>t.toString(),u),a})(),get children(){return r(U,{get fallback(){return(()=>{var t=Ye();return t.firstChild,n(t,r(Z,{stroke:"rgb(200 25 60 / 1)",size:62}),null),t})()},get children(){return r(h,{get when(){return I()},get children(){return r(T,{get each(){return I()?.slice(0,v())},children:(t,a)=>r(nt,{item:t,refresh:()=>M(E())})})}})}})}}),null),B(t=>we(p,` ${F()?"":"width:94vw;"} margin: 0 auto;`,t)),c})()}const it=e=>{const[l,s]=D(!1),[_,g]=D(0),o=()=>{let v=e?.keyG;e?.keyG==="total"&&(v=null),e?.updForm("status",v)},f=()=>{l()||!F()&&e?.keyG!=="total"&&(g(q?.[e?.keyG]?.length*8.5+"px"),s(!0))},x=()=>{g("0px"),l()&&s(!1)};return r(h,{get when(){return e?.amount>0},get children(){return r(U,{get fallback(){return(()=>{var v=ne();return v.firstChild,n(v,r(Z,{stroke:"rgb(200 25 60 / 1)",size:32}),null),v})()},get children(){var v=re(),G=v.firstChild,L=G.nextSibling;return v.$$mouseout=x,v.$$mousemove=f,v.$$click=o,n(v,r(h,{get when(){return l()},get children(){var S=Xe(),k=S.firstChild,P=k.firstChild,Y=P.firstChild;return n(Y,()=>q?.[e?.keyG]),B(z=>(z=_())!=null?k.style.setProperty("width",z):k.style.removeProperty("width")),S}}),G),n(G,r(N,{get name(){return ee?.[e?.keyG]},size:22})),n(v,r(h,{get when(){return e?.keyG==="total"},get children(){var S=te(),k=S.firstChild,P=k.nextSibling;return P.nextSibling,n(S,()=>e?.total(),P),S}}),L),n(L,()=>e?.amount),B(()=>V(v,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),v}})}})},st=e=>{const l=()=>{let s=e?.keyG;e?.keyG==="total"&&(s=null),e?.updForm("status",s)};return r(h,{get when(){return e?.amount>0},get children(){return r(U,{get fallback(){return(()=>{var s=ne();return s.firstChild,n(s,r(Z,{stroke:"rgb(200 25 60 / 1)",size:32}),null),s})()},get children(){var s=re(),_=s.firstChild,g=_.nextSibling;return s.$$click=l,n(_,r(N,{get name(){return ee?.[e?.keyG]},size:22})),n(s,r(h,{get when(){return q?.[e?.keyG]},get children(){var o=He(),f=o.firstChild;return n(f,()=>q?.[e?.keyG]),o}}),g),n(s,r(h,{get when(){return e?.keyG==="total"},get children(){var o=te(),f=o.firstChild,x=f.nextSibling;return x.nextSibling,n(o,()=>e?.total(),x),o}}),g),n(g,()=>e?.amount),B(()=>V(s,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),s}})}})},lt=async(e,l,s,_,g)=>{let o={params:{idairguide:l,":search5":l},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((f,x)=>{f&&(o.params[":search"+x]=f.trim())}),s&&(o.params[":status"]=s),_&&(o.params[":estate"]=_),g&&(o.params[":city"]=g),W?.roles?.agency&&(o.params[":agency"]=W?.roles?.agency+""),l&&Object.keys(o.params).length>=2){const f=await Q(o);return f?.data?.error?{}:f}return{}},at=async e=>{let l={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};W?.roles?.agency&&(l.params[":agency"]=W?.roles?.agency+"");const s=await Q(l);return s?.data?.error?{}:s},ct=async e=>{e.map(l=>{l?.ssg_track_key,l?.idairguide})},ot=async e=>{e.map(l=>{l?.ssg_track_key,l?.idairguide})},ft=async(e,l)=>{let s=[];e.map(_=>{let g={params:{ssg_track_key:_?.ssg_track_key,idairguide:_?.idairguide},data2update:{currentStatus:l},query:"updateLogisticYabaExpress"};s.push(g)}),Se(s,ut)},ut=async e=>{const s=await Q(e);if(s)return s},dt=e=>(()=>{var l=Ue();return n(l,r(h,{get when(){return e?.item?.total>0},get children(){var s=Qe(),_=s.firstChild,g=_.firstChild,o=g.firstChild,f=g.nextSibling;return _.$$click=()=>e?.updS(e?.ism),n(g,()=>e?.ism,o),n(f,()=>e?.item?.total),s}}),null),n(l,r(tt,{get children(){var s=Ze();return n(s,r(h,{get when(){return e?.item?.cities},get children(){return r(T,{get each(){return O(e?.item?.cities)},children:(_,g)=>(()=>{var o=Ke(),f=o.firstChild,x=f.nextSibling;return o.$$click=()=>e?.updS(e?.ism,_),n(f,_),n(x,()=>e?.item?.cities?.[_]),o})()})}})),s}}),null),l})();Ae(["click","mousemove","mouseout"]);export{ht as default,ot as deleteManifest,ut as fetchCSVInve,ct as loadManifest,ft as updateManifest};
