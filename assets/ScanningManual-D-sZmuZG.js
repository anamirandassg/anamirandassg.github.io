const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BbgvFUmI.js","assets/index-B9UkLIiB.js","assets/index-CKmXtXsd.css","assets/InputHr-Dr3YMJNk.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as P,_ as D,a as y,c as J,f as K,p as U,q as ee,b as te,i,d as c,k as A,s as re,S as O,B as se,F as ae,a0 as ne,w as ie,m as j,A as z,E as oe,e as le,t as x,P as M,y as ce,g as m,G as ge,n as T}from"./index-B9UkLIiB.js";import{status as V,scannedQRs as de}from"./Scanning-wlMzkSuu.js";import ue from"./FlexSpace-djD7tbnt.js";var pe=x('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),be=x('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div class=scrollH>'),ye=x("<div> <!>."),fe=x("<div> "),ve=x('<div class=itm0hist><div><div class="icon_status centerBx"></div><p></p><div class="centerBx bottombx"><h5></h5><div class=vertseparator></div><h4>');const he=P(()=>D(()=>import("./LoadingColorSpinner-BbgvFUmI.js"),__vite__mapDeps([0,1,2]))),_e=P(()=>D(()=>import("./InputHr-Dr3YMJNk.js"),__vite__mapDeps([3,1,2,4]))),B=P(()=>D(()=>import("./index-B9UkLIiB.js").then(g=>g.a7),__vite__mapDeps([1,2])));function Ee(g){const[d,I]=y([]),[F,u]=J({}),[R,k]=y(""),[N,Se]=y(""),[C,W]=y(""),[$e,L]=y(""),[E,q]=y("");K(()=>{}),U(()=>{}),ee(()=>{});const f=(s,n)=>{W(n),L(s),setTimeout(()=>{L("")},300)},v=s=>{q(s),setTimeout(()=>{q("")},3e3)},Q=s=>{s||(s=R()),s=s.split("'").join("-"),k(""),E();let n={timeStamp:new Date().getTime(),latitude:M?.latitude,longitude:M?.longitude,statusId:V(),userId:ce?.profile?.userId},t=s.split("/");s.split("-").length>3&&(t=s.split("-"));let e=t?.[0],p="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const r=new RegExp(p);let o=t.length>4&&e.length===12,l=e.length===13&&r.test(e),a={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};l&&(a={idairguide:"175-2383"+e.slice(3,7),":search0":e});let S="^[0-9]{4}-[1-9]{4}";const b=new RegExp(S);let h=e.length===9&&b.test(e);h&&(a={idairguide:"175-2383"+e.slice(0,4),":search0":e}),l||o||h?X(a,n):(f("","error"),u({consigneeInfo:{ybestate:"Codigo Incorrecto"}}),v(m()))},X=async(s,n)=>{let t=await me(s),e=Object.keys(t)?.[0];if(t[e]?.idairguide){let p=t[e]?.statusHistory||[];p.push(n),s.ssg_track_key=e;let r=t[e]?.estate||t[e]?.consigneeInfo?.ybestate,o=t[e]?.city||t[e]?.consigneeInfo?.ybcity,l={estate:r,city:o,tracking:t[e]?.tracking,currentStatus:V(),timeStamp:new Date().getTime()};if(u(""),u(t[e]),v(m()),f("","success"),!ge?.roles?.[r])f("","warning"),u({consigneeInfo:{ybestate:"Zona incorrecta"}}),v(m());else if(t[e]?.currentStatus!==n.statusId){let a={statusHistory:p,currentStatus:n.statusId};await xe(s,a),I([...d(),l])}else f("","warning"),u({consigneeInfo:{ybcity:"Fue escaneado",ybestate:t[e]?.consigneeInfo?.ybestate}}),v(m())}else f("","error"),u({consigneeInfo:{ybestate:"Error con manifiesto"}}),v(m())};let w={error:{"--err-bx-color":"var(--background-red-ssg)","--err-bx-bgcolor":"var(--background-red35-ssg)",svg:"var(--err-bx-color)",icon:"alert"},success:{"--err-bx-color":"var(--hrm-palette-tertiary60)","--err-bx-bgcolor":"var(--hrm-palette-tertiary90)",svg:"var(--err-bx-color)",icon:"success"},warning:{"--err-bx-color":"#FF6F1D","--err-bx-bgcolor":"#ffdb99",svg:"var(--err-bx-color)",icon:"info"}};return te(N,async s=>de?.codes),(()=>{var s=be(),n=s.firstChild,t=n.nextSibling,e=t.firstChild,p=t.nextSibling;return n.style.setProperty("padding","16px"),i(n,c(O,{get when(){return E()},get children(){var r=pe(),o=r.firstChild,l=o.nextSibling;return i(o,c(B,{get name(){return w?.[C()]?.icon},size:32,get color(){return w?.[C()]?.svg}})),i(l,()=>F?.consigneeInfo?.ybestate),A(a=>re(r,w?.[C()],a)),r}})),t.style.setProperty("padding","16px"),t.style.setProperty("margin-top","35px"),i(t,c(_e,{width:"250px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--hrm-palette-tertiary80)",get value(){return R()},placeholder:"codigo ...",colors:"#2b2b2b",handleClick:k,onEnter:Q}),e),e.$$click=()=>k(""),i(e,c(B,{name:"Xclose",size:32,color:"#2b2b2b"})),i(p,c(oe,{fallback:r=>(()=>{var o=ye(),l=o.firstChild,a=l.nextSibling;return a.nextSibling,i(o,()=>r.toString(),a),o})(),get children(){return c(se,{get fallback(){return(()=>{var r=fe();return r.firstChild,i(r,c(he,{stroke:"rgb(200 25 60 / 1)",size:62}),null),r})()},get children(){return c(O,{get when(){return d()},get children(){return c(ae,{get each(){return ne(d(),"timeStamp",0)},children:(r,o)=>(()=>{var l=ve(),a=l.firstChild,S=a.firstChild,b=S.nextSibling,h=b.nextSibling,$=h.firstChild,Y=$.nextSibling,Z=Y.nextSibling;return i(S,c(B,{get name(){return ie?.[r?.currentStatus]},size:32})),b.style.setProperty("padding","8px"),i(b,()=>r?.tracking),i(a,c(ue,{}),h),i($,()=>r?.city),i(Z,()=>r?.estate),A(_=>{var G=`client_item_box gWXAaj jlytmu manifest  ${j()?"isMobile":"centerBx"}`,H=` title_scan centerBx ${j(),""} `;return G!==_.e&&z(a,_.e=G),H!==_.t&&z(b,_.t=H),_},{e:void 0,t:void 0}),l})()})}})}})}})),A(r=>(r=E()?"block":"none")!=null?n.style.setProperty("display",r):n.style.removeProperty("display")),s})()}const me=async g=>await T({params:g,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2",fldsQry:["idairguide","currentStatus","ssg_track_key","statusHistory","tracking","estate","city","cidentity","consigneeInfo:ybestate","consigneeInfo:ybcity"]}),xe=async(g,d)=>await T({params:g,query:"updateLogisticYabaExpress",data2update:d});le(["click"]);export{Ee as default};
