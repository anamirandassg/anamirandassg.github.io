const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-mZMTLJ5Y.js","assets/index-WdQUpnA8.js","assets/index-DGSEMnLR.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-D8DrIuFp.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-BQYfoCtp.js","assets/DropDwnSearch-D28fYXRw.js","assets/debounces-Bu_cYg6t.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-DmXyUi4Q.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-lko_uZkQ.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-BrA_j17G.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-BZBwokBS.js","assets/DialogHRM-C7gpyLkv.js","assets/DialogHRM-V9_lZntj.css","assets/ItemOnEnviosMobile-B22aldj_.js"])))=>i.map(i=>d[i]);
import{l as N,_ as D,c as J,a as A,p as Ee,k as Be,b as Ge,i as r,d as t,f as V,Y as Pe,o as Z,e as Le,t as v,n as ee,S as f,a0 as Me,G as ae,z as X,F as W,O as F,h as T,g as H,j as P,s as Oe,w as Q,v as de,a8 as ze,N as U,a9 as Fe}from"./index-WdQUpnA8.js";import{u as Re}from"./debounces-Bu_cYg6t.js";import{g as te,S as Ve,l as qe}from"./ShowQRPrintLabel-DF_r3drM.js";import{OpenToast as Te}from"./Toast-dGtFHnN3.js";import"./fontkit.es-BgEBu-ZA.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-CsH7y8Fy.js";var Ye=v("<div style=padding:4px>"),re=v('<div class="icon_status centerBx">'),je=v('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),We=v('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Xe=v('<div><div class="_dsplFlx flxWrp spaceAround ">'),He=v('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),Qe=v('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Ue=v('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),le=v("<div> <!>."),ce=v("<div> "),oe=v("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ze=v("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ge=v("<h5 class=totalBagsNo> <!> / "),me=v('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),he=v("<div class=leftMrg> "),Ke=v("<div class=bottombx><h4>"),Je=v("<div>"),et=v('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),tt=v("<div style=padding:16px;margin-left:20px;>"),rt=v('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const R=N(()=>D(()=>import("./LoadingColorSpinner-mZMTLJ5Y.js"),__vite__mapDeps([0,1,2,3]))),nt=N(()=>D(()=>import("./InputHr-D8DrIuFp.js"),__vite__mapDeps([4,1,2,5]))),E=N(()=>D(()=>import("./SVG-BQYfoCtp.js"),__vite__mapDeps([6,1,2]))),it=N(()=>D(()=>import("./DropDwnSearch-D28fYXRw.js"),__vite__mapDeps([7,1,2,8,6,9]))),st=N(()=>D(()=>import("./ContainerElasticView-DmXyUi4Q.js"),__vite__mapDeps([10,1,2,6,11]))),at=N(()=>D(()=>import("./ButonHrm-lko_uZkQ.js"),__vite__mapDeps([12,1,2,6,13]))),ue=N(()=>D(()=>import("./CheckBoxSlide-BrA_j17G.js"),__vite__mapDeps([14,1,2,15]))),lt=N(()=>D(()=>import("./ItemOnEnvios-BZBwokBS.js"),__vite__mapDeps([16,1,2,17,18,10,6,11])));N(()=>D(()=>import("./ItemOnEnviosMobile-B22aldj_.js"),__vite__mapDeps([19,1,2,17,18,10,6,11,8])));function wt(){const[e,s]=J({list:{manifest:{id:"175-23834683",label:""},search:"",status:""}}),[i,p]=J({}),[_,u]=J({}),[b,w]=A(""),[$,L]=A(64),[M,I]=A(!1),[S,O]=A(!1),[K,Y]=A(""),z=Re(w,500),[_e,ne]=A(!1),[fe,ie]=A(!1),q=(c,d)=>{s("list",{[c]:d}),z(P())},ve=()=>{I(!M()),z(P())},pe=()=>{O(!S()),z(P())};Ee(()=>{}),Be(()=>{});const be=()=>{L(c=>c+64)},$e=c=>{let d=Math.ceil(c?.length/64);Fe(be,1250,d)},[B,{refetch:vt}]=Ge(b,async c=>{let d=e?.list?.manifest?.id;K()!==d&&Y(d);const G=await dt(d);p(G);let x=[],m={};var k={};return k=await ut(e?.list?.search,d,e?.list?.status,e?.list?.estate,e?.list?.city),u("prov",void 0),L(0),M()?F(k).map(y=>{let a=k[y],n=a?.estate||a?.consigneeInfo?.ybestate;ze?.[a?.zone]?.[n]||x.push(a)}):S()?F(k).map(y=>{let a=k[y],n="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(n);a.tracking.length===13&&l.test(a.tracking)&&x.push(a),a?.currentStatus||x.push(a)}):(F(k).map(y=>{let a=k[y],n=a?.estate||a?.consigneeInfo?.ybestate,l=a?.city||a?.consigneeInfo?.ybcity;m[n]||(m[n]={cities:{},total:0}),m[n].cities?.[l]||(m[n].cities[l]=0),m[n].cities[l]+=1,m[n].total+=1,x.push(a)}),u("prov",m)),$e(x),x}),se=()=>B()?.length,ye=c=>{s("list",{manifest:c,status:void 0}),z(P())},ke=()=>{mt(B())},xe=()=>{ht(B())},Ce=()=>{},we=(c,d)=>{q("estate",c),q("city",d)},Se=(c,d)=>{s("list",{estate:void 0,city:void 0}),z(P())},j=c=>c?" "+c:"",Ae=c=>{let d=c?.consigneeInfo;return j(d?.firstName)+j(d?.middleName)+j(d?.lastName)+j(d?.lastName2)},Ne=async()=>{let c=[],d=360;if(ne(!0),B().length<d){const G=B().map(async(m,k)=>{let y=m?.tracking,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const n=new RegExp(a);y.length===13&&n.test(y)&&(y=y.slice(3,12));let o=await te(y),h={state:m?.consigneeInfo?.ybestate,name:Ae(m),phoneNumber:m?.consigneeInfo?.phoneNumber,altPhoneNumber:m?.consigneeInfo?.altPhoneNumber,guiaWeek:m?.guia,bulto:m?.bagnumber,tracking:y,qr:o};c.push(h)});await Promise.all(G);let x=await Ve(c);window.open(x),ne(!1)}else Te({text:`El limite de etiquetas a imprimir es de ${d}`,timeout:2500,id:P()})},De=async()=>{let c=[];ie(!0),setTimeout(async()=>{let d=400,G=619124,x=[],m=new Date().getFullYear().toString().slice(2,4);for(let a=0;a<d;a++)x.push(a);const k=x.map(async(a,n)=>{let l=G+a*2,o=l+1;const h=await te("Y"+m+l),g=await te("Y"+m+o);let C={mtrx:h,mtrx2:g,lbl:"Y"+m+l,lbl2:"Y"+m+o};c.push(C)});await Promise.all(k);let y=await qe(c);window.open(y),ie(!1)},760)},Ie=async c=>{await gt(e?.list?.manifest?.id)};return(()=>{var c=Ue(),d=c.firstChild,G=d.firstChild,x=G.nextSibling,m=x.firstChild,k=d.nextSibling,y=k.firstChild,a=k.nextSibling;return r(m,()=>e?.list?.manifest?.id),r(c,t(f,{get when(){return ee?.profile?.isAdmin},get children(){return t(at,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:ke})}}),k),r(y,t(it,{list:Me,lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:n=>ye(n),width:"260px"})),r(k,t(f,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var n=Ye();return r(n,t(nt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:l=>q("search",l)})),n})(),(()=>{var n=We(),l=n.firstChild,o=l.firstChild;return r(l,t(ue,{get initValue(){return M()},updChange:ve,color:"var(--background-red-ssg)"}),o),r(n,t(f,{get when(){return ee?.profile?.isAdmin},get children(){var h=je(),g=h.firstChild;return r(h,t(ue,{get initValue(){return S()},updChange:pe,color:"var(--background-red-ssg)"}),g),r(h,t(f,{get when(){return S()},get children(){var C=re();return C.$$click=xe,r(C,t(E,{name:"outline_delete",size:24})),C}}),null),h}}),null),n})()]}}),null),r(a,t(f,{get when(){return e?.list?.manifest?.id},get children(){var n=Xe(),l=n.firstChild;return r(l,t(ae,{fallback:o=>(()=>{var h=le(),g=h.firstChild,C=g.nextSibling;return C.nextSibling,r(h,()=>o.toString(),C),h})(),get children(){return t(X,{get fallback(){return(()=>{var o=ce();return o.firstChild,r(o,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){return t(f,{get when(){return i?.total},get children(){return t(W,{get each(){return F(i)},children:(o,h)=>T()?t(ot,{keyG:o,total:se,get status(){return e?.list?.status},get amount(){return i?.[o]},updForm:q}):t(ct,{keyG:o,total:se,get status(){return e?.list?.status},get amount(){return i?.[o]},updForm:q})})}})}})}})),V(()=>H(n,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),n}}),null),r(a,t(f,{get when(){return ee?.profile?.isAdmin},get children(){var n=He(),l=n.firstChild,o=l.firstChild,h=o.nextSibling;return r(l,t(f,{get when(){return!fe()},get fallback(){return(()=>{var g=oe(),C=g.firstChild;return r(g,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),C),g})()},get children(){var g=re();return g.$$click=De,r(g,t(E,{name:"printer",size:24,color:"firebrick"})),g}}),o),o.$$click=Ie,r(o,t(E,{name:"tag-outline",size:24})),h.$$click=Ce,r(h,t(E,{name:"outline_renew",size:24})),r(l,t(f,{get when(){return!_e()},get fallback(){return(()=>{var g=oe(),C=g.firstChild;return r(g,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),C),g})()},get children(){var g=re();return g.$$click=Ne,r(g,t(E,{name:"printer",size:32})),g}}),null),n}}),null),r(a,t(f,{get when(){return _?.prov},get children(){var n=Qe(),l=n.firstChild,o=l.firstChild,h=l.nextSibling;return r(o,t(f,{get when(){return _?.prov},get children(){return t(W,{get each(){return F(_?.prov)},children:(g,C)=>t(ft,{ism:g,get item(){return _?.prov?.[g]},updS:we})})}})),h.$$click=Se,r(h,t(E,{name:"Xclose",size:22})),V(()=>H(n,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),n}}),null),r(a,t(ae,{fallback:n=>(()=>{var l=le(),o=l.firstChild,h=o.nextSibling;return h.nextSibling,r(l,()=>n.toString(),h),l})(),get children(){return t(X,{get fallback(){return(()=>{var n=ce();return n.firstChild,r(n,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return t(f,{get when(){return B()},get children(){return t(W,{get each(){return B()?.slice(0,$())},children:(n,l)=>t(lt,{item:n,refresh:()=>z(P())})})}})}})}}),null),V(n=>Oe(a,` ${T()?"":"width:94vw;"} margin: 0 auto;`,n)),c})()}const ct=e=>{const[s,i]=A(!1),[p,_]=A(0),u=()=>{let $=e?.keyG;e?.keyG==="total"&&($=null),e?.updForm("status",$)},b=()=>{s()||!T()&&e?.keyG!=="total"&&(_(Q?.[e?.keyG]?.length*8.5+"px"),i(!0))},w=()=>{_("0px"),s()&&i(!1)};return t(f,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var $=he();return $.firstChild,r($,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),$})()},get children(){var $=me(),L=$.firstChild,M=L.nextSibling;return $.$$mouseout=w,$.$$mousemove=b,$.$$click=u,r($,t(f,{get when(){return s()},get children(){var I=Ze(),S=I.firstChild,O=S.firstChild,K=O.firstChild;return r(K,()=>Q?.[e?.keyG]),V(Y=>(Y=p())!=null?S.style.setProperty("width",Y):S.style.removeProperty("width")),I}}),L),r(L,t(E,{get name(){return de?.[e?.keyG]},size:22})),r($,t(f,{get when(){return e?.keyG==="total"},get children(){var I=ge(),S=I.firstChild,O=S.nextSibling;return O.nextSibling,r(I,()=>e?.total(),O),I}}),M),r(M,()=>e?.amount),V(()=>H($,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),$}})}})},ot=e=>{const s=()=>{let i=e?.keyG;e?.keyG==="total"&&(i=null),e?.updForm("status",i)};return t(f,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var i=he();return i.firstChild,r(i,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),i})()},get children(){var i=me(),p=i.firstChild,_=p.nextSibling;return i.$$click=s,r(p,t(E,{get name(){return de?.[e?.keyG]},size:22})),r(i,t(f,{get when(){return Q?.[e?.keyG]},get children(){var u=Ke(),b=u.firstChild;return r(b,()=>Q?.[e?.keyG]),u}}),_),r(i,t(f,{get when(){return e?.keyG==="total"},get children(){var u=ge(),b=u.firstChild,w=b.nextSibling;return w.nextSibling,r(u,()=>e?.total(),w),u}}),_),r(_,()=>e?.amount),V(()=>H(i,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),i}})}})},ut=async(e,s,i,p,_)=>{let u={params:{idairguide:s,":search5":s},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((b,w)=>{b&&(u.params[":search"+w]=b.trim())}),i&&(u.params[":status"]=i),p&&(u.params[":estate"]=p),_&&(u.params[":city"]=_),U?.roles?.agency&&(u.params[":agency"]=U?.roles?.agency+""),s&&Object.keys(u.params).length>=2){const b=await Z(u);return b?.data?.error?{}:b}return{}},dt=async e=>{let s={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};U?.roles?.agency&&(s.params[":agency"]=U?.roles?.agency+"");const i=await Z(s);return i?.error?{}:i},gt=async e=>{const i=await Z({params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"});return i?.error?{}:i},mt=async e=>{e.map(s=>{s?.ssg_track_key,s?.idairguide})},ht=async e=>{e.map(s=>{s?.ssg_track_key,s?.idairguide})},St=async(e,s)=>{let i=[];e.map(p=>{let _={params:{ssg_track_key:p?.ssg_track_key,idairguide:p?.idairguide},data2update:{currentStatus:s},query:"updateLogisticYabaExpress"};i.push(_)}),Pe(i,_t)},_t=async e=>{const i=await Z(e);if(i)return i},ft=e=>(()=>{var s=Je();return r(s,t(f,{get when(){return e?.item?.total>0},get children(){var i=et(),p=i.firstChild,_=p.firstChild,u=_.firstChild,b=_.nextSibling;return p.$$click=()=>e?.updS(e?.ism),r(_,()=>e?.ism,u),r(b,()=>e?.item?.total),i}}),null),r(s,t(st,{get children(){var i=tt();return r(i,t(f,{get when(){return e?.item?.cities},get children(){return t(W,{get each(){return F(e?.item?.cities)},children:(p,_)=>(()=>{var u=rt(),b=u.firstChild,w=b.nextSibling;return u.$$click=()=>e?.updS(e?.ism,p),r(b,p),r(w,()=>e?.item?.cities?.[p]),u})()})}})),i}}),null),s})();Le(["click","mousemove","mouseout"]);export{ct as StatusGroupItem,wt as default,ht as deleteManifest,_t as fetchCSVInve,mt as loadManifest,St as updateManifest};
