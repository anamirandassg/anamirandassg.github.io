const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CHL6PhUG.js","assets/index-CyhGxd2Q.js","assets/index-BQScBqqw.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/ContainerElasticView-8MBBuq8D.js","assets/SVG-t04SBauj.js","assets/ContainerElasticView-LzOd6fDI.css","assets/FlexSpace-C8p07dwy.js"])))=>i.map(i=>d[i]);
import{c as H,l as I,_ as A,a as R,aa as ae,u as ne,ab as le,k as oe,p as Z,q as Y,i,d as s,f as G,e as K,t as y,j as Q,O as E,S as L,y as U,F as J,$ as X,h as M,g as T,s as ce,D as ee,B as de,a3 as te,Q as ue,C as W,n as pe,o as ge}from"./index-CyhGxd2Q.js";import{H as me,a as ve}from"./html5-qrcode-scanner-CqdCA5yQ.js";import"./DashManifest-h-PfOgKI.js";import"./ManifestDetails-CUheVku5.js";import{OpenModal as he}from"./DialogHRM-Z0q5zmrF.js";import{stop2Deliver as d}from"./DeliveryView-UMzqOnGJ.js";import{g as _e,S as be}from"./ShowQRPrintLabel-Otb12TBz.js";import"./App.module-CbHnVtRQ.js";import"./debounces-C9JiSbn9.js";import"./fontkit.es-BM8PKL9l.js";import"./ButonHrm-B95Y6hij.js";/* empty css                 */import"./SVG-t04SBauj.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-Cm56jzvW.js";import"./Toast-CA0PmY5E.js";var fe=y("<h5 class=rpto>"),xe=y("<h5>"),Se=y('<div><div class=" flxWrp spaceAround centerBx"><h2>Completar Entrega</h2><div class="icon_status centerBx"></div></div><div style=padding:16px><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="icon_status centerBx"></div><div class=bagsNo></div></div><div><div class=vertseparator></div><div class=vertseparator></div><h4></h4></div><div class="icon_status centerBx"></div></div><p class=" textleft "style=padding:18px>;</p><div>'),re=y("<div> <!>."),ie=y("<div> "),ye=y('<div class="_dsplFlx flxWrp spaceAround "style=" margin:0 auto;;padding:8px 9px;">'),$e=y('<div class="icon_status centerBx">'),De=y("<div style=max-width:160px;margin:8px;><h5>"),we=y('<div><div class=separator></div><div><h5></h5><h4></h4><div class="_dsplFlx bottombx flxWrp spaceAround "><div class=""><h5></h5></div></div></div><div class="_dsplFlx bottombx flxWrp spaceAround ">');const[Ue,Je]=H(),se=I(()=>A(()=>import("./LoadingColorSpinner-CHL6PhUG.js"),__vite__mapDeps([0,1,2,3])));I(()=>A(()=>import("./ContainerElasticView-8MBBuq8D.js"),__vite__mapDeps([4,1,2,5,6])));const z=I(()=>A(()=>import("./SVG-t04SBauj.js"),__vite__mapDeps([5,1,2]))),Ce=I(()=>A(()=>import("./FlexSpace-C8p07dwy.js"),__vite__mapDeps([7,1,2]))),[Xe,et]=R(""),[j,ke]=H();function tt(o){ae();const[_,u]=ne();R(0);const p=le();oe(()=>{$()}),Z(()=>{}),Y(async()=>{d?.stopD?.addressId||p(`/delivery-detail?dId=${_?.dId}`,{replace:!0})});function n(){return"geolocation"in navigator}function m(e){de({latitude:e?.coords?.latitude,longitude:e?.coords?.longitude})}function $(){n()?navigator.geolocation.getCurrentPosition(m):showMessage("Geolocation isn't supported by your browser")}const k=e=>{e.cidentity,{...d?.stopD}},B=e=>{te("cameraScanDelivery")?.clear()},N=e=>{let t=Q(),r={};r.id=t,r.closeEvent=B,r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=s(Ne,{get item(){return d?.stopD},modalId:t,callback:k}),he(r)},D=async()=>{let e=[],t=360,r=E(d?.stopD?.customers);if(r.length<t){const v=r.map(async(h,C)=>{let g=d?.stopD?.customers[h],l=E(g?.bagsNumb),b=g?.phoneNumber.split("|");const f=l.map(async(x,V)=>{let S=g?.bagsNumb?.[x]?.tracking,F="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const O=new RegExp(F);S.length===13&&O.test(S)&&(S=S.slice(3,12));let w=await _e(S),P={state:d?.stopD?.estate,name:g?.name,phoneNumber:b[0],altPhoneNumber:b[1],bulto:g?.bagsNumb?.[x]?.bagnumber,tracking:S,qr:w};e.push(P)});await Promise.all(f)});await Promise.all(v);let c=await be(e);window.open(c),setLoadingPdf(!1)}else OpenToast({text:`El limite de etiquetas a imprimir es de ${t}`,timeout:2500,id:Q()})};return(()=>{var e=Se(),t=e.firstChild,r=t.firstChild,v=r.nextSibling,c=t.nextSibling,h=c.firstChild,C=h.firstChild,g=C.nextSibling,l=h.nextSibling,b=l.firstChild,f=b.nextSibling,x=f.nextSibling,V=l.nextSibling,S=c.nextSibling,F=S.firstChild,O=S.nextSibling;return v.$$click=N,i(v,s(z,{name:"qr_code",size:32,color:"#2b2b2b"})),i(C,s(z,{name:"open_package_file_outline",size:32})),i(g,()=>d?.stopD?.bagsNo),i(c,s(Ce,{}),l),i(l,s(L,{get when(){return d?.stopD?.consigneeInfo?.ybreparto},get children(){return[(()=>{var a=fe();return i(a,()=>d?.stopD?.consigneeInfo?.ybreparto),a})(),"|"]}}),b),i(l,s(L,{get when(){return d?.stopD?.city},get children(){return[(()=>{var a=xe();return i(a,()=>d?.stopD?.city),a})(),"|"]}}),f),i(x,()=>d?.stopD?.estate),V.$$click=D,i(V,s(z,{name:"printer",size:32})),i(S,()=>d?.stopD?.addressId,F),i(O,s(X,{fallback:a=>(()=>{var w=re(),P=w.firstChild,q=P.nextSibling;return q.nextSibling,i(w,()=>a.toString(),q),w})(),get children(){return s(U,{get fallback(){return(()=>{var a=ie();return a.firstChild,i(a,s(se,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){return s(L,{get when(){return E(d?.stopD?.customers)?.length>0},get children(){return s(J,{get each(){return E(d?.stopD?.customers)},children:(a,w)=>s(Ee,{get item(){return d?.stopD?.customers?.[a]}})})}})}})}})),G(a=>{var w=` ${M(),"centerBx"}  topbx `,P=` ${M(),"centerBx"} bottombx`,q=` ${M()?"":"width:94vw;"} margin: 0 auto; ; padding: 18px 29px;`;return w!==a.e&&T(c,a.e=w),P!==a.t&&T(l,a.t=P),a.a=ce(O,q,a.a),a},{e:void 0,t:void 0,a:void 0}),e})()}const Pe=o=>(()=>{var _=ye();return i(_,s(X,{fallback:u=>(()=>{var p=re(),n=p.firstChild,m=n.nextSibling;return m.nextSibling,i(p,()=>u.toString(),m),p})(),get children(){return s(U,{get fallback(){return(()=>{var u=ie();return u.firstChild,i(u,s(se,{stroke:"rgb(200 25 60 / 1)",size:62}),null),u})()},get children(){return s(L,{get when(){return E(o?.list)?.length>0},get children(){return s(J,{get each(){return E(o?.list)},children:(u,p)=>(()=>{var n=De(),m=n.firstChild;return ee(n,"data-id",`${u}`),i(n,s(L,{get when(){return j?.[u]?.scanned==="ST200"},get children(){var $=$e();return i($,s(z,{name:"success",size:32,color:"var(--hrm-palette-tertiary50)"})),$}}),m),i(m,()=>o?.list?.[u]?.bagnumber),G(()=>T(n,`bag_number centerBx ${j?.[u]?.scanned==="ST200"?"checked":""} `)),n})()})}})}})}})),_})(),Ee=o=>(()=>{var _=we(),u=_.firstChild,p=u.nextSibling,n=p.firstChild,m=n.nextSibling,$=m.nextSibling,k=$.firstChild,B=k.firstChild,N=p.nextSibling;return i(n,()=>o?.item?.name),i(m,()=>o?.item?.phoneNumber),i(B,()=>o?.item?.tracking),i(N,s(Pe,{get list(){return o?.item?.bagsNumb}})),G(D=>{var e=o?.item?.cidentity,t=` ${M()?"":"centerBx"} bottombx`;return e!==D.e&&ee(_,"data-cid",D.e=e),t!==D.t&&T(p,D.t=t),D},{e:void 0,t:void 0}),_})();K(["click"]);var Ie=y('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:350px>');const Ae=I(()=>A(()=>import("./SVG-t04SBauj.js"),__vite__mapDeps([5,1,2]))),Be=I(()=>A(()=>import("./FlexSpace-C8p07dwy.js"),__vite__mapDeps([7,1,2])));function Ne(o){const[_,u]=R(""),[p,n]=R(""),[m,$]=R();Z(()=>{te("cameraScanDelivery")?.clear()}),Y(()=>{setTimeout(()=>{D()},90)});const k=(e,t)=>{e!==m()&&($(e),setTimeout(()=>{$("")},3e3),B(e))},B=e=>{e||(e=_()),e=e.split("'").join("-"),new Date().getTime(),W?.latitude,W?.longitude,o?.status,pe?.profile?.userId;let t=e.split("/");e.split("-").length>3&&(t=e.split("-").join);let r=t?.[0],v="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const c=new RegExp(v);let h=r.length===13&&c.test(r),C="^[0-9]{4}-[1-9]{4}";const g=new RegExp(C);let l=r.length===9&&g.test(r),b=t.length>4&&r.length===12,f={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};h&&(f={idairguide:"175-2383"+r.slice(3,7),":search0":r}),l&&(f={idairguide:"175-2383"+r.slice(0,4),":search0":r}),h||b||l?N(f):(n("alert"),setTimeout(()=>{n("")},1800))},N=async e=>{let t=await Re(e),r=Object.keys(t)?.[0];if(t[r]?.cidentity){let v=t[r]?.cidentity,c=t[r]?.ssg_track_key,h={...o?.item};h?.customers?.[v]?.bagsNumb?.[c]?(n("success"),ke(c,{scanned:"ST200"})):n("alert"),setTimeout(()=>{n("")},1800),h?.customers?.[v]?.bagsNumb?.[c],o?.callback(t[r])}else n("alert"),setTimeout(()=>{n("")},1800)},D=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[me.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},t=new ve("qr-reader_SSDM",e);t.render(k),ue("cameraScanDelivery",t)};return(()=>{var e=Ie(),t=e.firstChild,r=t.firstChild,v=r.firstChild,c=v.nextSibling,h=t.nextSibling,C=h.firstChild,g=C.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),v.$$click=k,i(r,s(Be,{}),c),c.$$click=()=>{},i(c,s(Ae,{name:"keyboard",size:32,color:"#2b2b2b"})),G(l=>{var b=M()?"92vw":"420px",f=`scanOverlay ${p()} `,x=p()?"block":"none";return b!==l.e&&((l.e=b)!=null?e.style.setProperty("width",b):e.style.removeProperty("width")),f!==l.t&&T(g,l.t=f),x!==l.a&&((l.a=x)!=null?g.style.setProperty("display",x):g.style.removeProperty("display")),l},{e:void 0,t:void 0,a:void 0}),e})()}const Re=async o=>await ge({params:o,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"});K(["click"]);export{tt as default,Ue as scannedQRs,Je as setScannedQRs,et as setStatus,ke as setStatusD,Xe as status,j as statusD};
