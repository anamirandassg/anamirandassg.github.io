const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FlexSpace-CtzalO8r.js","assets/index-v1_MOgQp.js","assets/index-DHvNTsK7.css","assets/ShowQR-MdegmpfO.js","assets/ShowQRPrintLabel-B_Y0U6Nu.js","assets/DropDwnSearch-o1z4Yfdq.js","assets/DropDwnSearch-DMkLkRPc.css"])))=>i.map(i=>d[i]);
import{l as R,_ as V,a as N,c as de,d as i,i as t,S as o,a2 as K,k as O,s as ue,w as ge,m as L,H as p,A as oe,J as Q,B as z,K as me,M as G,b as Z,F as re,x as he,W as _e,X as ve,e as be,t as u,g as D,O as $e,Q as X,y as fe,N as ye,n as J}from"./index-v1_MOgQp.js";import xe from"./ContainerElasticView-CSd8BDK3.js";import"./ItemOnEnviosAlert-D-JldnBe.js";var Se=u('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),we=u("<div class=guide_number><h5>"),ke=u('<div class=" tr_bar_10 _dsplFlx"><div class="icon_status centerBx">'),ee=u("<div class=bag_number><h5>"),te=u("<div class=bottombx><h5>"),ie=u("<div><div>"),Ce=u('<p class="tr_bar_30 textleft fullName_consigne">'),Ie=u("<div style=margin-right:4vw>"),Be=u('<h4 class="tr_bar_20 textleft">'),Ee=u('<div class="_dsplFlx flxWrp spaceAround centerBx">'),Le=u('<div class="icon_status centerBx">'),He=u("<p>"),De=u('<div class=bottombx bottombx><p class=" textleft fullName_consigne"></p><div style=margin-right:4vw></div><h4 class=" textleft phonesNum"></h4><p class="textleft ">'),Ne=u('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx topbx centerBx"></div><div class="_dsplFlx bottombx"><div class="_dsplFlx bottombx"><h5></h5><div class=vertseparator></div><h4>'),Ae=u('<ul class=inline><li><div class=" centerBx"><div class="icon_status centerBx"></div><span class="icon_status centerBx">Movimientos</span></div></li><li><div class=" centerBx"><div class="icon_status centerBx"></div><span class="icon_status centerBx">HBLS</span></div></li><li><div class=" centerBx"><div class="icon_status centerBx"></div><span class="icon_status centerBx">Embarcador'),Te=u("<div class=tab>"),Y=u("<div class=loader>Loading..."),ne=u("<div>"),Me=u('<div class="centerBx bottombx"><h4 class=""></h4><h5>el <!> a las <!> por</h5><h4 class="">'),Fe=u('<div class="centerBx bottombx"><h4 class=""></h4><h5> KG</h5><h4 class="">'),Pe=u("<div class=bottombx><div><h4></h4></div><div><h5>");const q=R(()=>V(()=>import("./FlexSpace-CtzalO8r.js"),__vite__mapDeps([0,1,2]))),H=R(()=>V(()=>import("./index-v1_MOgQp.js").then(e=>e.a8),__vite__mapDeps([1,2]))),qe=R(()=>V(()=>import("./ShowQR-MdegmpfO.js"),__vite__mapDeps([3,1,2,4]))),Oe=R(()=>V(()=>import("./DropDwnSearch-o1z4Yfdq.js"),__vite__mapDeps([5,1,2,6])));function Je(e){const[l,h]=N(""),[s,d]=de({}),[_,v]=N(""),[f,B]=N(""),[A,w]=N(""),x=n=>n?" "+n:"",T=()=>{let n=e?.item?.consigneeInfo;return x(n?.firstName)+x(n?.middleName)+x(n?.lastName)+x(n?.lastName2)},E=()=>{let n=e?.item?.consigneeInfo,a=x(n?.altPhoneNumber);return x(n?.phoneNumber)+(a?" |"+a:"")},M=()=>{let n=e?.item?.statusHistory||[];if(e?.item?.statusHistory){let a=n.reduce((g,$)=>Math.min(g,$.timeStamp),1/0);return Math.floor((new Date().getTime()-a)/864e5)}else return null},W=async()=>{let n={ssg_track_key:e?.item?.ssg_track_key,idairguide:e?.item?.idairguide};await Ke(n),e?.refresh()},y=()=>{let n=e?.item?.street.split(",");return n.slice(0,n.length-2).join(",")},k=n=>{let a="";if(n)a=n;else if(e?.item?.hblS){let $=e?.item?.hblS;a=`${e?.item?.idairguide}/${e?.item?.cidentity}/${$}`}let g={};g.id=D(),g.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},g.content=i(qe,{val:a,get item(){return e?.item}}),$e(g)},S=n=>{let a=n,g="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const $=new RegExp(g);return a.length===13&&$.test(a)&&(a=a.slice(3,12)),a},C=(n,a)=>{v(a),B(n),setTimeout(()=>{B("")},300)},F=n=>{w(n),setTimeout(()=>{w("")},3e3)},le=async n=>{let a={timeStamp:new Date().getTime(),latitude:X?.latitude,longitude:X?.longitude,statusId:n,userId:fe?.profile?.userId};if(e?.item?.idairguide){let g=e?.item?.statusHistory||[];g.push(a);let $={idairguide:e?.item?.idairguide,ssg_track_key:e?.item?.ssg_track_key},I=e?.item?.estate||e?.item?.consigneeInfo?.ybestate,P=e?.item?.city||e?.item?.consigneeInfo?.ybcity;if(e?.item?.tracking,l(),new Date().getTime(),d(""),d(e?.item),F(D()),C("","success"),!p?.roles?.[I])C("","warning"),d({consigneeInfo:{ybestate:"Zona incorrecta"}}),F(D());else if(e?.item?.currentStatus!==a.statusId){let j={statusHistory:g,currentStatus:a.statusId};await Qe($,j),e?.newSear()}else C("","warning"),d({consigneeInfo:{ybcity:"Fue escaneado",ybestate:e?.item?.consigneeInfo?.ybestate}}),F(D())}else C("","error"),d({consigneeInfo:{ybestate:"Error con manifiesto"}}),F(D())},se=()=>X?.list?.filter(n=>n.id);return i(o,{get when(){return e?.item?.tracking},get children(){var n=Ne(),a=n.firstChild,g=a.nextSibling,$=g.nextSibling,I=$.firstChild,P=I.firstChild,j=P.nextSibling,ae=j.nextSibling;return a.style.setProperty("padding","16px"),t(a,i(o,{get when(){return A()},get children(){var r=Se(),m=r.firstChild,c=m.nextSibling;return t(m,i(H,{get name(){return K?.[_()]?.icon},size:32,get color(){return K?.[_()]?.svg}})),t(c,()=>s?.consigneeInfo?.ybestate),O(b=>ue(r,K?.[_()],b)),r}})),t(g,i(o,{get when(){return e?.item?.tracking},get children(){return[(()=>{var r=ke(),m=r.firstChild;return t(m,i(H,{get name(){return ge?.[e?.item?.currentStatus]},size:32})),t(r,i(o,{get when(){return M()},get children(){var c=we(),b=c.firstChild;return t(b,M),c}}),null),r})(),i(o,{get when(){return L()&&e?.item?.tracking},get children(){return[i(q,{}),(()=>{var r=ie(),m=r.firstChild;return t(m,i(o,{get when(){return e?.item?.bagnumber},get children(){var c=ee(),b=c.firstChild;return c.$$click=()=>k(null),t(b,()=>e?.item?.bagnumber),c}})),t(r,i(o,{get when(){return e?.item?.tracking},get children(){var c=te(),b=c.firstChild;return c.$$click=()=>k(S(e?.item?.tracking)),t(b,()=>S(e?.item?.tracking)),c}}),null),r})()]}}),i(o,{get when(){return!L()},get children(){return[(()=>{var r=Ce();return t(r,T),r})(),Ie(),(()=>{var r=Be();return t(r,E),r})()]}})]}}),null),t(g,i(q,{}),null),t(g,i(o,{get when(){return p?.roles?.HBL?.isActive},get children(){return[(()=>{var r=Ee();return t(r,i(Oe,{get list(){return se()},lbl_empty:"Funciones de Escaneado",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return l()},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",hasDebounce:!1,onSelect:m=>le(m.id),width:"260px"})),r})(),(()=>{var r=Le();return r.$$click=W,t(r,i(H,{name:"map-marker-radius-outline",size:24})),r})()]}}),null),t(g,i(q,{}),null),t(g,i(o,{get when(){return!L()&&e?.item?.tracking},get children(){var r=ie(),m=r.firstChild;return t(m,i(o,{get when(){return e?.item?.bagnumber},get children(){var c=ee(),b=c.firstChild;return c.$$click=()=>k(null),t(b,()=>S(e?.item?.bagnumber)),c}})),t(r,i(o,{get when(){return e?.item?.tracking},get children(){var c=te(),b=c.firstChild;return c.$$click=()=>k(S(e?.item?.tracking)),t(b,()=>S(e?.item?.tracking)),c}}),null),r}}),null),t($,i(o,{get when(){return!L()&&e?.item?.consigneeInfo?.ybcity},get children(){var r=He();return t(r,y),r}}),I),t($,i(q,{}),I),t(P,()=>e?.item?.consigneeInfo?.ybcity),t(ae,()=>e?.item?.consigneeInfo?.ybestate),t(n,i(o,{get when(){return L()&&e?.item?.consigneeInfo?.ybcity},get children(){var r=De(),m=r.firstChild,c=m.nextSibling,b=c.nextSibling,ce=b.nextSibling;return t(m,T),t(b,E),t(ce,y),r}}),null),t(n,i(Re,{get item(){return e?.item}}),null),O(r=>{var m=`client_item_box gWXAaj jlytmu ${L()?"isMobile":""}`,c=A()?"block":"none";return m!==r.e&&oe(n,r.e=m),c!==r.t&&((r.t=c)!=null?a.style.setProperty("display",c):a.style.removeProperty("display")),r},{e:void 0,t:void 0}),n}})}const Re=e=>{const[l,h]=N(0),[s,d]=ye(),_=v=>()=>d(()=>h(v));return i(xe,{get children(){return[(()=>{var v=Ae(),f=v.firstChild,B=f.firstChild,A=B.firstChild,w=f.nextSibling,x=w.firstChild,T=x.firstChild,E=w.nextSibling,M=E.firstChild,W=M.firstChild;return Q(f,"click",_(1)),t(A,i(H,{name:"list_dot",size:24})),Q(w,"click",_(2)),t(T,i(H,{name:"receipt",size:24})),Q(E,"click",_(3)),t(W,i(H,{name:"send",size:24})),O(y=>{var k=l()===1,S=l()===2,C=l()===3;return k!==y.e&&f.classList.toggle("selected",y.e=k),S!==y.t&&w.classList.toggle("selected",y.t=S),C!==y.a&&E.classList.toggle("selected",y.a=C),y},{e:void 0,t:void 0,a:void 0}),v})(),(()=>{var v=Te();return t(v,i(z,{get fallback(){return Y()},get children(){return i(me,{get children(){return[i(G,{get when(){return l()===1},get children(){return i(o,{get when(){return l()===1},get children(){return i(Ve,{index:1,get idairguide(){return e?.item?.idairguide},get id(){return e?.item?.ssg_track_key}})}})}}),i(G,{get when(){return l()===2},get children(){return i(o,{get when(){return l()===2},get children(){return i(Ye,{index:2,get idairguide(){return e?.item?.idairguide},get id(){return e?.item?.ssg_track_key}})}})}}),i(G,{get when(){return l()===3},get children(){return i(o,{get when(){return l()===3},get children(){return i(je,{index:3,get idairguide(){return e?.item?.idairguide},get id(){return e?.item?.ssg_track_key}})}})}})]}})}})),O(()=>v.classList.toggle("pending",!!s())),v})()]}})},Ve=e=>{const[l,{refetch:h}]=Z(e?.id,async s=>(await U(e?.idairguide,e?.id,["statusHistory"]))?.statusHistory);return i(z,{get fallback(){return Y()},get children(){var s=ne();return t(s,i(re,{get each(){return l()},children:d=>i(ze,{item:d})})),s}})},ze=e=>(()=>{var l=Me(),h=l.firstChild,s=h.nextSibling,d=s.firstChild,_=d.nextSibling,v=_.nextSibling,f=v.nextSibling;f.nextSibling;var B=s.nextSibling;return t(h,()=>he[e?.item?.statusId]),t(s,()=>_e(e?.item?.timeStamp),_),t(s,()=>ve(e?.item?.timeStamp),f),t(B,()=>e?.item?.userName),l})(),Ye=e=>{const[l,{refetch:h}]=Z(e?.id,async s=>(await U(e?.idairguide,e?.id,["hbls"]))?.hbls);return i(z,{get fallback(){return Y()},get children(){var s=ne();return t(s,i(re,{get each(){return l()},children:d=>i(We,{item:d})})),s}})},We=e=>(()=>{var l=Fe(),h=l.firstChild,s=h.nextSibling,d=s.firstChild,_=s.nextSibling;return t(h,()=>e?.item?.hbl),t(s,()=>e?.item?.weight,d),t(_,()=>e?.item?.namegood),l})(),je=e=>{const[l,{refetch:h}]=Z(e?.id,async s=>await U(e?.idairguide,e?.id,["nameshipper","shipperInfo:phoneNumber"]));return i(z,{get fallback(){return Y()},get children(){var s=Pe(),d=s.firstChild,_=d.firstChild,v=d.nextSibling,f=v.firstChild;return t(_,()=>l()?.nameshipper),t(f,()=>l()?.shipperInfo?.phoneNumber),s}})},Ke=async e=>(await J({params:e,query:"deleteLogisticYabaExpress"}))?.data,U=async(e,l,h)=>{const d=await J({params:{id:l,idairguide:e},fldsQry:h,query:"getLogisticOrderByKeyID"});return d?.data?.error?{}:d},Qe=async(e,l)=>await J({params:e,query:"updateLogisticYabaExpress",data2update:l});be(["click"]);export{Je as default};
