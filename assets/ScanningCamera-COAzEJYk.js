import{a as o,c as K,h as U,o as V,m as X,d as a,S as C,G as ee,i as s,f as te,g as q,t as _}from"./index-CKlS2mqf.js";import"./ButonHrm-Bcr7wX39.js";import{b as re,u as se,g as P}from"./Util-dbxHFpkD.js";import{H as ae,a as oe}from"./html5-qrcode-scanner-Cl8XE5pu.js";import{u as ne}from"./debounces-DfnYbmgs.js";import n from"./FlexSpace-CQHbOlRW.js";import"./globalSignal-BjtWwNy3.js";import{h as ie}from"./ScanningServices-0FFyE8ZG.js";import{OpenToast as le}from"./Toast-C66aE0jK.js";/* empty css                 */import"./SVG-BHqu-2pP.js";import"./index-Ci0zXM0r.js";var ce=_('<div class=scanWrp><div><div class=" _dsplFlx"><h3 class="errTxt err centerBx "></h3></div><div class=" _dsplFlx"><h3 class="errTxt ybcity centerBx"></h3></div><div class=" _dsplFlx"><h3 class="errTxt centerBx"></h3></div></div><div></div><div id=qr-reader style=width:300px>'),de=_("<slot name=plans style=margin-top:35px><div>"),me=_("<div>esta funcion es solo para dispositivos mobiles");function Pe(H){const[M,N]=o([]),[l,$]=K({}),[Q,j]=o(""),[I,T]=o(),[G,R]=o(),[k,W]=o(""),[z,A]=o(""),[v,D]=o("");U(()=>{}),V(()=>{T(!1),re("cameraScanLoc")?.clear()}),X(()=>{setTimeout(()=>{J()},90)});const E=(e,t)=>{W(t),A(e),setTimeout(()=>{A("")},1300)},F=e=>{D(e),setTimeout(()=>{D("")},2e3)},B=(e,t)=>{e!==G()&&(R(e),setTimeout(()=>{R("")},3e3),Y(e))},Y=e=>{e||(e=Q()),e=e.split("'").join("-"),j(""),!v()&&Z(e)},Z=async e=>{let t=await ie(e,H?.status);if(t?.data){E("","success"),le({text:`Pertenece a ${t?.data?.city?t?.data?.city:""}${t?.data?.estate?" :: "+t?.data?.estate:""}`,timeout:3500,theme:"green",id:P()});let c={consigneeInfo:{ybcity:t?.data?.city,ybestate:t?.data?.estate}};$(c),F(P()),N([...M(),t.data])}else t?.error&&(E("",t?.error?.alert),$(t?.error?.scanData),F(P()))},J=()=>{T(!0);let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[ae.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},t=new oe("qr-reader",e);t.render(B),se("cameraScanLoc",t)};return ne(B,400),a(C,{when:!0,get fallback(){return me()},get children(){return a(C,{get when(){return I()},get children(){var e=de(),t=e.firstChild;return e._$owner=ee(),s(e,a(C,{get when(){return I()},style:"margin-top: 35px",get children(){var c=ce(),i=c.firstChild,d=i.firstChild,m=d.firstChild,p=d.nextSibling,u=p.firstChild,f=p.nextSibling,y=f.firstChild,h=i.nextSibling;return s(d,a(n,{}),m),s(m,z),s(d,a(n,{}),null),s(p,a(n,{}),u),s(u,()=>l?.consigneeInfo?.ybcity),s(p,a(n,{}),null),s(f,a(n,{}),y),s(y,()=>l?.consigneeInfo?.ybestate),s(f,a(n,{}),null),te(r=>{var L=`scanOverlayFront ${k()}`,S=v()?"block":"none",g=300/z()?.length*1.73+"px",b=300/l?.consigneeInfo?.ybcity?.length*1.13+"px",w=300/l?.consigneeInfo?.ybestate?.length*1.23+"px",O=`scanOverlay  ${k()} `,x=v()?"block":"none";return L!==r.e&&q(i,r.e=L),S!==r.t&&((r.t=S)!=null?i.style.setProperty("display",S):i.style.removeProperty("display")),g!==r.a&&((r.a=g)!=null?m.style.setProperty("font-size",g):m.style.removeProperty("font-size")),b!==r.o&&((r.o=b)!=null?u.style.setProperty("font-size",b):u.style.removeProperty("font-size")),w!==r.i&&((r.i=w)!=null?y.style.setProperty("font-size",w):y.style.removeProperty("font-size")),O!==r.n&&q(h,r.n=O),x!==r.s&&((r.s=x)!=null?h.style.setProperty("display",x):h.style.removeProperty("display")),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),c}}),t),e}})}})}export{Pe as default};
