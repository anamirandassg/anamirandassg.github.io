const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FlexSpace-BtbIGYXR.js","assets/index-CaXA0mR0.js","assets/index-D4QuRvi-.css","assets/SVG-DEfsU4Im.js","assets/index-Ci0zXM0r.js","assets/ShowQR-BO2r0ZCQ.js","assets/globalSignal-wMqKMl0q.js","assets/ShowQRPrintLabel-DnvvB_mE.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices--pV7_9n8.js","assets/Util-D7b_hj3C.js","assets/Toast-DXo7WFrx.js","assets/Toast-DLpFKn-Q.css","assets/DropDwnSearch-Ena0jYS0.js","assets/debounces-C7Wz-qd_.js","assets/DropDwnSearch-DMkLkRPc.css"])))=>i.map(i=>d[i]);
import{l as N,_ as z,a as L,c as ce,m as de,b as oe,i as t,d as n,f,e as ue,t as _,s as Z,S as u,z as M,F as G,n as J,g as K,j as me}from"./index-CaXA0mR0.js";import{g as I,f as ge,a as _e,q as he}from"./Util-D7b_hj3C.js";import{t as k,b as Y}from"./manifestList-CT6VCobT.js";import{OpenModal as ve}from"./DialogHRM-DNoXdE5V.js";import{i as x,g as H}from"./globalSignal-wMqKMl0q.js";import{g as be}from"./ShowQRPrintLabel-DnvvB_mE.js";import{setTasks as $e,tasks as fe}from"./FindHBL-DYAf5V8X.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices--pV7_9n8.js";import"./Toast-DXo7WFrx.js";import"./InputHr-Ov8gpAjA.js";import"./SVG-DEfsU4Im.js";import"./Envios-CEWrOQOk.js";import"./debounces-C7Wz-qd_.js";import"./FlexSpace-BtbIGYXR.js";var ee=_('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),te=_('<div class="centerBx bottombx"><h5>'),ie=_("<div class=bag_number><h5>"),re=_("<div class=bottombx><h5>"),ne=_("<div>"),le=_('<div class="centerBx flxWrp spaceAround "><img ref width=200 alt=qr>'),xe=_('<div class="client_item_box WXAaj2 jlytmu isMobile"><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class=" centerBx"><div class="icon_status centerBx"></div></div><div class=" centerBx"><div></div></div><div class="_dsplFlx bottombx"><h5></h5><div class=vertseparator></div><h4></h4></div><div class=bottombx bottombx><p class=" textleft fullName_consigne"></p></div><div class=separator>'),ae=_('<div class=" resumeStatus icon_status centerBx"><div class=bottombx bottombx><h4>'),ye=_('<div class=" tr_bar_20 _dsplFlx"><div class="icon_status centerBx">'),Se=_('<p class="tr_bar_30 textleft fullName_consigne">'),we=_("<div style=margin-right:4vw>"),ke=_("<div><div>"),Ce=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx topbx centerBx"><div class="_dsplFlx bottombx"><h5></h5><div class=vertseparator></div><h4>');const P=N(()=>z(()=>import("./FlexSpace-BtbIGYXR.js"),__vite__mapDeps([0,1,2]))),C=N(()=>z(()=>import("./SVG-DEfsU4Im.js"),__vite__mapDeps([3,1,2,4]))),Ie=N(()=>z(()=>import("./ShowQR-BO2r0ZCQ.js"),__vite__mapDeps([5,1,2,6,7,8,4,9,10,11,12,13])));N(()=>z(()=>import("./DropDwnSearch-Ena0jYS0.js"),__vite__mapDeps([14,1,2,15,3,4,16])));function Xe(e){L("");const[A,v]=ce({}),[b,Q]=L(""),[Ae,p]=L(""),[B,q]=L(""),E=i=>i?" "+i:"",V=()=>{let i=e?.item?.consigneeInfo;return E(i?.firstName)+E(i?.middleName)+E(i?.lastName)+E(i?.lastName2)},R=i=>{let l="";if(i)l=i;else if(e?.item?.hblS){let h=e?.item?.hblS;l=`${e?.item?.idairguide}/${e?.item?.cidentity}/${h}`}let s={};s.id=I(),s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=n(Ie,{val:l,get item(){return e?.item}}),ve(s)},y=i=>{let l=i,s="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const h=new RegExp(s);return l.length===13&&h.test(l)&&(l=l.slice(3,12)),l},F=(i,l)=>{Q(l),p(i),setTimeout(()=>{p("")},300)},D=i=>{q(i),setTimeout(()=>{q("")},3e3)},W=async i=>{let l={timeStamp:new Date().getTime(),latitude:H?.latitude,longitude:H?.longitude,statusId:i,userId:me?.profile?.userId};if(e?.item?.idairguide){let s=e?.item?.statusHistory||[];s.push(l);let h={idairguide:e?.item?.idairguide,ssg_track_key:e?.item?.ssg_track_key},g=e?.item?.estate||e?.item?.consigneeInfo?.ybestate,S=e?.item?.city||e?.item?.consigneeInfo?.ybcity,w={idairnumber:e?.item?.idairnumber,estate:g,city:S,tracking:e?.currentHbl,currentStatus:i,timeStamp:new Date().getTime()};if(v(""),v(e?.item),D(I()),F("","success"),!M?.roles?.[g])F("","warning"),v({consigneeInfo:{ybestate:"Zona incorrecta"}}),D(I());else if(e?.item?.currentStatus!==l.statusId){let r={statusHistory:s,currentStatus:l.statusId};await Pe(h,r),$e([...fe(),w]),e?.newSear()}else F("","warning"),v({consigneeInfo:{ybcity:"Fue escaneado",ybestate:e?.item?.consigneeInfo?.ybestate}}),D(I())}else F("","error"),v({consigneeInfo:{ybestate:"Error con manifiesto"}}),D(I())};de(()=>{});const j=()=>H?.list?.filter(i=>i.id),[O,{refetch:Be}]=oe(e?.item?.tracking,async()=>{let i=y(e?.item?.tracking);return await be(i)});return x()?(()=>{var i=xe(),l=i.firstChild,s=l.nextSibling,h=s.firstChild,g=s.nextSibling,S=g.firstChild,w=g.nextSibling,r=w.firstChild,d=r.nextSibling,c=d.nextSibling,o=w.nextSibling,T=o.firstChild;return o.nextSibling,l.style.setProperty("padding","16px"),t(l,n(u,{get when(){return B()},get children(){var a=ee(),m=a.firstChild,U=m.nextSibling;return t(m,n(C,{get name(){return k?.[b()]?.icon},size:32,get color(){return k?.[b()]?.svg}})),t(U,()=>A?.consigneeInfo?.ybestate),f($=>Z(a,k?.[b()],$)),a}})),t(h,n(C,{get name(){return Y?.[e?.item?.currentStatus]},size:32})),t(s,n(u,{get when(){return e?.item?.idairnumber},get children(){var a=te(),m=a.firstChild;return t(m,()=>e?.item?.idairnumber),a}}),null),t(g,n(P,{}),S),t(S,n(u,{get when(){return e?.item?.bagnumber},get children(){var a=ie(),m=a.firstChild;return a.$$click=()=>R(null),t(m,()=>e?.item?.bagnumber),a}})),t(g,n(P,{}),null),t(g,n(u,{get when(){return e?.item?.tracking},get children(){var a=re(),m=a.firstChild;return a.$$click=()=>R(y(e?.item?.tracking)),t(m,()=>y(e?.item?.tracking)),a}}),null),t(g,n(P,{}),null),t(r,()=>e?.item?.consigneeInfo?.ybcity),t(c,()=>e?.item?.consigneeInfo?.ybestate),t(T,V),t(i,n(u,{get when(){return!e?.showQR&&M?.roles?.HBLUPD?.isActive},get children(){var a=ne();return t(a,n(G,{get each(){return j()},children:(m,U)=>(()=>{var $=ae(),X=$.firstChild,se=X.firstChild;return $.$$click=Ee=>W(m.id),$.style.setProperty("padding","9px"),t($,n(C,{get name(){return m.icon},size:24}),X),t(se,()=>m.label),$})()})),a}}),null),t(i,n(u,{get when(){return e?.showQR},get children(){var a=le(),m=a.firstChild;return a.style.setProperty("padding","16px"),f(()=>J(m,"src",O())),a}}),null),f(a=>(a=B()?"block":"none")!=null?l.style.setProperty("display",a):l.style.removeProperty("display")),i})():n(u,{get when(){return e?.item?.tracking},get children(){var i=Ce(),l=i.firstChild,s=l.nextSibling,h=s.firstChild,g=h.firstChild,S=g.nextSibling,w=S.nextSibling;return l.style.setProperty("padding","16px"),t(l,n(u,{get when(){return B()},get children(){var r=ee(),d=r.firstChild,c=d.nextSibling;return t(d,n(C,{get name(){return k?.[b()]?.icon},size:32,get color(){return k?.[b()]?.svg}})),t(c,()=>A?.consigneeInfo?.ybestate),f(o=>Z(r,k?.[b()],o)),r}})),t(s,n(u,{get when(){return e?.item?.tracking},get children(){return[(()=>{var r=ye(),d=r.firstChild;return t(d,n(C,{get name(){return Y?.[e?.item?.currentStatus]},size:32})),t(r,n(u,{get when(){return!x()&&e?.item?.idairnumber},get children(){var c=te(),o=c.firstChild;return t(o,()=>e?.item?.idairnumber),c}}),null),r})(),n(u,{get when(){return!x()},get children(){return[(()=>{var r=Se();return t(r,V),r})(),we()]}})]}}),h),t(s,n(P,{}),h),t(g,()=>e?.item?.consigneeInfo?.ybcity),t(w,()=>e?.item?.consigneeInfo?.ybestate),t(s,n(P,{}),null),t(s,n(u,{get when(){return!x()&&e?.item?.tracking},get children(){var r=ke(),d=r.firstChild;return t(d,n(u,{get when(){return e?.item?.bagnumber},get children(){var c=ie(),o=c.firstChild;return c.$$click=()=>R(null),t(o,()=>y(e?.item?.bagnumber)),c}})),t(r,n(u,{get when(){return e?.item?.tracking},get children(){var c=re(),o=c.firstChild;return c.$$click=()=>R(y(e?.item?.tracking)),t(o,()=>y(e?.item?.tracking)),c}}),null),r}}),null),t(i,n(u,{get when(){return!e?.showQR&&M?.roles?.HBLUPD?.isActive},get children(){var r=ne();return t(r,n(G,{get each(){return j()},children:(d,c)=>(()=>{var o=ae(),T=o.firstChild,a=T.firstChild;return o.$$click=m=>W(d.id),o.style.setProperty("padding","9px"),t(o,n(C,{get name(){return d.icon},size:24}),T),t(a,()=>x()?d.label:d.tag),o})()})),f(()=>K(r,x()?"":" bottombx flxWrp spaceAround centerBx")),r}}),null),t(i,n(u,{get when(){return e?.showQR},get children(){var r=le(),d=r.firstChild;return r.style.setProperty("padding","16px"),f(()=>J(d,"src",O())),r}}),null),f(r=>{var d=`client_item_box gWXAaj jlytmu ${x()?"isMobile":""}`,c=B()?"block":"none";return d!==r.e&&K(i,r.e=d),c!==r.t&&((r.t=c)!=null?l.style.setProperty("display",c):l.style.removeProperty("display")),r},{e:void 0,t:void 0}),i}})}const Pe=async(e,A)=>{let v={params:e,data2update:A},b={..._e(he())}[809004];return v={...v,...b},await ge(v)};ue(["click"]);export{Xe as default};
