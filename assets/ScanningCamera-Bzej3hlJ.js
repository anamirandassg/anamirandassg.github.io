import{a as n,c as ee,h as te,o as re,m as oe,d as s,S as I,G as se,i as a,f as ae,g as B,t as P}from"./index-BDYb7ygo.js";import{a as ne,u as le,g as h}from"./Util-uEfv1z7O.js";import{H as ie,a as ce}from"./html5-qrcode-scanner-Cl8XE5pu.js";import{u as de}from"./debounces-CzBAfzpR.js";import l from"./FlexSpace-DyxRpzo1.js";import{h as me,S as ue,a as pe}from"./ShowScanAlert-D9619Ru7.js";import{OpenToast as ge}from"./Toast-B0W-hRLR.js";import{OpenModal as L,CloseModal as q}from"./DialogHRM-BKz3DNw7.js";import"./index-Ci0zXM0r.js";import"./globalSignal-BR18e3Xk.js";import"./ShowQRPrintLabel-DD0U7IZl.js";import"./PDFButton-B_0lS8EG.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-BKe7DAJ7.js";import"./InitPrintServices-CprHcwF4.js";var he=P('<div class=scanWrp><div><div class=" _dsplFlx"><h3 class="errTxt err centerBx "></h3></div><div class=" _dsplFlx"><h3 class="errTxt ybcity centerBx"></h3></div><div class=" _dsplFlx"><h3 class="errTxt centerBx"></h3></div></div><div></div><div id=qr-reader style=width:300px>'),ye=P("<slot name=plans style=margin-top:35px><div>"),ve=P("<div>esta funcion es solo para dispositivos mobiles");function Re(N){const[Q,j]=n([]),[c,_]=ee({}),[W,Y]=n(""),[$,T]=n(),[Z,z]=n(),[A,J]=n(""),[D,M]=n(""),[y,R]=n("");te(()=>{}),re(()=>{T(!1),ne("cameraScanLoc")?.clear()}),oe(()=>{setTimeout(()=>{X()},90)});const k=(t,e)=>{J(e),M(t),setTimeout(()=>{M("")},1300)},K=t=>{R(t),setTimeout(()=>{R("")},2e3)},E=(t,e)=>{t!==Z()&&(z(t),setTimeout(()=>{z("")},3e3),U(t))},U=t=>{t||(t=W()),t=t.split("'").join("-"),Y(""),!y()&&V(t)},V=async t=>{let e=await me(t,N?.status);if(e?.data){if(e?.data?.isSSG)F();else{k("","success"),ge({text:`Pertenece a ${e?.data?.city?e?.data?.city:""}${e?.data?.estate?" :: "+e?.data?.estate:""}`,timeout:3500,theme:"green",id:h()});let r={consigneeInfo:{ybcity:e?.data?.city,ybestate:e?.data?.estate}};_(r),K(h()),G({color:e?.color,msg1:e?.data?.city,msg2:e?.data?.estate,bagnumber:e?.data?.bagnumber})}j([...Q(),e.data])}else e?.error&&(e?.error?.isSSG?F():(G({color:e?.error?.color,msg1:e?.error?.scanData?.consigneeInfo?.ybcity,msg2:e?.error?.scanData?.consigneeInfo?.ybestate,bagnumber:e?.error?.scanData?.consigneeInfo?.bagnumber}),k("",e?.error?.alert),_(e?.error?.scanData)))},X=()=>{T(!0);let t={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[ie.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},e=new ce("qr-reader",t);e.render(E),le("cameraScanLoc",e)};de(E,400);const F=t=>{let e=h(),r={};r.id=e,r.overlayColor="rgb(200 25 60)",r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=s(ue,{modalId:e}),L(r),setTimeout(()=>{q(e)},1800)},G=t=>{let e=h(),r={};r.id=e,r.overlayColor=t.color,r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=s(pe,{modalId:e,get bagnumber(){return t.bagnumber},get msg1(){return t.msg1},get msg2(){return t.msg2}}),L(r),setTimeout(()=>{q(e)},1800)};return s(I,{when:!0,get fallback(){return ve()},get children(){return s(I,{get when(){return $()},get children(){var t=ye(),e=t.firstChild;return t._$owner=se(),a(t,s(I,{get when(){return $()},style:"margin-top: 35px",get children(){var r=he(),i=r.firstChild,d=i.firstChild,m=d.firstChild,u=d.nextSibling,p=u.firstChild,v=u.nextSibling,g=v.firstChild,f=i.nextSibling;return a(d,s(l,{}),m),a(m,D),a(d,s(l,{}),null),a(u,s(l,{}),p),a(p,()=>c?.consigneeInfo?.ybcity),a(u,s(l,{}),null),a(v,s(l,{}),g),a(g,()=>c?.consigneeInfo?.ybestate),a(v,s(l,{}),null),ae(o=>{var H=`scanOverlayFront ${A()}`,S=y()?"block":"none",b=300/D()?.length*1.73+"px",w=300/c?.consigneeInfo?.ybcity?.length*1.13+"px",x=300/c?.consigneeInfo?.ybestate?.length*1.23+"px",O=`scanOverlay  ${A()} `,C=y()?"block":"none";return H!==o.e&&B(i,o.e=H),S!==o.t&&((o.t=S)!=null?i.style.setProperty("display",S):i.style.removeProperty("display")),b!==o.a&&((o.a=b)!=null?m.style.setProperty("font-size",b):m.style.removeProperty("font-size")),w!==o.o&&((o.o=w)!=null?p.style.setProperty("font-size",w):p.style.removeProperty("font-size")),x!==o.i&&((o.i=x)!=null?g.style.setProperty("font-size",x):g.style.removeProperty("font-size")),O!==o.n&&B(f,o.n=O),C!==o.s&&((o.s=C)!=null?f.style.setProperty("display",C):f.style.removeProperty("display")),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),r}}),e),t}})}})}export{Re as default};
