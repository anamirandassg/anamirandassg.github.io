const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BgridjWf.js","assets/index-CGT10uUT.js","assets/index-C1cQPolT.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-DzWfk4jn.js","assets/debounces-CADX4diu.js","assets/SVG-DuL43edz.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-DTH_6eof.js","assets/ButonUploadHrm-teo1yFhc.js","assets/Util-D886uaAp.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DfX2IFNb.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-BCOyxZSv.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as I,_ as E,u as be,c as z,a as k,o as pe,h as ve,m as he,i as e,d as r,k as ae,e as me,t as d,S as y,f as X,n as Z,g as ge,j as fe,H as xe,F as ee}from"./index-CGT10uUT.js";import{b as R,f as U,e as $e,a as G,O as te,p as ye,g as V}from"./Util-D886uaAp.js";import{u as Ce}from"./debounces-CADX4diu.js";import"./globalSignal-D56CQjAo.js";import"./ButonHrm-BdfjzuyR.js";import{g as Se,a as Be,c as we,i as ke,b as Ie,u as Ee}from"./handelImagesServices-DtmFHU84.js";import{LookupInventory as Pe}from"./DashInventory-D9YUJ8_w.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-DuL43edz.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-C6ttNAKg.js";var Oe=d('<div class="icon_status centerBx">'),Ae=d("<div style=width:300px;position:relative;><img alt=sf><div>"),Fe=d("<div style=width:300px;position:relative;><img alt=sf>"),De=d('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),je=d('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px>'),qe=d("<div class=hseparator>"),Le=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Me=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Ve=d('<div class="bottombx centerBx unit"style=padding:30px>'),Te=d('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),Re=d('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><h4>Factura</h4></div><div class="tr_bar_40 "><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),Ue=d("<div> "),We=d("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Qe=d('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ye=d('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),re=d("<div style=margin:8px>"),ze=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),Ge=d("<div class=unitBx><h5>"),He=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const le=I(()=>E(()=>import("./LoadingColorSpinner-BgridjWf.js"),__vite__mapDeps([0,1,2,3]))),Ne=I(()=>E(()=>import("./DropDwnSearch-DzWfk4jn.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),Ke=I(()=>E(()=>import("./FlexSpace-DTH_6eof.js"),__vite__mapDeps([9,1,2]))),Je=I(()=>E(()=>import("./ButonUploadHrm-teo1yFhc.js"),__vite__mapDeps([10,1,2,6,7,11,12]))),Xe=I(()=>E(()=>import("./CheckBoxSlide-DfX2IFNb.js"),__vite__mapDeps([13,1,2,14]))),Ze=I(()=>E(()=>import("./InputHr-BCOyxZSv.js"),__vite__mapDeps([15,1,2,16]))),ie=I(()=>E(()=>import("./SVG-DuL43edz.js"),__vite__mapDeps([6,1,2,7])));function ft(a){const[l,n]=be(),[t,v]=z({search:""});z(),z();const[h,W]=k(null),[P,F]=k(!1),[D,B]=k(!1),[T,ne]=k(""),[st,oe]=k("");Ce(oe,400),pe(()=>{}),ve(()=>{});const K=async()=>{if(l?.mId){let s={id:l?.mId,businessId:ae?.profile?.businessYId},_=await lt(s),x=await Pe(l?.mId),w=0,$=0,i=[],o={};te(x)?.map(b=>{let c=x[b]?.store;x[b]?.products?.map(m=>{if(l?.mId===m?.product?.id){let g={...x[b]};delete g.products,g.qty=m?.qty*1,g.price=m?.price*1,w+=m?.price*1*m?.qty*1,o[c]||(o[c]={total:0}),o[c].total+=g.qty,$+=m?.qty*1,i.push(g)}})});const p=w/$;ne(Se()+Be()+"/"+_?.productImageUrl),v("stockList",i),v("stock",{Balance:w,Total:$,priceCost:p,stockByStore:o}),v("productObj",_)}};he(async()=>{K()});const Q=async s=>{await tt(l?.mId,s),K()},J=async(s,_)=>{let x=await Ie(s.type,_,1);if(await Ee(x,s)){let $={...t?.productObj?.thumbnails};$[_]=1,await Q({productImageUrl:_,thumbnails:$}),B(!1),F(!1)}else B(!1)},ce=async()=>{if(B(!0),h()?.name.split(".").pop()==="webp"){let s=t?.productObj?.code+"/"+V()+V()+".webp";J(h()?.file,s)}else{let s=await we(h()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),_=await ke(s),w=await(await fetch(_)).blob(),$=t?.productObj?.code+"/"+V()+V()+".webp";J(w,$)}},de=s=>{W(s),F(!0)},ue=s=>{Q({isPublic:s?"9":null})},j=async(s,_)=>{Q({[s]:_})},_e=async(s,_)=>{rt(t?.productObj,s)};return(()=>{var s=Re(),_=s.firstChild,x=_.firstChild,w=x.nextSibling,$=w.nextSibling;return $.nextSibling,e(s,r(y,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var i=Ue();return i.firstChild,e(i,r(le,{stroke:"rgb(200 25 60 / 1)",size:62}),null),i})()},get children(){var i=je(),o=i.firstChild,p=o.firstChild,b=p.firstChild,c=b.nextSibling,m=c.firstChild,g=c.nextSibling,q=o.nextSibling,Y=q.nextSibling,L=Y.firstChild,C=L.nextSibling;return e(o,r(y,{get when(){return h()?.source},get children(){var f=Ae(),S=f.firstChild,O=S.nextSibling;return e(O,r(y,{get when(){return!D()},get fallback(){return(()=>{var u=We(),A=u.firstChild;return e(u,r(le,{stroke:"rgb(200 25 60 / 1)",size:32}),A),u})()},get children(){var u=Oe();return u.$$click=ce,e(u,r(ie,{name:"arrow_up_large",size:24})),u}})),X(u=>{var A=h()?.source,M=D()?"floatBtn loading":"floatBtn ";return A!==u.e&&Z(S,"src",u.e=A),M!==u.t&&ge(O,u.t=M),u},{e:void 0,t:void 0}),f}}),p),e(o,r(y,{get when(){return fe(()=>!!T())()&&!h()?.source},get children(){var f=Fe(),S=f.firstChild;return X(()=>Z(S,"src",T())),f}}),p),e(b,()=>t?.productObj?.name),e(c,r(Xe,{get initValue(){return t?.productObj?.isPublic},updChange:ue,color:"var(--background-red-ssg)"}),m),e(g,r(Je,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:de})),e(p,r(y,{get when(){return xe()},get children(){var f=De(),S=f.firstChild,O=S.nextSibling;return e(O,r(Ne,{get list(){return G("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:u=>_e(u.id),width:"260px"})),f}}),null),e(L,r(N,{get value(){return t?.productObj?.name},label:"Nombre:",key:"name",updItem:j})),e(C,r(se,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:j}),null),e(C,r(H,{}),null),e(C,r(se,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:j}),null),e(C,r(H,{}),null),e(C,r(N,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:j}),null),e(C,r(H,{}),null),e(C,r(N,{get value(){return t?.productObj?.model},label:"Modelo:",key:"model",updItem:j}),null),i}}),_),e(_,r(y,{get when(){return t?.stockList},get children(){return[qe(),(()=>{var i=Ve();return e(i,r(y,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Le(),p=o.firstChild,b=p.nextSibling,c=b.firstChild;return e(c,()=>(t?.stock?.Total*1).toFixed(2)),o})(),r(Ke,{}),(()=>{var o=Me(),p=o.firstChild,b=p.nextSibling,c=b.firstChild;return c.firstChild,e(c,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),i})(),(()=>{var i=Te();return i.firstChild,e(i,r(ee,{get each(){return te(t?.stock?.stockByStore)},children:(o,p)=>(()=>{var b=Qe(),c=b.firstChild,m=c.firstChild,g=c.nextSibling,q=g.firstChild;return e(c,()=>G("storeGroupBy")?.[o]?.label,m),e(q,()=>(t?.stock?.stockByStore?.[o]?.total*1).toFixed(2)),b})()}),null),i})()]}}),x),e(_,r(ee,{get each(){return t?.stockList},children:(i,o)=>(()=>{var p=Ye(),b=p.firstChild,c=b.nextSibling,m=c.firstChild,g=c.nextSibling,q=g.firstChild,Y=q.firstChild,L=g.nextSibling,C=L.firstChild,f=L.nextSibling,S=f.firstChild,O=S.firstChild,u=f.nextSibling,A=u.firstChild,M=A.firstChild;return M.firstChild,e(b,r(ie,{get name(){return et[i?.type]},size:24,color:"var(--background-red-ssg)"})),e(m,()=>ye(i?.createDate)),e(Y,()=>(i?.qty*1).toFixed(2)),e(C,()=>i?.invoice),e(S,()=>G("storeGroupBy")?.[i?.store]?.label,O),e(M,()=>(i?.price*1).toFixed(2),null),p})()}),null),s})()}let et={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const H=()=>[re(),"|",re()],N=a=>{const[l,n]=k(!1),[t,v]=k(""),h=()=>{a?.updItem(a?.key,t()),n(!1)},W=()=>{let P=l();P||v(a?.value),n(!P)};return r(y,{get when(){return a?.value},get children(){var P=ze(),F=P.firstChild,D=F.firstChild;return D.$$click=W,e(D,()=>a?.label),e(F,r(y,{get when(){return l()},get fallback(){return(()=>{var B=Ge(),T=B.firstChild;return e(T,()=>a?.value),B})()},get children(){return r(Ze,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:B=>v(B),onEnter:h})}}),null),P}})},se=a=>r(y,{get when(){return a?.value},get children(){var l=He(),n=l.firstChild,t=n.firstChild,v=t.nextSibling,h=v.firstChild;return e(t,()=>a?.label),e(h,()=>a?.value),l}}),tt=async(a,l)=>{let n={params:{id:a,businessId:ae?.profile?.businessYId},form:l},t=R(129004);return n={...n,...t},await U(n)},rt=async(a,l)=>{let n={...a};n.ssg_product_key=V(),n.businessId=l;let t={params:{businessId:l},form:n},v=R(129003);t={...t,...v};{const h=await U(t);return h?.data?.error?{}:h?.data}},lt=async a=>{let l={params:a},n=R(122002);return l={...l,...n},await U(l)},xt=async a=>{let l=[];a.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},v=R(802002);t={...t,...v},l.push(t)}),$e(l,it)},it=async a=>{const n=await U(a);if(n)return n};me(["click"]);export{ft as default,it as fetchCSVInve,xt as loadProduct,tt as updProducts};
