const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-COlfJtVV.js","assets/index-BWNX0He3.js","assets/index-W9fcnr7G.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-DikJz5xh.js","assets/debounces-CQVUCIt2.js","assets/SVG-CQeJUfOS.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-jF4ydPKD.js","assets/ButonUploadHrm-B-wQ0lQl.js","assets/Util-D2YTzGDx.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-p99DxsW6.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-BgAaVRJw.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as k,_ as I,u as ht,c as U,a as w,o as vt,h as mt,m as gt,i as e,d as r,k as it,e as ft,t as _,S as y,f as J,n as X,g as xt,j as $t,H as yt,F as Z}from"./index-BWNX0He3.js";import{b as M,f as V,e as Ct,a as Q,O as N,p as St,g as q}from"./Util-D2YTzGDx.js";import{u as Bt}from"./debounces-CQVUCIt2.js";import"./globalSignal-CnE3yxf9.js";import"./ButonHrm--czLVxb3.js";import{g as wt,a as kt,c as It,i as Pt,b as Et,u as Ot}from"./handelImagesServices-cqnasdgr.js";import{LookupInventory as At}from"./DashInventory-CXQZtT8P.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-CQeJUfOS.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-DH6WDEEi.js";var Dt=_('<div class="icon_status centerBx">'),Ft=_("<div style=width:300px;position:relative;><img alt=sf><div>"),qt=_("<div style=width:300px;position:relative;><img alt=sf>"),jt=_('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Lt=_('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px>'),Mt=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Vt=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Tt=_('<div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx centerBx unit"style=padding:30px></div><div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:</h4></div></div><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><h4>Factura</h4></div><div class="tr_bar_40 "><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator>'),Rt=_("<div><div style=padding:30px>"),Ut=_("<div> "),Qt=_("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Wt=_('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Yt=_('<div class="bottombx centerBx unit"><div class=tr_bar_20><h5></h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_40 "><h4></h4></div><div class="tr_bar_40 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),tt=_("<div style=margin:8px>"),zt=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),Gt=_("<div class=unitBx><h5>"),Ht=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const et=k(()=>I(()=>import("./LoadingColorSpinner-COlfJtVV.js"),__vite__mapDeps([0,1,2,3]))),Kt=k(()=>I(()=>import("./DropDwnSearch-DikJz5xh.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),Jt=k(()=>I(()=>import("./FlexSpace-jF4ydPKD.js"),__vite__mapDeps([9,1,2]))),Xt=k(()=>I(()=>import("./ButonUploadHrm-B-wQ0lQl.js"),__vite__mapDeps([10,1,2,6,7,11,12]))),Zt=k(()=>I(()=>import("./CheckBoxSlide-p99DxsW6.js"),__vite__mapDeps([13,1,2,14]))),Nt=k(()=>I(()=>import("./InputHr-BgAaVRJw.js"),__vite__mapDeps([15,1,2,16]))),te=k(()=>I(()=>import("./SVG-CQeJUfOS.js"),__vite__mapDeps([6,1,2,7])));function ge(a){const[l,n]=ht(),[t,v]=U({search:""});U(),U();const[m,T]=w(null),[P,O]=w(!1),[A,S]=w(!1),[j,st]=w(""),[se,at]=w("");Bt(at,400),vt(()=>{}),mt(()=>{});const Y=async()=>{if(l?.mId){let i={id:l?.mId,businessId:it?.profile?.businessYId},p=await le(i),u=await At(l?.mId),g=0,b=0,f=[],x={};N(u)?.map(B=>{let o=u[B]?.store;u[B]?.products?.map(h=>{if(l?.mId===h?.product?.id){let s={...u[B]};delete s.products,s.qty=h?.qty*1,s.price=h?.price*1,g+=h?.price*1*h?.qty*1,x[o]||(x[o]={total:0}),x[o].total+=s.qty,b+=h?.qty*1,f.push(s)}})});const D=g/b;st(wt()+kt()+"/"+p?.productImageUrl),v("stockList",f),v("stock",{Balance:g,Total:b,priceCost:D,stockByStore:x}),v("productObj",p)}};gt(async()=>{Y()});const R=async i=>{await ee(l?.mId,i),Y()},z=async(i,p)=>{let u=await Et(i.type,p,1);if(await Ot(u,i)){let b={...t?.productObj?.thumbnails};b[p]=1,await R({productImageUrl:p,thumbnails:b}),S(!1),O(!1)}else S(!1)},nt=async()=>{if(S(!0),m()?.name.split(".").pop()==="webp"){let i=t?.productObj?.code+"/"+q()+q()+".webp";z(m()?.file,i)}else{let i=await It(m()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),p=await Pt(i),g=await(await fetch(p)).blob(),b=t?.productObj?.code+"/"+q()+q()+".webp";z(g,b)}},ot=i=>{T(i),O(!0)},ct=i=>{R({isPublic:i?"9":null})},L=async(i,p)=>{R({[i]:p})},dt=async(i,p)=>{re(t?.productObj,i)};return(()=>{var i=Rt(),p=i.firstChild;return e(i,r(y,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var u=Ut();return u.firstChild,e(u,r(et,{stroke:"rgb(200 25 60 / 1)",size:62}),null),u})()},get children(){var u=Lt(),g=u.firstChild,b=g.firstChild,f=b.firstChild,x=f.nextSibling,D=x.firstChild,B=x.nextSibling,o=g.nextSibling,h=o.nextSibling,s=h.firstChild;return e(g,r(y,{get when(){return m()?.source},get children(){var c=Ft(),$=c.firstChild,C=$.nextSibling;return e(C,r(y,{get when(){return!A()},get fallback(){return(()=>{var d=Qt(),E=d.firstChild;return e(d,r(et,{stroke:"rgb(200 25 60 / 1)",size:32}),E),d})()},get children(){var d=Dt();return d.$$click=nt,e(d,r(te,{name:"arrow_up_large",size:24})),d}})),J(d=>{var E=m()?.source,F=A()?"floatBtn loading":"floatBtn ";return E!==d.e&&X($,"src",d.e=E),F!==d.t&&xt(C,d.t=F),d},{e:void 0,t:void 0}),c}}),b),e(g,r(y,{get when(){return $t(()=>!!j())()&&!m()?.source},get children(){var c=qt(),$=c.firstChild;return J(()=>X($,"src",j())),c}}),b),e(f,()=>t?.productObj?.name),e(x,r(Zt,{get initValue(){return t?.productObj?.isPublic},updChange:ct,color:"var(--background-red-ssg)"}),D),e(B,r(Xt,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ot})),e(b,r(y,{get when(){return yt()},get children(){var c=jt(),$=c.firstChild,C=$.nextSibling;return e(C,r(Kt,{get list(){return Q("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:d=>dt(d.id),width:"260px"})),c}}),null),e(s,r(lt,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:L}),null),e(s,r(W,{}),null),e(s,r(lt,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:L}),null),e(s,r(W,{}),null),e(s,r(rt,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:L}),null),e(s,r(W,{}),null),e(s,r(rt,{get value(){return t?.productObj?.model},label:"Model:",key:"model",updItem:L}),null),u}}),p),e(i,r(y,{get when(){return t?.stockList&&t?.stock?.Total>0},get children(){var u=Tt(),g=u.firstChild,b=g.nextSibling,f=b.nextSibling;f.firstChild;var x=f.nextSibling,D=x.nextSibling,B=D.nextSibling;return B.nextSibling,e(b,r(y,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Mt(),h=o.firstChild,s=h.nextSibling,c=s.firstChild;return e(c,()=>(t?.stock?.Total*1).toFixed(2)),o})(),r(Jt,{}),(()=>{var o=Vt(),h=o.firstChild,s=h.nextSibling,c=s.firstChild;return c.firstChild,e(c,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),e(f,r(Z,{get each(){return N(t?.stock?.stockByStore)},children:(o,h)=>(()=>{var s=Wt(),c=s.firstChild,$=c.firstChild,C=c.nextSibling,d=C.firstChild;return e(c,()=>Q("storeGroupBy")?.[o]?.label,$),e(d,()=>(t?.stock?.stockByStore?.[o]?.total*1).toFixed(2)),s})()}),null),e(u,r(Z,{get each(){return t?.stockList},children:(o,h)=>(()=>{var s=Yt(),c=s.firstChild,$=c.firstChild,C=c.nextSibling,d=C.firstChild,E=d.firstChild,F=C.nextSibling,ut=F.firstChild,G=F.nextSibling,H=G.firstChild,_t=H.firstChild,bt=G.nextSibling,pt=bt.firstChild,K=pt.firstChild;return K.firstChild,e($,()=>St(o?.createDate)),e(E,()=>(o?.qty*1).toFixed(2)),e(ut,()=>o?.invoice),e(H,()=>Q("storeGroupBy")?.[o?.store]?.label,_t),e(K,()=>(o?.price*1).toFixed(2),null),s})()}),null),u}}),p),i})()}const W=()=>[tt(),"|",tt()],rt=a=>{const[l,n]=w(!1),[t,v]=w(""),m=()=>{a?.updItem(a?.key,t()),n(!1)},T=()=>{let P=l();P||v(a?.value),n(!P)};return r(y,{get when(){return a?.value},get children(){var P=zt(),O=P.firstChild,A=O.firstChild;return A.$$click=T,e(A,()=>a?.label),e(O,r(y,{get when(){return l()},get fallback(){return(()=>{var S=Gt(),j=S.firstChild;return e(j,()=>a?.value),S})()},get children(){return r(Nt,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:S=>v(S),onEnter:m})}}),null),P}})},lt=a=>r(y,{get when(){return a?.value},get children(){var l=Ht(),n=l.firstChild,t=n.firstChild,v=t.nextSibling,m=v.firstChild;return e(t,()=>a?.label),e(m,()=>a?.value),l}}),ee=async(a,l)=>{let n={params:{id:a,businessId:it?.profile?.businessYId},form:l},t=M(129004);return n={...n,...t},await V(n)},re=async(a,l)=>{let n={...a};n.ssg_product_key=q(),n.businessId=l;let t={params:{businessId:l},form:n},v=M(129003);t={...t,...v};{const m=await V(t);return m?.data?.error?{}:m?.data}},le=async a=>{let l={params:a},n=M(122002);return l={...l,...n},await V(l)},fe=async a=>{let l=[];a.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},v=M(802002);t={...t,...v},l.push(t)}),Ct(l,ie)},ie=async a=>{const n=await V(a);if(n)return n};ft(["click"]);export{ge as default,ie as fetchCSVInve,fe as loadProduct,ee as updProducts};
