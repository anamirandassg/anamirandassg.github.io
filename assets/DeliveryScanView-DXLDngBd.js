const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BtN0XxbB.js","assets/index-CBb1UIHT.js","assets/index-DGSEMnLR.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/Item2Delivery-BNKv_-oE.js","assets/ContainerElasticView-LzOd6fDI.css","assets/SVG-3Gw9Y_Kq.js","assets/FlexSpace-Bd8Af0Vm.js"])))=>i.map(i=>d[i]);
import{c as Z,l as A,_ as B,a as L,ab as ne,u as le,X as oe,k as ce,p as Y,q as K,i as r,d as s,f as z,e as U,t as y,j as W,O as k,S as E,y as X,F as J,E as ee,h as T,g as M,s as de,G as te,B as ue,a5 as re,T as ge,C as j,n as me,o as pe}from"./index-CBb1UIHT.js";import{H as ve,a as he}from"./html5-qrcode-scanner-BtFWONYc.js";import"./DashManifest-Pf5vOLQ6.js";import"./ManifestDetails-BLQYvzkh.js";import{OpenModal as _e}from"./DialogHRM-wncysAke.js";import{stop2Deliver as u}from"./DeliveryView-BmNrQkjV.js";import{g as be,S as fe}from"./ShowQRPrintLabel-BVffamcI.js";import"./App.module-CbHnVtRQ.js";import"./debounces-BNPYbJqW.js";import"./fontkit.es-D_wgEtWW.js";import"./ButonHrm-clcMPYcI.js";/* empty css                 */import"./SVG-3Gw9Y_Kq.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-BHsvr6H8.js";import"./Toast-xPRDTEfS.js";var ye=y("<h5 class=rpto>"),Se=y("<h5>"),xe=y('<div><div class=" flxWrp spaceAround centerBx"><h2>Completar Entrega</h2><div class="icon_status centerBx"></div></div><div style=padding:16px><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="icon_status centerBx"></div><div class=bagsNo></div></div><div><div class=vertseparator></div><div class=vertseparator></div><h4></h4></div><div class="icon_status centerBx"></div></div><p class=" textleft "style=padding:18px>;</p><div>'),ie=y("<div> <!>."),se=y("<div> "),$e=y('<div class="_dsplFlx flxWrp spaceAround "style=" margin:0 auto;;padding:8px 9px;">'),De=y('<div class="icon_status centerBx">'),we=y("<div style=max-width:160px;margin:8px;><h5>"),H=y('<div class="_dsplFlx bottombx flxWrp spaceAround ">'),Ce=y('<div><div class=separator></div><div><h5></h5><h4></h4><div class="_dsplFlx bottombx flxWrp spaceAround "><div class=""><h5>');const[Je,et]=Z(),ae=A(()=>B(()=>import("./LoadingColorSpinner-BtN0XxbB.js"),__vite__mapDeps([0,1,2,3]))),ke=A(()=>B(()=>import("./Item2Delivery-BNKv_-oE.js"),__vite__mapDeps([4,1,2,5]))),G=A(()=>B(()=>import("./SVG-3Gw9Y_Kq.js"),__vite__mapDeps([6,1,2]))),Ee=A(()=>B(()=>import("./FlexSpace-Bd8Af0Vm.js"),__vite__mapDeps([7,1,2]))),[tt,rt]=L(""),[Q,Pe]=Z();function it(a){ne(),L(0);const[S,l]=le(),m=oe();ce(()=>{x()}),Y(()=>{}),K(async()=>{u?.stopD?.addressId||m(`/delivery-detail?dId=${S?.dId}`,{replace:!0})});function o(){return"geolocation"in navigator}function h(e){ue({latitude:e?.coords?.latitude,longitude:e?.coords?.longitude})}function x(){o()?navigator.geolocation.getCurrentPosition(h):showMessage("Geolocation isn't supported by your browser")}const P=e=>{e.cidentity,{...u?.stopD}},N=e=>{re("cameraScanDelivery")?.clear()},R=e=>{let t=W(),i={};i.id=t,i.closeEvent=N,i.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},i.content=s(Le,{get item(){return u?.stopD},modalId:t,callback:P}),_e(i)},g=async()=>{let e=[],t=360,i=k(u?.stopD?.customers);if(i.length<t){const p=i.map(async(_,C)=>{let v=u?.stopD?.customers[_],c=k(v?.bagsNumb),b=v?.phoneNumber.split("|");const f=c.map(async($,V)=>{let D=v?.bagsNumb?.[$]?.tracking,F="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const O=new RegExp(F);D.length===13&&O.test(D)&&(D=D.slice(3,12));let w=await be(D),I={state:u?.stopD?.estate,name:v?.name,phoneNumber:b[0],altPhoneNumber:b[1],bulto:v?.bagsNumb?.[$]?.bagnumber,tracking:D,qr:w};e.push(I)});await Promise.all(f)});await Promise.all(p);let d=await fe(e);window.open(d)}else OpenToast({text:`El limite de etiquetas a imprimir es de ${t}`,timeout:2500,id:W()})};return(()=>{var e=xe(),t=e.firstChild,i=t.firstChild,p=i.nextSibling,d=t.nextSibling,_=d.firstChild,C=_.firstChild,v=C.nextSibling,c=_.nextSibling,b=c.firstChild,f=b.nextSibling,$=f.nextSibling,V=c.nextSibling,D=d.nextSibling,F=D.firstChild,O=D.nextSibling;return p.$$click=R,r(p,s(G,{name:"qr_code",size:32,color:"#2b2b2b"})),r(C,s(G,{name:"open_package_file_outline",size:32})),r(v,()=>u?.stopD?.bagsNo),r(d,s(Ee,{}),c),r(c,s(E,{get when(){return u?.stopD?.consigneeInfo?.ybreparto},get children(){return[(()=>{var n=ye();return r(n,()=>u?.stopD?.consigneeInfo?.ybreparto),n})(),"|"]}}),b),r(c,s(E,{get when(){return u?.stopD?.city},get children(){return[(()=>{var n=Se();return r(n,()=>u?.stopD?.city),n})(),"|"]}}),f),r($,()=>u?.stopD?.estate),V.$$click=g,r(V,s(G,{name:"printer",size:32})),r(D,()=>u?.stopD?.addressId,F),r(O,s(ee,{fallback:n=>(()=>{var w=ie(),I=w.firstChild,q=I.nextSibling;return q.nextSibling,r(w,()=>n.toString(),q),w})(),get children(){return s(X,{get fallback(){return(()=>{var n=se();return n.firstChild,r(n,s(ae,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return s(E,{get when(){return k(u?.stopD?.customers)?.length>0},get children(){return s(J,{get each(){return k(u?.stopD?.customers)},children:(n,w)=>s(Ae,{get item(){return u?.stopD?.customers?.[n]}})})}})}})}})),z(n=>{var w=` ${T(),"centerBx"}  topbx `,I=` ${T(),"centerBx"} bottombx`,q=` ${T()?"":"width:94vw;"} margin: 0 auto; ; padding: 18px 29px;`;return w!==n.e&&M(d,n.e=w),I!==n.t&&M(c,n.t=I),n.a=de(O,q,n.a),n},{e:void 0,t:void 0,a:void 0}),e})()}const Ie=a=>(()=>{var S=$e();return r(S,s(ee,{fallback:l=>(()=>{var m=ie(),o=m.firstChild,h=o.nextSibling;return h.nextSibling,r(m,()=>l.toString(),h),m})(),get children(){return s(X,{get fallback(){return(()=>{var l=se();return l.firstChild,r(l,s(ae,{stroke:"rgb(200 25 60 / 1)",size:62}),null),l})()},get children(){return s(E,{get when(){return k(a?.list)?.length>0},get children(){return s(J,{get each(){return k(a?.list)},children:(l,m)=>(()=>{var o=we(),h=o.firstChild;return te(o,"data-id",`${l}`),r(o,s(E,{get when(){return Q?.[a?.cid]?.[l]==="ST200"},get children(){var x=De();return r(x,s(G,{name:"success",size:32,color:"var(--hrm-palette-tertiary50)"})),x}}),h),r(h,()=>a?.list?.[l]?.bagnumber),z(()=>M(o,`bag_number centerBx ${Q?.[a?.cid]?.[l]==="ST200"?"checked":""} `)),o})()})}})}})}})),S})(),Ae=a=>{const S=()=>{let l=k(a?.item?.bagsNumb)?.length,m=k(Q?.[a?.item?.cidentity])?.length;return l===m};return(()=>{var l=Ce(),m=l.firstChild,o=m.nextSibling,h=o.firstChild,x=h.nextSibling,P=x.nextSibling,N=P.firstChild,R=N.firstChild;return r(h,()=>a?.item?.name),r(x,()=>a?.item?.phoneNumber),r(R,()=>a?.item?.tracking),r(l,s(E,{get when(){return!S()},get children(){var g=H();return r(g,s(Ie,{get list(){return a?.item?.bagsNumb},get cid(){return a?.item?.cidentity}})),g}}),null),r(l,s(E,{get when(){return S()},get children(){var g=H();return r(g,s(ke,{get list(){return a?.item?.bagsNumb},get cid(){return a?.item?.cidentity}})),g}}),null),z(g=>{var e=a?.item?.cidentity,t=` ${T()?"":"centerBx"} bottombx`;return e!==g.e&&te(l,"data-cid",g.e=e),t!==g.t&&M(o,g.t=t),g},{e:void 0,t:void 0}),l})()};U(["click"]);var Be=y('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:350px>');const Ne=A(()=>B(()=>import("./SVG-3Gw9Y_Kq.js"),__vite__mapDeps([6,1,2]))),Re=A(()=>B(()=>import("./FlexSpace-Bd8Af0Vm.js"),__vite__mapDeps([7,1,2])));function Le(a){const[S,l]=L(""),[m,o]=L(""),[h,x]=L();Y(()=>{re("cameraScanDelivery")?.clear()}),K(()=>{setTimeout(()=>{g()},90)});const P=(e,t)=>{e!==h()&&(x(e),setTimeout(()=>{x("")},3e3),N(e))},N=e=>{e||(e=S()),e=e.split("'").join("-"),new Date().getTime(),j?.latitude,j?.longitude,a?.status,me?.profile?.userId;let t=e.split("/");e.split("-").length>3&&(t=e.split("-").join);let i=t?.[0],p="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const d=new RegExp(p);let _=i.length===13&&d.test(i),C="^[0-9]{4}-[1-9]{4}";const v=new RegExp(C);let c=i.length===9&&v.test(i),b=t.length>4&&i.length===12,f={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};_&&(f={idairguide:"175-2383"+i.slice(3,7),":search0":i}),c&&(f={idairguide:"175-2383"+i.slice(0,4),":search0":i}),_||b||c?R(f):(o("alert"),setTimeout(()=>{o("")},1800))},R=async e=>{let t=await Te(e),i=Object.keys(t)?.[0];if(t[i]?.cidentity){let p=t[i]?.cidentity,d=t[i]?.ssg_track_key,_={...a?.item};_?.customers?.[p]?.bagsNumb?.[d]?(o("success"),Pe(p,{[d]:"ST200"})):o("alert"),setTimeout(()=>{o("")},1800),_?.customers?.[p]?.bagsNumb?.[d],a?.callback(t[i])}else o("alert"),setTimeout(()=>{o("")},1800)},g=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[ve.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},t=new he("qr-reader_SSDM",e);t.render(P),ge("cameraScanDelivery",t)};return(()=>{var e=Be(),t=e.firstChild,i=t.firstChild,p=i.firstChild,d=p.nextSibling,_=t.nextSibling,C=_.firstChild,v=C.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),p.$$click=P,r(i,s(Re,{}),d),d.$$click=()=>{},r(d,s(Ne,{name:"keyboard",size:32,color:"#2b2b2b"})),z(c=>{var b=T()?"92vw":"420px",f=`scanOverlay ${m()} `,$=m()?"block":"none";return b!==c.e&&((c.e=b)!=null?e.style.setProperty("width",b):e.style.removeProperty("width")),f!==c.t&&M(v,c.t=f),$!==c.a&&((c.a=$)!=null?v.style.setProperty("display",$):v.style.removeProperty("display")),c},{e:void 0,t:void 0,a:void 0}),e})()}const Te=async a=>await pe({params:a,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"});U(["click"]);export{it as default,Je as scannedQRs,et as setScannedQRs,rt as setStatus,Pe as setStatusD,tt as status,Q as statusD};
