const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-DRN84wtk.js","assets/index-CSXd_khH.js","assets/index-NFdrrltd.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-BGTTOBLm.js","assets/debounces-DIw3wWKm.js","assets/SVG-a6bMPYQU.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-_HH178f7.js","assets/ButonUploadHrm--SWlc6Y4.js","assets/Util-DErZaF9J.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-Dia6NmVn.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-CWD50emJ.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as S,_ as I,u as pe,c as T,a as w,o as he,h as me,m as ve,i as e,d as r,k as re,e as ge,t as _,S as C,f as K,n as J,g as fe,j as xe,F as $e}from"./index-CSXd_khH.js";import{b as U,f as W,e as Ce,O as ye,g as q}from"./Util-DErZaF9J.js";import{u as we}from"./debounces-DIw3wWKm.js";import"./globalSignal-BJem-C_J.js";import"./ButonHrm-XhxJLDLJ.js";import{g as Se,a as Ie,c as ke,i as Be,b as Pe,u as Ee}from"./handelImagesServices-DzTT1HcM.js";import{LookupInventory as Oe}from"./DashInventory-BrZikXP-.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-a6bMPYQU.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-jBOih_zX.js";var Ae=_('<div class="icon_status centerBx">'),Fe=_("<div style=width:300px;position:relative;><img alt=sf><div>"),Le=_("<div style=width:300px;position:relative;><img alt=sf>"),je=_('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px>'),qe=_('<div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx centerBx unit"style=padding:30px><div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5></h5></div></div><div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$</h5></div></div></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class=hseparator>'),Ve=_("<div><div style=padding:30px>"),De=_("<div> "),Me=_("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Te=_('<div class="bottombx centerBx unit"><div class=tr_bar_40><h4></h4></div><div class="bottombx centerBx unit tr_bar_20"><h5>Cantidad:</h5><div class=bag_number><h5></h5></div></div><div class="bottombx centerBx unit tr_bar_20"><h5>Precio:</h5><div class=unitBx><h5>$'),X=_("<div style=margin:8px>"),Re=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),Ue=_("<div class=unitBx><h5>"),We=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const Z=S(()=>I(()=>import("./LoadingColorSpinner-DRN84wtk.js"),__vite__mapDeps([0,1,2,3])));S(()=>I(()=>import("./DropDwnSearch-BGTTOBLm.js"),__vite__mapDeps([4,1,2,5,6,7,8])));const N=S(()=>I(()=>import("./FlexSpace-_HH178f7.js"),__vite__mapDeps([9,1,2]))),ze=S(()=>I(()=>import("./ButonUploadHrm--SWlc6Y4.js"),__vite__mapDeps([10,1,2,6,7,11,12]))),Qe=S(()=>I(()=>import("./CheckBoxSlide-Dia6NmVn.js"),__vite__mapDeps([13,1,2,14]))),He=S(()=>I(()=>import("./InputHr-CWD50emJ.js"),__vite__mapDeps([15,1,2,16]))),Ye=S(()=>I(()=>import("./SVG-a6bMPYQU.js"),__vite__mapDeps([6,1,2,7])));function dt(s){const[l,n]=pe(),[t,b]=T({search:""});T(),T();const[p,V]=w(null),[k,O]=w(!1),[A,f]=w(!1),[L,le]=w(""),[Xe,ie]=w("");we(ie,400),he(()=>{}),me(()=>{});const z=async()=>{if(l?.mId){let i={id:l?.mId,businessId:re?.profile?.businessYId},d=await Ke(i),a=await Oe(l?.mId),u=0,o=0,m=[];ye(a)?.map(B=>{a[B]?.products?.map(h=>{if(l?.mId===h?.product?.id){let v={...a[B]};delete v.products,v.qty=h?.qty*1,v.price=h?.price*1,u+=h?.price*1*h?.qty*1,o+=h?.qty*1,m.push(v)}})});const y=u/o;le(Se()+Ie()+"/"+d?.productImageUrl),b("stockList",m),b("stock",{Balance:u,Total:o,priceCost:y}),b("productObj",d)}};ve(async()=>{z()});const D=async i=>{await Ge(l?.mId,i),z()},Q=async(i,d)=>{let a=await Pe(i.type,d);if(await Ee(a,i)){let o={...t?.productObj?.thumbnails};o[d]=1,await D({productImageUrl:d,thumbnails:o}),f(!1),O(!1)}else f(!1)},se=async()=>{if(f(!0),p()?.name.split(".").pop()==="webp"){let i=t?.productObj?.code+"/"+q()+q()+".webp";Q(p()?.file,i)}else{let i=await ke(p()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),d=await Be(i),u=await(await fetch(d)).blob(),o=t?.productObj?.code+"/"+q()+q()+".webp";Q(u,o)}},ae=i=>{V(i),O(!0)},ne=i=>{D({isPublic:i?"9":null})},j=async(i,d)=>{D({[i]:d})};return(()=>{var i=Ve(),d=i.firstChild;return e(i,r(C,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var a=De();return a.firstChild,e(a,r(Z,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){var a=je(),u=a.firstChild,o=u.firstChild,m=o.firstChild,y=m.nextSibling,B=y.firstChild,h=y.nextSibling,v=u.nextSibling,M=v.nextSibling,g=M.firstChild;return e(u,r(C,{get when(){return p()?.source},get children(){var x=Fe(),P=x.firstChild,E=P.nextSibling;return e(E,r(C,{get when(){return!A()},get fallback(){return(()=>{var c=Me(),$=c.firstChild;return e(c,r(Z,{stroke:"rgb(200 25 60 / 1)",size:32}),$),c})()},get children(){var c=Ae();return c.$$click=se,e(c,r(Ye,{name:"arrow_up_large",size:24})),c}})),K(c=>{var $=p()?.source,F=A()?"floatBtn loading":"floatBtn ";return $!==c.e&&J(P,"src",c.e=$),F!==c.t&&fe(E,c.t=F),c},{e:void 0,t:void 0}),x}}),o),e(u,r(C,{get when(){return xe(()=>!!L())()&&!p()?.source},get children(){var x=Le(),P=x.firstChild;return K(()=>J(P,"src",L())),x}}),o),e(m,()=>t?.productObj?.name),e(y,r(Qe,{get initValue(){return t?.productObj?.isPublic},updChange:ne,color:"var(--background-red-ssg)"}),B),e(h,r(ze,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ae})),e(g,r(te,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:j}),null),e(g,r(R,{}),null),e(g,r(te,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:j}),null),e(g,r(R,{}),null),e(g,r(ee,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:j}),null),e(g,r(R,{}),null),e(g,r(ee,{get value(){return t?.productObj?.model},label:"Model:",key:"model",updItem:j}),null),a}}),d),e(i,r(C,{get when(){return t?.stockList},get children(){var a=qe(),u=a.firstChild,o=u.nextSibling,m=o.firstChild,y=m.firstChild,B=y.nextSibling,h=B.firstChild,v=m.nextSibling,M=v.firstChild,g=M.nextSibling,x=g.firstChild;x.firstChild;var P=o.nextSibling;return P.nextSibling,e(h,()=>(t?.stock?.Total*1).toFixed(2)),e(o,r(N,{}),v),e(x,()=>(t?.stock?.priceCost*1).toFixed(2),null),e(a,r($e,{get each(){return t?.stockList},children:(E,c)=>(()=>{var $=Te(),F=$.firstChild,oe=F.firstChild,H=F.nextSibling,ce=H.firstChild,de=ce.nextSibling,ue=de.firstChild,Y=H.nextSibling,_e=Y.firstChild,be=_e.nextSibling,G=be.firstChild;return G.firstChild,e(oe,()=>E?.invoice),e(ue,()=>(E?.qty*1).toFixed(2)),e($,r(N,{}),Y),e(G,()=>(E?.price*1).toFixed(2),null),$})()}),null),a}}),d),i})()}const R=()=>[X(),"|",X()],ee=s=>{const[l,n]=w(!1),[t,b]=w(""),p=()=>{s?.updItem(s?.key,t()),n(!1)},V=()=>{let k=l();k||b(s?.value),n(!k)};return r(C,{get when(){return s?.value},get children(){var k=Re(),O=k.firstChild,A=O.firstChild;return A.$$click=V,e(A,()=>s?.label),e(O,r(C,{get when(){return l()},get fallback(){return(()=>{var f=Ue(),L=f.firstChild;return e(L,()=>s?.value),f})()},get children(){return r(He,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:f=>b(f),onEnter:p})}}),null),k}})},te=s=>r(C,{get when(){return s?.value},get children(){var l=We(),n=l.firstChild,t=n.firstChild,b=t.nextSibling,p=b.firstChild;return e(t,()=>s?.label),e(p,()=>s?.value),l}}),Ge=async(s,l)=>{let n={params:{id:s,businessId:re?.profile?.businessYId},form:l},t=U(129004);return n={...n,...t},await W(n)},Ke=async s=>{let l={params:s},n=U(122002);return l={...l,...n},await W(l)},ut=async s=>{let l=[];s.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},b=U(802002);t={...t,...b},l.push(t)}),Ce(l,Je)},Je=async s=>{const n=await W(s);if(n)return n};ge(["click"]);export{dt as default,Je as fetchCSVInve,ut as loadProduct,Ge as updProducts};
