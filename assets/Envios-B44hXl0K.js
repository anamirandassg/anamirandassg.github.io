const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-kZhm73hx.js","assets/index-BQ7-HHif.js","assets/index-D4QuRvi-.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-BSALBoHe.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-D5BxZ_zU.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-D9gz8SEi.js","assets/debounces-DKUVE3C2.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-P2U2p3xj.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-BiHhss4S.js","assets/Util-Ho0G8bBr.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DnEpXyEk.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DBGwTcBG.js","assets/DialogHRM-DL6FrM2V.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-5-an0xgS.js","assets/ShowQRPrintLabel-Ceuz2RnK.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-DcGI8IYj.js","assets/Toast-DDWa3GNz.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-CMWtdR4z.js"])))=>i.map(i=>d[i]);
import{l as P,_ as D,c as re,a as A,o as Le,h as Ne,b as ze,i as r,d as t,f as T,e as Fe,t as y,j as ne,S as p,w as Ve,E as ue,q as K,F as Z,g as J,s as qe,x as ee}from"./index-BQ7-HHif.js";import{c as Re,f as te,a as w,O as q,g as O,q as j,d as Te}from"./Util-Ho0G8bBr.js";import{u as je}from"./debounces-DKUVE3C2.js";import{i as Y}from"./globalSignal-5-an0xgS.js";import{g as se,S as Qe,l as We}from"./ShowQRPrintLabel-Ceuz2RnK.js";import{OpenToast as Ye}from"./Toast-DDWa3GNz.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-DcGI8IYj.js";var Xe=y("<div style=padding:4px>"),ie=y('<div class="icon_status centerBx">'),He=y('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),Ue=y('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Ze=y('<div><div class="_dsplFlx flxWrp spaceAround ">'),Ke=y('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),Je=y('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),et=y('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),de=y("<div> <!>."),ge=y("<div> "),me=y("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),tt=y("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),he=y("<h5 class=totalBagsNo> <!> / "),fe=y('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),_e=y("<div class=leftMrg> "),rt=y("<div class=bottombx><h4>"),nt=y('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),st=y("<div style=padding:16px;margin-left:20px;>"),it=y("<div>"),lt=y('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const R=P(()=>D(()=>import("./LoadingColorSpinner-kZhm73hx.js"),__vite__mapDeps([0,1,2,3]))),at=P(()=>D(()=>import("./InputHr-BSALBoHe.js"),__vite__mapDeps([4,1,2,5]))),L=P(()=>D(()=>import("./SVG-D5BxZ_zU.js"),__vite__mapDeps([6,1,2,7]))),ot=P(()=>D(()=>import("./DropDwnSearch-D9gz8SEi.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ct=P(()=>D(()=>import("./ContainerElasticView-P2U2p3xj.js"),__vite__mapDeps([11,1,2,6,7,12]))),ut=P(()=>D(()=>import("./ButonHrm-BiHhss4S.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),le=P(()=>D(()=>import("./CheckBoxSlide-DnEpXyEk.js"),__vite__mapDeps([16,1,2,17]))),dt=P(()=>D(()=>import("./ItemOnEnvios-DBGwTcBG.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27])));P(()=>D(()=>import("./ItemOnEnviosMobile-CMWtdR4z.js"),__vite__mapDeps([28,1,2,14,7,19,20,9,21])));function Gt(){const[e,i]=re({list:{manifest:{id:"",label:""},search:"",status:""}}),[n,l]=re({}),[d,a]=re({}),[x,C]=A(""),[u,Q]=A(!1),[X,B]=A(64),[G,F]=A(!1),[V,H]=A(!1),[ve,be]=A(""),N=je(C,500),[$e,ae]=A(!1),[pe,oe]=A(!1),W=(o,c)=>{i("list",{[o]:c}),N(O())},ye=()=>{F(!G()),N(O())},ke=()=>{Q(!u()),N(O())},xe=()=>{H(!V()),N(O())};Le(()=>{}),Ne(()=>{});const Ce=()=>{B(o=>o+64)},we=o=>{let c=Math.ceil(o?.length/64);Te(Ce,1250,c)},[z,{refetch:yt}]=ze(x,async o=>{l(void 0),a("prov",void 0);let c=e?.list?.manifest?.id;ve()!==c&&be(c);let M={},k=[],h={};var S={};if(c&&(M=await ft(c)),!u())l(M?.sumary),a("prov",M?.provinceGroup);else{S=await ht(e?.list?.search,c,e?.list?.status,e?.list?.estate,e?.list?.city),l(M?.sumary),B(0);let I={};G()?q(S).map(b=>{let f=S[b],v=f?.estate||f?.consigneeInfo?.ybestate;I[b]?k.push(f):I[b]=1,w("M023009")?.ZoneCity?.[f?.zone]?.[v]||k.push(f)}):V()?q(S).map(b=>{let f=S[b],v="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const s=new RegExp(v);f.tracking.length===13&&s.test(f.tracking)&&k.push(f),f?.currentStatus||k.push(f)}):(q(S).map(b=>{let f=S[b],v=f?.estate||f?.consigneeInfo?.ybestate,s=f?.city||f?.consigneeInfo?.ybcity;h[v]||(h[v]={cities:{},total:0}),h[v].cities?.[s]||(h[v].cities[s]=0),h[v].cities[s]+=1,h[v].total+=1,k.push(f)}),a("prov",h)),we(k)}return k}),ce=()=>z()?.length,Se=o=>{i("list",{manifest:o,status:void 0}),N(O())},Ie=()=>{vt(z())},Ee=()=>{bt(z())},Me=()=>{},Ae=(o,c)=>{W("estate",o),W("city",c)},Be=(o,c)=>{i("list",{estate:void 0,city:void 0}),N(O())},U=o=>o?" "+o:"",Ge=o=>{let c=o?.consigneeInfo;return U(c?.firstName)+U(c?.middleName)+U(c?.lastName)+U(c?.lastName2)},Pe=async()=>{let o=[],c=360;if(ae(!0),z().length<c){const M=z().map(async(h,S)=>{let I=h?.tracking,b="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const f=new RegExp(b);I.length===13&&f.test(I)&&(I=I.slice(3,12));let s=await se(I),g={state:h?.consigneeInfo?.ybestate,name:Ge(h),phoneNumber:h?.consigneeInfo?.phoneNumber,altPhoneNumber:h?.consigneeInfo?.altPhoneNumber,guiaWeek:h?.guia,bulto:h?.bagnumber,tracking:I,qr:s};o.push(g)});await Promise.all(M);let k=await Qe(o);window.open(k),ae(!1)}else Ye({text:`El limite de etiquetas a imprimir es de ${c}`,timeout:2500,id:O()})},De=async()=>{let o=[];oe(!0),setTimeout(async()=>{let c=400,M=619124,k=[],h=new Date().getFullYear().toString().slice(2,4);for(let b=0;b<c;b++)k.push(b);const S=k.map(async(b,f)=>{let v=M+b*2,s=v+1;const g=await se("Y"+h+v),m=await se("Y"+h+s);let $={mtrx:g,mtrx2:m,lbl:"Y"+h+v,lbl2:"Y"+h+s};o.push($)});await Promise.all(S);let I=await We(o);window.open(I),oe(!1)},760)},Oe=async o=>{await _t(e?.list?.manifest?.id)};return(()=>{var o=et(),c=o.firstChild,M=c.firstChild,k=M.nextSibling,h=k.firstChild,S=k.nextSibling,I=S.firstChild,b=c.nextSibling,f=b.firstChild,v=b.nextSibling;return r(h,()=>e?.list?.manifest?.id),r(S,t(le,{get initValue(){return u()},updChange:ke,color:"var(--background-red-ssg)"}),I),r(o,t(p,{get when(){return ne?.profile?.isAdmin},get children(){return t(ut,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Ie})}}),b),r(f,t(ot,{get list(){return w("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:s=>Se(s),width:"260px"})),r(b,t(p,{get when(){return Ve(()=>!!e?.list?.manifest?.id)()&&u()},get children(){return[(()=>{var s=Xe();return r(s,t(at,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>W("search",g)})),s})(),(()=>{var s=Ue(),g=s.firstChild,m=g.firstChild;return r(g,t(le,{get initValue(){return G()},updChange:ye,color:"var(--background-red-ssg)"}),m),r(s,t(p,{get when(){return ne?.profile?.isAdmin},get children(){var $=He(),_=$.firstChild;return r($,t(le,{get initValue(){return V()},updChange:xe,color:"var(--background-red-ssg)"}),_),r($,t(p,{get when(){return V()},get children(){var E=ie();return E.$$click=Ee,r(E,t(L,{name:"outline_delete",size:24})),E}}),null),$}}),null),s})()]}}),null),r(v,t(p,{get when(){return e?.list?.manifest?.id},get children(){var s=Ze(),g=s.firstChild;return r(g,t(ue,{fallback:m=>(()=>{var $=de(),_=$.firstChild,E=_.nextSibling;return E.nextSibling,r($,()=>m.toString(),E),$})(),get children(){return t(K,{get fallback(){return(()=>{var m=ge();return m.firstChild,r(m,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),m})()},get children(){return t(p,{get when(){return n?.total},get children(){return t(Z,{get each(){return q(n)},children:(m,$)=>Y()?t(mt,{keyG:m,total:ce,get status(){return e?.list?.status},get amount(){return n?.[m]},get showItems(){return u()},updForm:W}):t(gt,{keyG:m,total:ce,get showItems(){return u()},get status(){return e?.list?.status},get amount(){return n?.[m]},updForm:W})})}})}})}})),T(()=>J(s,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),s}}),null),r(v,t(p,{get when(){return ne?.profile?.isAdmin},get children(){var s=Ke(),g=s.firstChild,m=g.firstChild,$=m.nextSibling;return r(g,t(p,{get when(){return!pe()},get fallback(){return(()=>{var _=me(),E=_.firstChild;return r(_,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),E),_})()},get children(){var _=ie();return _.$$click=De,r(_,t(L,{name:"printer",size:24,color:"firebrick"})),_}}),m),m.$$click=Oe,r(m,t(L,{name:"tag-outline",size:24})),$.$$click=Me,r($,t(L,{name:"outline_renew",size:24})),r(g,t(p,{get when(){return!$e()},get fallback(){return(()=>{var _=me(),E=_.firstChild;return r(_,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),E),_})()},get children(){var _=ie();return _.$$click=Pe,r(_,t(L,{name:"printer",size:32})),_}}),null),s}}),null),r(v,t(p,{get when(){return d?.prov},get children(){var s=Je(),g=s.firstChild,m=g.firstChild,$=g.nextSibling;return r(m,t(p,{get when(){return d?.prov},get children(){return t(Z,{get each(){return q(d?.prov)},children:(_,E)=>t(pt,{ism:_,get item(){return d?.prov?.[_]},updS:Ae})})}})),$.$$click=Be,r($,t(L,{name:"Xclose",size:22})),T(()=>J(s,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),s}}),null),r(v,t(ue,{fallback:s=>(()=>{var g=de(),m=g.firstChild,$=m.nextSibling;return $.nextSibling,r(g,()=>s.toString(),$),g})(),get children(){return t(K,{get fallback(){return(()=>{var s=ge();return s.firstChild,r(s,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return t(p,{get when(){return z()},get children(){return t(Z,{get each(){return z()?.slice(0,X())},children:(s,g)=>t(dt,{item:s,refresh:()=>N(O())})})}})}})}}),null),T(s=>qe(v,` ${Y()?"":"width:94vw;"} margin: 0 auto;`,s)),o})()}const gt=e=>{const[i,n]=A(!1),[l,d]=A(0),a=()=>{let u=e?.keyG;e?.keyG==="total"&&(u=null),e?.updForm("status",u)},x=()=>{i()||!Y()&&e?.keyG!=="total"&&(d(w("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),n(!0))},C=()=>{d("0px"),i()&&n(!1)};return t(p,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var u=_e();return u.firstChild,r(u,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),u})()},get children(){var u=fe(),Q=u.firstChild,X=Q.nextSibling;return u.$$mouseout=C,u.$$mousemove=x,u.$$click=a,r(u,t(p,{get when(){return i()},get children(){var B=tt(),G=B.firstChild,F=G.firstChild,V=F.firstChild;return r(V,()=>w("M023009")?.statusObjDesc?.[e?.keyG]),T(H=>(H=l())!=null?G.style.setProperty("width",H):G.style.removeProperty("width")),B}}),Q),r(Q,t(L,{get name(){return w("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(u,t(p,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var B=he(),G=B.firstChild,F=G.nextSibling;return F.nextSibling,r(B,()=>e?.total(),F),B}}),X),r(X,()=>e?.amount),T(()=>J(u,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),u}})}})},mt=e=>{const i=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t(p,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var n=_e();return n.firstChild,r(n,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=fe(),l=n.firstChild,d=l.nextSibling;return n.$$click=i,r(l,t(L,{get name(){return w("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(n,t(p,{get when(){return w("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var a=rt(),x=a.firstChild;return r(x,()=>w("M023009")?.statusObjDesc?.[e?.keyG]),a}}),d),r(n,t(p,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var a=he(),x=a.firstChild,C=x.nextSibling;return C.nextSibling,r(a,()=>e?.total(),C),a}}),d),r(d,()=>e?.amount),T(()=>J(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},ht=async(e,i,n,l,d)=>{let a={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"]};e&&e.split(" ").map((C,u)=>{C&&(a.params[":search"+u]=C.trim())}),n&&(a.params[":status"]=n),l&&(a.params[":estate"]=l),d&&(a.params[":city"]=d),ee?.roles?.agency&&(a.params[":agency"]=ee?.roles?.agency+"");let x={...w(j())}[802001];if(a={...a,...x},i&&Object.keys(a.params).length>=2){const C=await te(a);return C?.data?.error?{}:C}return{}},ft=async e=>{let i={params:{idairguide:e}},n={...w(j())}[802004];i={...i,...n},ee?.roles?.agency&&(i.params[":agency"]=ee?.roles?.agency+"");const l=await te(i);return l?.error?{}:l},_t=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n={...w(j())}[802001];i={...i,...n};const l=await te(i);return l?.error?{}:l},vt=async e=>{e.map(i=>{let n={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},l={...w(j())}[802002];n={...n,...l}})},bt=async e=>{e.map(i=>{let n={params:{ssg_track_key:i?.ssg_track_key,idairguide:i?.idairguide}},l={...w(j())}[802005];n={...n,...l}})},Pt=async(e,i)=>{let n=[];e.map(l=>{let d={params:{ssg_track_key:l?.ssg_track_key,idairguide:l?.idairguide},data2update:{currentStatus:i}},a={...w(j())}[802004];d={...d,...a},n.push(d)}),Re(n,$t)},$t=async e=>{const n=await te(e);if(n)return n},pt=e=>(()=>{var i=it();return r(i,t(p,{get when(){return e?.item?.total>0},get children(){var n=nt(),l=n.firstChild,d=l.firstChild,a=d.firstChild,x=d.nextSibling;return l.$$click=()=>e?.updS(e?.ism),r(d,()=>e?.ism,a),r(x,()=>e?.item?.total),n}}),null),r(i,t(ct,{get children(){var n=st();return r(n,t(p,{get when(){return e?.item?.cities},get children(){return t(Z,{get each(){return q(e?.item?.cities)},children:(l,d)=>(()=>{var a=lt(),x=a.firstChild,C=x.nextSibling;return a.$$click=()=>e?.updS(e?.ism,l),r(x,l),r(C,()=>e?.item?.cities?.[l]),a})()})}})),n}}),null),i})();Fe(["click","mousemove","mouseout"]);export{gt as StatusGroupItem,Gt as default,bt as deleteManifest,$t as fetchCSVInve,vt as loadManifest,Pt as updateManifest};
