const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-lv9B8UIv.js","assets/index-Ce-I5KUz.js","assets/index-NFdrrltd.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-D-9IJwvw.js","assets/debounces-wN__sdFl.js","assets/SVG-3xaf9-9Q.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-Dqpc8-Wj.js","assets/ButonUploadHrm-DrogYsjW.js","assets/Util-DErZaF9J.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-CTG827Q_.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-DwmVjVaU.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as S,_ as I,u as se,c as T,a as w,o as ae,h as ne,m as oe,i as e,d as r,k as N,e as ce,t as _,S as $,f as H,n as G,g as de,j as ue,F as _e}from"./index-Ce-I5KUz.js";import{b as U,f as W,e as pe,p as be,O as he,g as j}from"./Util-DErZaF9J.js";import{u as me}from"./debounces-wN__sdFl.js";import"./globalSignal-DoH-l5IW.js";import"./ButonHrm-BTwlQcyS.js";import{g as ve,a as ge,c as fe,i as $e,b as xe,u as ye}from"./handelImagesServices-3EohM30X.js";import{LookupInventory as Ce}from"./DashInventory-DPKNhhok.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-3xaf9-9Q.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-BmiVfgEe.js";var we=_('<div class="icon_status centerBx">'),Se=_("<div style=width:300px;position:relative;><img alt=sf><div>"),Ie=_("<div style=width:300px;position:relative;><img alt=sf>"),ke=_('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px>'),Be=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Ee=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Pe=_('<div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx centerBx unit"style=padding:30px></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class=hseparator>'),Oe=_("<div><div style=padding:30px>"),Ae=_("<div> "),De=_("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Fe=_('<div class="bottombx centerBx unit"><div class=tr_bar_20><h5></h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_40 "><h4></h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),K=_("<div style=margin:8px>"),Le=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),je=_("<div class=unitBx><h5>"),qe=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const J=S(()=>I(()=>import("./LoadingColorSpinner-lv9B8UIv.js"),__vite__mapDeps([0,1,2,3])));S(()=>I(()=>import("./DropDwnSearch-D-9IJwvw.js"),__vite__mapDeps([4,1,2,5,6,7,8])));const Me=S(()=>I(()=>import("./FlexSpace-Dqpc8-Wj.js"),__vite__mapDeps([9,1,2]))),Ve=S(()=>I(()=>import("./ButonUploadHrm-DrogYsjW.js"),__vite__mapDeps([10,1,2,6,7,11,12]))),Te=S(()=>I(()=>import("./CheckBoxSlide-CTG827Q_.js"),__vite__mapDeps([13,1,2,14]))),Re=S(()=>I(()=>import("./InputHr-DwmVjVaU.js"),__vite__mapDeps([15,1,2,16]))),Ue=S(()=>I(()=>import("./SVG-3xaf9-9Q.js"),__vite__mapDeps([6,1,2,7])));function st(s){const[l,n]=se(),[t,m]=T({search:""});T(),T();const[v,q]=w(null),[k,P]=w(!1),[O,x]=w(!1),[D,ee]=w(""),[Qe,te]=w("");me(te,400),ae(()=>{}),ne(()=>{});const Y=async()=>{if(l?.mId){let i={id:l?.mId,businessId:N?.profile?.businessYId},b=await Ye(i),a=await Ce(l?.mId),h=0,c=0,y=[];he(a)?.map(f=>{a[f]?.products?.map(d=>{if(l?.mId===d?.product?.id){let p={...a[f]};delete p.products,p.qty=d?.qty*1,p.price=d?.price*1,h+=d?.price*1*d?.qty*1,c+=d?.qty*1,y.push(p)}})});const o=h/c;ee(ve()+ge()+"/"+b?.productImageUrl),m("stockList",y),m("stock",{Balance:h,Total:c,priceCost:o}),m("productObj",b)}};oe(async()=>{Y()});const M=async i=>{await We(l?.mId,i),Y()},z=async(i,b)=>{let a=await xe(i.type,b);if(await ye(a,i)){let c={...t?.productObj?.thumbnails};c[b]=1,await M({productImageUrl:b,thumbnails:c}),x(!1),P(!1)}else x(!1)},re=async()=>{if(x(!0),v()?.name.split(".").pop()==="webp"){let i=t?.productObj?.code+"/"+j()+j()+".webp";z(v()?.file,i)}else{let i=await fe(v()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),b=await $e(i),h=await(await fetch(b)).blob(),c=t?.productObj?.code+"/"+j()+j()+".webp";z(h,c)}},le=i=>{q(i),P(!0)},ie=i=>{M({isPublic:i?"9":null})},F=async(i,b)=>{M({[i]:b})};return(()=>{var i=Oe(),b=i.firstChild;return e(i,r($,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var a=Ae();return a.firstChild,e(a,r(J,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){var a=ke(),h=a.firstChild,c=h.firstChild,y=c.firstChild,o=y.nextSibling,f=o.firstChild,d=o.nextSibling,p=h.nextSibling,V=p.nextSibling,g=V.firstChild;return e(h,r($,{get when(){return v()?.source},get children(){var C=Se(),B=C.firstChild,A=B.nextSibling;return e(A,r($,{get when(){return!O()},get fallback(){return(()=>{var u=De(),E=u.firstChild;return e(u,r(J,{stroke:"rgb(200 25 60 / 1)",size:32}),E),u})()},get children(){var u=we();return u.$$click=re,e(u,r(Ue,{name:"arrow_up_large",size:24})),u}})),H(u=>{var E=v()?.source,L=O()?"floatBtn loading":"floatBtn ";return E!==u.e&&G(B,"src",u.e=E),L!==u.t&&de(A,u.t=L),u},{e:void 0,t:void 0}),C}}),c),e(h,r($,{get when(){return ue(()=>!!D())()&&!v()?.source},get children(){var C=Ie(),B=C.firstChild;return H(()=>G(B,"src",D())),C}}),c),e(y,()=>t?.productObj?.name),e(o,r(Te,{get initValue(){return t?.productObj?.isPublic},updChange:ie,color:"var(--background-red-ssg)"}),f),e(d,r(Ve,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:le})),e(g,r(Z,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:F}),null),e(g,r(R,{}),null),e(g,r(Z,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:F}),null),e(g,r(R,{}),null),e(g,r(X,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:F}),null),e(g,r(R,{}),null),e(g,r(X,{get value(){return t?.productObj?.model},label:"Model:",key:"model",updItem:F}),null),a}}),b),e(i,r($,{get when(){return t?.stockList&&t?.stock?.Total>0},get children(){var a=Pe(),h=a.firstChild,c=h.nextSibling,y=c.nextSibling;return y.nextSibling,e(c,r($,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Be(),f=o.firstChild,d=f.nextSibling,p=d.firstChild;return e(p,()=>(t?.stock?.Total*1).toFixed(2)),o})(),r(Me,{}),(()=>{var o=Ee(),f=o.firstChild,d=f.nextSibling,p=d.firstChild;return p.firstChild,e(p,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),e(a,r(_e,{get each(){return t?.stockList},children:(o,f)=>(()=>{var d=Fe(),p=d.firstChild,V=p.firstChild,g=p.nextSibling,C=g.firstChild,B=C.firstChild,A=g.nextSibling,u=A.firstChild,E=A.nextSibling,L=E.firstChild,Q=L.firstChild;return Q.firstChild,e(V,()=>be(o?.createDate)),e(B,()=>(o?.qty*1).toFixed(2)),e(u,()=>o?.invoice),e(Q,()=>(o?.price*1).toFixed(2),null),d})()}),null),a}}),b),i})()}const R=()=>[K(),"|",K()],X=s=>{const[l,n]=w(!1),[t,m]=w(""),v=()=>{s?.updItem(s?.key,t()),n(!1)},q=()=>{let k=l();k||m(s?.value),n(!k)};return r($,{get when(){return s?.value},get children(){var k=Le(),P=k.firstChild,O=P.firstChild;return O.$$click=q,e(O,()=>s?.label),e(P,r($,{get when(){return l()},get fallback(){return(()=>{var x=je(),D=x.firstChild;return e(D,()=>s?.value),x})()},get children(){return r(Re,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:x=>m(x),onEnter:v})}}),null),k}})},Z=s=>r($,{get when(){return s?.value},get children(){var l=qe(),n=l.firstChild,t=n.firstChild,m=t.nextSibling,v=m.firstChild;return e(t,()=>s?.label),e(v,()=>s?.value),l}}),We=async(s,l)=>{let n={params:{id:s,businessId:N?.profile?.businessYId},form:l},t=U(129004);return n={...n,...t},await W(n)},Ye=async s=>{let l={params:s},n=U(122002);return l={...l,...n},await W(l)},at=async s=>{let l=[];s.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},m=U(802002);t={...t,...m},l.push(t)}),pe(l,ze)},ze=async s=>{const n=await W(s);if(n)return n};ce(["click"]);export{st as default,ze as fetchCSVInve,at as loadProduct,We as updProducts};
