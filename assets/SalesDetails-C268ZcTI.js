const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-z68uALjY.js","assets/index-CgOZFtob.js","assets/index-mNJWtuMT.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-Dl-si7EP.js","assets/debounces-BgRQkg3y.js","assets/SVG-DNTPKAFL.js","assets/Util-DZlMHKqJ.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-CCImqght.js","assets/ButonHrm-nwWO_6S7.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-lsI8_r7R.js","assets/DialogHRM-DoTcZzHh.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts-k0qnsJXi.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-BTLb5qFC.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as j,_ as A,c as E,r as be,a as se,o as _e,b as ge,e as ee,i as t,f as r,S as k,F as H,h as L,k as de,j as re,m as ne,p as $e,d as ve,t as y,g as U}from"./index-CgOZFtob.js";import{h as Ce,e as xe,g as V,f as T,m as ye,b as te,O as G,C as oe,a as W,P as Se}from"./Util-DZlMHKqJ.js";import{u as Ie}from"./debounces-BgRQkg3y.js";import"./DialogHRM-DoTcZzHh.js";import{g as ue,a as fe}from"./handelImagesServices-SRqqj-gh.js";import{LookupInventory as me}from"./DashInventoryMov-DEwHmoDN.js";import{LookupProducts as z}from"./DashProducts-k0qnsJXi.js";import{a as Oe}from"./print_invoice_service-DHHRrpVn.js";import{OpenToast as K}from"./Toast-C9A2zOqd.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./PDFButton-ClnWeH7R.js";import"./fontkit.es-DkuHxdU6.js";import"./InitPrintServices-QWHeDiid.js";import"./qrcode-DHy8FFhS.js";var we=y('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),ae=y('<div style=margin:15px class=" spaceAround centerBx">'),ke=y('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise>'),qe=y('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),Ee=y("<option> "),Pe=y('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Estimated tax</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Estimated total</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class=JM2zDb>'),pe=y("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Be=y('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),je=y("<span class=arancelSep> | "),Ae=y('<span class="arancel pricePq"> $'),De=y('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Ue=y("<h5 class=rpto>"),Fe=y("<h5>"),Ne=y('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx flxWrp spaceAround centerBx"><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>'),Le=y('<section class="h6rxkc ">'),Ve=y('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),Te=y('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Qe=y('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),Re=y('<div class="centerBx flxWrp">');j(()=>A(()=>import("./LoadingColorSpinner-z68uALjY.js"),__vite__mapDeps([0,1,2,3])));j(()=>A(()=>import("./DropDwnSearch-Dl-si7EP.js"),__vite__mapDeps([4,1,2,5,6,7,8])));const M=j(()=>A(()=>import("./FlexSpace-CCImqght.js"),__vite__mapDeps([9,1,2]))),X=j(()=>A(()=>import("./ButonHrm-nwWO_6S7.js"),__vite__mapDeps([10,1,2,6,7,11])));j(()=>A(()=>import("./UpdInventory-lsI8_r7R.js"),__vite__mapDeps([12,1,2,7,13,14,5,15,16,17,9])));const J=j(()=>A(()=>import("./InputHr-BTLb5qFC.js"),__vite__mapDeps([18,1,2,19]))),Z=j(()=>A(()=>import("./SVG-DNTPKAFL.js"),__vite__mapDeps([6,1,2,7]))),[I,P]=E({search:""});let Me=864e5;function ht(){const[e,i]=be();E(),E(),E();const[a,u]=se("");Ie(u,400),_e(()=>{}),ge(()=>{});const m=async()=>{if(e?.mId){let l={":search0":e?.mId,businessId:U?.profile?.businessYId},s=await he(l);P("manifestObj",s[e?.mId])}};return ee(async()=>{P("manifestObj",void 0),m()}),(()=>{var l=we(),s=l.firstChild,n=s.firstChild,_=n.firstChild;return t(l,r(k,{get when(){return I?.manifestObj?.packagesOrder},get children(){return r(Ge,{})}}),s),t(_,r(k,{get when(){return I?.manifestObj?.products},get children(){return r(H,{get each(){return I?.manifestObj?.products},children:($,p)=>r(He,{itm:$})})}})),t(s,r(k,{get when(){return I?.manifestObj?.packagesOrder&&!I?.manifestObj?.isCompleted},get children(){return r(Xe,{})}}),null),t(s,r(Je,{get item(){return I?.manifestObj},get list(){return I?.manifestObj}}),null),l})()}let Ye=[{label:"escojer",id:""},{label:"MISCELANEAS",id:"MISCELANEAS"},{label:"UTILES DEL HOGAR",id:"UTILES DEL HOGAR"},{label:"VENTILADOR",id:"VENTILADOR"},{label:"TV",id:"TV"},{label:"BICI",id:"BICI"},{label:"GENERADOR",id:"GENERADOR"}];const Ge=e=>{const i={type:"",qty:0,arancel:0,price:0},[a,u]=E(i),m=(s,n)=>{u({[s]:n})},l=s=>{let n={...a};n.key=Se();let _=I?.manifestObj?.reservas||[],$=te(_);$.push(n),P("manifestObj","reservas",$),u("type",""),u("qty",""),u("price",""),u("arancel","")};return(()=>{var s=qe(),n=s.firstChild,_=n.firstChild,$=n.nextSibling,p=$.firstChild,g=p.firstChild;return t(_,r(k,{get when(){return I?.manifestObj?.reservas},get children(){return r(H,{get each(){return I?.manifestObj?.reservas},children:(h,d)=>r(We,{itm:h})})}})),t(s,r(k,{get when(){return!I?.manifestObj?.isCompleted},get children(){var h=ke(),d=h.firstChild,c=d.firstChild,b=c.firstChild,f=b.nextSibling,x=f.firstChild,C=x.nextSibling;return C.addEventListener("change",o=>{m("type",o?.target?.value)}),t(C,r(H,{each:Ye,children:(o,v)=>(()=>{var O=Ee();return O.firstChild,t(O,()=>o.label,null),L(()=>O.selected=o.id===a?.type),L(()=>O.value=o.id),O})()})),t(f,r(J,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return a?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",handleClick:o=>m("qty",o)}),null),t(c,r(k,{get when(){return a?.qty&&a?.type},get children(){var o=ae();return t(o,r(J,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return a?.price||""},label:"precio",colors:"#2b2b2b",handleClick:v=>m("price",v)}),null),t(o,r(J,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return a?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:v=>m("arancel",v)}),null),t(o,r(k,{get when(){return a?.price&&a?.qty&&a?.type},get children(){var v=ae();return t(v,r(X,{color:"#646cff",label:"Agregar",handleClick:l})),v}}),null),o}}),null),h}}),$),t(g,r(ze,{get item(){return I?.manifestObj?.shipper_consignee}})),s})()},Je=e=>{const i=m=>{let l=0;return e?.item?.products?.map(s=>{l+=N(s?.qty)*N(s?.salePrice)*-1}),e?.item?.reservas?.map(s=>{l+=N(s?.qty)*N(s?.price)+N(s?.arancel)}),l},a=async m=>{let l={...e?.item};l.amount=i();let s=await Oe(l);window.open(s)},u=async m=>{let l=te(e?.item);l.isCompleted=!0,l.dayNum=l?.createDate/Me;let s={params:{businessId:U?.profile?.businessYId,id:l.ssg_sorder_key},form:l},n=V(431007);s={...s,...n},await T(s);let _={params:{businessId:U?.profile?.businessYId},form:l},$=V(139003);_={..._,...$},await T(_);let p={":search0":l.ssg_sorder_key,businessId:U?.profile?.businessYId},g=await he(p);P("manifestObj",g[l.ssg_sorder_key])};return(()=>{var m=Pe(),l=m.firstChild,s=l.firstChild,n=s.firstChild,_=n.firstChild,$=_.nextSibling,p=$.firstChild,g=p.firstChild,h=g.nextSibling;h.firstChild;var d=p.nextSibling,c=d.firstChild,b=c.nextSibling;b.firstChild;var f=d.nextSibling,x=f.firstChild,C=x.nextSibling;C.firstChild;var o=n.nextSibling,v=o.firstChild,O=v.firstChild,w=O.firstChild,S=w.nextSibling;S.firstChild;var D=O.nextSibling,le=D.firstChild,B=le.nextSibling,Q=D.nextSibling,R=Q.firstChild,q=R.nextSibling;q.firstChild;var F=o.nextSibling;return t(h,()=>i().toFixed(2),null),t(b,()=>(i()*.06).toFixed(2),null),t(C,()=>(i()*.06+i()).toFixed(2),null),t(S,()=>Ce(e?.item?.createDate),null),t(B,()=>e?.item?.invoice),t(q,()=>xe("storeGroupBy")?.[e?.item?.store]?.label,null),t(F,r(k,{get when(){return e?.item?.isCompleted},get children(){return r(X,{color:"#646cff",label:"Imprimir",handleClick:a})}}),null),t(F,r(k,{get when(){return!e?.item?.isCompleted},get children(){return r(X,{color:"#646cff",label:"Confirmar",handleClick:u})}}),null),m})()},He=e=>{const[i,a]=E(),u=()=>i?.[e?.itm?.product?.id]?.productImageUrl?ue()+fe()+"/"+i?.[e?.itm?.product?.id]?.productImageUrl:null,m=async()=>{let s=e?.itm?.product?.id,n=`${s}`,_=await z(n);_?.[s]?.productImageUrl&&a(s,_?.[s])};ee(()=>{m()});const l=()=>{let s=te(I?.manifestObj?.products);delete s[e?.itm?.product?.id],P("manifestObj","products",s)};return(()=>{var s=Be(),n=s.firstChild,_=n.firstChild,$=_.firstChild,p=$.firstChild,g=p.firstChild,h=p.nextSibling,d=h.firstChild,c=d.firstChild,b=c.firstChild;b.firstChild;var f=d.nextSibling,x=f.firstChild,C=x.firstChild,o=C.nextSibling,v=x.nextSibling,O=v.firstChild;return O.firstChild,t(b,()=>e?.itm?.product?.label,null),t(o,()=>e?.itm?.qty*-1),t(O,()=>(e?.itm?.salePrice*1).toFixed(2),null),t(f,r(k,{get when(){return!I?.manifestObj?.isCompleted},get children(){var w=pe(),S=w.firstChild,D=S.firstChild;return D.$$click=l,w}}),null),L(()=>de(g,"src",u())),s})()},We=e=>{const[i,a]=E(),u=async()=>{let l=e?.itm?.product?.id,s=`${l}`,n=await z(s);n?.[l]?.productImageUrl&&a(l,n?.[l])};ee(()=>{u()});const m=()=>{let s=te(I?.manifestObj?.reservas).filter(n=>n.key!==e?.itm?.key);P("manifestObj","reservas",s)};return(()=>{var l=De(),s=l.firstChild,n=s.firstChild,_=n.firstChild,$=_.firstChild,p=$.firstChild,g=p.firstChild,h=g.firstChild;h.firstChild;var d=p.nextSibling,c=d.firstChild,b=c.firstChild,f=b.nextSibling,x=c.nextSibling,C=x.firstChild;return C.firstChild,t(h,()=>e?.itm?.type,null),t(f,()=>e?.itm?.qty*1),t(C,()=>(e?.itm?.price*1).toFixed(2),null),t(x,r(k,{get when(){return e?.itm?.arancel},get children(){return[je(),(()=>{var o=Ae();return o.firstChild,t(o,()=>(e?.itm?.arancel*1).toFixed(2),null),o})()]}}),null),t(d,r(k,{get when(){return!I?.manifestObj?.isCompleted},get children(){var o=pe(),v=o.firstChild,O=v.firstChild;return O.$$click=m,o}}),null),l})()},ze=e=>{const i=l=>l?" "+l:"",a=l=>i(l?.firstName)+i(l?.middleName)+i(l?.lastName)+i(l?.lastName2),u=l=>{let s=i(l?.altPhoneNumber);return i(l?.phoneNumber)+(s?" |"+s:"")},m=l=>{};return r(k,{get when(){return e?.item?.name},get children(){var l=Ne(),s=l.firstChild,n=s.firstChild,_=n.nextSibling,$=s.nextSibling,p=$.firstChild,g=p.nextSibling,h=$.nextSibling,d=h.nextSibling,c=d.firstChild,b=c.nextSibling,f=d.nextSibling,x=f.firstChild,C=x.nextSibling,o=f.nextSibling,v=o.firstChild,O=v.nextSibling,w=o.nextSibling,S=w.firstChild,D=S.firstChild,le=D.firstChild,B=w.nextSibling,Q=B.firstChild,R=Q.nextSibling;return t(s,r(M,{}),_),_.$$click=m,t(_,r(Z,{name:"send",size:22,color:"#646cff"})),t(p,()=>e?.item?.name),t(g,()=>e?.item?.phoneNumberS),t(d,r(M,{}),b),b.$$click=m,t(b,r(Z,{name:"send",size:22,color:"#646cff"})),t(x,()=>a(e?.item)),t(C,()=>u(e?.item)),t(v,()=>ce(e?.item)),t(O,()=>e?.item?.ybreparto),t(w,r(M,{}),S),t(le,()=>e?.item?.idairguide),t(Q,ce),t(B,r(M,{}),R),t(B,r(k,{get when(){return e?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var q=Ue();return t(q,()=>e?.item?.consigneeInfo?.ybreparto),q})(),"|"]}}),R),t(B,r(k,{get when(){return!e?.city&&e?.item?.city},get children(){var q=Fe();return t(q,()=>e?.item?.city),q}}),null),L(q=>{var F=`    ${re()?"isMobile":""}`,ie=` ${re(),"centerBx"} bottombx flxWrp  centerBx`;return F!==q.e&&ne(l,q.e=F),ie!==q.t&&ne(B,q.t=ie),q},{e:void 0,t:void 0}),l}})},bt=async(e,i)=>{let a={params:e,data2update:i},u=V(431007);return a={...a,...u},await T(a)},he=async e=>{let i={params:e},a=V(431002);return i={...i,...a},await T(i)},_t=async e=>{let i=[];e.map(a=>{let u={params:{id:a?.ssg_track_key,idairguide:"all"}},m=V(802002);u={...u,...m},i.push(u)}),ye(i,Ke)},Ke=async e=>{const a=await T(e);if(a)return a},Xe=e=>{const[i,a]=se(""),[u,m]=se(1),l=()=>{u()===1&&i().length>8&&s(i())},s=async p=>{let g=U?.profile?.agencyStore?.id,h=`${p}`,d=await z(h),c=G(d)?.[0],b=`${c} ${g}`,f=await me(b),x=0,C=0;G(f)?.map(w=>{f[w]?.products?.map(S=>{c===S?.product?.id&&(x+=S?.price*1*S?.qty*1,C+=S?.qty*1)})});let o=1,v={};I?.manifestObj?.products?.map(w=>{let S={...w};c===w.product.id&&(S.qty=S.qty*-1),v[w.product.id]=S}),v?.[c]&&(o=v?.[c].qty*1+1);const O=C?x/C:0;if(C&&C-o>=0){if(v?.[c])v[c].qty=o*-1;else{let S={product:{id:c,label:d?.[c]?.name,code:d?.[c]?.code},qty:o*-1,price:O,salePrice:d?.[c]?.salePrice};v[c]=S}let w=oe(v);P("manifestObj","products",w),a(""),K({text:d?.[c]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:W()})}else K({text:"Sin Existencia",timeout:3500,theme:"red",id:W()})},[n,{refetch:_}]=$e(i,async p=>{if(u()===2&&p.length>4){const g=await z(p);let h=[];return G(g).map(d=>{let c=g[d];h.push(c)}),h}else return[]}),$=()=>{a(""),m(1)};return(()=>{var p=Ve(),g=p.firstChild,h=g.firstChild,d=h.firstChild,c=d.nextSibling,b=c.firstChild,f=b.nextSibling;return t(h,r(k,{get when(){return n()?.length>0},get children(){var x=Le();return t(x,r(H,{get each(){return n()},children:(C,o)=>r(Ze,{itm:C,clearTx:$})})),x}}),c),t(c,r(J,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return i()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:a,onEnter:l}),b),b.$$click=()=>m(1),t(b,r(Z,{name:"qrcode-scan",size:22,get color(){return u()===1?"#646cff":""}})),f.$$click=()=>m(2),t(f,r(Z,{name:"keyboard",size:22,get color(){return u()===2?"#646cff":""}})),p})()},Ze=e=>{const[i,a]=E(),u=()=>i?.prod?.productImageUrl?ue()+fe()+"/"+i?.prod?.productImageUrl:null;ee(()=>{a("prod",e?.itm)}),Array.from(Array(10).keys());const m=async l=>{let s=U?.profile?.agencyStore?.id,n=i?.prod?.ssg_product_key,_=`${n} ${s}`,$=await me(_),p=0,g=0;G($)?.map(b=>{$[b]?.products?.map(f=>{n===f?.product?.id&&(p+=f?.price*1*f?.qty*1,g+=f?.qty*1)})});let h=1,d={};I?.manifestObj?.products?.map(b=>{let f={...b};n===b.product.id&&(f.qty=f.qty*-1),d[b.product.id]=f}),d?.[n]&&(h=d?.[n].qty*1+1);const c=g?p/g:0;if(console.log(c,g,p),g&&g-h>=0){if(d?.[n])d[n].qty=h*-1;else{let f={product:{id:n,label:i?.prod?.name,code:i?.prod?.code},qty:h*-1,price:c,salePrice:i?.prod?.salePrice};d[n]=f}let b=oe(d);P("manifestObj","products",b),e?.clearTx(),K({text:i?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:W()})}else e?.clearTx(),K({text:"Sin Existencia",timeout:3500,theme:"red",id:W()})};return(()=>{var l=Te(),s=l.firstChild,n=s.firstChild,_=n.firstChild,$=_.firstChild,p=$.firstChild,g=$.nextSibling,h=g.firstChild,d=h.firstChild,c=d.firstChild;c.firstChild;var b=h.nextSibling,f=b.firstChild,x=f.nextSibling,C=x.firstChild;return C.firstChild,t(c,()=>e?.itm?.name,null),t(f,r(X,{color:"#646cff",label:"Agregar",handleClick:m})),t(C,()=>(e?.itm?.salePrice*1).toFixed(2),null),L(()=>de(p,"src",u())),l})()},Y=(e,i)=>i?(()=>{var a=Qe(),u=a.firstChild,m=u.nextSibling;return t(u," "+e),t(m,i),a})():"",ce=e=>(()=>{var i=Re();return t(i,()=>Y("Calle",e?.ybstreet),null),t(i,()=>Y("#",e?.ybstreetNo),null),t(i,()=>Y("E/",e?.ybbetwen1),null),t(i,()=>Y("y",e?.ybbetwen2),null),i})(),N=e=>e?e*1:0;ve(["click"]);export{ht as default,Ke as fetchCSVInve,ce as getAddress,N as isValNum,_t as loadInventory,bt as updConfirmSale};
