const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SVG-CgaNqNB-.js","assets/index-BcPxdzNG.js","assets/index-DGHHyjai.css","assets/index-Ci0zXM0r.js","assets/CheckBoxSlide-C7OZSA4l.js","assets/CheckBoxSlide-uVD3DHDO.css"])))=>i.map(i=>d[i]);
import"./Toast-CR1M38zn.js";import{k as S,v as _,f as P,n as G,t as k,l as C,_ as I,e as L,a as H,b as W,m as q,i as h}from"./index-BcPxdzNG.js";import{g as w,i as $}from"./globalSignal-CTzzE19b.js";import{b as f,f as x,a as z,j as Q}from"./Util-uEfv1z7O.js";import{g as j,c as M}from"./ShowQRPrintLabel-CJbZOt5B.js";let O=[400,300,400,300,400],m=[300,80,300,80,300,80,300];const Y=t=>{t=t.split("'").join("-");let r=t.split("/");t.split("-").length>3&&(r=t.split("-").join);let e=r?.[0];e.indexOf("2300")===0&&(e="2300"+(e.split("2300")?.[1]).slice(0,5));let a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const s=new RegExp(a);let i=e.length===13&&s.test(e),d="^[0-9]{4}-[1-9]{4}";const o=new RegExp(d);let n=e.length===9&&o.test(e),c=r.length>4&&e.length===12,p="^Y24[0-9]{6}";const g=new RegExp(p);let l=e.length===9&&g.test(e),u="^SS24[0-9]{6}";const y=new RegExp(u);let b=e.length===10&&y.test(e),F="^[0-9]";const A=new RegExp(F);let D=e.length>6&&e.length<11&&A.test(e);if(i||c||n){let v={idairguide:r?.[0],":search0":r?.[1],":search1":r?.[3]};return i&&(v={idairguide:"175-2383"+e.slice(3,7),":search0":e}),n&&(v={idairguide:"175-2383"+e.slice(0,4),":search0":e}),{params:v,code:1}}else if(D||l||b)return{txt:e,code:1}},ae=async(t,r)=>{let e=Y(t),a={timeStamp:new Date().getTime(),latitude:w?.latitude,longitude:w?.longitude,statusId:r,userId:S?.profile?.userId,userName:S?.profile?.name};if(e?.params)return await B(e.params,a);if(e?.txt)return await N(e.txt,a);{let s=e?.txt||e?.params?.search0;return navigator.vibrate(m),{error:{alert:"error",color:"rgb(200 25 60)",scanData:{consigneeInfo:{ybestate:"Codigo Incorrecto",bagnumber:s}}}}}},B=async(t,r)=>{let e=await V(t),a=Object.keys(e)?.[0];if(e[a]?.cidentity){let i=E(e[a],r);return navigator.vibrate(500),i}let s={consigneeInfo:{ybestate:"Codigo Incorrecto"}};return navigator.vibrate(m),{error:{alert:"error",color:"rgb(200 25 60)",scanData:s}}},N=async(t,r)=>{let e=await Z(t);if(e?.cidentity){let s=await E(e,r);return navigator.vibrate(500),s}let a={consigneeInfo:{ybestate:"Codigo Incorrecto"}};return navigator.vibrate(m),{error:{alert:"error",color:"rgb(200 25 60)",scanData:a}}},E=async(t,r)=>{let e=t?.statusHistory||[];e.push(r);let a=!1;if(t?.isSSG&&_?.roles?.SSG?.isActive&&(a=!0),_?.roles?.[t?.consigneeInfo?.ybestate]?.isActive)if(t?.currentStatus!==r.statusId){let s={statusHistory:e,currentStatus:r.statusId},i={ssg_track_key:t.ssg_track_key,idairguide:t.idairguide},d=await T(i,s),o={tracking:t?.tracking,idairguide:t.idairguide,city:t?.consigneeInfo?.ybcity,estate:t.estate,bagnumber:t?.bagnumber};return{data:{...d,...o,isSSG:a},color:"#0f5223ff"}}else{let s={consigneeInfo:{ybcity:"Fue escaneado",ybestate:t?.consigneeInfo?.ybestate,bagnumber:t?.bagnumber}};return navigator.vibrate(O),{error:{alert:"warning",color:"#FF6F1D",scanData:s,isSSG:a}}}else{let s={consigneeInfo:{ybestate:"Zona incorrecta",bagnumber:t?.bagnumber}};return navigator.vibrate(m),{error:{alert:"warning",color:"#FF6F1D",scanData:s}}}},T=async(t,r)=>{let e={params:t,data2update:r},a=f(809004);return e={...e,...a},await x(e)},V=async t=>{let r={params:t,fldsQry:["idairguide","currentStatus","ssg_track_key","statusHistory","tracking","estate","city","cidentity","consigneeInfo:ybestate","consigneeInfo:ybcity"]},e=f(802001);return r={...r,...e},await x(r)},Z=async t=>{let r={params:{id:t}},e=f(803001);return r={...r,...e},await x(r)};var U=k('<div><div class="_dsplFlx flxWrp spaceAround "><img ref alt=ssg>');function se(){return(()=>{var t=U(),r=t.firstChild,e=r.firstChild;return t.style.setProperty("max-height","80vh"),t.style.setProperty("overflow","auto"),t.style.setProperty("background","#fff"),t.style.setProperty("border-radius","13"),r.style.setProperty("padding","16px"),P(a=>{var s=$()?"96vw":"420px",i=z("SSG.webp");return s!==a.e&&((a.e=s)!=null?t.style.setProperty("width",s):t.style.removeProperty("width")),i!==a.t&&G(e,"src",a.t=i),a},{e:void 0,t:void 0}),t})()}var J=k('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Codigo </h5></div><div class="_dsplFlx bottombx "><h4></h4></div></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h5></h5></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h5>');C(()=>I(()=>import("./SVG-CgaNqNB-.js"),__vite__mapDeps([0,1,2,3])));C(()=>I(()=>import("./CheckBoxSlide-C7OZSA4l.js"),__vite__mapDeps([4,1,2,5])));function ie(t){H(!1);const r=e=>{M(e)};return W(t?.val,async e=>await j(t?.val)),q(()=>{Q()}),(()=>{var e=J(),a=e.firstChild,s=a.firstChild,i=s.firstChild,d=i.nextSibling,o=d.firstChild,n=s.nextSibling,c=n.firstChild,p=n.nextSibling,g=p.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","50px 25px"),o.$$click=()=>r(t?.bagnumber),h(o,()=>t?.bagnumber),n.style.setProperty("padding","16px"),c.$$click=()=>r(t?.msg1),h(c,()=>t?.msg1),p.style.setProperty("padding","16px"),g.$$click=()=>r(t?.msg2),h(g,()=>t?.msg2),P(l=>{var u=$()?"86vw":"420px",y=300/t?.msg1?.length*1.32+"px",b=300/t?.msg2?.length*1.32+"px";return u!==l.e&&((l.e=u)!=null?e.style.setProperty("width",u):e.style.removeProperty("width")),y!==l.t&&((l.t=y)!=null?c.style.setProperty("font-size",y):c.style.removeProperty("font-size")),b!==l.a&&((l.a=b)!=null?g.style.setProperty("font-size",b):g.style.removeProperty("font-size")),l},{e:void 0,t:void 0,a:void 0}),e})()}L(["click"]);export{se as S,ie as a,ae as h};
