const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CNgL8eIa.js","assets/index-B3n38We2.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-Ds79ID8d.js","assets/debounces-akq70vMp.js","assets/SVG-Br2Astsm.js","assets/DropDwnSearch-DMkLkRPc.css","assets/CheckBoxSlide-FxoQXTth.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/FlexSpace-CKh32P5x.js","assets/ButonHrm-6Yhm_dwS.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-D3EMjEzQ.js","assets/DialogHRM-DVV7wLtz.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts-DTgRGXk8.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-P-Y95QJd.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as F,_ as Q,c as T,G as ye,a as z,o as ve,b as Ce,d as K,i as s,e as a,S,F as ee,b5 as xe,p as Y,b6 as Se,J as we,h as oe,j as A,x as de,y as Oe,v as me,k as U,m as D,U as ke,D as Pe,A as Ie,t as w,b7 as qe,r as re,q as W,b8 as ce,O as Z,al as fe,ax as je}from"./index-B3n38We2.js";import{u as Be}from"./debounces-akq70vMp.js";import{OpenModal as Ne}from"./DialogHRM-DVV7wLtz.js";import{g as ue,a as be}from"./handelImagesServices-BH515dAK.js";import{LookupInventory as pe}from"./DashInventoryMov-GLt79J9I.js";import{LookupProducts as te}from"./DashProducts-DTgRGXk8.js";import{a as Ae}from"./print_invoice_service-zL2OQg3A.js";import{OpenToast as se}from"./Toast-C-zclnNe.js";import"./browser-image-compression-BVJ4p9S0.js";import"./AddInventory-CkdoMm3V.js";import"./FlexSpace-CKh32P5x.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-nxXo_XkA.js";import"./InitPrintServices-Xwjy1Z7L.js";import"./qrcode-DHy8FFhS.js";var Ee=w('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),he=w('<div style=margin:15px class=" spaceAround centerBx">'),Te=w('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise></select><div class="centerBx bottombx "><h5 class="">Solo Arancel</h5></div></section><div style=margin:15px class=" spaceAround centerBx"><div style=margin:7px></div><div style=margin:7px>'),Ue=w('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),De=w("<option> "),Fe=w('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">Taxes'),Qe=w('<p class=B7xUP><span data-test-integ-cart-subtotal-label="">Taxes Estimado</span><span data-test-integ-cart-subtotal-value="">$'),Ve=w('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la Orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Total Estimado</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class=JM2zDb>'),ge=w("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Le=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Me=w("<span class=arancelSep> | "),Ye=w('<span class="arancel pricePq"> $'),Je=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Ge=w('<div class="icon_status centerBx "style="margin:0 4px">'),Re=w('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx spaceAround "><h5></h5><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div class="bottombx flxWrp spaceAround centerBx"><h5 class="textleft "></h5><h4>'),He=w('<section class="h6rxkc ">'),ze=w('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),We=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Ke=w('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),Xe=w('<div class="centerBx flxWrp">'),Ze=w('<div><div class=QCNFEe><p class=jhB0af>Enviar a Solve D Cargo</p></div><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Esta seguro de querer enviar a Solve D Cargo tenga en cuenta que puede duplicar la informacion</span></p><div class=separator></div><div style=margin:15px class=" spaceAround centerBx">');F(()=>Q(()=>import("./LoadingColorSpinner-CNgL8eIa.js"),__vite__mapDeps([0,1,2,3])));F(()=>Q(()=>import("./DropDwnSearch-Ds79ID8d.js"),__vite__mapDeps([4,1,2,5,6,7])));const _e=F(()=>Q(()=>import("./CheckBoxSlide-FxoQXTth.js"),__vite__mapDeps([8,1,2,9]))),ae=F(()=>Q(()=>import("./FlexSpace-CKh32P5x.js"),__vite__mapDeps([10,1,2]))),M=F(()=>Q(()=>import("./ButonHrm-6Yhm_dwS.js"),__vite__mapDeps([11,1,2,6,12])));F(()=>Q(()=>import("./UpdInventory-D3EMjEzQ.js"),__vite__mapDeps([13,1,2,14,15,5,16,17,18,10])));const H=F(()=>Q(()=>import("./InputHr-P-Y95QJd.js"),__vite__mapDeps([19,1,2,20]))),le=F(()=>Q(()=>import("./SVG-Br2Astsm.js"),__vite__mapDeps([6,1,2]))),[$,j]=T({manifestObj:{}});let et=864e5;function Ot(){const[e,i]=ye();T(),T(),T();const[c,f]=z("");Be(f,400),ve(()=>{}),Ce(()=>{});const h=async()=>{if(e?.mId){let d={":search0":e?.mId,businessId:A?.profile?.businessYId},l=await $e(d);j("manifestObj",l[e?.mId])}};return K(async()=>{j("manifestObj",void 0),h(),qe()}),(()=>{var d=Ee(),l=d.firstChild,n=l.firstChild,v=n.firstChild;return s(d,a(S,{get when(){return $?.manifestObj?.packagesOrder},get children(){return a(tt,{})}}),l),s(v,a(S,{get when(){return $?.manifestObj?.products},get children(){return a(ee,{get each(){return $?.manifestObj?.products},children:(g,b)=>a(lt,{itm:g})})}})),s(l,a(S,{get when(){return $?.manifestObj?.packagesOrder&&!$?.manifestObj?.isCompleted},get children(){return a(at,{})}}),null),s(l,a(st,{get item(){return $?.manifestObj},get list(){return $?.manifestObj}}),null),d})()}const tt=e=>{const i={type:"",qty:0,arancel:0,price:0},[c,f]=T({frm:{...i}}),h=(l,n)=>{f("frm",l,n)},d=l=>{let n={...c?.frm};n.key=je();let v=$?.manifestObj?.reservas||[],g=re(v);g.push(n),console.log(n),j("manifestObj","reservas",g),f("frm",{...i})};return(()=>{var l=Ue(),n=l.firstChild,v=n.firstChild,g=n.nextSibling,b=g.firstChild,p=b.firstChild;return s(v,a(S,{get when(){return $?.manifestObj?.reservas},get children(){return a(ee,{get each(){return $?.manifestObj?.reservas},children:(u,m)=>a(rt,{itm:u})})}})),s(l,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){var u=Te(),m=u.firstChild,t=m.firstChild,r=t.firstChild,o=r.nextSibling,y=o.firstChild,_=y.nextSibling,x=_.nextSibling,O=x.firstChild,I=o.nextSibling,k=I.firstChild,P=k.nextSibling;return _.addEventListener("change",C=>{h("type",C?.target?.value)}),s(_,a(ee,{get each(){return xe?.list},children:(C,J)=>(()=>{var N=De();return N.firstChild,s(N,()=>C.label,null),Y(()=>N.selected=C.id===c?.frm?.type),Y(()=>N.value=C.id),N})()})),s(x,a(_e,{get initValue(){return c?.frm?.onlyTariff},updChange:C=>h("onlyTariff",C),color:"var(--background-red-ssg)"}),O),s(I,a(S,{get when(){return!c?.frm?.onlyTariff&&c?.frm?.type},get children(){return a(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return c?.frm?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",type:"number",handleClick:C=>h("qty",Se(C))})}}),k),s(I,a(S,{get when(){return c?.frm?.qty&&c?.frm?.type},get children(){return a(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.price||""},label:"precio",colors:"#2b2b2b",handleClick:C=>h("price",C)})}}),P),s(I,a(S,{get when(){return c?.frm?.type},get children(){return a(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.frm?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:C=>h("arancel",C)})}}),null),s(t,a(S,{get when(){return(c?.frm?.price&&c?.frm?.qty||c?.frm?.onlyTariff&&c?.frm?.arancel)&&c?.frm?.type},get children(){var C=he();return s(C,a(M,{color:"#646cff",label:"Agregar",handleClick:d})),C}}),null),u}}),g),s(p,a(it,{get item(){return $?.manifestObj?.shipper_consignee}})),l})()},st=e=>{const i=d=>{let l=0;return e?.item?.products?.map(n=>{l+=R(n?.qty)*R(n?.salePrice)*-1}),e?.item?.reservas?.map(n=>{l+=R(n?.qty)*R(n?.price)+R(n?.arancel)}),l},c=async d=>{let l={...e?.item};l.amount=i();let n=await Ae(l);window.open(n)},f=async()=>{let d={...e?.item},l={params:{businessId:A?.profile?.businessYId,id:d.ssg_sorder_key},form:{isCompleted:!1}},n=U(431007);l={...l,...n}},h=async d=>{let l=re(e?.item);l.isCompleted=!0,l.dayNum=l?.createDate/et;let n={params:{businessId:A?.profile?.businessYId,id:l.ssg_sorder_key},form:l},v=U(431007);n={...n,...v},await D(n);let g={params:{businessId:A?.profile?.businessYId},form:l},b=U(139003);g={...g,...b},await D(g);let p={":search0":l.ssg_sorder_key,businessId:A?.profile?.businessYId},u=await $e(p);j("manifestObj",u[l.ssg_sorder_key])};return(()=>{var d=Ve(),l=d.firstChild,n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.nextSibling,p=b.firstChild,u=p.firstChild,m=u.nextSibling;m.firstChild;var t=p.nextSibling,r=t.firstChild,o=r.nextSibling;o.firstChild;var y=v.nextSibling,_=y.firstChild,x=_.firstChild,O=x.firstChild,I=O.nextSibling;I.firstChild;var k=x.nextSibling,P=k.firstChild,C=P.nextSibling,J=k.nextSibling,N=J.firstChild,G=N.nextSibling;G.firstChild;var L=y.nextSibling;return s(v,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){return[(()=>{var B=Fe(),E=B.firstChild,V=E.firstChild;return s(E,a(_e,{get initValue(){return $?.manifestObj?.hasTax},updChange:ie=>j("manifestObj","hasTax",ie),color:"var(--background-red-ssg)"}),V),B})(),(()=>{var B=he();return s(B,a(S,{get when(){return $?.manifestObj?.hasTax},get children(){return a(H,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return $?.manifestObj?.TaxPercent||""},label:"Porciento de Impuestos",colors:"#2b2b2b",type:"number",handleClick:E=>j("manifestObj","TaxPercent",E)})}})),B})()]}}),b),s(m,()=>i().toFixed(2),null),s(b,a(S,{get when(){return $?.manifestObj?.hasTax&&$?.manifestObj?.TaxPercent},get children(){var B=Qe(),E=B.firstChild,V=E.nextSibling;return V.firstChild,s(V,()=>(i()*($?.manifestObj?.TaxPercent/100)).toFixed(2),null),B}}),t),s(o,()=>(i()*(($?.manifestObj?.TaxPercent?$?.manifestObj?.TaxPercent:0)/100)+i()).toFixed(2),null),s(I,()=>we(e?.item?.createDate),null),s(C,()=>e?.item?.invoice),s(G,()=>oe("storeGroupBy")?.[e?.item?.store]?.label,null),s(L,a(M,{color:"#646cff",label:"Imprimir",handleClick:c}),null),s(L,a(S,{get when(){return!e?.item?.isCompleted},get children(){return a(M,{color:"#646cff",label:"Confirmar",handleClick:h})}}),null),s(L,a(S,{get when(){return e?.item?.isCompleted&&A?.profile?.isAdmin},get children(){return a(M,{color:"#646cff",label:"arrow",handleClick:f})}}),null),d})()},lt=e=>{const[i,c]=T(),f=()=>i?.[e?.itm?.product?.id]?.productImageUrl?ue()+be()+"/"+i?.[e?.itm?.product?.id]?.productImageUrl:null,h=async()=>{let l=e?.itm?.product?.id,n=`${l}`,v=await te(n);v?.[l]?.productImageUrl&&c(l,v?.[l])};K(()=>{h()});const d=()=>{console.log(e?.itm);let l=re($?.manifestObj?.products);delete l[e?.itm?.product?.id],j("manifestObj","products",l)};return a(S,{get when(){return e?.itm?.salePrice},get children(){var l=Le(),n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.firstChild,p=b.firstChild,u=b.nextSibling,m=u.firstChild,t=m.firstChild,r=t.firstChild;r.firstChild;var o=m.nextSibling,y=o.firstChild,_=y.firstChild,x=_.nextSibling,O=y.nextSibling,I=O.firstChild;return I.firstChild,s(r,()=>e?.itm?.product?.label,null),s(x,()=>e?.itm?.qty*-1),s(I,()=>(e?.itm?.salePrice*1).toFixed(2),null),s(o,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){var k=ge(),P=k.firstChild,C=P.firstChild;return C.$$click=d,k}}),null),Y(()=>de(p,"src",f())),l}})},rt=e=>{const[i,c]=T(),f=async()=>{let d=e?.itm?.product?.id,l=`${d}`,n=await te(l);n?.[d]?.productImageUrl&&c(d,n?.[d])};K(()=>{f()});const h=()=>{let l=re($?.manifestObj?.reservas).filter(n=>n.key!==e?.itm?.key);j("manifestObj","reservas",l)};return(()=>{var d=Je(),l=d.firstChild,n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.firstChild,p=b.firstChild,u=p.firstChild;u.firstChild;var m=b.nextSibling,t=m.firstChild,r=t.firstChild,o=r.nextSibling,y=t.nextSibling,_=y.firstChild;return _.firstChild,s(u,()=>e?.itm?.type,null),s(o,()=>e?.itm?.qty*1),s(_,()=>(e?.itm?.price*1).toFixed(2),null),s(y,a(S,{get when(){return e?.itm?.arancel},get children(){return[Me(),(()=>{var x=Ye();return x.firstChild,s(x,()=>(e?.itm?.arancel*1).toFixed(2),null),x})()]}}),null),s(m,a(S,{get when(){return!$?.manifestObj?.isCompleted},get children(){var x=ge(),O=x.firstChild,I=O.firstChild;return I.$$click=h,x}}),null),d})()},it=e=>{const[i,c]=z(),[f,h]=z(!0),d=t=>t?" "+t:"",l=t=>d(t?.firstName)+d(t?.middleName)+d(t?.lastName)+d(t?.lastName2),n=t=>{let r=d(t?.altPhoneNumber);return d(t?.phoneNumber)+(r?" |"+r:"")},v=async()=>{let t={};t.id=W(),t.closeEvent=()=>{},t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=a(dt,{confirm:g}),Ne(t)},g=async()=>{let t=A?.profile?.agency?.id;if(t&&e?.item?.citiId&&e?.item?.provinceId){let r=e?.item,o=`;${q(r?.firstName)};${q(r?.middleName)};${q(r?.lastName)};${q(r?.lastName2)};N/A;${q(r?.cid)};CUB;${q(r?.phoneNumber)};${q(r?.altPhoneNumber)};${q(r?.ybstreet)};${q(r?.ybstreetNo)};${q(r?.ybbetwen1)};${q(r?.ybbetwen2)};${q(r?.ybreparto)};;${r?.citiId};${r?.provinceId};${q(r?.email)};;${t}`;b("consignee",o)}},b=async(t,r,o)=>{let y=`funcname=insertRecord&option=${t}&params=${r}`,_={query:"querySolveGlobal"};_.params={query:y},await D(_)},p=async()=>{let t={params:{id:e?.item?.name,key:"shipper"}},r=U(181009);t={...t,...r};const o=await D(t);let y=ce(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],o,e?.item);console.log(y),o.cid===e?.item?.cid&&console.log()},u=async()=>{let t={params:{id:e?.item?.cid,key:"consignee"}},r=U(181009);t={...t,...r};const o=await D(t);return console.log(o),ce(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],o,e?.item).hasChange&&o.cid===e?.item?.cid?e?.item:o},m=async(t,r)=>{let o=await u();console.log(o)};return K(()=>{if(e?.item?.ybestate){let t=oe("M023009")?.provincias?.filter?.(r=>r.label===e?.item?.ybestate)?.[0];if(t?.id&&c(t),e?.item?.ybcity){let r=t?.cities?.filter?.(o=>o.label===e?.item?.ybcity)?.[0];r?.id&&j("manifestObj","shipper_consignee","citiId",r?.id)}}m()}),a(S,{get when(){return e?.item?.name},get children(){var t=Re(),r=t.firstChild;r.firstChild;var o=r.nextSibling,y=o.firstChild,_=y.nextSibling,x=o.nextSibling,O=x.nextSibling,I=O.firstChild,k=I.nextSibling,P=O.nextSibling,C=P.firstChild,J=C.nextSibling,N=J.nextSibling,G=P.nextSibling,L=G.firstChild,B=L.nextSibling,E=G.nextSibling,V=E.firstChild,ie=V.nextSibling;return s(r,a(ae,{}),null),s(y,()=>e?.item?.name),_.$$click=p,s(_,()=>e?.item?.phoneNumberS),s(O,a(ae,{}),k),k.$$click=u,s(k,a(le,{name:"success",size:22,get color(){return f()?"#37be5fff":"#c6c6c6"}})),s(O,a(S,{get when(){return!f()},get children(){var ne=Ge();return ne.$$click=v,s(ne,a(le,{name:"send",size:22,color:"#646cff"})),ne}}),null),s(C,()=>e?.item?.cid),s(J,()=>l(e?.item)),s(N,()=>n(e?.item)),s(L,()=>ot(e?.item)),s(B,()=>e?.item?.ybreparto),s(V,()=>e?.item?.ybcity),s(ie,()=>e?.item?.ybestate),Y(()=>Oe(t,`    ${me()?"isMobile":""}`)),t}})},kt=async(e,i)=>{let c={params:e,data2update:i},f=U(431007);return c={...c,...f},await D(c)},$e=async e=>{let i={params:e},c=U(431002);return i={...i,...c},await D(i)},Pt=async e=>{let i=[];e.map(c=>{let f={params:{id:c?.ssg_track_key,idairguide:"all"}},h=U(802002);f={...f,...h},i.push(f)}),ke(i,nt)},nt=async e=>{const c=await D(e);if(c)return c},at=e=>{const[i,c]=z(""),[f,h]=z(1),d=()=>{f()===1&&i().length>8&&l(i())},l=async b=>{let p=A?.profile?.agencyStore?.id,u=`${b}`,m=await te(u),t=Z(m)?.[0],r=`${t} ${p}`,o=await pe(r),y=0,_=0;Z(o)?.map(k=>{o[k]?.products?.map(P=>{t===P?.product?.id&&(y+=P?.price*1*P?.qty*1,_+=P?.qty*1)})});let x=1,O={};$?.manifestObj?.products?.map(k=>{let P={...k};t===k.product.id&&(P.qty=P.qty*-1),O[k.product.id]=P}),O?.[t]&&(x=O?.[t].qty*1+1);const I=_?y/_:0;if(_&&_-x>=0){if(O?.[t])O[t].qty=x*-1;else{let P={product:{id:t,label:m?.[t]?.name,code:m?.[t]?.code},qty:x*-1,price:I,salePrice:m?.[t]?.salePrice};O[t]=P}let k=fe(O);j("manifestObj","products",k),c(""),se({text:m?.[t]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:W()})}else se({text:"Sin Existencia",timeout:3500,theme:"red",id:W()})},[n,{refetch:v}]=Pe(i,async b=>{if(f()===2&&b.length>4){const p=await te(b);let u=[];return Z(p).map(m=>{let t=p[m];u.push(t)}),u}else return[]}),g=()=>{c(""),h(1)};return(()=>{var b=ze(),p=b.firstChild,u=p.firstChild,m=u.firstChild,t=m.nextSibling,r=t.firstChild,o=r.nextSibling;return s(u,a(S,{get when(){return n()?.length>0},get children(){var y=He();return s(y,a(ee,{get each(){return n()},children:(_,x)=>a(ct,{itm:_,clearTx:g})})),y}}),t),s(t,a(H,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return i()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:c,onEnter:d}),r),r.$$click=()=>h(1),s(r,a(le,{name:"qrcode-scan",size:22,get color(){return f()===1?"#646cff":""}})),o.$$click=()=>h(2),s(o,a(le,{name:"keyboard",size:22,get color(){return f()===2?"#646cff":""}})),b})()},ct=e=>{const[i,c]=T(),f=()=>i?.prod?.productImageUrl?ue()+be()+"/"+i?.prod?.productImageUrl:null;K(()=>{c("prod",e?.itm)}),Array.from(Array(10).keys());const h=async d=>{let l=A?.profile?.agencyStore?.id,n=i?.prod?.ssg_product_key,v=`${n} ${l}`,g=await pe(v),b=0,p=0;Z(g)?.map(r=>{g[r]?.products?.map(o=>{n===o?.product?.id&&(b+=o?.price*1*o?.qty*1,p+=o?.qty*1)})});let u=1,m={};$?.manifestObj?.products?.map(r=>{let o={...r};n===r.product.id&&(o.qty=o.qty*-1),m[r.product.id]=o}),m?.[n]&&(u=m?.[n].qty*1+1);const t=p?b/p:0;if(console.log(t,p,b),p&&p-u>=0){if(m?.[n])m[n].qty=u*-1;else{let o={product:{id:n,label:i?.prod?.name,code:i?.prod?.code},qty:u*-1,price:t,salePrice:i?.prod?.salePrice};m[n]=o}let r=fe(m);j("manifestObj","products",r),e?.clearTx(),se({text:i?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:W()})}else e?.clearTx(),se({text:"Sin Existencia",timeout:3500,theme:"red",id:W()})};return a(S,{get when(){return e?.itm?.salePrice},get children(){var d=We(),l=d.firstChild,n=l.firstChild,v=n.firstChild,g=v.firstChild,b=g.firstChild,p=g.nextSibling,u=p.firstChild,m=u.firstChild,t=m.firstChild;t.firstChild;var r=u.nextSibling,o=r.firstChild,y=o.nextSibling,_=y.firstChild;return _.firstChild,s(t,()=>e?.itm?.name,null),s(o,a(M,{color:"#646cff",label:"Agregar",handleClick:h})),s(_,()=>(e?.itm?.salePrice*1).toFixed(2),null),Y(()=>de(b,"src",f())),d}})},X=(e,i)=>i?(()=>{var c=Ke(),f=c.firstChild,h=f.nextSibling;return s(f," "+e),s(h,i),c})():"",ot=e=>(()=>{var i=Xe();return s(i,()=>X("Calle",e?.ybstreet),null),s(i,()=>X("#",e?.ybstreetNo),null),s(i,()=>X("E/",e?.ybbetwen1),null),s(i,()=>X("y",e?.ybbetwen2),null),i})(),R=e=>e?e*1:0,q=e=>e?e.toString().toUpperCase().trim():"";function dt(e){return(()=>{var i=Ze(),c=i.firstChild,f=c.nextSibling,h=f.nextSibling,d=h.nextSibling;return i.style.setProperty("max-height","80vh"),i.style.setProperty("overflow","auto"),i.style.setProperty("background","#fff"),i.style.setProperty("border-radius","11px"),i.style.setProperty("padding"," 0 21px"),c.style.setProperty("padding","21px"),s(d,a(ae,{}),null),s(d,a(M,{color:"#646cff",icon:"send",label:"Enviar",get handleClick(){return e.confirm}}),null),Y(l=>(l=me()?"96vw":"420px")!=null?i.style.setProperty("width",l):i.style.removeProperty("width")),i})()}Ie(["click"]);export{Ot as default,nt as fetchCSVInve,ot as getAddress,R as isValNum,Pt as loadInventory,kt as updConfirmSale};
