import{P as M,S as u,r as o}from"./PDFButton-BDIa4If0.js";import{d as f,e as v}from"./Util-Df9CfxGL.js";import{f as Q}from"./fontkit.es-6TA5hJ2T.js";import{b as Y}from"./InitPrintServices-BR2Uf5F7.js";import"./qrcode-DHy8FFhS.js";import"./Toast-DI-xWLq6.js";let t=0;const ot=async n=>{const d=await M.create();d.registerFontkit(Q);var e=await d.embedFont(u.TimesRoman),r=await d.embedFont(u.TimesRomanBold),i=await d.embedFont(u.TimesRomanBold);if(f("modernFontReport")){let s=f("Roboto-Bold.ttf");const b=await fetch(s).then(T=>T.arrayBuffer());r=await d.embedFont(b);let W=f("ggSans-Italic.ttf");const O=await fetch(W).then(T=>T.arrayBuffer());e=await d.embedFont(O);let q=f("ggSans-Medium.ttf");const R=await fetch(q).then(T=>T.arrayBuffer());i=await d.embedFont(R)}let a=d.addPage();const{width:_,height:h}=a.getSize(),c=10;t=h-40;const p=i.widthOfTextAtSize(n?.invoice,12),g=e.widthOfTextAtSize("Invoice: ",11);a.drawText("Invoice: ",{x:580-p-g,y:t,size:11,font:e,color:o(0,0,0)}),a.drawText(n?.invoice,{x:580-p,y:t,size:12,font:i,color:o(0,0,0)});let I=h-30,A=f("storeGroupBy")?.[n?.store]?.label;a.drawText(A,{x:20,y:I,size:13,font:r,color:o(0,0,0)}),t=t-20;let B=n?.createDate;const D=e.widthOfTextAtSize("Fecha: ",11),S=r.widthOfTextAtSize(v(B)+"",12);a.drawText("Fecha: ",{x:580-D-S,y:t,size:11,font:e,color:o(0,0,0)}),a.drawText(v(B)+"",{x:580-S,y:t,size:12,font:r,color:o(.06,.06,.06)}),t=t-20;let l=f("providers_ids")?.[n?.customer?.providerId]?.name||"";if(l){const s=e.widthOfTextAtSize("Bill To: ",11),b=r.widthOfTextAtSize(l+"",12);a.drawText("Bill To: ",{x:580-s-b,y:t,size:11,font:e,color:o(0,0,0)}),a.drawText(l+"",{x:580-b,y:t,size:12,font:r,color:o(0,0,0)})}t=t-50,a.drawRectangle({x:15,y:t+1,width:560,height:.85,color:o(.53,.53,.53),borderColor:o(.53,.53,.53)}),a.drawText(n?.description+"",{x:20,y:t-11,size:10,font:e,color:o(0,0,0)}),t=t-20,a.drawRectangle({x:15,y:t+1,width:560,height:.85,color:o(.53,.53,.53),borderColor:o(.53,.53,.53)}),t=t-18,a.drawText("Producto",{x:20,y:t,size:13,font:r,color:o(0,0,0)});const F=r.widthOfTextAtSize("Qty",12);a.drawText("Qty",{x:400-F,y:t,size:12,font:r,color:o(0,0,0)});const y=r.widthOfTextAtSize("Precio",12);a.drawText("Precio",{x:480-y,y:t,size:12,font:r,color:o(0,0,0)});const z=r.widthOfTextAtSize("Total",12);a.drawText("Total",{x:560-z,y:t,size:12,font:r,color:o(0,0,0)}),t=t-8,a.drawRectangle({x:15,y:t+1,width:560,height:.95,color:o(.53,.53,.53),borderColor:o(.53,.53,.53)});let m=n?.products||[];Array.isArray(m)&&m.map((s,b)=>{const W=s?.product?.label;t=t-16,W&&a.drawText(W+"",{x:20,y:t,size:c,font:e,color:o(0,0,0)});let O=s?.qty?(s?.qty*-1).toFixed(2):"0.00";const q=e.widthOfTextAtSize(O+"",c);a.drawText(O+"",{x:400-q,y:t,size:c,font:e,color:o(0,0,0)});let R=s?.qty?(s?.salePrice*1).toFixed(2):"0.00";const T=e.widthOfTextAtSize(R+"",c);a.drawText(R+"",{x:480-T,y:t,size:c,font:e,color:o(0,0,0)});let k=s?.qty?(s?.salePrice*s?.qty*-1).toFixed(2):"0.00";const J=e.widthOfTextAtSize(k+"",c);a.drawText(k+"",{x:560-J,y:t,size:c,font:e,color:o(0,0,0)})}),t=t-28,a.drawRectangle({x:15,y:t+1,width:560,height:.85,color:o(.53,.53,.53),borderColor:o(.53,.53,.53)});let w=500;t=t-20;let x=n?.amount?n?.amount?.toFixed(2):"0.00";const L=e.widthOfTextAtSize(x+"",c);a.drawText(x+"",{x:560-L,y:t,size:c,font:e,color:o(.13,.13,.13)});const E=e.widthOfTextAtSize("SubTotal",c);a.drawText("SubTotal",{x:w-E,y:t,size:c,font:e,color:o(0,0,0)}),t=t-16;let G=n?.hasTax?n?.hasTax?.toFixed(2):"0.00";const H=e.widthOfTextAtSize(G+"",c);a.drawText(G+"",{x:560-H,y:t,size:c,font:e,color:o(.13,.13,.13)});const N=e.widthOfTextAtSize("Taxes",c);a.drawText("Taxes",{x:w-N,y:t,size:c,font:e,color:o(0,0,0)});let C=n?.hasTax?n?.hasTax+n?.amount:n?.amount*1;t=t-16;let U=C?C?.toFixed(2):"0.00";const P=i.widthOfTextAtSize(U+"",11);a.drawText(U+"",{x:560-P,y:t,size:11,font:i,color:o(0,0,0)});const j=i.widthOfTextAtSize("Total",11);a.drawText("Total",{x:w-j,y:t,size:11,font:i,color:o(0,0,0)});{const s=await d.save();return Y(s)}},et=async n=>{const d=await M.create();d.registerFontkit(Q);var e=await d.embedFont(u.TimesRoman),r=await d.embedFont(u.TimesRomanBold);if(await d.embedFont(u.TimesRomanBold),f("modernFontReport")){let l=f("Roboto-Bold.ttf");const F=await fetch(l).then(x=>x.arrayBuffer());r=await d.embedFont(F);let y=f("ggSans-Italic.ttf");const z=await fetch(y).then(x=>x.arrayBuffer());e=await d.embedFont(z);let m=f("ggSans-Medium.ttf");const w=await fetch(m).then(x=>x.arrayBuffer());await d.embedFont(w)}let i=d.addPage();const{width:a,height:_}=i.getSize(),h=10;t=_-40;let c=_-30,p=f("storeGroupBy")?.[n?.store]?.label;i.drawText(p,{x:20,y:c,size:13,font:r,color:o(0,0,0)});let g=n?.createDate;const I=e.widthOfTextAtSize("Fecha: ",11),A=r.widthOfTextAtSize(v(g)+"",12);i.drawText("Fecha: ",{x:580-I-A,y:t,size:11,font:e,color:o(0,0,0)}),i.drawText(v(g)+"",{x:580-A,y:t,size:12,font:r,color:o(.06,.06,.06)}),t=t-20,t=t-20,i.drawRectangle({x:15,y:t+1,width:560,height:.85,color:o(.53,.53,.53),borderColor:o(.53,.53,.53)}),t=t-18,i.drawText("Producto",{x:20,y:t,size:13,font:r,color:o(0,0,0)});const B=r.widthOfTextAtSize("Existencia",12);i.drawText("Existencia",{x:480-B,y:t,size:12,font:r,color:o(0,0,0)});const D=r.widthOfTextAtSize("Qty",12);i.drawText("Qty",{x:560-D,y:t,size:12,font:r,color:o(0,0,0)}),t=t-8,i.drawRectangle({x:15,y:t+1,width:560,height:.95,color:o(.53,.53,.53),borderColor:o(.53,.53,.53)});let S=n?.products||[];Array.isArray(S)&&S.map((l,F)=>{const y=l?.product?.label;t=t-16,y&&i.drawText(y+"",{x:20,y:t,size:h,font:e,color:o(0,0,0)});let z=l?.stock?l?.stock*1:"0";const m=e.widthOfTextAtSize(z+"",h);i.drawText(z+"",{x:480-m,y:t,size:h,font:e,color:o(0,0,0)});let w=l?.qty?l?.qty*1:"0";const x=e.widthOfTextAtSize(w+"",h);i.drawText(w+"",{x:560-x,y:t,size:h,font:e,color:o(0,0,0)})});{const l=await d.save();return Y(l)}};export{et as I,ot as a};
