const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-fUSyGZur.js","assets/index-CaXA0mR0.js","assets/index-D4QuRvi-.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-Ov8gpAjA.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-DEfsU4Im.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-Ena0jYS0.js","assets/debounces-C7Wz-qd_.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-CHoNKm1O.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-D6QdGWB_.js","assets/Util-D7b_hj3C.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-D-Va3JWb.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-D03lrhUh.js","assets/manifestList-CT6VCobT.js","assets/DialogHRM-DNoXdE5V.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-wMqKMl0q.js","assets/ShowQRPrintLabel-DnvvB_mE.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices--pV7_9n8.js","assets/Toast-DXo7WFrx.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-C_l51FRX.js"])))=>i.map(i=>d[i]);
import{l as B,_ as G,c as ne,a as I,o as ze,h as Fe,b as qe,i as r,d as t,f as R,e as Re,t as $,j as le,S as v,D as Ve,E as de,q as K,F as U,g as J,s as Te,z as ee}from"./index-CaXA0mR0.js";import{m as je,c as te,b as _e,Z as Qe}from"./manifestList-CT6VCobT.js";import{e as We,f as re,O as W,g as M,a as V,i as Ye,q as T,j as Xe}from"./Util-D7b_hj3C.js";import{u as He}from"./debounces-C7Wz-qd_.js";import{i as Y}from"./globalSignal-wMqKMl0q.js";import{g as se,S as Ze,l as Ue}from"./ShowQRPrintLabel-DnvvB_mE.js";import{OpenToast as Ke}from"./Toast-DXo7WFrx.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices--pV7_9n8.js";var Je=$("<div style=padding:4px>"),ie=$('<div class="icon_status centerBx">'),et=$('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),tt=$('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),rt=$('<div><div class="_dsplFlx flxWrp spaceAround ">'),nt=$('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),lt=$('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),st=$('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),ge=$("<div> <!>."),me=$("<div> "),he=$("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),it=$("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),fe=$("<h5 class=totalBagsNo> <!> / "),ve=$('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),$e=$("<div class=leftMrg> "),at=$("<div class=bottombx><h4>"),ot=$('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),ct=$("<div style=padding:16px;margin-left:20px;>"),ut=$("<div>"),dt=$('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const q=B(()=>G(()=>import("./LoadingColorSpinner-fUSyGZur.js"),__vite__mapDeps([0,1,2,3]))),gt=B(()=>G(()=>import("./InputHr-Ov8gpAjA.js"),__vite__mapDeps([4,1,2,5]))),D=B(()=>G(()=>import("./SVG-DEfsU4Im.js"),__vite__mapDeps([6,1,2,7]))),mt=B(()=>G(()=>import("./DropDwnSearch-Ena0jYS0.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ht=B(()=>G(()=>import("./ContainerElasticView-CHoNKm1O.js"),__vite__mapDeps([11,1,2,6,7,12]))),_t=B(()=>G(()=>import("./ButonHrm-D6QdGWB_.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ae=B(()=>G(()=>import("./CheckBoxSlide-D-Va3JWb.js"),__vite__mapDeps([16,1,2,17]))),ft=B(()=>G(()=>import("./ItemOnEnvios-D03lrhUh.js"),__vite__mapDeps([18,1,2,14,7,19,20,21,11,6,12,22,23,24,25,26,27,28])));B(()=>G(()=>import("./ItemOnEnviosMobile-C_l51FRX.js"),__vite__mapDeps([29,1,2,14,7,19,20,21,11,6,12,9,22])));function zt(){const[e,s]=ne({list:{manifest:{id:"175-23834683",label:""},search:"",status:""}}),[n,i]=ne({}),[d,a]=ne({}),[k,x]=I(""),[c,j]=I(!1),[X,E]=I(64),[A,L]=I(!1),[z,H]=I(!1),[be,pe]=I(""),N=He(x,500),[ye,oe]=I(!1),[ke,ce]=I(!1),Q=(o,u)=>{s("list",{[o]:u}),N(M())},xe=()=>{L(!A()),N(M())},Ce=()=>{j(!c()),N(M())},we=()=>{H(!z()),N(M())};ze(()=>{}),Fe(()=>{});const Se=()=>{E(o=>o+64)},Ie=o=>{let u=Math.ceil(o?.length/64);Xe(Se,1250,u)},[O,{refetch:St}]=qe(k,async o=>{let u=e?.list?.manifest?.id;be()!==u&&pe(u);const P=await pt(u);i(P?.sumary),a("prov",P?.provinceGroup);let y=[];var _={};if(c()){_=await bt(e?.list?.search,u,e?.list?.status,e?.list?.estate,e?.list?.city),E(0);let w={};A()?W(_).map(b=>{let p=_[b],C=p?.estate||p?.consigneeInfo?.ybestate;w[b]?y.push(p):w[b]=1,Qe?.[p?.zone]?.[C]||y.push(p)}):z()?W(_).map(b=>{let p=_[b],C="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(C);p.tracking.length===13&&l.test(p.tracking)&&y.push(p),p?.currentStatus||y.push(p)}):y=Ye(_),Ie(y)}return y}),ue=()=>O()?.length,Ee=o=>{s("list",{manifest:o,status:void 0}),N(M())},Ae=()=>{kt(O())},Be=()=>{xt(O())},Ge=()=>{},Pe=(o,u)=>{Q("estate",o),Q("city",u)},Me=(o,u)=>{s("list",{estate:void 0,city:void 0}),N(M())},Z=o=>o?" "+o:"",De=o=>{let u=o?.consigneeInfo;return Z(u?.firstName)+Z(u?.middleName)+Z(u?.lastName)+Z(u?.lastName2)},Ne=async()=>{let o=[],u=360;if(oe(!0),O().length<u){const P=O().map(async(_,F)=>{let w=_?.tracking,b="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const p=new RegExp(b);w.length===13&&p.test(w)&&(w=w.slice(3,12));let l=await se(w),g={state:_?.consigneeInfo?.ybestate,name:De(_),phoneNumber:_?.consigneeInfo?.phoneNumber,altPhoneNumber:_?.consigneeInfo?.altPhoneNumber,guiaWeek:_?.guia,bulto:_?.bagnumber,tracking:w,qr:l};o.push(g)});await Promise.all(P);let y=await Ze(o);window.open(y),oe(!1)}else Ke({text:`El limite de etiquetas a imprimir es de ${u}`,timeout:2500,id:M()})},Oe=async()=>{let o=[];ce(!0),setTimeout(async()=>{let u=400,P=619124,y=[],_=new Date().getFullYear().toString().slice(2,4);for(let b=0;b<u;b++)y.push(b);const F=y.map(async(b,p)=>{let C=P+b*2,l=C+1;const g=await se("Y"+_+C),m=await se("Y"+_+l);let f={mtrx:g,mtrx2:m,lbl:"Y"+_+C,lbl2:"Y"+_+l};o.push(f)});await Promise.all(F);let w=await Ue(o);window.open(w),ce(!1)},760)},Le=async o=>{await yt(e?.list?.manifest?.id)};return(()=>{var o=st(),u=o.firstChild,P=u.firstChild,y=P.nextSibling,_=y.firstChild,F=y.nextSibling,w=F.firstChild,b=u.nextSibling,p=b.firstChild,C=b.nextSibling;return r(_,()=>e?.list?.manifest?.id),r(F,t(ae,{get initValue(){return c()},updChange:Ce,color:"var(--background-red-ssg)"}),w),r(o,t(v,{get when(){return le?.profile?.isAdmin},get children(){return t(_t,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Ae})}}),b),r(p,t(mt,{list:je,lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:l=>Ee(l),width:"260px"})),r(b,t(v,{get when(){return Ve(()=>!!e?.list?.manifest?.id)()&&c()},get children(){return[(()=>{var l=Je();return r(l,t(gt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>Q("search",g)})),l})(),(()=>{var l=tt(),g=l.firstChild,m=g.firstChild;return r(g,t(ae,{get initValue(){return A()},updChange:xe,color:"var(--background-red-ssg)"}),m),r(l,t(v,{get when(){return le?.profile?.isAdmin},get children(){var f=et(),h=f.firstChild;return r(f,t(ae,{get initValue(){return z()},updChange:we,color:"var(--background-red-ssg)"}),h),r(f,t(v,{get when(){return z()},get children(){var S=ie();return S.$$click=Be,r(S,t(D,{name:"outline_delete",size:24})),S}}),null),f}}),null),l})()]}}),null),r(C,t(v,{get when(){return e?.list?.manifest?.id},get children(){var l=rt(),g=l.firstChild;return r(g,t(de,{fallback:m=>(()=>{var f=ge(),h=f.firstChild,S=h.nextSibling;return S.nextSibling,r(f,()=>m.toString(),S),f})(),get children(){return t(K,{get fallback(){return(()=>{var m=me();return m.firstChild,r(m,t(q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),m})()},get children(){return t(v,{get when(){return n?.total},get children(){return t(U,{get each(){return W(n)},children:(m,f)=>Y()?t($t,{keyG:m,total:ue,get status(){return e?.list?.status},get amount(){return n?.[m]},get showItems(){return c()},updForm:Q}):t(vt,{keyG:m,total:ue,get showItems(){return c()},get status(){return e?.list?.status},get amount(){return n?.[m]},updForm:Q})})}})}})}})),R(()=>J(l,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),l}}),null),r(C,t(v,{get when(){return le?.profile?.isAdmin},get children(){var l=nt(),g=l.firstChild,m=g.firstChild,f=m.nextSibling;return r(g,t(v,{get when(){return!ke()},get fallback(){return(()=>{var h=he(),S=h.firstChild;return r(h,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),S),h})()},get children(){var h=ie();return h.$$click=Oe,r(h,t(D,{name:"printer",size:24,color:"firebrick"})),h}}),m),m.$$click=Le,r(m,t(D,{name:"tag-outline",size:24})),f.$$click=Ge,r(f,t(D,{name:"outline_renew",size:24})),r(g,t(v,{get when(){return!ye()},get fallback(){return(()=>{var h=he(),S=h.firstChild;return r(h,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),S),h})()},get children(){var h=ie();return h.$$click=Ne,r(h,t(D,{name:"printer",size:32})),h}}),null),l}}),null),r(C,t(v,{get when(){return d?.prov},get children(){var l=lt(),g=l.firstChild,m=g.firstChild,f=g.nextSibling;return r(m,t(v,{get when(){return d?.prov},get children(){return t(U,{get each(){return W(d?.prov)},children:(h,S)=>t(wt,{ism:h,get item(){return d?.prov?.[h]},updS:Pe})})}})),f.$$click=Me,r(f,t(D,{name:"Xclose",size:22})),R(()=>J(l,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),l}}),null),r(C,t(de,{fallback:l=>(()=>{var g=ge(),m=g.firstChild,f=m.nextSibling;return f.nextSibling,r(g,()=>l.toString(),f),g})(),get children(){return t(K,{get fallback(){return(()=>{var l=me();return l.firstChild,r(l,t(q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),l})()},get children(){return t(v,{get when(){return O()},get children(){return t(U,{get each(){return O()?.slice(0,X())},children:(l,g)=>t(ft,{item:l,refresh:()=>N(M())})})}})}})}}),null),R(l=>Te(C,` ${Y()?"":"width:94vw;"} margin: 0 auto;`,l)),o})()}const vt=e=>{const[s,n]=I(!1),[i,d]=I(0),a=()=>{let c=e?.keyG;e?.keyG==="total"&&(c=null),e?.updForm("status",c)},k=()=>{s()||!Y()&&e?.keyG!=="total"&&(d(te?.[e?.keyG]?.length*8.5+"px"),n(!0))},x=()=>{d("0px"),s()&&n(!1)};return t(v,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var c=$e();return c.firstChild,r(c,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),c})()},get children(){var c=ve(),j=c.firstChild,X=j.nextSibling;return c.$$mouseout=x,c.$$mousemove=k,c.$$click=a,r(c,t(v,{get when(){return s()},get children(){var E=it(),A=E.firstChild,L=A.firstChild,z=L.firstChild;return r(z,()=>te?.[e?.keyG]),R(H=>(H=i())!=null?A.style.setProperty("width",H):A.style.removeProperty("width")),E}}),j),r(j,t(D,{get name(){return _e?.[e?.keyG]},size:22})),r(c,t(v,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var E=fe(),A=E.firstChild,L=A.nextSibling;return L.nextSibling,r(E,()=>e?.total(),L),E}}),X),r(X,()=>e?.amount),R(()=>J(c,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),c}})}})},$t=e=>{const s=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t(v,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var n=$e();return n.firstChild,r(n,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=ve(),i=n.firstChild,d=i.nextSibling;return n.$$click=s,r(i,t(D,{get name(){return _e?.[e?.keyG]},size:22})),r(n,t(v,{get when(){return te?.[e?.keyG]},get children(){var a=at(),k=a.firstChild;return r(k,()=>te?.[e?.keyG]),a}}),d),r(n,t(v,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var a=fe(),k=a.firstChild,x=k.nextSibling;return x.nextSibling,r(a,()=>e?.total(),x),a}}),d),r(d,()=>e?.amount),R(()=>J(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},bt=async(e,s,n,i,d)=>{let a={params:{idairguide:s,":search5":s},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"]};e&&e.split(" ").map((x,c)=>{x&&(a.params[":search"+c]=x.trim())}),n&&(a.params[":status"]=n),i&&(a.params[":estate"]=i),d&&(a.params[":city"]=d),ee?.roles?.agency&&(a.params[":agency"]=ee?.roles?.agency+"");let k={...V(T())}[802001];if(a={...a,...k},s&&Object.keys(a.params).length>=2){const x=await re(a);return x?.data?.error?{}:x}return{}},pt=async e=>{let s={params:{idairguide:e}},n={...V(T())}[802004];s={...s,...n},ee?.roles?.agency&&(s.params[":agency"]=ee?.roles?.agency+"");const i=await re(s);return i?.error?{}:i},yt=async e=>{let s={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n={...V(T())}[802001];s={...s,...n};const i=await re(s);return i?.error?{}:i},kt=async e=>{e.map(s=>{let n={params:{id:s?.ssg_track_key,idairguide:s?.idairguide}},i={...V(T())}[802002];n={...n,...i}})},xt=async e=>{e.map(s=>{let n={params:{ssg_track_key:s?.ssg_track_key,idairguide:s?.idairguide}},i={...V(T())}[802005];n={...n,...i}})},Ft=async(e,s)=>{let n=[];e.map(i=>{let d={params:{ssg_track_key:i?.ssg_track_key,idairguide:i?.idairguide},data2update:{currentStatus:s}},a={...V(T())}[802004];d={...d,...a},n.push(d)}),We(n,Ct)},Ct=async e=>{const n=await re(e);if(n)return n},wt=e=>(()=>{var s=ut();return r(s,t(v,{get when(){return e?.item?.total>0},get children(){var n=ot(),i=n.firstChild,d=i.firstChild,a=d.firstChild,k=d.nextSibling;return i.$$click=()=>e?.updS(e?.ism),r(d,()=>e?.ism,a),r(k,()=>e?.item?.total),n}}),null),r(s,t(ht,{get children(){var n=ct();return r(n,t(v,{get when(){return e?.item?.cities},get children(){return t(U,{get each(){return W(e?.item?.cities)},children:(i,d)=>(()=>{var a=dt(),k=a.firstChild,x=k.nextSibling;return a.$$click=()=>e?.updS(e?.ism,i),r(k,i),r(x,()=>e?.item?.cities?.[i]),a})()})}})),n}}),null),s})();Re(["click","mousemove","mouseout"]);export{vt as StatusGroupItem,zt as default,xt as deleteManifest,Ct as fetchCSVInve,kt as loadManifest,Ft as updateManifest};
