const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-B6jiXU73.js","assets/index-DLm-qbVb.js","assets/index-DGSEMnLR.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/Item2Delivery-HMr7j-CX.js","assets/Util-R0w8Fgio.js","assets/index-Ci0zXM0r.js","assets/manifestList-CSHEgbpJ.js","assets/ContainerElasticView-LzOd6fDI.css","assets/SVG-DMQC_3si.js","assets/FlexSpace-D3ljtz2L.js"])))=>i.map(i=>d[i]);
import{c as Y,l as R,_ as L,a as O,I as le,u as oe,C as ce,h as de,o as K,m as U,i as t,d as r,f as G,e as J,t as f,S as E,q as X,F as ee,E as te,g as T,s as ue,n as re,j as ge}from"./index-DLm-qbVb.js";import{H as me,a as pe}from"./html5-qrcode-scanner-Cl8XE5pu.js";import"./DashManifest-DK7tFSod.js";import"./ManifestDetails-D-5xItuC.js";import{OpenModal as ve}from"./DialogHRM-D2-DGr3N.js";import{i as N,s as he,g as j}from"./globalSignal-DG1rgUS8.js";import{g as W,O as C,b as ie,u as _e,f as be}from"./Util-R0w8Fgio.js";import{stop2Deliver as g}from"./DeliveryView-Djaa7eBJ.js";import{g as fe,S as xe}from"./ShowQRPrintLabel-Bk6Cpfac.js";import"./index-Ci0zXM0r.js";import"./App.module-CbHnVtRQ.js";import"./manifestList-CSHEgbpJ.js";import"./debounces-_rTXI1rL.js";import"./fontkit.es-DEjOtITv.js";import"./ButonHrm-Xix89h7D.js";/* empty css                 */import"./SVG-DMQC_3si.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-CHWoTnax.js";import"./Toast-Dm0lmTlX.js";var Se=f("<h5 class=rpto>"),ye=f("<h5>"),$e=f('<div><div class=" flxWrp spaceAround centerBx"><h2>Completar Entrega</h2><div class="icon_status centerBx"></div></div><div style=padding:16px><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="icon_status centerBx"></div><div class=bagsNo></div></div><div><div class=vertseparator></div><div class=vertseparator></div><h4></h4></div><div class="icon_status centerBx"></div></div><p class=" textleft "style=padding:18px>;</p><div>'),se=f("<div> <!>."),ne=f("<div> "),we=f('<div class="_dsplFlx flxWrp spaceAround "style=" margin:0 auto;;padding:8px 9px;">'),De=f('<div class="icon_status centerBx">'),Ce=f("<div style=max-width:160px;margin:8px;><h5>"),H=f('<div class="_dsplFlx bottombx flxWrp spaceAround ">'),Ee=f('<div><div class=separator></div><div><div class=" centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=" centerBx"><div class="icon_status centerBx"></div><h4></h4></div><div class=" centerBx"><div class="icon_status centerBx"></div><h5>');const[st,nt]=Y(),ae=R(()=>L(()=>import("./LoadingColorSpinner-B6jiXU73.js"),__vite__mapDeps([0,1,2,3]))),ke=R(()=>L(()=>import("./Item2Delivery-HMr7j-CX.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),B=R(()=>L(()=>import("./SVG-DMQC_3si.js"),__vite__mapDeps([9,1,2,6]))),Be=R(()=>L(()=>import("./FlexSpace-D3ljtz2L.js"),__vite__mapDeps([10,1,2]))),[at,lt]=O(""),[Q,Ie]=Y();function ot(a){le(),O(0);const[x,c]=oe(),p=ce();de(()=>{S()}),K(()=>{}),U(async()=>{g?.stopD?.addressId||p(`/delivery-detail?dId=${x?.dId}`,{replace:!0})});function l(){return"geolocation"in navigator}function h(e){he({latitude:e?.coords?.latitude,longitude:e?.coords?.longitude})}function S(){l()?navigator.geolocation.getCurrentPosition(h):showMessage("Geolocation isn't supported by your browser")}const I=e=>{e.cidentity,{...g?.stopD}},k=e=>{ie("cameraScanDelivery")?.clear()},P=e=>{let i=W(),s={};s.id=i,s.closeEvent=k,s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=r(Me,{get item(){return g?.stopD},modalId:i,callback:I}),ve(s)},M=async()=>{let e=[],i=360,s=C(g?.stopD?.customers);if(s.length<i){const n=s.map(async(m,D)=>{let v=g?.stopD?.customers[m],u=C(v?.bagsNumb),_=v?.phoneNumber.split("|");const b=u.map(async(y,V)=>{let $=v?.bagsNumb?.[y]?.tracking,F="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const z=new RegExp(F);$.length===13&&z.test($)&&($=$.slice(3,12));let w=await fe($),A={state:g?.stopD?.estate,name:v?.name,phoneNumber:_[0],altPhoneNumber:_[1],bulto:v?.bagsNumb?.[y]?.bagnumber,tracking:$,qr:w};e.push(A)});await Promise.all(b)});await Promise.all(n);let d=await xe(e);window.open(d)}else OpenToast({text:`El limite de etiquetas a imprimir es de ${i}`,timeout:2500,id:W()})};return(()=>{var e=$e(),i=e.firstChild,s=i.firstChild,n=s.nextSibling,d=i.nextSibling,m=d.firstChild,D=m.firstChild,v=D.nextSibling,u=m.nextSibling,_=u.firstChild,b=_.nextSibling,y=b.nextSibling,V=u.nextSibling,$=d.nextSibling,F=$.firstChild,z=$.nextSibling;return n.$$click=P,t(n,r(B,{name:"qr_code",size:32,color:"#2b2b2b"})),t(D,r(B,{name:"open_package_file_outline",size:32})),t(v,()=>g?.stopD?.bagsNo),t(d,r(Be,{}),u),t(u,r(E,{get when(){return g?.stopD?.consigneeInfo?.ybreparto},get children(){return[(()=>{var o=Se();return t(o,()=>g?.stopD?.consigneeInfo?.ybreparto),o})(),"|"]}}),_),t(u,r(E,{get when(){return g?.stopD?.city},get children(){return[(()=>{var o=ye();return t(o,()=>g?.stopD?.city),o})(),"|"]}}),b),t(y,()=>g?.stopD?.estate),V.$$click=M,t(V,r(B,{name:"printer",size:32})),t($,()=>g?.stopD?.addressId,F),t(z,r(te,{fallback:o=>(()=>{var w=se(),A=w.firstChild,q=A.nextSibling;return q.nextSibling,t(w,()=>o.toString(),q),w})(),get children(){return r(X,{get fallback(){return(()=>{var o=ne();return o.firstChild,t(o,r(ae,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){return r(E,{get when(){return C(g?.stopD?.customers)?.length>0},get children(){return r(ee,{get each(){return C(g?.stopD?.customers)},children:(o,w)=>r(Ae,{get item(){return g?.stopD?.customers?.[o]}})})}})}})}})),G(o=>{var w=` ${N(),"centerBx"}  topbx `,A=` ${N(),"centerBx"} bottombx`,q=` ${N()?"":"width:94vw;"} margin: 0 auto; ; padding: 18px 29px;`;return w!==o.e&&T(d,o.e=w),A!==o.t&&T(u,o.t=A),o.a=ue(z,q,o.a),o},{e:void 0,t:void 0,a:void 0}),e})()}const Pe=a=>(()=>{var x=we();return t(x,r(te,{fallback:c=>(()=>{var p=se(),l=p.firstChild,h=l.nextSibling;return h.nextSibling,t(p,()=>c.toString(),h),p})(),get children(){return r(X,{get fallback(){return(()=>{var c=ne();return c.firstChild,t(c,r(ae,{stroke:"rgb(200 25 60 / 1)",size:62}),null),c})()},get children(){return r(E,{get when(){return C(a?.list)?.length>0},get children(){return r(ee,{get each(){return C(a?.list)},children:(c,p)=>(()=>{var l=Ce(),h=l.firstChild;return re(l,"data-id",`${c}`),t(l,r(E,{get when(){return Q?.[a?.cid]?.[c]==="ST200"},get children(){var S=De();return t(S,r(B,{name:"success",size:32,color:"var(--hrm-palette-tertiary50)"})),S}}),h),t(h,()=>a?.list?.[c]?.bagnumber),G(()=>T(l,`bag_number centerBx ${Q?.[a?.cid]?.[c]==="ST200"?"checked":""} `)),l})()})}})}})}})),x})(),Ae=a=>{const x=()=>{let c=C(a?.item?.bagsNumb)?.length,p=C(Q?.[a?.item?.cidentity])?.length;return c===p};return(()=>{var c=Ee(),p=c.firstChild,l=p.nextSibling,h=l.firstChild,S=h.firstChild,I=S.nextSibling,k=h.nextSibling,P=k.firstChild,M=P.nextSibling,e=k.nextSibling,i=e.firstChild,s=i.nextSibling;return t(S,r(B,{name:"account",size:24})),t(I,()=>a?.item?.name),t(l,r(Z,{}),k),t(P,r(B,{name:"cellphone",size:24})),t(M,()=>a?.item?.phoneNumber),t(l,r(Z,{}),e),t(i,r(B,{name:"credit_card",size:24})),t(s,()=>a?.item?.cidentity),t(c,r(E,{get when(){return!x()},get children(){var n=H();return t(n,r(Pe,{get list(){return a?.item?.bagsNumb},get cid(){return a?.item?.cidentity}})),n}}),null),t(c,r(E,{get when(){return x()},get children(){var n=H();return t(n,r(ke,{get list(){return a?.item?.bagsNumb},get cid(){return a?.item?.cidentity},get item(){return a?.item}})),n}}),null),G(n=>{var d=a?.item?.cidentity,m=` ${N()?"":"centerBx"} bottombx`;return d!==n.e&&re(c,"data-cid",n.e=d),m!==n.t&&T(l,n.t=m),n},{e:void 0,t:void 0}),c})()},Z=()=>r(E,{get when(){return!N()},children:"|"});J(["click"]);var Ne=f('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:350px>');const Re=R(()=>L(()=>import("./SVG-DMQC_3si.js"),__vite__mapDeps([9,1,2,6]))),Le=R(()=>L(()=>import("./FlexSpace-D3ljtz2L.js"),__vite__mapDeps([10,1,2])));function Me(a){const[x,c]=O(""),[p,l]=O(""),[h,S]=O();K(()=>{ie("cameraScanDelivery")?.clear()}),U(()=>{setTimeout(()=>{M()},90)});const I=(e,i)=>{e!==h()&&(S(e),setTimeout(()=>{S("")},3e3),k(e))},k=e=>{e||(e=x()),e=e.split("'").join("-"),new Date().getTime(),j?.latitude,j?.longitude,a?.status,ge?.profile?.userId;let i=e.split("/");e.split("-").length>3&&(i=e.split("-").join);let s=i?.[0],n="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const d=new RegExp(n);let m=s.length===13&&d.test(s),D="^[0-9]{4}-[1-9]{4}";const v=new RegExp(D);let u=s.length===9&&v.test(s),_=i.length>4&&s.length===12,b={idairguide:i?.[0],":search0":i?.[1],":search1":i?.[3]};m&&(b={idairguide:"175-2383"+s.slice(3,7),":search0":s}),u&&(b={idairguide:"175-2383"+s.slice(0,4),":search0":s}),m||_||u?P(b):(l("alert"),setTimeout(()=>{l("")},1800))},P=async e=>{let i=await Oe(e),s=Object.keys(i)?.[0];if(i[s]?.cidentity){let n=i[s]?.cidentity,d=i[s]?.ssg_track_key,m={...a?.item};m?.customers?.[n]?.bagsNumb?.[d]?(l("success"),Ie(n,{[d]:"ST200"})):l("alert"),setTimeout(()=>{l("")},1800),m?.customers?.[n]?.bagsNumb?.[d],a?.callback(i[s])}else l("alert"),setTimeout(()=>{l("")},1800)},M=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[me.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},i=new pe("qr-reader_SSDM",e);i.render(I),_e("cameraScanDelivery",i)};return(()=>{var e=Ne(),i=e.firstChild,s=i.firstChild,n=s.firstChild,d=n.nextSibling,m=i.nextSibling,D=m.firstChild,v=D.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),n.$$click=I,t(s,r(Le,{}),d),d.$$click=()=>{},t(d,r(Re,{name:"keyboard",size:32,color:"#2b2b2b"})),G(u=>{var _=N()?"92vw":"420px",b=`scanOverlay ${p()} `,y=p()?"block":"none";return _!==u.e&&((u.e=_)!=null?e.style.setProperty("width",_):e.style.removeProperty("width")),b!==u.t&&T(v,u.t=b),y!==u.a&&((u.a=y)!=null?v.style.setProperty("display",y):v.style.removeProperty("display")),u},{e:void 0,t:void 0,a:void 0}),e})()}const Oe=async a=>await be({params:a,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"});J(["click"]);export{Z as SepOnMobile,ot as default,st as scannedQRs,nt as setScannedQRs,lt as setStatus,Ie as setStatusD,at as status,Q as statusD};
