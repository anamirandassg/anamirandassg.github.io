const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-B5V9CZ84.js","assets/index-DZOCdzcs.js","assets/index-BRlA1Q7g.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-DElMVl3Z.js","assets/SVG-BvwtTt6R.js","assets/Util-C5OVcyIb.js","assets/ButonHrm-BSeWNUGQ.css","assets/LoadingColorSpinner-Ya_zQgsP.js","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-BLqkOByw.js","assets/AddManifest-Bfd4QL5d.js","assets/DialogHRM-CxHxaKbc.js","assets/DialogHRM-V9_lZntj.css","assets/debounces-BE1_y7Lz.js","assets/InputHr-Dp9oOkeX.js","assets/InputHr-BXFw4d2l.css","assets/ItemOnManifest-DflSb5QA.js","assets/components-CVActcdT.js"])))=>i.map(i=>d[i]);
import{l as y,_ as h,c as ee,a as B,d as ce,i as c,e as o,$ as S,S as W,F as de,f as ue,j as se,x as ye,g as he,t as x,Y as pe,o as ve,b as xe,p as Se,z as we,E as $e,m as ke,J as Pe,h as Ce}from"./index-DZOCdzcs.js";import{s as Oe}from"./App.module-CbHnVtRQ.js";import{O as w,g as q,f as U,I as fe,X as H,T,W as te,u as P,e as R,m as M,G as ne,a as D,Y as re,Z as ie,$ as Ie,U as Le,V as Ae,k as Ee,H as Me}from"./Util-C5OVcyIb.js";import{OpenModal as De}from"./DialogHRM-CxHxaKbc.js";import{a as Be,b as Te}from"./ScanningServices-CsOK-75z.js";import{OpenToast as z}from"./Toast-DOLr4M6l.js";var qe=x('<div class="_dsplFlx flxWrp spaceAround ">'),je=x('<div class="centerBx bottombx spaceAround flxWrp"style=margin-top:20px><div style=padding:6px></div><div style=padding:6px></div><div style=padding:6px>'),Ve=x('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Subir Pendientes </h5></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx grid2Col"></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>'),Fe=x('<div class="centerBx bottombx "><h5> subiendo al servidor <!> / <!> '),Qe=x('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class=""></h5>|<h4 style=font-size:13px>'),Re=x('<div class="centerBx bottombx "><h5> descargando guias... ');const ze=y(()=>h(()=>import("./CheckBoxSlide-B5V9CZ84.js"),__vite__mapDeps([0,1,2,3]))),G=y(()=>h(()=>import("./ButonHrm-DElMVl3Z.js"),__vite__mapDeps([4,1,2,5,6,7]))),le=y(()=>h(()=>import("./LoadingColorSpinner-Ya_zQgsP.js"),__vite__mapDeps([8,1,2,9]))),[oe,Ge]=ee({});let ge=[2503,2504,2505,2506,2507,2508];function We(t){const[e,a]=ee({qty:{}}),[i,d]=ee({list:[]}),[f,l]=B(!1),[u,g]=B(0);B("");const _=async s=>{if(g(S()),S()>30){let n=4,v=Array.from(Array(n).keys()),A=Math.ceil(S()/n);const X=v.map(async F=>{let r=A*F,p=A*(F+1)-1;p>S()&&(p=S()),await M(s.slice(r,p),I)});await Promise.all(X)}else await M(s,I);g(0)},I=async s=>{let n=R("dbScannedStore"),v=await He(n?.[s]);return delete n[s],P("dbScannedStore",n),pe(w(n)?.length),Te(),v},C=async()=>{_(Object.keys(R("dbScannedStore")))};let O={};const Y=async s=>{let n=await Ue("guia",s);O=Object.assign({},O,n)},j=async()=>{let s=[];if(w(e).map(n=>{e[n]&&s.push(n)}),l(!0),s.length>0){await M(s,Y);let n=await T(H,te),v=Object.assign({},n,O);await ne(H,te,v),await N(),z({text:"El modo offline esta listo para escanear",timeout:2500,id:D()})}else z({text:"Debe selecionar una guia",timeout:2500,id:D()});l(!1)};let L={};const Z=async s=>{let n=await Ke(s);L=Object.assign({},L,n)},b=async()=>{let s=[];if(w(e).map(n=>{e[n]&&s.push(n)}),l(!0),s.length>0){await M(s,Z);let n=await T(ie,re),v=Object.assign({},n,L);await ne(ie,re,v),await N(),z({text:"se descargo con exito la lista de escaneos",timeout:2500,id:D()})}else z({text:"Debe selecionar una guia",timeout:2500,id:D()});l(!1)},$=async()=>{V()},J=()=>{Ie(),setTimeout(()=>{$()},600)},V=async()=>{await N();let s=[];ge.map(n=>{s.push({guia:n,qty:R("total_guia")?.[n]?R("total_guia")?.[n]:0})}),d("list",s)};return ce(()=>{ae(),$()}),(()=>{var s=Ve(),n=s.firstChild,v=n.firstChild,A=v.nextSibling,X=A.nextSibling,F=n.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#ffffff"),s.style.setProperty("border-radius","13"),c(n,o(W,{get when(){return S()>0},get children(){return o(W,{get when(){return!u()},get fallback(){return(()=>{var r=Fe(),p=r.firstChild,m=p.firstChild,k=m.nextSibling,E=k.nextSibling,Q=E.nextSibling;return Q.nextSibling,c(r,o(le,{stroke:"rgb(200 25 60 / 1)",size:32}),p),c(p,()=>u()-S(),k),c(p,u,Q),r})()},get children(){var r=qe();return c(r,o(G,{icon:"arrow_up_large",color:"#c8193c",get label(){return`Subir pendientes ${S()}`},handleClick:C})),r}})}}),A),c(X,o(de,{get each(){return w(oe?.qty)},children:(r,p)=>(()=>{var m=Qe(),k=m.firstChild,E=k.firstChild,Q=E.nextSibling,me=Q.nextSibling;return c(k,o(ze,{get initValue(){return e?.[r]},updChange:()=>a(r,!e?.[r]),color:"var(--background-red-ssg)"}),E),c(E,r||""),c(me,()=>oe?.qty?.[r]),m})()})),c(s,o(W,{get when(){return!f()},get fallback(){return(()=>{var r=Re();return c(r,o(le,{stroke:"rgb(200 25 60 / 1)",size:32}),null),r})()},get children(){var r=je(),p=r.firstChild,m=p.nextSibling,k=m.nextSibling;return c(p,o(G,{icon:"cancel",color:"#4a4a4a",label:"Limpiar",handleClick:J})),c(m,o(G,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar Guias",handleClick:j})),c(k,o(G,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar locaciones",handleClick:b})),r}}),F),ue(r=>{var p=se()?"86vw":"420px",m=se()?"15px 5px":"15px 25px";return p!==r.e&&((r.e=p)!=null?s.style.setProperty("width",p):s.style.removeProperty("width")),m!==r.t&&((r.t=m)!=null?s.style.setProperty("padding",m):s.style.removeProperty("padding")),r},{e:void 0,t:void 0}),s})()}const Ne=t=>{let e=t,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const i=new RegExp(a);return e.length===13&&i.test(e)&&(e=e.slice(3,12)),e},He=async t=>{let e={};t?.params&&(e.params=t?.params),t?.data2update&&(e.data2update=t?.data2update),t?.form&&(e.form=t?.form);let a=q(t?.actionKey);return e={...e,...a},await U(e)},Ke=async t=>{let e={params:{airguide:t,":search0":"ssg"}},a=q(815002);e={...e,...a};const i=await U(e);return i?.data?.error?{}:i},Ue=async(t,e)=>{let a={params:{idairguide:e},fldswQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","guia","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","isLMH","isPaid","hbls","noteTag","nameshipper","billedBy"]};t.split(" ").map((f,l)=>{f&&(a.params[":search"+l]=f.trim())}),a.params[":guia"]=e+"";let i=q(802001);a={...a,...i};const d=await U(a);return d?.data?.error?{}:d},Ye=async(t,e)=>{let a={params:{":search0":" "},fldsjQry:["createDate","linkedUser","status","name","city","province","workgroup","ssg_manifest_key","isPending"]};ye()||(a.params.workgroup=he?.profile?.workgroup?.id+"");let i=q(703001);a={...a,...i};const d=await U(a);if(d?.error)return{};{let f=[];return w(d).map(l=>{let u=d[l];u._id=u?.ssg_manifest_key,fe.put(u,function(_,I){_||console.log("Successfully posted on manifest list")}),f.push(u)}),f}},Ze=()=>new Promise((t,e)=>{H.allDocs({include_docs:!0,descending:!0},function(a,i){t(i.rows)})}),Je=async()=>{let t=await T(Ae,Le);P("dbScannedStore",t),pe(w(t)?.length)},ae=()=>{Be(),N(),Je()},N=async()=>{let t=await T(H,te),e={},a={},i={},d={};return ge.map(f=>{d[f]=0}),t&&w(t)?.map(f=>{let l=t?.[f];l?.hbls?.map(u=>{a[u?.hbl]||(a[u?.hbl]=l?.ssg_track_key,i[u?.hbl]=l)}),e[l?.ssg_track_key]||(e[l?.ssg_track_key]=l),l?.guia&&(d[l?.guia]?d[l?.guia]+=1:d[l?.guia]=1)}),Ge("qty",d),P("total_guia",d),P("manifestByKeys",e),P("manifestByHbls",a),P("hblsObjDBInd",i),e},yt=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets2:Ye,default:We,initializePouchD:ae,loadManifestOffline:Ze,parseTrcking:Ne},Symbol.toStringTag,{value:"Module"}));var Xe=x('<div><div class="_dsplFlx flxWrp spaceAround centerBx"style="padding:16px 4vw"><h2>Manifiestos</h2><div class="icon_status centerBx"></div><div class="centerBx bottombx "><h5 class="">Entregados</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:16px><div style=padding:4px></div></div><div class=" flxWrp spaceAround "style="padding:16px 5vw">'),et=x("<div> <!>."),tt=x("<div> ");const at=y(()=>h(()=>import("./FlexSpace-BLqkOByw.js"),__vite__mapDeps([10,1,2]))),st=y(()=>h(()=>import("./SVG-BvwtTt6R.js"),__vite__mapDeps([5,1,2,6]))),nt=y(()=>h(()=>import("./AddManifest-Bfd4QL5d.js"),__vite__mapDeps([11,1,2,6,12,13,14]))),rt=y(()=>h(()=>import("./LoadingColorSpinner-Ya_zQgsP.js"),__vite__mapDeps([8,1,2,9]))),it=y(()=>h(()=>import("./InputHr-Dp9oOkeX.js"),__vite__mapDeps([15,1,2,16]))),lt=y(()=>h(()=>import("./CheckBoxSlide-B5V9CZ84.js"),__vite__mapDeps([0,1,2,3]))),ot=y(()=>h(()=>import("./ItemOnManifest-DflSb5QA.js"),__vite__mapDeps([17,1,2,6,14,12,13,18])));function ct(){const[t,e]=B(0),[a,i]=B("");ve(()=>{}),xe(()=>{}),ce(async()=>{ae(),K()});const d=()=>{let g=D(),_={};_.id=g,_.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},_.content=o(nt,{modalId:g,refetch:u}),De(_)},f=g=>{e(g),u()},[l,{refetch:u}]=Se(a,async g=>await K());return(()=>{var g=Xe(),_=g.firstChild,I=_.firstChild,C=I.nextSibling,O=C.nextSibling,Y=O.firstChild,j=_.nextSibling,L=j.firstChild,Z=j.nextSibling;return c(_,o(at,{}),C),C.$$click=d,c(C,o(st,{name:"plus",size:22})),c(O,o(lt,{get initValue(){return t()},updChange:f,color:"var(--background-red-ssg)"}),Y),c(L,o(it,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return a()},placeholder:"search...",colors:"#2b2b2b",handleClick:b=>i(b)})),c(Z,o($e,{fallback:b=>(()=>{var $=et(),J=$.firstChild,V=J.nextSibling;return V.nextSibling,c($,()=>b.toString(),V),$})(),get children(){return o(we,{get fallback(){return(()=>{var b=tt();return b.firstChild,c(b,o(rt,{stroke:"rgb(200 25 60 / 1)",size:62}),null),b})()},get children(){return o(W,{get when(){return l()},get children(){return o(de,{get each(){return l()},children:(b,$)=>o(ot,{item:b,refetch:u})})}})}})}})),ue(()=>ke(g,Oe.App)),g})()}const dt=async(t,e)=>{Pe()&&K()},K=async()=>{let t=await be(),e=[];return w(t).map(a=>{let i=t?.[a];e.push(i)}),e},ut=async t=>{let e=[];t.map(a=>{let i={params:{id:a?.ssg_track_key,idairguide:"all"}},d=q(802002);i={...i,...d},e.push(i)}),M(e,_e)},_e=async t=>{const a=await Ee(t);if(a)return a},be=async()=>{let t=await T(fe,Me);return P("manifestList",t),t};Ce(["click"]);const ht=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets:dt,default:ct,fetchCSVInve:_e,handleListManifest:be,loadManifest2:ut,loadManifestOffline:K},Symbol.toStringTag,{value:"Module"}));export{ht as D,yt as S,be as h,ae as i,K as l};
