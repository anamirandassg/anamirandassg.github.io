import{P as v,r as d}from"./PDFButton-B_0lS8EG.js";import{f as A}from"./fontkit.es-BqrvdTa9.js";import{i as N,t as n}from"./InitPrintServices-DzdLVHm-.js";import{OpenToast as R}from"./Toast-CQevCoyA.js";import{g as G,a as I,O as L}from"./Util-C77m685E.js";const U=s=>{let c=window?.DATAMatrix;return c?c({msg:s,dim:256,rct:0,pad:2,pal:["#000000","#ffffff"],vrb:1}):null},D=s=>{let b=s.cloneNode(!0).outerHTML,o=new Blob([b],{type:"image/svg+xml;charset=utf-8"});return(window.URL||window.webkitURL||window).createObjectURL(o)},F=async(s,c)=>{const b=document.createElement("img");document.body.appendChild(b),b.onload=function(){const o=document.createElement("canvas");o.width=b.clientWidth,o.height=b.clientHeight,o.getContext("2d").drawImage(b,0,0);const h=o.toDataURL("image/png");document.body.removeChild(b),c(h)},b.src=s},Y=s=>new Promise(async(c,b)=>{let o=U(s),e=o&&D(o);e&&F(e,async h=>{var f=await M(h,"image/png");let t=URL.createObjectURL(f);c(t)})}),M=async(s,c)=>{let o=await(await fetch(s)).blob();return o=o.slice(0,o.size,c),o},Z=s=>{window.navigator.clipboard.writeText(s),R({text:s+"  copiado",timeout:1500,id:G()})};function O(s){let c=new Blob([s],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(c)}const _=(s,c,b)=>{const o=c.widthOfTextAtSize(s,40),e=c.widthOfTextAtSize(s,10);return Math.floor(b/((o-e)/30))},q=async(s,c,b)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o);let h=265;const f=s.map(async(t,m)=>{const a=o.addPage([426,284]),{height:i}=a.getSize();let r=i-34;const z=await fetch(t?.qr).then(w=>w.arrayBuffer()),g=await o.embedPng(z);a&&g&&a.drawImage(g,{x:10,y:i-220,width:150,height:150});let l=_(n(t?.state),e.roboto_bold,h);l>42&&(l=42,r=r-6);let y=n(t?.bulto).trim();const S=e.Lexend_700?.widthOfTextAtSize(n(y),40);if(t?.isSSG){t?.state&&a.drawText(n(t?.state),{x:5,y:r-6,size:l,font:e.roboto_bold,color:d(0,0,0)}),a.drawText(n(y),{x:18,y:i-270,size:40,font:e.GSansBold,color:d(0,0,0)});const w=await fetch(I("SSG-black.png")).then(T=>T.arrayBuffer()),p=await o.embedPng(w);a&&p&&a.drawImage(p,{x:210,y:i-232,width:190,height:190})}else{let w=_(n(t?.name),e.GSansItalic,h);var u=e.GSansItalic?.widthOfTextAtSize(n(t?.name),w);if(u>h&&(w=w-1,u=e.GSansItalic?.widthOfTextAtSize(n(t?.name),w)),w=300/u*21,w=w>25?25:w*1,a.drawText(n(t?.name),{x:10,y:r-0,size:w,font:e.GSansItalic,color:d(0,0,0)}),t?.state){const C=e.roboto_bold?.widthOfTextAtSize(n(t?.state),l);a.drawText(n(t?.state),{x:420-C,y:r-46,size:l,font:e.roboto_bold,color:d(0,0,0)}),r=r-w}let p=29;const T=e.Lexend_700?.widthOfTextAtSize(n(t?.phoneNumber),p);a.drawText(n(t?.phoneNumber),{x:400-T,y:r-70,size:p,font:e.Lexend_700,color:d(0,0,0)});const B=e.Lexend_700?.widthOfTextAtSize(n(t?.altPhoneNumber),p);a.drawText(n(t?.altPhoneNumber),{x:400-B,y:r-105,size:p,font:e.Lexend_700,color:d(0,0,0)}),a.drawText(n(y),{x:418-S,y:r-205,size:40,font:e.GSansBold,color:d(0,0,0)})}});await Promise.all(f);{const t=await o.save();return O(t)}},Q=async(s,c,b)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o),h=s.map(async(f,t)=>{let m=2.795;const a=o.addPage([45*m,24*m]),{height:i}=a.getSize(),r=await fetch(f?.mtrx).then(x=>x.arrayBuffer()),z=await o.embedPng(r),g=await fetch(f?.mtrx2).then(x=>x.arrayBuffer()),l=await o.embedPng(g);a&&z&&a.drawImage(z,{x:0,y:i-32,width:30,height:30}),a.drawText(n(f?.lbl),{x:33,y:i-20,size:13,font:e.Lexend_700,color:d(0,0,0)}),a&&l&&a.drawImage(l,{x:0,y:i-66,width:30,height:30}),a.drawText(n(f?.lbl2),{x:33,y:i-56,size:13,font:e.Lexend_700,color:d(0,0,0)})});await Promise.all(h);{const f=await o.save();return O(f)}},K=async(s,c,b)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o);let h=265;const f=s.map(async(t,m)=>{const a=o.addPage([426,284]),{height:i}=a.getSize();let r=i-34,z=_(n(t?.state),e.roboto_bold,h);z>42&&(z=42,r=r-6);let l=n(t?.bulto).trim();a.drawText("$"+(n(t?.amount)*1).toFixed(2),{x:10,y:i-260,size:50,font:e.Lexend_700,color:d(0,0,0)});let x=_(n(t?.name),e.GSansItalic,h);var y=e.GSansItalic?.widthOfTextAtSize(n(t?.name),x);y>h&&(x=x-1,y=e.GSansItalic?.widthOfTextAtSize(n(t?.name),x)),x=300/y*21,x=x>25?25:x,a.drawText(n(t?.name),{x:10,y:r-0,size:x,font:e.GSansItalic,color:d(0,0,0)});let S=29;if(t?.state){let p="CID: "+t?.state;const T=e.roboto_bold?.widthOfTextAtSize(n(p),S);a.drawText(n(p),{x:410-T,y:r-46,size:S,font:e.roboto_bold,color:d(0,0,0)}),r=r-S}let u=29;const w=e.Lexend_700?.widthOfTextAtSize(n(t?.phoneNumber),u);a.drawText(n(t?.phoneNumber),{x:400-w,y:r-60,size:u,font:e.Lexend_700,color:d(0,0,0)}),a.drawText(n(l),{x:10,y:r-95,size:10,font:e.GSansBold,color:d(0,0,0)}),a.drawText(n(t?.rpto),{x:10,y:r-115,size:12,font:e.Lexend_700,color:d(0,0,0)}),a.drawText(n(t?.city),{x:10,y:r-135,size:15,font:e.roboto_bold,color:d(0,0,0)})});await Promise.all(f);{const t=await o.save();return O(t)}},P=(s,c)=>c?" "+s+" "+c:"",E=s=>`${P("Calle",s?.ybstreet)}${P("#",s?.ybstreetNo)}${P("E/",s?.ybbetwen1)}${P("y",s?.ybbetwen2)}`,J=async(s,c,b)=>{const o=await v.create();o.registerFontkit(A);const e=await N(o);let h=50,f=0,t={0:[]};s.map(m=>{let a=12,i=c[m];a+=L(i?.customers).length*13,L(i?.customers).map(r=>{a+=L(i?.customers?.[r]?.bagsNumb).length*13}),a+=13,h+a>890&&(f+=1,t[f]||(h=50,t[f]=[])),h+=a,i.height=a,t[f].push(i)}),console.log(t),L(t).map((m,a)=>{const i=o.addPage(),{height:r,width:z}=i.getSize();let g=r-34;t[m].map(async(l,x)=>{g-l.height,x%2&&i?.drawRectangle({x:5,y:g-l.height+15,width:585,height:l.height,color:d(.895,.895,.895)});let y=E(l?.address)+", Rpto "+n(l?.rpto)+" |  "+n(l?.city)+"  |  "+n(l?.estate);i.drawText(""+y.toUpperCase(),{x:13,y:g,size:7,font:e.roboto_bold,color:d(0,0,0)}),g=g-12,L(l?.customers).map(S=>{let u=l?.customers[S],w=""+S+"  |  "+u?.name+" |  "+u?.phoneNumber;i.drawText(""+w,{x:23,y:g,size:7.5,font:e.Lexend_700,color:d(0,0,0)}),g=g-11,L(u?.bagsNumb).map(p=>{let T="  "+u?.bagsNumb?.[p]?.bagnumber+";    HBLS:  ";u?.bagsNumb?.[p]?.hbls.map(C=>{T+=C?.hbl+"; "});let B=" Envio:  "+T;i.drawText(""+B,{x:29,y:g,size:8,font:e.roboto_bold,color:d(0,0,0)}),g=g-13})}),g=g-13})});{const m=await o.save();return O(m)}};export{K as C,J as P,q as S,Z as c,Y as g,Q as l};
