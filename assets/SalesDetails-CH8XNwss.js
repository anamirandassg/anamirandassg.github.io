const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BlVPLNVy.js","assets/index-gtya5OF2.js","assets/index-BRlA1Q7g.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-BtG1Ch1H.js","assets/debounces-GSFnaNeI.js","assets/SVG-CiGTjPFy.js","assets/Util-B-FWhTQW.js","assets/DropDwnSearch-DMkLkRPc.css","assets/CheckBoxSlide-DSi56Y7b.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/FlexSpace-C0Y3fapP.js","assets/ButonHrm-DD9aXJAa.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-C_nFc_SK.js","assets/DialogHRM-Cjqv5pW3.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts--Esw5tXD.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-Coa28Tyc.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as D,_ as N,c as j,r as Se,a as ee,o as Ie,b as Oe,d as G,i,e as a,S as w,F as te,f as R,g as q,k as he,j as ce,m as ue,p as we,h as Ae,t as S}from"./index-gtya5OF2.js";import{h as Ee,e as oe,g as L,f as F,m as Pe,b as se,a as V,X as ke,O as K,F as ge,U as qe}from"./Util-B-FWhTQW.js";import{u as Be}from"./debounces-GSFnaNeI.js";import{OpenModal as pe}from"./DialogHRM-Cjqv5pW3.js";import{g as _e,a as $e}from"./handelImagesServices-PkPhrMOx.js";import{LookupInventory as ve}from"./DashInventoryMov-34SBFRfl.js";import{LookupProducts as le}from"./DashProducts--Esw5tXD.js";import{a as je}from"./print_invoice_service-BuAuVYE8.js";import{OpenToast as ie}from"./Toast-ITC-9cFt.js";import"./browser-image-compression-BVJ4p9S0.js";import"./AddInventory-DGI2VgNV.js";import"./FlexSpace-C0Y3fapP.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-Dye5NabB.js";import"./InitPrintServices-ByvuCY7T.js";import"./qrcode-DHy8FFhS.js";var De=S('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),Ne=S('<div style=margin:15px class=" spaceAround centerBx">'),Te=S('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise></select><div class="centerBx bottombx "><h5 class="">Solo Arancel</h5></div></section><div style=margin:15px class=" spaceAround centerBx">'),Le=S('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),Ue=S("<option> "),Re=S('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Estimated tax</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Estimated total</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class=JM2zDb>'),Ce=S("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Fe=S('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Ve=S("<span class=arancelSep> | "),Me=S('<span class="arancel pricePq"> $'),Ye=S('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Qe=S("<div style=padding:4px>"),Ge=S('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx spaceAround "><h5></h5><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div><p class=" textleft "></p></div><div style=padding:4px>'),Je=S('<section class="h6rxkc ">'),He=S('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),ze=S('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),We=S('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),Ke=S('<div class="centerBx flxWrp">'),Xe=S('<div><div class=QCNFEe><p class=jhB0af>Enviar a Solve D Cargo</p></div><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Esta seguro de querer enviar a Solve D Cargo tenga en cuenta que puede duplicar la informacion</span></p><div class=separator></div><div style=margin:15px class=" spaceAround centerBx">');D(()=>N(()=>import("./LoadingColorSpinner-BlVPLNVy.js"),__vite__mapDeps([0,1,2,3])));const fe=D(()=>N(()=>import("./DropDwnSearch-BtG1Ch1H.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),Ze=D(()=>N(()=>import("./CheckBoxSlide-DSi56Y7b.js"),__vite__mapDeps([9,1,2,10]))),X=D(()=>N(()=>import("./FlexSpace-C0Y3fapP.js"),__vite__mapDeps([11,1,2]))),U=D(()=>N(()=>import("./ButonHrm-DD9aXJAa.js"),__vite__mapDeps([12,1,2,6,7,13])));D(()=>N(()=>import("./UpdInventory-C_nFc_SK.js"),__vite__mapDeps([14,1,2,7,15,16,5,17,18,19,11])));const Z=D(()=>N(()=>import("./InputHr-Coa28Tyc.js"),__vite__mapDeps([20,1,2,21]))),re=D(()=>N(()=>import("./SVG-CiGTjPFy.js"),__vite__mapDeps([6,1,2,7]))),[O,B]=j({manifestObj:{}});let et=864e5;function Ot(){const[e,s]=Se();j(),j(),j();const[c,d]=ee("");Be(d,400),Ie(()=>{}),Oe(()=>{});const h=async()=>{if(e?.mId){let u={":search0":e?.mId,businessId:q?.profile?.businessYId},r=await ye(u);B("manifestObj",r[e?.mId])}};return G(async()=>{B("manifestObj",void 0),h()}),(()=>{var u=De(),r=u.firstChild,n=r.firstChild,$=n.firstChild;return i(u,a(w,{get when(){return O?.manifestObj?.packagesOrder},get children(){return a(lt,{})}}),r),i($,a(w,{get when(){return O?.manifestObj?.products},get children(){return a(te,{get each(){return O?.manifestObj?.products},children:(_,b)=>a(rt,{itm:_})})}})),i(r,a(w,{get when(){return O?.manifestObj?.packagesOrder&&!O?.manifestObj?.isCompleted},get children(){return a(ct,{})}}),null),i(r,a(it,{get item(){return O?.manifestObj},get list(){return O?.manifestObj}}),null),u})()}let tt=[{label:"escojer",id:""},{label:"MISCELANEAS",id:"MISCELANEAS"},{label:"UTILES DEL HOGAR",id:"UTILES DEL HOGAR"},{label:"VENTILADOR",id:"VENTILADOR"},{label:"TV",id:"TV"},{label:"CELULAR",id:"CELULAR"},{label:"TABLETS",id:"TABLETS"},{label:"LAPTOPS",id:"LAPTOPS"},{label:"PLAYSTATION",id:"PLAYSTATION"},{label:"BICICLETAS",id:"BICICLETAS"},{label:"GENERADOR",id:"GENERADOR"},{label:"SERVICIO DE RAPEADO",id:"SERVICIO DE RAPEADO"},{label:"TRANSPORTACION",id:"TRANSPORTACION"},{label:"OTROS SERVICIO",id:"OTROS SERVICIO"}];const lt=e=>{const s={type:"",qty:0,arancel:0,price:0},[c,d]=j(s),h=(r,n)=>{d({[r]:n})},u=r=>{let n={...c};n.key=qe();let $=O?.manifestObj?.reservas||[],_=se($);_.push(n),B("manifestObj","reservas",_),d("type",""),d("qty",""),d("price",""),d("arancel","")};return(()=>{var r=Le(),n=r.firstChild,$=n.firstChild,_=n.nextSibling,b=_.firstChild,g=b.firstChild;return i($,a(w,{get when(){return O?.manifestObj?.reservas},get children(){return a(te,{get each(){return O?.manifestObj?.reservas},children:(t,l)=>a(st,{itm:t})})}})),i(r,a(w,{get when(){return!O?.manifestObj?.isCompleted},get children(){var t=Te(),l=t.firstChild,o=l.firstChild,m=o.firstChild,p=m.nextSibling,y=p.firstChild,v=y.nextSibling,C=v.nextSibling,x=C.firstChild,A=p.nextSibling;return v.addEventListener("change",f=>{h("type",f?.target?.value)}),i(v,a(te,{each:tt,children:(f,I)=>(()=>{var P=Ue();return P.firstChild,i(P,()=>f.label,null),R(()=>P.selected=f.id===c?.type),R(()=>P.value=f.id),P})()})),i(C,a(Ze,{get initValue(){return c?.onlyTariff},updChange:f=>h("onlyTariff",f),color:"var(--background-red-ssg)"}),x),i(A,a(w,{get when(){return!c?.onlyTariff&&c?.type},get children(){return a(Z,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",handleClick:f=>h("qty",f)})}}),null),i(A,a(w,{get when(){return c?.qty&&c?.type},get children(){return a(Z,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.price||""},label:"precio",colors:"#2b2b2b",handleClick:f=>h("price",f)})}}),null),i(A,a(w,{get when(){return c?.type},get children(){return a(Z,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return c?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:f=>h("arancel",f)})}}),null),i(A,a(w,{get when(){return(c?.price&&c?.qty||c?.onlyTariff&&c?.arancel)&&c?.type},get children(){var f=Ne();return i(f,a(U,{color:"#646cff",label:"Agregar",handleClick:u})),f}}),null),t}}),_),i(g,a(nt,{get item(){return O?.manifestObj?.shipper_consignee}})),r})()},it=e=>{const s=u=>{let r=0;return e?.item?.products?.map(n=>{r+=Q(n?.qty)*Q(n?.salePrice)*-1}),e?.item?.reservas?.map(n=>{r+=Q(n?.qty)*Q(n?.price)+Q(n?.arancel)}),r},c=async u=>{let r={...e?.item};r.amount=s();let n=await je(r);window.open(n)},d=async()=>{let u={...e?.item},r={params:{businessId:q?.profile?.businessYId,id:u.ssg_sorder_key},form:{isCompleted:!1}},n=L(431007);r={...r,...n}},h=async u=>{let r=se(e?.item);r.isCompleted=!0,r.dayNum=r?.createDate/et;let n={params:{businessId:q?.profile?.businessYId,id:r.ssg_sorder_key},form:r},$=L(431007);n={...n,...$},await F(n);let _={params:{businessId:q?.profile?.businessYId},form:r},b=L(139003);_={..._,...b},await F(_);let g={":search0":r.ssg_sorder_key,businessId:q?.profile?.businessYId},t=await ye(g);B("manifestObj",t[r.ssg_sorder_key])};return(()=>{var u=Re(),r=u.firstChild,n=r.firstChild,$=n.firstChild,_=$.firstChild,b=_.nextSibling,g=b.firstChild,t=g.firstChild,l=t.nextSibling;l.firstChild;var o=g.nextSibling,m=o.firstChild,p=m.nextSibling;p.firstChild;var y=o.nextSibling,v=y.firstChild,C=v.nextSibling;C.firstChild;var x=$.nextSibling,A=x.firstChild,f=A.firstChild,I=f.firstChild,P=I.nextSibling;P.firstChild;var M=f.nextSibling,ne=M.firstChild,J=ne.nextSibling,H=M.nextSibling,ae=H.firstChild,T=ae.nextSibling;T.firstChild;var Y=x.nextSibling;return i(l,()=>s().toFixed(2),null),i(p,()=>(s()*.06).toFixed(2),null),i(C,()=>(s()*.06+s()).toFixed(2),null),i(P,()=>Ee(e?.item?.createDate),null),i(J,()=>e?.item?.invoice),i(T,()=>oe("storeGroupBy")?.[e?.item?.store]?.label,null),i(Y,a(w,{get when(){return e?.item?.isCompleted},get children(){return a(U,{color:"#646cff",label:"Imprimir",handleClick:c})}}),null),i(Y,a(w,{get when(){return!e?.item?.isCompleted},get children(){return a(U,{color:"#646cff",label:"Confirmar",handleClick:h})}}),null),i(Y,a(w,{get when(){return e?.item?.isCompleted&&q?.profile?.isAdmin},get children(){return a(U,{color:"#646cff",label:"arrow",handleClick:d})}}),null),u})()},rt=e=>{const[s,c]=j(),d=()=>s?.[e?.itm?.product?.id]?.productImageUrl?_e()+$e()+"/"+s?.[e?.itm?.product?.id]?.productImageUrl:null,h=async()=>{let r=e?.itm?.product?.id,n=`${r}`,$=await le(n);$?.[r]?.productImageUrl&&c(r,$?.[r])};G(()=>{h()});const u=()=>{let r=se(O?.manifestObj?.products);delete r[e?.itm?.product?.id],B("manifestObj","products",r)};return(()=>{var r=Fe(),n=r.firstChild,$=n.firstChild,_=$.firstChild,b=_.firstChild,g=b.firstChild,t=b.nextSibling,l=t.firstChild,o=l.firstChild,m=o.firstChild;m.firstChild;var p=l.nextSibling,y=p.firstChild,v=y.firstChild,C=v.nextSibling,x=y.nextSibling,A=x.firstChild;return A.firstChild,i(m,()=>e?.itm?.product?.label,null),i(C,()=>e?.itm?.qty*-1),i(A,()=>(e?.itm?.salePrice*1).toFixed(2),null),i(p,a(w,{get when(){return!O?.manifestObj?.isCompleted},get children(){var f=Ce(),I=f.firstChild,P=I.firstChild;return P.$$click=u,f}}),null),R(()=>he(g,"src",d())),r})()},st=e=>{const[s,c]=j(),d=async()=>{let u=e?.itm?.product?.id,r=`${u}`,n=await le(r);n?.[u]?.productImageUrl&&c(u,n?.[u])};G(()=>{d()});const h=()=>{let r=se(O?.manifestObj?.reservas).filter(n=>n.key!==e?.itm?.key);B("manifestObj","reservas",r)};return(()=>{var u=Ye(),r=u.firstChild,n=r.firstChild,$=n.firstChild,_=$.firstChild,b=_.firstChild,g=b.firstChild,t=g.firstChild;t.firstChild;var l=b.nextSibling,o=l.firstChild,m=o.firstChild,p=m.nextSibling,y=o.nextSibling,v=y.firstChild;return v.firstChild,i(t,()=>e?.itm?.type,null),i(p,()=>e?.itm?.qty*1),i(v,()=>(e?.itm?.price*1).toFixed(2),null),i(y,a(w,{get when(){return e?.itm?.arancel},get children(){return[Ve(),(()=>{var C=Me();return C.firstChild,i(C,()=>(e?.itm?.arancel*1).toFixed(2),null),C})()]}}),null),i(l,a(w,{get when(){return!O?.manifestObj?.isCompleted},get children(){var C=Ce(),x=C.firstChild,A=x.firstChild;return A.$$click=h,C}}),null),u})()},nt=e=>{const[s,c]=ee(),d=t=>t?" "+t:"",h=t=>d(t?.firstName)+d(t?.middleName)+d(t?.lastName)+d(t?.lastName2),u=t=>{let l=d(t?.altPhoneNumber);return d(t?.phoneNumber)+(l?" |"+l:"")},r=async()=>{let t={};t.id=V(),t.closeEvent=()=>{},t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=a(be,{confirm:n}),pe(t)},n=()=>{let t=q?.profile?.agency?.id;if(t){let l=e?.item,o=`;${E(l?.name)};;N/A;${E(l?.phoneNumberS)};${ke(l?.dob)};CUB;;;${t}`;b("shipper",o)}},$=async()=>{let t={};t.id=V(),t.closeEvent=()=>{},t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=a(be,{confirm:_}),pe(t)},_=async()=>{let t=q?.profile?.agency?.id;if(t&&e?.item?.citiId&&s()?.id){let l=e?.item,o=`;${E(l?.firstName)};${E(l?.middleName)};${E(l?.lastName)};${E(l?.lastName2)};N/A;${E(l?.cid)};CUB;${E(l?.phoneNumber)};${E(l?.altPhoneNumber)};${E(l?.ybstreet)};${E(l?.ybstreetNo)};${E(l?.ybbetwen1)};${E(l?.ybbetwen2)};${E(l?.ybreparto)};;${l?.citiId};${s()?.id};${E(l?.email)};;${t}`;b("consignee",o)}},b=async(t,l,o)=>{let m=`funcname=insertRecord&option=${t}&params=${l}`,p={query:"querySolveGlobal"};p.params={query:m},await F(p)},g=(t,l)=>{B("manifestObj","shipper_consignee",t,l)};return G(()=>{if(e?.item?.ybestate){let t=oe("M023009")?.provincias?.filter?.(l=>l.label===e?.item?.ybestate)?.[0];if(t?.id&&c(t),e?.item?.ybcity){let l=t?.cities?.filter?.(o=>o.label===e?.item?.ybcity)?.[0];l?.id&&B("manifestObj","shipper_consignee","citiId",l?.id)}}}),a(w,{get when(){return e?.item?.name},get children(){var t=Ge(),l=t.firstChild,o=l.firstChild,m=o.nextSibling,p=l.nextSibling,y=p.firstChild,v=y.nextSibling,C=p.nextSibling,x=C.nextSibling,A=x.firstChild,f=A.nextSibling,I=x.nextSibling,P=I.firstChild,M=P.nextSibling,ne=M.nextSibling,J=I.nextSibling,H=J.firstChild,ae=H.nextSibling,T=J.nextSibling,Y=T.firstChild,xe=T.nextSibling;return i(l,a(X,{}),m),m.$$click=r,i(m,a(re,{name:"send",size:22,color:"#646cff"})),i(y,()=>e?.item?.name),i(v,()=>e?.item?.phoneNumberS),i(x,a(X,{}),f),f.$$click=$,i(f,a(re,{name:"send",size:22,color:"#646cff"})),i(P,()=>e?.item?.cid),i(M,()=>h(e?.item)),i(ne,()=>u(e?.item)),i(H,()=>me(e?.item)),i(ae,()=>e?.item?.ybreparto),i(Y,me),i(T,a(X,{}),null),i(xe,a(fe,{get list(){return oe("M023009")?.provincias},lbl_empty:"Provincia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return s()?.id},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:k=>c(k),width:"260px"})),i(t,a(w,{get when(){return s()},get children(){var k=Qe();return i(k,a(fe,{get list(){return s()?.cities},lbl_empty:"Cities",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.item?.citiId},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:z=>g("citiId",z.id),width:"260px"})),k}}),null),R(k=>{var z=`    ${ce()?"isMobile":""}`,de=` ${ce(),"centerBx"} bottombx flxWrp  centerBx`;return z!==k.e&&ue(t,k.e=z),de!==k.t&&ue(T,k.t=de),k},{e:void 0,t:void 0}),t}})},wt=async(e,s)=>{let c={params:e,data2update:s},d=L(431007);return c={...c,...d},await F(c)},ye=async e=>{let s={params:e},c=L(431002);return s={...s,...c},await F(s)},At=async e=>{let s=[];e.map(c=>{let d={params:{id:c?.ssg_track_key,idairguide:"all"}},h=L(802002);d={...d,...h},s.push(d)}),Pe(s,at)},at=async e=>{const c=await F(e);if(c)return c},ct=e=>{const[s,c]=ee(""),[d,h]=ee(1),u=()=>{d()===1&&s().length>8&&r(s())},r=async b=>{let g=q?.profile?.agencyStore?.id,t=`${b}`,l=await le(t),o=K(l)?.[0],m=`${o} ${g}`,p=await ve(m),y=0,v=0;K(p)?.map(f=>{p[f]?.products?.map(I=>{o===I?.product?.id&&(y+=I?.price*1*I?.qty*1,v+=I?.qty*1)})});let C=1,x={};O?.manifestObj?.products?.map(f=>{let I={...f};o===f.product.id&&(I.qty=I.qty*-1),x[f.product.id]=I}),x?.[o]&&(C=x?.[o].qty*1+1);const A=v?y/v:0;if(v&&v-C>=0){if(x?.[o])x[o].qty=C*-1;else{let I={product:{id:o,label:l?.[o]?.name,code:l?.[o]?.code},qty:C*-1,price:A,salePrice:l?.[o]?.salePrice};x[o]=I}let f=ge(x);B("manifestObj","products",f),c(""),ie({text:l?.[o]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:V()})}else ie({text:"Sin Existencia",timeout:3500,theme:"red",id:V()})},[n,{refetch:$}]=we(s,async b=>{if(d()===2&&b.length>4){const g=await le(b);let t=[];return K(g).map(l=>{let o=g[l];t.push(o)}),t}else return[]}),_=()=>{c(""),h(1)};return(()=>{var b=He(),g=b.firstChild,t=g.firstChild,l=t.firstChild,o=l.nextSibling,m=o.firstChild,p=m.nextSibling;return i(t,a(w,{get when(){return n()?.length>0},get children(){var y=Je();return i(y,a(te,{get each(){return n()},children:(v,C)=>a(ot,{itm:v,clearTx:_})})),y}}),o),i(o,a(Z,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return s()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:c,onEnter:u}),m),m.$$click=()=>h(1),i(m,a(re,{name:"qrcode-scan",size:22,get color(){return d()===1?"#646cff":""}})),p.$$click=()=>h(2),i(p,a(re,{name:"keyboard",size:22,get color(){return d()===2?"#646cff":""}})),b})()},ot=e=>{const[s,c]=j(),d=()=>s?.prod?.productImageUrl?_e()+$e()+"/"+s?.prod?.productImageUrl:null;G(()=>{c("prod",e?.itm)}),Array.from(Array(10).keys());const h=async u=>{let r=q?.profile?.agencyStore?.id,n=s?.prod?.ssg_product_key,$=`${n} ${r}`,_=await ve($),b=0,g=0;K(_)?.map(m=>{_[m]?.products?.map(p=>{n===p?.product?.id&&(b+=p?.price*1*p?.qty*1,g+=p?.qty*1)})});let t=1,l={};O?.manifestObj?.products?.map(m=>{let p={...m};n===m.product.id&&(p.qty=p.qty*-1),l[m.product.id]=p}),l?.[n]&&(t=l?.[n].qty*1+1);const o=g?b/g:0;if(console.log(o,g,b),g&&g-t>=0){if(l?.[n])l[n].qty=t*-1;else{let p={product:{id:n,label:s?.prod?.name,code:s?.prod?.code},qty:t*-1,price:o,salePrice:s?.prod?.salePrice};l[n]=p}let m=ge(l);B("manifestObj","products",m),e?.clearTx(),ie({text:s?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:V()})}else e?.clearTx(),ie({text:"Sin Existencia",timeout:3500,theme:"red",id:V()})};return(()=>{var u=ze(),r=u.firstChild,n=r.firstChild,$=n.firstChild,_=$.firstChild,b=_.firstChild,g=_.nextSibling,t=g.firstChild,l=t.firstChild,o=l.firstChild;o.firstChild;var m=t.nextSibling,p=m.firstChild,y=p.nextSibling,v=y.firstChild;return v.firstChild,i(o,()=>e?.itm?.name,null),i(p,a(U,{color:"#646cff",label:"Agregar",handleClick:h})),i(v,()=>(e?.itm?.salePrice*1).toFixed(2),null),R(()=>he(b,"src",d())),u})()},W=(e,s)=>s?(()=>{var c=We(),d=c.firstChild,h=d.nextSibling;return i(d," "+e),i(h,s),c})():"",me=e=>(()=>{var s=Ke();return i(s,()=>W("Calle",e?.ybstreet),null),i(s,()=>W("#",e?.ybstreetNo),null),i(s,()=>W("E/",e?.ybbetwen1),null),i(s,()=>W("y",e?.ybbetwen2),null),s})(),Q=e=>e?e*1:0,E=e=>e?e.toString().toUpperCase().trim():"";function be(e){return(()=>{var s=Xe(),c=s.firstChild,d=c.nextSibling,h=d.nextSibling,u=h.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#fff"),s.style.setProperty("border-radius","11px"),s.style.setProperty("padding"," 0 21px"),c.style.setProperty("padding","21px"),i(u,a(X,{}),null),i(u,a(U,{color:"#646cff",icon:"send",label:"Enviar",get handleClick(){return e.confirm}}),null),R(r=>(r=ce()?"96vw":"420px")!=null?s.style.setProperty("width",r):s.style.removeProperty("width")),s})()}Ae(["click"]);export{Ot as default,at as fetchCSVInve,me as getAddress,Q as isValNum,At as loadInventory,wt as updConfirmSale};
