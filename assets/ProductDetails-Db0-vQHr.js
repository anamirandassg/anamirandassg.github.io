const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-C2usEOA1.js","assets/index-BNKB1BTV.js","assets/index-W9fcnr7G.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-Ayti0ImX.js","assets/debounces-CACMcMjk.js","assets/SVG-BJ_qoSGf.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-riHcCaph.js","assets/ButonUploadHrm-CtAmgY4H.js","assets/Util-D2YTzGDx.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-CyuPIHNw.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-BqSkaIZB.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as k,_ as I,u as ht,c as T,a as w,o as pt,h as vt,m as mt,i as t,d as r,k as it,e as gt,t as _,S as $,f as K,n as J,g as ft,j as xt,F as X}from"./index-BNKB1BTV.js";import{b as U,f as W,e as $t,O as Z,a as N,p as yt,g as M}from"./Util-D2YTzGDx.js";import{u as Ct}from"./debounces-CACMcMjk.js";import"./globalSignal-BHQpq0hk.js";import"./ButonHrm-XTap7x75.js";import{g as St,a as Bt,c as wt,i as kt,b as It,u as Et}from"./handelImagesServices-Ztv3X9rD.js";import{LookupInventory as Pt}from"./DashInventory-kZnLSfsq.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-BJ_qoSGf.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-DOgx-q1k.js";var Ot=_('<div class="icon_status centerBx">'),At=_("<div style=width:300px;position:relative;><img alt=sf><div>"),Ft=_("<div style=width:300px;position:relative;><img alt=sf>"),Dt=_('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px>'),qt=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Lt=_('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Mt=_('<div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx centerBx unit"style=padding:30px></div><div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:</h4></div></div><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><h4>Factura</h4></div><div class="tr_bar_40 "><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator>'),jt=_("<div><div style=padding:30px>"),Vt=_("<div> "),Tt=_("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Rt=_('<div class="bottombx centerBx unit tr_bar_40"><h5>:</h5><div class=unitBx><h5>'),Ut=_('<div class="bottombx centerBx unit"><div class=tr_bar_20><h5></h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_40 "><h4></h4></div><div class="tr_bar_40 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),tt=_("<div style=margin:8px>"),Wt=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),Qt=_("<div class=unitBx><h5>"),Yt=_('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const et=k(()=>I(()=>import("./LoadingColorSpinner-C2usEOA1.js"),__vite__mapDeps([0,1,2,3])));k(()=>I(()=>import("./DropDwnSearch-Ayti0ImX.js"),__vite__mapDeps([4,1,2,5,6,7,8])));const zt=k(()=>I(()=>import("./FlexSpace-riHcCaph.js"),__vite__mapDeps([9,1,2]))),Gt=k(()=>I(()=>import("./ButonUploadHrm-CtAmgY4H.js"),__vite__mapDeps([10,1,2,6,7,11,12]))),Ht=k(()=>I(()=>import("./CheckBoxSlide-CyuPIHNw.js"),__vite__mapDeps([13,1,2,14]))),Kt=k(()=>I(()=>import("./InputHr-BqSkaIZB.js"),__vite__mapDeps([15,1,2,16]))),Jt=k(()=>I(()=>import("./SVG-BJ_qoSGf.js"),__vite__mapDeps([6,1,2,7])));function be(n){const[i,u]=ht(),[e,m]=T({search:""});T(),T();const[g,j]=w(null),[E,O]=w(!1),[A,y]=w(!1),[q,st]=w(""),[te,at]=w("");Ct(at,400),pt(()=>{}),vt(()=>{});const Q=async()=>{if(i?.mId){let s={id:i?.mId,businessId:it?.profile?.businessYId},p=await Zt(s),o=await Pt(i?.mId),v=0,b=0,f=[],x={};Z(o)?.map(S=>{let a=o[S]?.store;o[S]?.products?.map(h=>{if(i?.mId===h?.product?.id){let l={...o[S]};delete l.products,l.qty=h?.qty*1,l.price=h?.price*1,v+=h?.price*1*h?.qty*1,x[a]||(x[a]={total:0}),x[a].total+=l.qty,b+=h?.qty*1,f.push(l)}})});const F=v/b;st(St()+Bt()+"/"+p?.productImageUrl),m("stockList",f),m("stock",{Balance:v,Total:b,priceCost:F,stockByStore:x}),m("productObj",p)}};mt(async()=>{Q()});const V=async s=>{await Xt(i?.mId,s),Q()},Y=async(s,p)=>{let o=await It(s.type,p);if(await Et(o,s)){let b={...e?.productObj?.thumbnails};b[p]=1,await V({productImageUrl:p,thumbnails:b}),y(!1),O(!1)}else y(!1)},nt=async()=>{if(y(!0),g()?.name.split(".").pop()==="webp"){let s=e?.productObj?.code+"/"+M()+M()+".webp";Y(g()?.file,s)}else{let s=await wt(g()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),p=await kt(s),v=await(await fetch(p)).blob(),b=e?.productObj?.code+"/"+M()+M()+".webp";Y(v,b)}},ot=s=>{j(s),O(!0)},ct=s=>{V({isPublic:s?"9":null})},L=async(s,p)=>{V({[s]:p})};return(()=>{var s=jt(),p=s.firstChild;return t(s,r($,{get when(){return e?.productObj?.code},get fallback(){return(()=>{var o=Vt();return o.firstChild,t(o,r(et,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){var o=Dt(),v=o.firstChild,b=v.firstChild,f=b.firstChild,x=f.nextSibling,F=x.firstChild,S=x.nextSibling,a=v.nextSibling,h=a.nextSibling,l=h.firstChild;return t(v,r($,{get when(){return g()?.source},get children(){var c=At(),C=c.firstChild,B=C.nextSibling;return t(B,r($,{get when(){return!A()},get fallback(){return(()=>{var d=Tt(),P=d.firstChild;return t(d,r(et,{stroke:"rgb(200 25 60 / 1)",size:32}),P),d})()},get children(){var d=Ot();return d.$$click=nt,t(d,r(Jt,{name:"arrow_up_large",size:24})),d}})),K(d=>{var P=g()?.source,D=A()?"floatBtn loading":"floatBtn ";return P!==d.e&&J(C,"src",d.e=P),D!==d.t&&ft(B,d.t=D),d},{e:void 0,t:void 0}),c}}),b),t(v,r($,{get when(){return xt(()=>!!q())()&&!g()?.source},get children(){var c=Ft(),C=c.firstChild;return K(()=>J(C,"src",q())),c}}),b),t(f,()=>e?.productObj?.name),t(x,r(Ht,{get initValue(){return e?.productObj?.isPublic},updChange:ct,color:"var(--background-red-ssg)"}),F),t(S,r(Gt,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ot})),t(l,r(lt,{get value(){return e?.productObj?.category},label:"Categoria:",key:"category",updItem:L}),null),t(l,r(R,{}),null),t(l,r(lt,{get value(){return e?.productObj?.unit},label:"U/M:",key:"unit",updItem:L}),null),t(l,r(R,{}),null),t(l,r(rt,{get value(){return e?.productObj?.brand},label:"Marca:",key:"brand",updItem:L}),null),t(l,r(R,{}),null),t(l,r(rt,{get value(){return e?.productObj?.model},label:"Model:",key:"model",updItem:L}),null),o}}),p),t(s,r($,{get when(){return e?.stockList&&e?.stock?.Total>0},get children(){var o=Mt(),v=o.firstChild,b=v.nextSibling,f=b.nextSibling;f.firstChild;var x=f.nextSibling,F=x.nextSibling,S=F.nextSibling;return S.nextSibling,t(b,r($,{get when(){return e?.stock?.Total>0},get children(){return[(()=>{var a=qt(),h=a.firstChild,l=h.nextSibling,c=l.firstChild;return t(c,()=>(e?.stock?.Total*1).toFixed(2)),a})(),r(zt,{}),(()=>{var a=Lt(),h=a.firstChild,l=h.nextSibling,c=l.firstChild;return c.firstChild,t(c,()=>(e?.stock?.priceCost*1).toFixed(2),null),a})()]}})),t(f,r(X,{get each(){return Z(e?.stock?.stockByStore)},children:(a,h)=>(()=>{var l=Rt(),c=l.firstChild,C=c.firstChild,B=c.nextSibling,d=B.firstChild;return t(c,()=>N("storeGroupBy")?.[a]?.label,C),t(d,()=>(e?.stock?.stockByStore?.[a]?.total*1).toFixed(2)),l})()}),null),t(o,r(X,{get each(){return e?.stockList},children:(a,h)=>(()=>{var l=Ut(),c=l.firstChild,C=c.firstChild,B=c.nextSibling,d=B.firstChild,P=d.firstChild,D=B.nextSibling,dt=D.firstChild,z=D.nextSibling,G=z.firstChild,ut=G.firstChild,_t=z.nextSibling,bt=_t.firstChild,H=bt.firstChild;return H.firstChild,t(C,()=>yt(a?.createDate)),t(P,()=>(a?.qty*1).toFixed(2)),t(dt,()=>a?.invoice),t(G,()=>N("storeGroupBy")?.[a?.store]?.label,ut),t(H,()=>(a?.price*1).toFixed(2),null),l})()}),null),o}}),p),s})()}const R=()=>[tt(),"|",tt()],rt=n=>{const[i,u]=w(!1),[e,m]=w(""),g=()=>{n?.updItem(n?.key,e()),u(!1)},j=()=>{let E=i();E||m(n?.value),u(!E)};return r($,{get when(){return n?.value},get children(){var E=Wt(),O=E.firstChild,A=O.firstChild;return A.$$click=j,t(A,()=>n?.label),t(O,r($,{get when(){return i()},get fallback(){return(()=>{var y=Qt(),q=y.firstChild;return t(q,()=>n?.value),y})()},get children(){return r(Kt,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:y=>m(y),onEnter:g})}}),null),E}})},lt=n=>r($,{get when(){return n?.value},get children(){var i=Yt(),u=i.firstChild,e=u.firstChild,m=e.nextSibling,g=m.firstChild;return t(e,()=>n?.label),t(g,()=>n?.value),i}}),Xt=async(n,i)=>{let u={params:{id:n,businessId:it?.profile?.businessYId},form:i},e=U(129004);return u={...u,...e},await W(u)},Zt=async n=>{let i={params:n},u=U(122002);return i={...i,...u},await W(i)},he=async n=>{let i=[];n.map(u=>{let e={params:{id:u?.ssg_track_key,idairguide:"all"}},m=U(802002);e={...e,...m},i.push(e)}),$t(i,Nt)},Nt=async n=>{const u=await W(n);if(u)return u};gt(["click"]);export{be as default,Nt as fetchCSVInve,he as loadProduct,Xt as updProducts};
