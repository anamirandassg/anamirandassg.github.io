const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-BSsy0pgk.js","assets/index-DQRb1HKE.js","assets/index-B8bAFC38.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-XM3Pkuij.js","assets/SVG-iOfYDQCO.js","assets/ButonHrm-BSeWNUGQ.css","assets/LoadingColorSpinner-QBKJnVqo.js","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-NZkrCwAj.js","assets/AddManifest-v59r8k6Y.js","assets/DialogHRM-CPSHIKoS.js","assets/DialogHRM-V9_lZntj.css","assets/debounces-D-VgCguP.js","assets/InputHr-B1_kHGIE.js","assets/InputHr-BXFw4d2l.css","assets/ItemOnManifest-CFQpc9Wz.js","assets/components-D-gQ5i5n.js"])))=>i.map(i=>d[i]);
import{l as h,_ as v,c as ee,a as B,d as oe,i as c,e as o,aW as w,S as N,O as S,F as ce,p as de,v as se,N as me,j as ye,k as j,m as U,aq as ue,aR as T,aM as q,aQ as K,an as te,a1 as P,t as x,h as M,U as D,q as E,aS as ne,aT as ie,aX as he,aN as ve,aO as xe,aP as pe,o as Se,b as we,D as $e,R as ke,Q as Pe,y as Ce,Z as Oe,M as Me,A as Le,ap as Ie}from"./index-DQRb1HKE.js";import{s as Ae}from"./App.module-CbHnVtRQ.js";import{OpenModal as De}from"./DialogHRM-CPSHIKoS.js";import{a as Ee,b as Be}from"./ScanningServices-t-1SKsGD.js";import{OpenToast as G}from"./Toast-Cx4UPE1S.js";var Te=x('<div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Subir Pendientes '),qe=x('<div class="_dsplFlx flxWrp spaceAround ">'),je=x('<div class="centerBx bottombx spaceAround flxWrp"style=margin-top:20px><div style=padding:6px></div><div style=padding:6px></div><div style=padding:6px>'),Qe=x('<div><div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx grid2Col"></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>'),Re=x('<div class="centerBx bottombx "><h5> subiendo al servidor <!> / <!> '),Ve=x('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class=""></h5>|<h4 style=font-size:13px>'),Fe=x('<div class="centerBx bottombx "><h5> descargando guias... ');const Ge=h(()=>v(()=>import("./CheckBoxSlide-BSsy0pgk.js"),__vite__mapDeps([0,1,2,3]))),z=h(()=>v(()=>import("./ButonHrm-XM3Pkuij.js"),__vite__mapDeps([4,1,2,5,6]))),re=h(()=>v(()=>import("./LoadingColorSpinner-QBKJnVqo.js"),__vite__mapDeps([7,1,2,8]))),[le,ze]=ee({}),fe=()=>M("M023009")?.manifestList?S(M("M023009")?.manifestList):[];function Ne(t){const[e,a]=ee({qty:{}}),[r,d]=ee({list:[]}),[g,l]=B(!1),[u,_]=B(0);B("");const b=async s=>{if(_(w()),w()>30){let n=4,y=Array.from(Array(n).keys()),V=Math.ceil(w()/n);const Y=y.map(async i=>{let f=V*i,p=V*(i+1)-1;p>w()&&(p=w()),await D(s.slice(f,p),L)});await Promise.all(Y)}else await D(s,L);_(0)},L=async s=>{let n=M("dbScannedStore"),y=await Ke(n?.[s]);return delete n[s],P("dbScannedStore",n),pe(S(n)?.length),Be(),y},C=async()=>{b(Object.keys(M("dbScannedStore")))};let O={};const Z=async s=>{let n=await Ue("guia",s);O=Object.assign({},O,n)},Q=async()=>{let s=[];if(S(e).map(n=>{e[n]&&s.push(n)}),l(!0),s.length>0){await D(s,Z);let n=await q(T,K),y=Object.assign({},n,O);await te(T,K,y),await W(),G({text:"El modo offline esta listo para escanear",timeout:2500,id:E()})}else G({text:"Debe selecionar una guia",timeout:2500,id:E()});l(!1)};let I={};const X=async s=>{let n=await He(s);I=Object.assign({},I,n)},m=async()=>{let s=[];if(S(e).map(n=>{e[n]&&s.push(n)}),l(!0),s.length>0){await D(s,X);let n=await q(ie,ne),y=Object.assign({},n,I);await te(ie,ne,y),await W(),G({text:"se descargo con exito la lista de escaneos",timeout:2500,id:E()})}else G({text:"Debe selecionar una guia",timeout:2500,id:E()});l(!1)},$=async()=>{R()},J=()=>{he(),setTimeout(()=>{$()},600)},R=async()=>{await W();let s=[];fe().map(n=>{s.push({guia:n,qty:M("total_guia")?.[n]?M("total_guia")?.[n]:0})}),d("list",s)};return oe(()=>{ae(),$()}),(()=>{var s=Qe(),n=s.firstChild,y=n.firstChild,V=y.nextSibling,Y=n.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#ffffff"),s.style.setProperty("border-radius","13"),c(n,o(N,{get when(){return w()>0},get children(){return[Te(),o(N,{get when(){return!u()},get fallback(){return(()=>{var i=Re(),f=i.firstChild,p=f.firstChild,k=p.nextSibling,A=k.nextSibling,F=A.nextSibling;return F.nextSibling,c(i,o(re,{stroke:"rgb(200 25 60 / 1)",size:32}),f),c(f,()=>u()-w(),k),c(f,u,F),i})()},get children(){var i=qe();return c(i,o(z,{icon:"arrow_up_large",color:"#c8193c",get label(){return`Subir pendientes ${w()}`},handleClick:C})),i}})]}}),y),c(V,o(ce,{get each(){return S(le?.qty)},children:(i,f)=>(()=>{var p=Ve(),k=p.firstChild,A=k.firstChild,F=A.nextSibling,be=F.nextSibling;return c(k,o(Ge,{get initValue(){return e?.[i]},updChange:()=>a(i,!e?.[i]),color:"var(--background-red-ssg)"}),A),c(A,i||""),c(be,()=>le?.qty?.[i]),p})()})),c(s,o(N,{get when(){return!g()},get fallback(){return(()=>{var i=Fe();return c(i,o(re,{stroke:"rgb(200 25 60 / 1)",size:32}),null),i})()},get children(){var i=je(),f=i.firstChild,p=f.nextSibling,k=p.nextSibling;return c(f,o(z,{icon:"cancel",color:"#4a4a4a",label:"Limpiar",handleClick:J})),c(p,o(z,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar Guias",handleClick:Q})),c(k,o(z,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar locaciones",handleClick:m})),i}}),Y),de(i=>{var f=se()?"86vw":"420px",p=se()?"15px 5px":"15px 25px";return f!==i.e&&((i.e=f)!=null?s.style.setProperty("width",f):s.style.removeProperty("width")),p!==i.t&&((i.t=p)!=null?s.style.setProperty("padding",p):s.style.removeProperty("padding")),i},{e:void 0,t:void 0}),s})()}const We=t=>{let e=t,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const r=new RegExp(a);return e.length===13&&r.test(e)&&(e=e.slice(3,12)),e},Ke=async t=>{let e={};t?.params&&(e.params=t?.params),t?.data2update&&(e.data2update=t?.data2update),t?.form&&(e.form=t?.form);let a=j(t?.actionKey);return e={...e,...a},await U(e)},He=async t=>{let e={params:{airguide:t,":search0":"ssg"}},a=j(815002);e={...e,...a};const r=await U(e);return r?.data?.error?{}:r},Ue=async(t,e)=>{let a={params:{idairguide:e},fldswQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","guia","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","isLMH","isPaid","hbls","noteTag","nameshipper","billedBy"]};t.split(" ").map((g,l)=>{g&&(a.params[":search"+l]=g.trim())}),a.params[":guia"]=e+"";let r=j(802001);a={...a,...r};const d=await U(a);return d?.data?.error?{}:d},Ze=async(t,e)=>{let a={params:{":search0":" "},fldsjQry:["createDate","linkedUser","status","name","city","province","workgroup","ssg_manifest_key","isPending"]};me()||(a.params.workgroup=ye?.profile?.workgroup?.id+"");let r=j(703001);a={...a,...r};const d=await U(a);if(d?.error)return{};{let g=[];return S(d).map(l=>{let u=d[l];u._id=u?.ssg_manifest_key,ue.put(u,function(b,L){b||console.log("Successfully posted on manifest list")}),g.push(u)}),g}},Xe=()=>new Promise((t,e)=>{T.allDocs({include_docs:!0,descending:!0},function(a,r){t(r.rows)})}),Je=async()=>{let t=await q(xe,ve);P("dbScannedStore",t),pe(S(t)?.length)},ae=()=>{Ee(),W(),Je()},W=async()=>{let t=await q(T,K);t||await te(T,K,{});let e={},a={},r={},d={};return fe().map(g=>{d[g]=0}),t&&S(t)?.map(g=>{let l=t?.[g];l?.hbls?.map(u=>{a[u?.hbl]||(a[u?.hbl]=l?.ssg_track_key,r[u?.hbl]=l)}),e[l?.ssg_track_key]||(e[l?.ssg_track_key]=l),l?.guia&&(d[l?.guia]?d[l?.guia]+=1:d[l?.guia]=1)}),ze("qty",d),P("total_guia",d),P("manifestByKeys",e),P("manifestByHbls",a),P("hblsObjDBInd",r),e},mt=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets2:Ze,default:Ne,initializePouchD:ae,loadManifestOffline:Xe,parseTrcking:We},Symbol.toStringTag,{value:"Module"}));var Ye=x('<div><div class="_dsplFlx flxWrp spaceAround centerBx"style="padding:16px 4vw"><h2>Manifiestos</h2><div class="icon_status centerBx"></div><div class="centerBx bottombx "><h5 class="">Entregados</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:16px><div style=padding:4px></div></div><div class=" flxWrp spaceAround "style="padding:16px 5vw">'),et=x("<div> <!>."),tt=x("<div> ");const at=h(()=>v(()=>import("./FlexSpace-NZkrCwAj.js"),__vite__mapDeps([9,1,2]))),st=h(()=>v(()=>import("./SVG-iOfYDQCO.js"),__vite__mapDeps([5,1,2]))),nt=h(()=>v(()=>import("./AddManifest-v59r8k6Y.js"),__vite__mapDeps([10,1,2,11,12,13]))),it=h(()=>v(()=>import("./LoadingColorSpinner-QBKJnVqo.js"),__vite__mapDeps([7,1,2,8]))),rt=h(()=>v(()=>import("./InputHr-B1_kHGIE.js"),__vite__mapDeps([14,1,2,15]))),lt=h(()=>v(()=>import("./CheckBoxSlide-BSsy0pgk.js"),__vite__mapDeps([0,1,2,3]))),ot=h(()=>v(()=>import("./ItemOnManifest-CFQpc9Wz.js"),__vite__mapDeps([16,1,2,13,11,12,17])));function ct(){const[t,e]=B(0),[a,r]=B("");Se(()=>{}),we(()=>{}),oe(async()=>{ae(),H()});const d=()=>{let _=E(),b={};b.id=_,b.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},b.content=o(nt,{modalId:_,refetch:u}),De(b)},g=_=>{e(_),u()},[l,{refetch:u}]=$e(a,async _=>await H());return(()=>{var _=Ye(),b=_.firstChild,L=b.firstChild,C=L.nextSibling,O=C.nextSibling,Z=O.firstChild,Q=b.nextSibling,I=Q.firstChild,X=Q.nextSibling;return c(b,o(at,{}),C),C.$$click=d,c(C,o(st,{name:"plus",size:22})),c(O,o(lt,{get initValue(){return t()},updChange:g,color:"var(--background-red-ssg)"}),Z),c(I,o(rt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return a()},placeholder:"search...",colors:"#2b2b2b",handleClick:m=>r(m)})),c(X,o(Pe,{fallback:m=>(()=>{var $=et(),J=$.firstChild,R=J.nextSibling;return R.nextSibling,c($,()=>m.toString(),R),$})(),get children(){return o(ke,{get fallback(){return(()=>{var m=tt();return m.firstChild,c(m,o(it,{stroke:"rgb(200 25 60 / 1)",size:62}),null),m})()},get children(){return o(N,{get when(){return l()},get children(){return o(ce,{get each(){return l()},children:(m,$)=>o(ot,{item:m,refetch:u})})}})}})}})),de(()=>Ce(_,Ae.App)),_})()}const dt=async(t,e)=>{Oe()&&H()},H=async()=>{let t=await _e(),e=[];return S(t).map(a=>{let r=t?.[a];e.push(r)}),e},ut=async t=>{let e=[];t.map(a=>{let r={params:{id:a?.ssg_track_key,idairguide:"all"}},d=j(802002);r={...r,...d},e.push(r)}),D(e,ge)},ge=async t=>{const a=await Me(t);if(a)return a},_e=async()=>{let t=await q(ue,Ie);return P("manifestList",t),t};Le(["click"]);const yt=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets:dt,default:ct,fetchCSVInve:ge,handleListManifest:_e,loadManifest2:ut,loadManifestOffline:H},Symbol.toStringTag,{value:"Module"}));export{yt as D,mt as S,_e as h,ae as i,H as l};
