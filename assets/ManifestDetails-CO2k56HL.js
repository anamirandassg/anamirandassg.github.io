const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CG1l9Tv-.js","assets/index-AghdUHVJ.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-DaaLIRtz.js","assets/SVG-0foO-5Mj.js","assets/Util-Tp41x8dN.js"])))=>i.map(i=>d[i]);
import{l as q,_ as H,r as se,c as U,a as V,o as re,b as ne,d as ae,i as s,e as l,S as N,z as le,F as ce,E as oe,f as R,h as C,j as T,s as de,k as K,m as me,t as b,A as Y,T as ge}from"./index-AghdUHVJ.js";import{j as O,g as X,b as Z,n as ue,u as ee,O as he,d as fe,H as _e,L as J,I as ve,J as pe}from"./Util-Tp41x8dN.js";import{u as be}from"./debounces-C1b68l-f.js";import"./ButonHrm-BFVsN_A2.js";import{P as $e}from"./ShowQRPrintLabel-DrySuu2_.js";import{i as ye,h as xe}from"./DashManifest-D_VhJ3Xx.js";import{getAddressPSS as ke}from"./Reports-CRvdbId1.js";/* empty css                 */import"./SVG-0foO-5Mj.js";import"./fontkit.es-BaGCOcEw.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-DMdNHJ1N.js";import"./Toast-BP3E6-BK.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-DiozP1LB.js";import"./ScanningServices-BSe73wjT.js";var Se=b('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg height=22 width=22><path>'),te=b("<h5>"),we=b('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),Be=b("<div> <!>."),Ne=b("<div> "),Ae=b('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),Ie=b("<img width=48 height=24 class=picture-profile alt=ssg decoding=async>"),Ce=b('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Oe=b('<div class="icon_status centerBx">'),Le=b("<h5 class=rpto>"),je=b('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const Ee=q(()=>H(()=>import("./LoadingColorSpinner-CG1l9Tv-.js"),__vite__mapDeps([0,1,2,3]))),G=q(()=>H(()=>import("./FlexSpace-DaaLIRtz.js"),__vite__mapDeps([4,1,2]))),j=q(()=>H(()=>import("./SVG-0foO-5Mj.js"),__vite__mapDeps([5,1,2,6])));function et(){const[t,m]=se(),[i,d]=U({search:""}),[x,c]=U(),[g,L]=V(0),[z,E]=U(),[M,F]=V("");be(F,400),re(()=>{}),ne(()=>{});const W=async()=>{if(t?.mId&&g()<J()){L(J()+7e3);let e={id:t?.mId},o=await Pe(e);d("manifestObj",void 0),c("linked",void 0),d("manifestObj",o),c("linked",{...o?.linkedBags}),i?.province||(d("province",o?.province),d("city",o?.city))}};ae(async()=>{ye();let e=[];[33,46,40,41,42,50,52,54,56].map(h=>{let $=h,w=O("M023009")?.whStList?.[$];Y?.roles?.[w?.id]?.isActive&&e.push(w)}),E("list",e);let u=[];O("M023009")?.provincias.map(h=>{let $=h.label;Y?.roles?.[$]?.isActive&&u.push(h)}),E("prov",u),W()});const v=e=>e||"",k=e=>e?" "+e:"",P=e=>(v(e?.estate)+"_"+v(e?.city)+"_"+v(e?.rpto)+"_"+v(e?.streetName)+"_"+v(e?.streetNo)).toLowerCase(),r=e=>{if(e?.consigneeName)return e?.consigneeName;let o=e?.consigneeInfo;return k(o?.firstName)+k(o?.middleName)+k(o?.lastName)+k(o?.lastName2)},S=e=>{if(e?.ctelephone)return e?.ctelephone;let o=e?.consigneeInfo,u=k(o?.altPhoneNumber);return k(o?.phoneNumber)+(u?" |"+u:"")},A=e=>new Promise((o,u)=>{let h=(()=>{var _=Se(),B=_.firstChild;return R(()=>T(B,"d",ge?.[e])),_})(),$=h.cloneNode(!0);const w=new XMLSerializer().serializeToString($),y=`data:image/svg+xml;charset=utf-8;base64,${btoa(unescape(encodeURIComponent(w)))}`,f=new Image;f.addEventListener("load",()=>{const _=h.getAttribute("width"),B=h.getAttribute("height"),a=document.createElement("canvas");a.setAttribute("width",_),a.setAttribute("height",B),a.getContext("2d").drawImage(f,0,0,_,B);const I=a.toDataURL("image/png");o(I)}),f.src=y}),ie=async()=>{let e={},o={},u={};const $=["cellphone","receipt","home","open_package_file_outline","user"].map(async n=>{let y=await A(n);ee("icon_"+n,y)});await Promise.all($),i?.manifestObj?.linkedBagsInfo?.map(n=>{if(n?.currentStatus!="YABA_99"){let y=n?.address;n?.isSSG&&(y={streetName:"ANGEL GUERRA",streetNo:"16A",rpto:"PERALTA",betwen:"ESQUINA FOMENTO",city:"HOLGUIN",estate:"HOLGUIN"});let f=P(y),_=n?.cidentity,B=n?.address?.estate,a=n?.address?.city,p=n?.address?.Rpto||n?.address?.rpto;if(u[p]||(u[p]=1),o[a]||(o[a]=1),e[f]||(e[f]={city:a,estate:B,rpto:p,address:y,currentStatus:n?.currentStatus,customers:{},bagsNo:0}),!e[f].customers[_]){let D={name:r(n),phoneNumber:S(n),cid:n?.cidentity,nameshipper:n?.nameshipper},Q={...n,...D};Q.bagsNumb={},e[f].customers[_]=Q}let I={bagnumber:n?.bagnumber,idairguide:n?.guia,tracking:n?.tracking,hbls:n?.hbls};e[f].customers[_].bagsNumb[n?.ssg_track_key]=I,e[f].bagsNo+=1}});let w=await $e(he(e),e);window.open(w)};return(()=>{var e=we(),o=e.firstChild,u=o.firstChild,h=u.firstChild,$=h.nextSibling,w=$.nextSibling,n=w.nextSibling,y=n.firstChild,f=n.nextSibling,_=f.nextSibling,B=o.nextSibling;return s(h,()=>i?.manifestObj?.name),s(u,l(N,{get when(){return i?.manifestObj?.city},get children(){return["|",(()=>{var a=te();return s(a,()=>i?.manifestObj?.city),a})()]}}),$),s(w,()=>i?.manifestObj?.province),n.$$click=()=>{},s(y,l(j,{name:"link",size:22})),_.$$click=ie,s(_,l(j,{name:"printer",size:24,color:"firebrick"})),s(B,l(oe,{fallback:a=>(()=>{var p=Be(),I=p.firstChild,D=I.nextSibling;return D.nextSibling,s(p,()=>a.toString(),D),p})(),get children(){return l(le,{get fallback(){return(()=>{var a=Ne();return a.firstChild,s(a,l(Ee,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){return l(N,{get when(){return i?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(ce,{get each(){return i?.manifestObj?.linkedBagsInfo},children:a=>l(Me,{item:a,get city(){return i?.manifestObj?.city},get manifestObj(){return i?.manifestObj},get isAlready(){return i?.manifestObj?.linkedBags?.[a.ssg_track_key]},setFormsM:d,get mId(){return t?.mId}})})}})}})}})),R(a=>{var p=`/link-manifest?mId=${t?.mId}`,I=` ${C(),"width:86vw;"} margin: 0 auto;`;return p!==a.e&&T(y,"href",a.e=p),a.t=de(B,I,a.t),a},{e:void 0,t:void 0}),e})()}const Me=t=>{const m=()=>{ke(t?.item.street);let c=t?.item?.street.split(",");return c.slice(0,c.length-2).join(",")},i=c=>c?" "+c:"",d=()=>{let c=t?.item?.consigneeInfo;return i(c?.firstName)+i(c?.middleName)+i(c?.lastName)+i(c?.lastName2)},x=async c=>{if(t?.item?.currentStatus!=="99"){let g=fe(O("manifestList"));g[t?.mId].linkedBags[t?.item?.ssg_track_key]&&(delete g[t?.mId].linkedBags[t?.item?.ssg_track_key],ee("manifestList",g),await _e(pe,ve,g)),t?.setFormsM("manifestObj","linkedBags",t?.item?.ssg_track_key,void 0)}};return l(N,{get when(){return t?.manifestObj?.linkedBags[t?.item?.ssg_track_key]},get children(){var c=je(),g=c.firstChild,L=g.firstChild,z=L.firstChild,E=z.nextSibling,M=L.nextSibling,F=M.firstChild,W=F.firstChild,v=g.nextSibling,k=v.firstChild,P=k.nextSibling;return s(c,l(N,{get when(){return C()},get children(){var r=Ae(),S=r.firstChild,A=S.nextSibling;return s(S,d),s(r,l(G,{}),A),A.$$click=x,s(A,l(j,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),r}}),g),s(g,l(N,{get when(){return t?.item?.isSSG},get children(){var r=Ie();return R(()=>T(r,"src",O("SSG.webp"))),r}}),L),s(z,l(j,{name:"open_package_file_outline",size:20})),s(E,()=>t?.item?.bagnumber),s(g,l(N,{get when(){return!C()},get children(){var r=Ce(),S=r.firstChild;return s(S,d),r}}),M),s(g,l(G,{}),M),s(W,()=>t?.item?.idairguide),s(g,l(N,{get when(){return!C()},get children(){var r=Oe();return r.$$click=x,s(r,l(j,{get name(){return t?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return t?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),r}}),null),s(k,m),s(v,l(G,{}),P),s(v,l(N,{get when(){return t?.item?.address?.rpto},get children(){return[(()=>{var r=Le();return s(r,()=>t?.item?.address?.rpto),r})(),"|"]}}),P),s(v,l(N,{get when(){return!t?.city&&t?.item?.address?.city},get children(){var r=te();return s(r,()=>t?.item?.address?.city),r}}),null),R(r=>{var S=`client_item_box gWXAaj jlytmu manifest ${C()?"isMobile":""}`,A=` ${C(),"centerBx"} bottombx flxWrp  centerBx`;return S!==r.e&&K(c,r.e=S),A!==r.t&&K(v,r.t=A),r},{e:void 0,t:void 0}),c}})},tt=async(t,m)=>{let i={params:t,data2update:m},d=X(709002);return i={...i,...d},await Z(i)},Pe=async t=>{let m={...O("manifestList")?.[t?.id]};m||(m=await xe());let i=[],d=m?.linkedBags;return d&&Object.keys(d)?.map(async x=>{if(x){let c=O("manifestByKeys")?.[x];i.push(c)}}),m.linkedBagsInfo=i,m},it=async t=>{let m=[];t.map(i=>{let d={params:{id:i?.ssg_track_key,idairguide:"all"}},x=X(802002);d={...d,...x},m.push(d)}),ue(m,De)},De=async t=>{const i=await Z(t);if(i)return i};me(["click"]);export{et as default,De as fetchCSVInve,it as loadManifest,tt as updLinkedBags};
