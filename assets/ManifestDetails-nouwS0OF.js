const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-DNnK3GdV.js","assets/index-KY5iNI6o.js","assets/index-DI_XrWgU.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-C7CqDF6j.js","assets/SVG-CsVmbTGt.js"])))=>i.map(i=>d[i]);
import{l as T,_ as Q,G as re,c as U,a as H,o as ne,b as ae,d as le,i as r,e as l,S as N,R as ce,F as oe,Q as de,f as R,x as O,z as q,s as me,k as C,g as K,n as J,p as Z,U as ge,r as ue,t as y,W as X,$ as ee,O as he,w as fe,an as _e,aw as Y,aE as ve,ap as pe,aq as be}from"./index-KY5iNI6o.js";import{u as $e}from"./debounces-0rrhWFKC.js";import"./ButonHrm-RcuKhyku.js";import{P as ye}from"./ShowQRPrintLabel-DsfZMJKv.js";import{i as xe,h as we}from"./DashManifest-CxdVDOol.js";import"./Reports-lWPyniyp.js";/* empty css                 */import"./SVG-CsVmbTGt.js";import"./fontkit.es-EBBWtyvd.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-DT87RsK8.js";import"./Toast-C70N2f8w.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-CwGa849n.js";import"./ScanningServices-CldyoCqI.js";import"./parseUpsSta-BuMtR38U.js";var ke=y('<svg viewBox="0 0 56 56"xmlns=http://www.w3.org/2000/svg height=56 width=56><path>'),te=y("<h5>"),Se=y('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),Be=y("<div> <!>."),Ne=y("<div> "),Ae=y('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),Ie=y("<img width=48 height=24 class=picture-profile alt=ssg decoding=async>"),Oe=y('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Ce=y('<div class="icon_status centerBx">'),Le=y("<h5 class=rpto>"),je=y('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const Ee=T(()=>Q(()=>import("./LoadingColorSpinner-DNnK3GdV.js"),__vite__mapDeps([0,1,2,3]))),G=T(()=>Q(()=>import("./FlexSpace-C7CqDF6j.js"),__vite__mapDeps([4,1,2]))),j=T(()=>Q(()=>import("./SVG-CsVmbTGt.js"),__vite__mapDeps([5,1,2])));function et(){const[t,u]=re(),[i,m]=U({search:""}),[x,o]=U(),[d,L]=H(0),[z,E]=U(),[M,W]=H("");$e(W,400),ne(()=>{}),ae(()=>{});const F=async()=>{if(t?.mId&&d()<Y()){L(Y()+7e3);let e={id:t?.mId},c=await Pe(e);m("manifestObj",void 0),o("linked",void 0),m("manifestObj",c),o("linked",{...c?.linkedBags}),i?.province||(m("province",c?.province),m("city",c?.city))}};le(async()=>{xe();let e=[];[33,46,40,41,42,50,52,54,56].map(h=>{let p=h,S=C("M023009")?.whStList?.[p];X?.roles?.[S?.id]?.isActive&&e.push(S)}),E("list",e);let f=[];C("M023009")?.provincias.map(h=>{let p=h.label;X?.roles?.[p]?.isActive&&f.push(h)}),E("prov",f),F()});const v=e=>e||"",w=e=>e?" "+e:"",P=e=>(v(e?.estate)+"_"+v(e?.city)+"_"+v(e?.rpto)+"_"+v(e?.streetName)+"_"+v(e?.streetNo)).toLowerCase(),n=e=>{if(e?.consigneeName)return e?.consigneeName;let c=e?.consigneeInfo;return w(c?.firstName)+w(c?.middleName)+w(c?.lastName)+w(c?.lastName2)},k=e=>{if(e?.ctelephone)return e?.ctelephone;let c=e?.consigneeInfo,f=w(c?.altPhoneNumber);return w(c?.phoneNumber)+(f?" |"+f:"")},A=e=>new Promise((c,f)=>{let h=(()=>{var g=ke(),b=g.firstChild;return R(()=>q(b,"d",ve?.[e])),g})(),p=h.cloneNode(!0);const S=new XMLSerializer().serializeToString(p),s=`data:image/svg+xml;charset=utf-8;base64,${btoa(unescape(encodeURIComponent(S)))}`,_=new Image;_.addEventListener("load",()=>{const g=h.getAttribute("width"),b=h.getAttribute("height"),a=document.createElement("canvas");a.setAttribute("width",g),a.setAttribute("height",b),a.getContext("2d").drawImage(_,0,0,g,b);const B=a.toDataURL("image/png");c(B)}),_.src=s}),ie=async()=>{let e={},c={},f={},h=["cellphone","receipt","home","open_package_file_outline","user","arrowBack","arrow_up","arrow_down","pdf_file_outline","Xclose","keyboard","qrcode-scan","weight-pound"],p={};const S=h.map(async s=>{let _=await A(s);p[s]=_,ee("icon_"+s,_)});await Promise.all(S),console.log(JSON.stringify(p)),i?.manifestObj?.linkedBagsInfo?.map(s=>{if(s?.currentStatus!="YABA_99"){let _=s?.address;s?.isSSG&&(_={streetName:"ANGEL GUERRA",streetNo:"16A",rpto:"PERALTA",betwen:"ESQUINA FOMENTO",city:"HOLGUIN",estate:"HOLGUIN"});let g=P(_),b=s?.cidentity,a=s?.address?.estate,$=s?.address?.city,B=s?.address?.Rpto||s?.address?.rpto;if(f[B]||(f[B]=1),c[$]||(c[$]=1),e[g]||(e[g]={city:$,estate:a,rpto:B,address:_,currentStatus:s?.currentStatus,customers:{},bagsNo:0}),!e[g].customers[b]){let se={name:n(s),phoneNumber:k(s),cid:s?.cidentity,nameshipper:s?.nameshipper},V={...s,...se};V.bagsNumb={},e[g].customers[b]=V}let D={bagnumber:s?.bagnumber,idairguide:s?.guia,tracking:s?.tracking,hbls:s?.hbls};e[g].customers[b].bagsNumb[s?.ssg_track_key]=D,e[g].bagsNo+=1}});let I=await ye(he(e),e);window.open(I)};return(()=>{var e=Se(),c=e.firstChild,f=c.firstChild,h=f.firstChild,p=h.nextSibling,S=p.nextSibling,I=S.nextSibling,s=I.firstChild,_=I.nextSibling,g=_.nextSibling,b=c.nextSibling;return r(h,()=>i?.manifestObj?.name),r(f,l(N,{get when(){return i?.manifestObj?.city},get children(){return["|",(()=>{var a=te();return r(a,()=>i?.manifestObj?.city),a})()]}}),p),r(S,()=>i?.manifestObj?.province),I.$$click=()=>{},r(s,l(j,{name:"link",size:22})),g.$$click=ie,r(g,l(j,{name:"printer",size:24,color:"firebrick"})),r(b,l(de,{fallback:a=>(()=>{var $=Be(),B=$.firstChild,D=B.nextSibling;return D.nextSibling,r($,()=>a.toString(),D),$})(),get children(){return l(ce,{get fallback(){return(()=>{var a=Ne();return a.firstChild,r(a,l(Ee,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){return l(N,{get when(){return i?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(oe,{get each(){return i?.manifestObj?.linkedBagsInfo},children:a=>l(Me,{item:a,get city(){return i?.manifestObj?.city},get manifestObj(){return i?.manifestObj},get isAlready(){return i?.manifestObj?.linkedBags?.[a.ssg_track_key]},setFormsM:m,get mId(){return t?.mId}})})}})}})}})),R(a=>{var $=`/link-manifest?mId=${t?.mId}`,B=` ${O(),"width:86vw;"} margin: 0 auto;`;return $!==a.e&&q(s,"href",a.e=$),a.t=me(b,B,a.t),a},{e:void 0,t:void 0}),e})()}const Me=t=>{const u=()=>{let o=t?.item?.street.split(",");return o.slice(0,o.length-2).join(",")},i=o=>o?" "+o:"",m=o=>{if(o?.consigneeName)return o?.consigneeName;let d=o?.consigneeInfo;return i(d?.firstName)+i(d?.middleName)+i(d?.lastName)+i(d?.lastName2)},x=async o=>{if(t?.item?.currentStatus!=="99"){let d=fe(C("manifestList"));d[t?.mId].linkedBags[t?.item?.ssg_track_key]&&(delete d[t?.mId].linkedBags[t?.item?.ssg_track_key],ee("manifestList",d),await _e(be,pe,d)),t?.setFormsM("manifestObj","linkedBags",t?.item?.ssg_track_key,void 0)}};return l(N,{get when(){return t?.manifestObj?.linkedBags[t?.item?.ssg_track_key]},get children(){var o=je(),d=o.firstChild,L=d.firstChild,z=L.firstChild,E=z.nextSibling,M=L.nextSibling,W=M.firstChild,F=W.firstChild,v=d.nextSibling,w=v.firstChild,P=w.nextSibling;return r(o,l(N,{get when(){return O()},get children(){var n=Ae(),k=n.firstChild,A=k.nextSibling;return r(k,()=>m(t?.item)),r(n,l(G,{}),A),A.$$click=x,r(A,l(j,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),n}}),d),r(d,l(N,{get when(){return t?.item?.isSSG},get children(){var n=Ie();return R(()=>q(n,"src",C("SSG.webp"))),n}}),L),r(z,l(j,{name:"open_package_file_outline",size:20})),r(E,()=>t?.item?.bagnumber),r(d,l(N,{get when(){return!O()},get children(){var n=Oe(),k=n.firstChild;return r(k,()=>m(t?.item)),n}}),M),r(d,l(G,{}),M),r(F,()=>t?.item?.idairguide),r(d,l(N,{get when(){return!O()},get children(){var n=Ce();return n.$$click=x,r(n,l(j,{get name(){return t?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return t?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),n}}),null),r(w,u),r(v,l(G,{}),P),r(v,l(N,{get when(){return t?.item?.address?.rpto},get children(){return[(()=>{var n=Le();return r(n,()=>t?.item?.address?.rpto),n})(),"|"]}}),P),r(v,l(N,{get when(){return!t?.city&&t?.item?.address?.city},get children(){var n=te();return r(n,()=>t?.item?.address?.city),n}}),null),R(n=>{var k=`client_item_box gWXAaj jlytmu manifest ${O()?"isMobile":""}`,A=` ${O(),"centerBx"} bottombx flxWrp  centerBx`;return k!==n.e&&K(o,n.e=k),A!==n.t&&K(v,n.t=A),n},{e:void 0,t:void 0}),o}})},tt=async(t,u)=>{let i={params:t,data2update:u},m=J(709002);return i={...i,...m},await Z(i)},Pe=async t=>{let u={...C("manifestList")?.[t?.id]};u||(u=await we());let i=[],m=u?.linkedBags;return m&&Object.keys(m)?.map(async x=>{if(x){let o=C("manifestByKeys")?.[x];i.push(o)}}),u.linkedBagsInfo=i,u},it=async t=>{let u=[];t.map(i=>{let m={params:{id:i?.ssg_track_key,idairguide:"all"}},x=J(802002);m={...m,...x},u.push(m)}),ge(u,De)},De=async t=>{const i=await Z(t);if(i)return i};ue(["click"]);export{et as default,De as fetchCSVInve,it as loadManifest,tt as updLinkedBags};
