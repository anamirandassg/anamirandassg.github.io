import{k as L,u as Q,c as B,a as f,h as V,o as Z,m as J,i as s,d,f as h,e as X,t as v,s as T,S as $,F as ee,g as te,n as re}from"./index-DLm-qbVb.js";import ae from"./InputHr-CzkegoSq.js";import{f as U,a as G,O as se,g as ne}from"./Util-R0w8Fgio.js";import _ from"./SVG-DMQC_3si.js";import{s as R,b as ie,c as le}from"./manifestList-CSHEgbpJ.js";import"./index-Ci0zXM0r.js";let oe={webp:"image/webp",jpg:"image/jpg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",ts:"video/MP2T",m3u8:"application/x-mpegURL",mp4:"video/MP4",m4a:"audio/MP4",webm:"video/webm",weba:"audio/webm",m4s:"text/plain",txt:"text/plain",srt:"text/plain",vtt:"text/plain",js:"application/javascript; charset=UTF-8",css:"text/css; charset=utf-8",mpd:"video/vnd.mpeg.dash.mpd",aac:"audio/aac",mp3:"audio/mpeg",wav:"audio/wav",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pdf:"application/pdf","7z":"application/x-7z-compressed",zip:"application/zip",xml:"application/xml",json:"application/json",html:"text/html; charset=UTF-8"};const ce=t=>t&&t.split(".").pop().toLowerCase(),de=t=>{let n=ce(t);return oe[n]},pe=async(t,n)=>{let p=await(await fetch(t)).blob();return n&&(p=p.slice(0,p.size,n)),URL.createObjectURL(p)},ge=async t=>{let n={query:"getSignedUrl",params:{fileName:t}};var e;return L()?e=await U(n):e=(await G(n))?.data,e?.url?e:null},ue=async t=>{let n=de(t);var e=await ge(t);console.log(e);var p=await pe(e?.url,n);return p};var me=v('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),ve=v('<div class="_dsplFlx flxWrp spaceAround centerBx"style=padding-top:50px><div class="_dsplFlx flxWrp spaceAround centerBx"><div></div><div class="_dsplFlx bottombx"><h4> </h4><div class=vertseparator></div><h5>'),fe=v('<div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:50px><div class=" bottombx"><div class="_dsplFlx bottombx spaceAround centerBx"><h5>Estado del envio: </h5><h4></h4></div><h4> '),xe=v('<div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:50px><img alt=sf style=width:320px>'),be=v('<div><div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:50px><div><div></div><div class="_dsplFlx bottombx lowbordr spaceAround"><h5>'),he=v('<div class="icon_status centerBx">'),_e=v('<div class="icon_status centerBx trackFade">'),ye=v('<div class="icon_status centerBx ">');function Pe(){const[t,n]=Q(),[e,p]=B();B({lbs:"",price:0});const[O,W]=B({}),[Y,q]=f(""),[w,F]=f(!1);f();const[S,D]=f(""),[$e,P]=f(""),[I,E]=f("");f(""),V(()=>{}),Z(()=>{}),J(()=>{t?.id&&j(t?.id)});const M=(g,i)=>{D(i),P(g),setTimeout(()=>{P("")},300)},N=g=>{E(g),setTimeout(()=>{E("")},3e3)},j=async g=>{let i=g,y="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const b=new RegExp(y);let x=i?.length===13&&b?.test(i),A="^[0-9]{4}-[1-9]{4}";const r=new RegExp(A);let c=i.length===9&&r.test(i),l={};if(c&&(l={idairguide:"175-2383"+i.slice(0,4),":tracking":i}),x&&(l={idairguide:"175-2383"+i?.slice(3,7),":tracking":i}),x||c){let a=await ke(l),o=se(a)?.[0];if(a?.[o]){if(console.log(a?.[o]),a?.[o]?.currentStatus==="YABA_99"&&a?.[o]?.deliveryProof){let u=await ue(a?.[o]?.deliveryProof);a[o].deliveryProofBlob=u}p("tracking",a?.[o]),F(!0),n({id:i})}}else M("","error"),W({consigneeInfo:{ybestate:"Codigo Incorrecto"}}),N(ne())};let C={error:{"--err-bx-color":"var(--background-red-ssg)","--err-bx-bgcolor":"var(--background-red35-ssg)",svg:"var(--err-bx-color)",icon:"alert"},success:{"--err-bx-color":"var(--hrm-palette-tertiary60)","--err-bx-bgcolor":"var(--hrm-palette-tertiary90)",svg:"var(--err-bx-color)",icon:"success"},warning:{"--err-bx-color":"#FF6F1D","--err-bx-bgcolor":"#ffdb99",svg:"var(--err-bx-color)",icon:"info"}},H=Array.from(Array(8).keys());return(()=>{var g=be(),i=g.firstChild,y=i.firstChild,b=y.firstChild,x=b.nextSibling,A=x.firstChild;return s(b,d($,{get when(){return I()},get children(){var r=me(),c=r.firstChild,l=c.nextSibling;return s(c,d(_,{get name(){return C?.[S()]?.icon},size:32,get color(){return C?.[S()]?.svg}})),s(l,()=>O?.consigneeInfo?.ybestate),h(a=>T(r,C?.[S()],a)),r}})),s(y,d($,{get when(){return!w()},get children(){return d(ae,{width:"250px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return Y()},placeholder:"Numero de envio ...",colors:"#2b2b2b",handleClick:q,onEnter:j})}}),x),x.$$click=()=>F(!1),s(A,()=>w()?"Rastrear otro numero de envio":"Escriba su numero de envio"),s(g,d($,{get when(){return w()&&e?.tracking},get children(){return[(()=>{var r=ve(),c=r.firstChild,l=c.firstChild,a=l.nextSibling,o=a.firstChild,u=o.firstChild,k=o.nextSibling,K=k.nextSibling;return s(c,d(ee,{each:H,children:z=>R[e?.tracking?.currentStatus]!==0&&z===0?(()=>{var m=he();return s(m,d(_,{name:"market",size:32,color:"var(--hrm-palette-neutral-variant30)"})),m})():z===R[e?.tracking?.currentStatus]?(()=>{var m=_e();return s(m,d(_,{get name(){return ie?.[e?.tracking?.currentStatus]},size:32,color:"var(--background-red-ssg)"})),m})():(()=>{var m=ye();return s(m,d(_,{name:"radio_unchecked",size:16,color:"var(--hrm-palette-neutral-variant30)"})),m})()}),l),s(l,d(_,{name:"map-marker-radius-outline",size:32,get color(){return e?.tracking?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--hrm-palette-neutral-variant30)"}})),s(o,()=>e?.tracking?.consigneeInfo?.ybestate,u),s(K,()=>e?.tracking?.consigneeInfo?.ybcity),h(()=>te(l,`icon_status centerBx ${e?.tracking?.currentStatus==="YABA_99"?"trackFade":""} `)),r})(),(()=>{var r=fe(),c=r.firstChild,l=c.firstChild,a=l.firstChild,o=a.nextSibling,u=l.nextSibling;return u.firstChild,s(o,()=>e?.tracking?.tracking),s(u,()=>le?.[e?.tracking?.currentStatus],null),h(k=>(k=e?.tracking?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)")!=null?u.style.setProperty("color",k):u.style.removeProperty("color")),r})(),d($,{get when(){return e?.tracking?.deliveryProofBlob},get children(){var r=xe(),c=r.firstChild;return h(()=>re(c,"src",e?.tracking?.deliveryProofBlob)),r}})]}}),null),h(r=>T(b,`padding: 15px 0px; margin: 0 auto; display: ${I()?"block":"none"};`,r)),g})()}const ke=async t=>{let n={params:t,query:"getScanLogisticYabaExpress",queryString:"tracking contain :tracking",fldsQry:["agency","idairguide","currentStatus","cidentity","ssg_track_key","tracking","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryProof"]};return L()?await U(n):(await G(n))?.data};X(["click"]);export{Pe as default};
