const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SVG-DA0qcDfW.js","assets/index-DalxLeX-.js","assets/index-DGHHyjai.css","assets/index-Ci0zXM0r.js","assets/FlexSpace-Io3eLPN9.js"])))=>i.map(i=>d[i]);
import{l as C,_ as k,a as y,o as D,m as I,i as b,d as _,f as $,e as A,t as T,k as N,g as q}from"./index-DalxLeX-.js";import{H as G,a as L}from"./html5-qrcode-scanner-Cl8XE5pu.js";import"./DashManifest-AEl5ud4J.js";import"./ManifestDetails-Cg15n8js.js";import"./DialogHRM-C648h9JN.js";import{g as w,i as M}from"./globalSignal-CoKJvBMs.js";import{a as O,u as Q,b as B,f as j}from"./Util-lKJTlLtD.js";import"./DeliveryView-CskX1tKW.js";import{s as H}from"./DeliveryScanView-BqoHs1Gh.js";import"./index-Ci0zXM0r.js";import"./App.module-CbHnVtRQ.js";import"./debounces-BNATug6V.js";import"./ButonHrm-D7B_HCVT.js";/* empty css                 */import"./SVG-DA0qcDfW.js";import"./browser-image-compression-BVJ4p9S0.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./Toast-BG6BiJ-l.js";import"./components-CgNr51Kk.js";var V=T('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:300px>');const Z=C(()=>k(()=>import("./SVG-DA0qcDfW.js"),__vite__mapDeps([0,1,2,3]))),z=C(()=>k(()=>import("./FlexSpace-Io3eLPN9.js"),__vite__mapDeps([4,1,2])));function fe(n){const[s,g]=y(""),[m,l]=y(""),[x,v]=y();D(()=>{O("cameraScanDelivery")?.clear()}),I(()=>{setTimeout(()=>{R()},90)});const S=(e,r)=>{e!==x()&&(v(e),setTimeout(()=>{v("")},3e3),E(e))},E=e=>{e||(e=s()),e=e.split("'").join("-"),new Date().getTime(),w?.latitude,w?.longitude,n?.status,N?.profile?.userId;let r=e.split("/");e.split("-").length>3&&(r=e.split("-").join);let t=r?.[0];t.indexOf("2300")===0&&(t="2300"+(t.split("2300")?.[1]).slice(0,5));let o="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const a=new RegExp(o);let c=t.length===13&&a.test(t),h="^[0-9]{4}-[1-9]{4}";const u=new RegExp(h);let i=t.length===9&&u.test(t),f=r.length>4&&t.length===12,p={idairguide:r?.[0],":search0":r?.[1],":search1":r?.[3]};c&&(p={idairguide:"175-2383"+t.slice(3,7),":search0":t}),i&&(p={idairguide:"175-2383"+t.slice(0,4),":search0":t}),c||f||i?P(p):(l("alert"),setTimeout(()=>{l("")},1800))},P=async e=>{let r=await F(e),t=Object.keys(r)?.[0];if(r[t]?.cidentity){let o=r[t]?.cidentity,a=r[t]?.ssg_track_key,c={...n?.item};c?.customers?.[o]?.bagsNumb?.[a]?(l("success"),H(o,{[a]:"ST200"})):l("alert"),setTimeout(()=>{l("")},1800),c?.customers?.[o]?.bagsNumb?.[a],n?.callback(r[t])}else l("alert"),setTimeout(()=>{l("")},1800)},R=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[G.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},r=new L("qr-reader_SSDM",e);r.render(S),Q("cameraScanDelivery",r)};return(()=>{var e=V(),r=e.firstChild,t=r.firstChild,o=t.firstChild,a=o.nextSibling,c=r.nextSibling,h=c.firstChild,u=h.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),o.$$click=S,b(t,_(z,{}),a),a.$$click=()=>{},b(a,_(Z,{name:"keyboard",size:32,color:"#2b2b2b"})),$(i=>{var f=M()?"92vw":"420px",p=`scanOverlay ${m()} `,d=m()?"block":"none";return f!==i.e&&((i.e=f)!=null?e.style.setProperty("width",f):e.style.removeProperty("width")),p!==i.t&&q(u,i.t=p),d!==i.a&&((i.a=d)!=null?u.style.setProperty("display",d):u.style.removeProperty("display")),i},{e:void 0,t:void 0,a:void 0}),e})()}const ge=n=>{let s=n,g="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const m=new RegExp(g);return s.length===13&&m.test(s)&&(s=s.slice(3,12)),s},F=async n=>{let s={params:n},g=B(802001);return s={...s,...g},await j(s)};A(["click"]);export{fe as default,ge as parseTrcking};
