const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FlexSpace-BPCicj0R.js","assets/index-Cv4YO0m0.js","assets/index-ALtnuvRO.css","assets/SVG-DEKs_P2n.js","assets/Util-Df9CfxGL.js","assets/LoadingColorSpinner-BAAKBS0B.js","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-dD_OsbXE.js","assets/InputHr-M3rJ9grQ.css","assets/ButonHrm-D26AmRp8.js","assets/ButonHrm-BSeWNUGQ.css"])))=>i.map(i=>d[i]);
import{l as I,_ as k,c as D,a as y,o as X,k as Y,b as U,i as g,d as b,F as A,S as j,j as Z,e as Q,s as T,n as tt,h as et,t as x}from"./index-Cv4YO0m0.js";import{O as E,c as B,f as st,j as rt,i as ct,E as C,b as F}from"./Util-Df9CfxGL.js";import"./DialogHRM-BWVWEPWN.js";import"./PDFButton-BDIa4If0.js";import"./fontkit.es-6TA5hJ2T.js";import"./qrcode-DHy8FFhS.js";import{OpenToast as J}from"./Toast-DwNaU0FC.js";import{g as L,a as R}from"./handelImagesServices-DDsbkudd.js";import"./DashInventoryMov-bepEaS6a.js";import"./browser-image-compression-BVJ4p9S0.js";var it=x('<div style="padding:50px 0 0 0"><section class=qsuVSc><section class=bLl6je><section class="dvPdhb ">'),lt=x('<section class="h6rxkc ">'),at=x('<section class="rtS8wf InvE"><div class=X3QHFf><section class=WirBi><section class=""><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),nt=x('<section class="kGEQJf "><section class="Z722Ge InvE"><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty: <span class=h5M7vb></span></span></section><p class=GehUpe data-test-line-item-price=""> </p><section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remover'),ot=x("<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe>");I(()=>k(()=>import("./FlexSpace-BPCicj0R.js"),__vite__mapDeps([0,1,2])));const V=I(()=>k(()=>import("./SVG-DEKs_P2n.js"),__vite__mapDeps([3,1,2,4])));I(()=>k(()=>import("./LoadingColorSpinner-BAAKBS0B.js"),__vite__mapDeps([5,1,2,6])));const G=I(()=>k(()=>import("./InputHr-dD_OsbXE.js"),__vite__mapDeps([7,1,2,8])));I(()=>k(()=>import("./ButonHrm-D26AmRp8.js"),__vite__mapDeps([9,1,2,3,4,10])));const[q,w]=D({items:{}}),v="348723orh2idsffs";function xt(){y(0);const[t,r]=y("");X(()=>{}),Y(()=>{}),U(()=>{e()});const e=async()=>{(await ft())?.map(a=>{w("items",a.doc)})};return(()=>{var s=it(),a=s.firstChild,h=a.firstChild,n=h.firstChild;return g(n,b(j,{get when(){return E(q?.items?.products)},get children(){return b(A,{get each(){return E(q?.items?.products)},children:(u,o)=>b(ut,{get itm(){return q?.items?.products?.[u]}})})}})),g(a,b(dt,{updSearch:r}),null),s})()}const dt=t=>{const[r,e]=y(""),[s,a]=y(1),h=()=>{s()===1&&r().length>8&&n(r())},n=async l=>{let c=`${l}`,d=await O(c),i=E(d)?.[0],p=1,f=await H(v)||{};f?.products?.[i]&&(p=f?.products?.[i].qty*1+1);let m=f;if(f?.products||(m.products={},m._id=v),f?.products?.[i])m.products[i].qty=p;else{let $={product:{id:i,label:d?.[i]?.name,code:d?.[i]?.code},qty:p};m.products[i]=$}C.put(m,function(S,P){}),w("items",m),e(""),J({text:d?.[i]?.name+" agregado al inventario",timeout:3500,theme:"blue",id:F()})},[u,{refetch:o}]=Z(r,async l=>{if(s()===2&&l.length>4){const c=await O(l);let d=[];return E(c).map(i=>{let p=c[i];d.push(p)}),d}else return[]}),_=()=>{e(""),a(1)};return(()=>{var l=at(),c=l.firstChild,d=c.firstChild,i=d.firstChild,p=i.firstChild,f=p.firstChild,m=f.nextSibling;return g(i,b(j,{get when(){return u()?.length>0},get children(){var $=lt();return g($,b(A,{get each(){return u()},children:(S,P)=>b(mt,{itm:S,clearTx:_})})),$}}),p),g(p,b(G,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return r()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:e,onEnter:h}),f),f.$$click=()=>a(1),g(f,b(V,{name:"qrcode-scan",size:22,get color(){return s()===1?"#646cff":""}})),m.$$click=()=>a(2),g(m,b(V,{name:"keyboard",size:22,get color(){return s()===2?"#646cff":""}})),l})()},ut=t=>{const[r,e]=D(),s=()=>r?.[t?.itm?.product?.id]?.productImageUrl?L()+R()+"/"+r?.[t?.itm?.product?.id]?.productImageUrl:null,a=async()=>{let n=t?.itm?.product?.id,u=`${n}`,o=await O(u);o?.[n]?.productImageUrl&&e(n,o?.[n])};U(()=>{a()});const h=()=>{C.get(v,function(u,o){let _={...o};delete _.products[t?.itm?.product?.id],C.put(_,function(c,d){c||w("items","products",t?.itm?.product?.id,void 0)})})};return(()=>{var n=nt(),u=n.firstChild,o=u.firstChild,_=o.firstChild,l=_.firstChild,c=l.firstChild,d=l.nextSibling,i=d.firstChild,p=i.firstChild,f=p.firstChild;f.firstChild;var m=i.nextSibling,$=m.firstChild,S=$.firstChild,P=S.firstChild,M=P.nextSibling,z=$.nextSibling,K=z.nextSibling,N=K.firstChild,W=N.firstChild;return g(f,()=>t?.itm?.product?.label,null),g(M,()=>t?.itm?.qty),W.$$click=h,Q(()=>T(c,"src",s())),n})()},O=async(t,r)=>{let e={params:{businessId:tt?.profile?.businessYId}};t&&t.split(" ").map((h,n)=>{h&&(e.params[":search"+n]=h.trim())});let s=B(122001);e={...e,...s},e.params[":search0"];const a=await st(e);return a?.error?{}:a},St=async t=>{let r=[];t.map(e=>{let s={params:{id:e?.ssg_track_key,idairguide:"all"}},a=B(802002);s={...s,...a},r.push(s)}),rt(r,pt)},pt=async t=>{const e=await ct(t);if(e)return e},ft=()=>new Promise((t,r)=>{C.allDocs({include_docs:!0,descending:!0},function(e,s){t(s.rows)})}),mt=t=>{const[r,e]=D(),[s,a]=y(""),h=()=>r?.prod?.productImageUrl?L()+R()+"/"+r?.prod?.productImageUrl:null;U(()=>{e("prod",t?.itm)}),Array.from(Array(10).keys());const n=async()=>{let u=s()*1,o=r?.prod?.ssg_product_key,_=u,l=await H(v)||{};l?.products?.[o]&&(_=l?.products?.[o].qty+u);let c=l;if(l?.products||(c.products={},c._id=v),l?.products?.[o])c.products[o].qty=_;else{let d={product:{id:o,label:t?.itm?.name,code:t?.itm?.code},qty:_};c.products[o]=d}C.put(c,function(i,p){}),w("items",c),t?.clearTx(),J({text:" El inventario fue actualizado",timeout:3500,theme:"blue",id:F()})};return(()=>{var u=ot(),o=u.firstChild,_=o.firstChild,l=_.firstChild,c=l.firstChild,d=c.firstChild,i=c.nextSibling,p=i.firstChild,f=p.firstChild,m=f.firstChild;m.firstChild;var $=p.nextSibling;return g(m,()=>t?.itm?.name,null),g($,b(G,{width:"90px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return s()},placeholder:"Cantidad",colors:"#2b2b2b",handleClick:a,onEnter:n})),Q(()=>T(d,"src",h())),u})()},H=t=>new Promise((r,e)=>{C.get(t,function(a,h){r(h)})});et(["click"]);export{O as LookupProducts,xt as default,pt as fetchCSVInve,H as getCartId,q as inventoryItems,v as inventoryKey,ft as loadCarts,St as loadProduct,w as setInventoryItems};
