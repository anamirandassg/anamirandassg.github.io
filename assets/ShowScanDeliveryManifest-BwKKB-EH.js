const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SVG-BW6QhIiY.js","assets/index-C00_OLez.js","assets/index-D4QuRvi-.css","assets/index-Ci0zXM0r.js","assets/FlexSpace-q9WRaCIR.js"])))=>i.map(i=>d[i]);
import{l as C,_ as k,a as h,o as I,m as $,i as b,d as _,f as A,e as q,t as T,j as N,g as G}from"./index-C00_OLez.js";import{H as L,a as M}from"./html5-qrcode-scanner-Cl8XE5pu.js";import"./DashManifest-ttH1nXha.js";import"./ManifestDetails-odTAFjFI.js";import"./DialogHRM-ZpNCmB6p.js";import{g as w,i as j}from"./globalSignal-CkA2Fmx-.js";import{a as x,u as B,f as O,q as Q}from"./Util-Ho0G8bBr.js";import"./DeliveryView-DtGaTfAx.js";import{setStatusD as H}from"./DeliveryScanView-0YtRAd9T.js";import"./index-Ci0zXM0r.js";import"./App.module-CbHnVtRQ.js";import"./debounces-u_L6jv2g.js";import"./ButonHrm-COuFiiLd.js";/* empty css                 */import"./SVG-BW6QhIiY.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./Toast-CTSK7i1e.js";var V=T('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:300px>');const Z=C(()=>k(()=>import("./SVG-BW6QhIiY.js"),__vite__mapDeps([0,1,2,3]))),z=C(()=>k(()=>import("./FlexSpace-q9WRaCIR.js"),__vite__mapDeps([4,1,2])));function me(n){const[s,f]=h(""),[d,l]=h(""),[E,v]=h();I(()=>{x("cameraScanDelivery")?.clear()}),$(()=>{setTimeout(()=>{D()},90)});const S=(e,t)=>{e!==E()&&(v(e),setTimeout(()=>{v("")},3e3),P(e))},P=e=>{e||(e=s()),e=e.split("'").join("-"),new Date().getTime(),w?.latitude,w?.longitude,n?.status,N?.profile?.userId;let t=e.split("/");e.split("-").length>3&&(t=e.split("-").join);let r=t?.[0],o="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const a=new RegExp(o);let c=r.length===13&&a.test(r),y="^[0-9]{4}-[1-9]{4}";const m=new RegExp(y);let i=r.length===9&&m.test(r),u=t.length>4&&r.length===12,p={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};c&&(p={idairguide:"175-2383"+r.slice(3,7),":search0":r}),i&&(p={idairguide:"175-2383"+r.slice(0,4),":search0":r}),c||u||i?R(p):(l("alert"),setTimeout(()=>{l("")},1800))},R=async e=>{let t=await F(e),r=Object.keys(t)?.[0];if(t[r]?.cidentity){let o=t[r]?.cidentity,a=t[r]?.ssg_track_key,c={...n?.item};c?.customers?.[o]?.bagsNumb?.[a]?(l("success"),H(o,{[a]:"ST200"})):l("alert"),setTimeout(()=>{l("")},1800),c?.customers?.[o]?.bagsNumb?.[a],n?.callback(t[r])}else l("alert"),setTimeout(()=>{l("")},1800)},D=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[L.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},t=new M("qr-reader_SSDM",e);t.render(S),B("cameraScanDelivery",t)};return(()=>{var e=V(),t=e.firstChild,r=t.firstChild,o=r.firstChild,a=o.nextSibling,c=t.nextSibling,y=c.firstChild,m=y.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),o.$$click=S,b(r,_(z,{}),a),a.$$click=()=>{},b(a,_(Z,{name:"keyboard",size:32,color:"#2b2b2b"})),A(i=>{var u=j()?"92vw":"420px",p=`scanOverlay ${d()} `,g=d()?"block":"none";return u!==i.e&&((i.e=u)!=null?e.style.setProperty("width",u):e.style.removeProperty("width")),p!==i.t&&G(m,i.t=p),g!==i.a&&((i.a=g)!=null?m.style.setProperty("display",g):m.style.removeProperty("display")),i},{e:void 0,t:void 0,a:void 0}),e})()}const ue=n=>{let s=n,f="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const d=new RegExp(f);return s.length===13&&d.test(s)&&(s=s.slice(3,12)),s},F=async n=>{let s={params:n},f={...x(Q())}[802001];return s={...s,...f},await O(s)};q(["click"]);export{me as default,ue as parseTrcking};
