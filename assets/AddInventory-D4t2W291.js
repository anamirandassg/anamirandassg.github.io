const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SVG-BG3n_bzG.js","assets/index-rYb7uL3-.js","assets/index-NFdrrltd.css","assets/index-Ci0zXM0r.js","assets/InputHr-DjpmCi5U.js","assets/InputHr-M3rJ9grQ.css","assets/ButonHrm-Bi0S8p4s.js","assets/Util-DErZaF9J.js","assets/ButonHrm-BSeWNUGQ.css","assets/DropDwnFetchSearch-D3RJ9X2c.js","assets/debounces-D86tEGjW.js","assets/DropDwnSearch-DMkLkRPc.css"])))=>i.map(i=>d[i]);
import{l as _,_ as g,c as M,a as w,m as re,i as o,d as i,f as te,e as le,t as m,v as oe,j as ie,S as h,F as se,k as B}from"./index-rYb7uL3-.js";import{i as de}from"./globalSignal-BFrObJU0.js";import{a as ae,g as V,b as ne,f as ce}from"./Util-DErZaF9J.js";import{CloseModal as be}from"./DialogHRM-BU1Zi4n8.js";import{u as pe}from"./debounces-D86tEGjW.js";import{LookupProducts as ue}from"./DashProducts-Db7bZIf9.js";import O from"./FlexSpace-r3Vz7tHV.js";import"./index-Ci0zXM0r.js";import"./App.module-CbHnVtRQ.js";var R=m("<div style=padding:4px>"),ve=m('<div style="margin:15px 0"class=" spaceAround centerBx">'),fe=m('<div><div><div class="_dsplFlx flxWrp spaceAround "><div><div class="_dsplFlx bottombx lowbordr"><h5>Entrada</h5></div></div><div class="_dsplFlx bottombx "></div></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><div style=padding:4px></div><div style=padding:4px></div><div style=padding:4px></div><div class=hseparator></div><div style=padding:4px>'),he=m('<div class="bottombx centerBx unit"><div class=tr_bar_50><h5></h5></div><div class="bottombx centerBx unit tr_bar_20"><h5>Cantidad:</h5><div class=bag_number><h5></h5></div></div><div class="bottombx centerBx unit tr_bar_20"><h5>Precio:</h5><div class=unitBx><h5>$</h5></div></div><div class="icon_status centerBx tr_bar_10">');const _e=_(()=>g(()=>import("./SVG-BG3n_bzG.js"),__vite__mapDeps([0,1,2,3]))),p=_(()=>g(()=>import("./InputHr-DjpmCi5U.js"),__vite__mapDeps([4,1,2,5]))),T=_(()=>g(()=>import("./ButonHrm-Bi0S8p4s.js"),__vite__mapDeps([6,1,2,0,3,7,8]))),ge=_(()=>g(()=>import("./DropDwnFetchSearch-D3RJ9X2c.js"),__vite__mapDeps([9,1,2,10,0,3,11])));function De(x){const[u,a]=M(),[l,d]=M({invoice:"",seller:"",description:""}),[xe,L]=w(""),[y,S]=w(null),[c,P]=w([]),W=pe(L,400),b=(r,t)=>{d({[r]:t}),W(V())},H=async r=>{let t={invoice:l?.invoice,seller:l?.seller,description:l?.description,products:c()};await me(t),be(x?.modalId)};re(()=>{let r=[];ae("M023009")?.provincias.map(t=>{let s=t.label;oe?.roles?.[s]?.isActive&&r.push(t)}),a("prov",r)});const j=async r=>{let t=await ue(r),s=[];return Object.keys(t).map(n=>{s.push({id:n,label:t[n]?.name,code:t[n]?.code})}),s},z=async r=>{let t={product:y(),qty:l?.qty,price:l?.price};P([...c(),t]),d({qty:0}),d({price:0}),S(null)},Q=r=>{P(t=>t.filter((s,n)=>s.product.id!==r))};return(()=>{var r=fe(),t=r.firstChild,s=t.firstChild,n=s.firstChild,Y=n.nextSibling,C=s.nextSibling,A=C.firstChild,I=A.nextSibling,D=I.nextSibling,G=D.nextSibling,J=G.nextSibling;return r.style.setProperty("height","clamp(60vh, 70vh, 80vh)"),r.style.setProperty("overflow","auto"),r.style.setProperty("background","#ffffff"),r.style.setProperty("border-radius","13"),r.style.setProperty("padding","10px 19px"),o(Y,i(h,{get when(){return ie(()=>!!(l?.invoice&&l?.seller))()&&c()?.length>0},get children(){return i(T,{color:"#047db7ff",icon:"save",label:"Salvar",handleClick:H})}})),C.style.setProperty("padding","16px"),o(A,i(p,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return l?.invoice},placeholder:"Factura",colors:"#2b2b2b",handleClick:e=>b("invoice",e)})),o(I,i(p,{width:"360px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return l?.seller},placeholder:"Vendedor",colors:"#2b2b2b",handleClick:e=>b("seller",e)})),o(D,i(p,{width:"460px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return l?.description},placeholder:"Descripcion",colors:"#2b2b2b",handleClick:e=>b("description",e)})),o(J,i(ge,{callback:j,lbl_empty:"Productos",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",borderColor:"#b2b2b2",get value(){return y()},hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:S,width:"360px"})),o(C,i(h,{get when(){return y()?.id},get children(){return[(()=>{var e=R();return o(e,i(p,{width:"130px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return l?.qty},placeholder:"Cantidad",colors:"#2b2b2b",handleClick:v=>b("qty",v)})),e})(),(()=>{var e=R();return o(e,i(p,{width:"130px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return l?.price},placeholder:"Precio",colors:"#2b2b2b",handleClick:v=>b("price",v)})),e})(),i(h,{get when(){return l?.price&&l?.qty},get children(){var e=ve();return o(e,i(T,{color:"#041e49ff",icon:"plus",label:"Agregar",handleClick:z})),e}})]}}),null),o(t,i(h,{get when(){return c()},get children(){return i(se,{get each(){return c()},children:(e,v)=>(()=>{var f=he(),E=f.firstChild,K=E.firstChild,$=E.nextSibling,N=$.firstChild,U=N.nextSibling,X=U.firstChild,k=$.nextSibling,Z=k.firstChild,ee=Z.nextSibling,F=ee.firstChild;F.firstChild;var q=k.nextSibling;return o(K,()=>e?.product?.label),o(f,i(O,{}),$),o(X,()=>(e?.qty*1).toFixed(2)),o(f,i(O,{}),k),o(F,()=>(e?.price*1).toFixed(2),null),q.$$click=()=>Q(e?.product?.id),o(q,i(_e,{name:"outline_delete",size:24})),f})()})}}),null),te(e=>(e=de()?"96vw":"920px")!=null?r.style.setProperty("width",e):r.style.removeProperty("width")),r})()}const me=async x=>{let u={ssg_inventory_key:V(),createDate:new Date().getTime(),businessId:B?.profile?.businessYId};u={...x,...u};let a={params:{businessId:B?.profile?.businessYId},form:u},l=ne(139003);a={...a,...l};const d=await ce(a);return console.log(a),console.log(d),d?.data?.error?{}:d?.data};le(["click"]);export{De as default};
