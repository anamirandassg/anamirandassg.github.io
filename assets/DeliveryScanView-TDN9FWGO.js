const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-mZMTLJ5Y.js","assets/index-WdQUpnA8.js","assets/index-DGSEMnLR.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/Item2Delivery-IEVc8eSz.js","assets/ContainerElasticView-LzOd6fDI.css","assets/SVG-BQYfoCtp.js","assets/FlexSpace-D_GvX28x.js"])))=>i.map(i=>d[i]);
import{c as Y,l as R,_ as L,a as T,ab as le,u as oe,X as ce,k as de,p as K,q as U,i as t,d as r,f as G,e as X,t as f,j,O as C,S as k,z as J,F as ee,G as te,h as N,g as z,s as ue,x as re,C as ge,a5 as ie,T as me,D as W,n as ve,o as pe}from"./index-WdQUpnA8.js";import{H as he,a as _e}from"./html5-qrcode-scanner-Ef-4PXXV.js";import"./DashManifest-BNVM9tiw.js";import"./ManifestDetails-CXzWSPn9.js";import{OpenModal as be}from"./DialogHRM-C7gpyLkv.js";import{stop2Deliver as g}from"./DeliveryView-BysuVayQ.js";import{g as fe,S as xe}from"./ShowQRPrintLabel-DF_r3drM.js";import"./App.module-CbHnVtRQ.js";import"./debounces-Bu_cYg6t.js";import"./fontkit.es-BgEBu-ZA.js";import"./ButonHrm-lko_uZkQ.js";/* empty css                 */import"./SVG-BQYfoCtp.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-CsH7y8Fy.js";import"./Toast-dGtFHnN3.js";var Se=f("<h5 class=rpto>"),ye=f("<h5>"),$e=f('<div><div class=" flxWrp spaceAround centerBx"><h2>Completar Entrega</h2><div class="icon_status centerBx"></div></div><div style=padding:16px><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="icon_status centerBx"></div><div class=bagsNo></div></div><div><div class=vertseparator></div><div class=vertseparator></div><h4></h4></div><div class="icon_status centerBx"></div></div><p class=" textleft "style=padding:18px>;</p><div>'),se=f("<div> <!>."),ne=f("<div> "),De=f('<div class="_dsplFlx flxWrp spaceAround "style=" margin:0 auto;;padding:8px 9px;">'),we=f('<div class="icon_status centerBx">'),Ce=f("<div style=max-width:160px;margin:8px;><h5>"),H=f('<div class="_dsplFlx bottombx flxWrp spaceAround ">'),ke=f('<div><div class=separator></div><div><div class=" centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=" centerBx"><div class="icon_status centerBx"></div><h4></h4></div><div class=" centerBx"><div class="icon_status centerBx"></div><h5>');const[et,tt]=Y(),ae=R(()=>L(()=>import("./LoadingColorSpinner-mZMTLJ5Y.js"),__vite__mapDeps([0,1,2,3]))),Ee=R(()=>L(()=>import("./Item2Delivery-IEVc8eSz.js"),__vite__mapDeps([4,1,2,5]))),B=R(()=>L(()=>import("./SVG-BQYfoCtp.js"),__vite__mapDeps([6,1,2]))),Be=R(()=>L(()=>import("./FlexSpace-D_GvX28x.js"),__vite__mapDeps([7,1,2]))),[rt,it]=T(""),[Q,Pe]=Y();function st(a){le(),T(0);const[x,c]=oe(),v=ce();de(()=>{S()}),K(()=>{}),U(async()=>{g?.stopD?.addressId||v(`/delivery-detail?dId=${x?.dId}`,{replace:!0})});function l(){return"geolocation"in navigator}function h(e){ge({latitude:e?.coords?.latitude,longitude:e?.coords?.longitude})}function S(){l()?navigator.geolocation.getCurrentPosition(h):showMessage("Geolocation isn't supported by your browser")}const P=e=>{e.cidentity,{...g?.stopD}},E=e=>{ie("cameraScanDelivery")?.clear()},I=e=>{let i=j(),s={};s.id=i,s.closeEvent=E,s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=r(Me,{get item(){return g?.stopD},modalId:i,callback:P}),be(s)},M=async()=>{let e=[],i=360,s=C(g?.stopD?.customers);if(s.length<i){const n=s.map(async(m,w)=>{let p=g?.stopD?.customers[m],u=C(p?.bagsNumb),_=p?.phoneNumber.split("|");const b=u.map(async(y,V)=>{let $=p?.bagsNumb?.[y]?.tracking,F="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const O=new RegExp(F);$.length===13&&O.test($)&&($=$.slice(3,12));let D=await fe($),A={state:g?.stopD?.estate,name:p?.name,phoneNumber:_[0],altPhoneNumber:_[1],bulto:p?.bagsNumb?.[y]?.bagnumber,tracking:$,qr:D};e.push(A)});await Promise.all(b)});await Promise.all(n);let d=await xe(e);window.open(d)}else OpenToast({text:`El limite de etiquetas a imprimir es de ${i}`,timeout:2500,id:j()})};return(()=>{var e=$e(),i=e.firstChild,s=i.firstChild,n=s.nextSibling,d=i.nextSibling,m=d.firstChild,w=m.firstChild,p=w.nextSibling,u=m.nextSibling,_=u.firstChild,b=_.nextSibling,y=b.nextSibling,V=u.nextSibling,$=d.nextSibling,F=$.firstChild,O=$.nextSibling;return n.$$click=I,t(n,r(B,{name:"qr_code",size:32,color:"#2b2b2b"})),t(w,r(B,{name:"open_package_file_outline",size:32})),t(p,()=>g?.stopD?.bagsNo),t(d,r(Be,{}),u),t(u,r(k,{get when(){return g?.stopD?.consigneeInfo?.ybreparto},get children(){return[(()=>{var o=Se();return t(o,()=>g?.stopD?.consigneeInfo?.ybreparto),o})(),"|"]}}),_),t(u,r(k,{get when(){return g?.stopD?.city},get children(){return[(()=>{var o=ye();return t(o,()=>g?.stopD?.city),o})(),"|"]}}),b),t(y,()=>g?.stopD?.estate),V.$$click=M,t(V,r(B,{name:"printer",size:32})),t($,()=>g?.stopD?.addressId,F),t(O,r(te,{fallback:o=>(()=>{var D=se(),A=D.firstChild,q=A.nextSibling;return q.nextSibling,t(D,()=>o.toString(),q),D})(),get children(){return r(J,{get fallback(){return(()=>{var o=ne();return o.firstChild,t(o,r(ae,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){return r(k,{get when(){return C(g?.stopD?.customers)?.length>0},get children(){return r(ee,{get each(){return C(g?.stopD?.customers)},children:(o,D)=>r(Ae,{get item(){return g?.stopD?.customers?.[o]}})})}})}})}})),G(o=>{var D=` ${N(),"centerBx"}  topbx `,A=` ${N(),"centerBx"} bottombx`,q=` ${N()?"":"width:94vw;"} margin: 0 auto; ; padding: 18px 29px;`;return D!==o.e&&z(d,o.e=D),A!==o.t&&z(u,o.t=A),o.a=ue(O,q,o.a),o},{e:void 0,t:void 0,a:void 0}),e})()}const Ie=a=>(()=>{var x=De();return t(x,r(te,{fallback:c=>(()=>{var v=se(),l=v.firstChild,h=l.nextSibling;return h.nextSibling,t(v,()=>c.toString(),h),v})(),get children(){return r(J,{get fallback(){return(()=>{var c=ne();return c.firstChild,t(c,r(ae,{stroke:"rgb(200 25 60 / 1)",size:62}),null),c})()},get children(){return r(k,{get when(){return C(a?.list)?.length>0},get children(){return r(ee,{get each(){return C(a?.list)},children:(c,v)=>(()=>{var l=Ce(),h=l.firstChild;return re(l,"data-id",`${c}`),t(l,r(k,{get when(){return Q?.[a?.cid]?.[c]==="ST200"},get children(){var S=we();return t(S,r(B,{name:"success",size:32,color:"var(--hrm-palette-tertiary50)"})),S}}),h),t(h,()=>a?.list?.[c]?.bagnumber),G(()=>z(l,`bag_number centerBx ${Q?.[a?.cid]?.[c]==="ST200"?"checked":""} `)),l})()})}})}})}})),x})(),Ae=a=>{const x=()=>{let c=C(a?.item?.bagsNumb)?.length,v=C(Q?.[a?.item?.cidentity])?.length;return c===v};return(()=>{var c=ke(),v=c.firstChild,l=v.nextSibling,h=l.firstChild,S=h.firstChild,P=S.nextSibling,E=h.nextSibling,I=E.firstChild,M=I.nextSibling,e=E.nextSibling,i=e.firstChild,s=i.nextSibling;return t(S,r(B,{name:"account",size:24})),t(P,()=>a?.item?.name),t(l,r(Z,{}),E),t(I,r(B,{name:"cellphone",size:24})),t(M,()=>a?.item?.phoneNumber),t(l,r(Z,{}),e),t(i,r(B,{name:"credit_card",size:24})),t(s,()=>a?.item?.cidentity),t(c,r(k,{get when(){return!x()},get children(){var n=H();return t(n,r(Ie,{get list(){return a?.item?.bagsNumb},get cid(){return a?.item?.cidentity}})),n}}),null),t(c,r(k,{get when(){return x()},get children(){var n=H();return t(n,r(Ee,{get list(){return a?.item?.bagsNumb},get cid(){return a?.item?.cidentity},get item(){return a?.item}})),n}}),null),G(n=>{var d=a?.item?.cidentity,m=` ${N()?"":"centerBx"} bottombx`;return d!==n.e&&re(c,"data-cid",n.e=d),m!==n.t&&z(l,n.t=m),n},{e:void 0,t:void 0}),c})()},Z=()=>r(k,{get when(){return!N()},children:"|"});X(["click"]);var Ne=f('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:350px>');const Re=R(()=>L(()=>import("./SVG-BQYfoCtp.js"),__vite__mapDeps([6,1,2]))),Le=R(()=>L(()=>import("./FlexSpace-D_GvX28x.js"),__vite__mapDeps([7,1,2])));function Me(a){const[x,c]=T(""),[v,l]=T(""),[h,S]=T();K(()=>{ie("cameraScanDelivery")?.clear()}),U(()=>{setTimeout(()=>{M()},90)});const P=(e,i)=>{e!==h()&&(S(e),setTimeout(()=>{S("")},3e3),E(e))},E=e=>{e||(e=x()),e=e.split("'").join("-"),new Date().getTime(),W?.latitude,W?.longitude,a?.status,ve?.profile?.userId;let i=e.split("/");e.split("-").length>3&&(i=e.split("-").join);let s=i?.[0],n="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const d=new RegExp(n);let m=s.length===13&&d.test(s),w="^[0-9]{4}-[1-9]{4}";const p=new RegExp(w);let u=s.length===9&&p.test(s),_=i.length>4&&s.length===12,b={idairguide:i?.[0],":search0":i?.[1],":search1":i?.[3]};m&&(b={idairguide:"175-2383"+s.slice(3,7),":search0":s}),u&&(b={idairguide:"175-2383"+s.slice(0,4),":search0":s}),m||_||u?I(b):(l("alert"),setTimeout(()=>{l("")},1800))},I=async e=>{let i=await Te(e),s=Object.keys(i)?.[0];if(i[s]?.cidentity){let n=i[s]?.cidentity,d=i[s]?.ssg_track_key,m={...a?.item};m?.customers?.[n]?.bagsNumb?.[d]?(l("success"),Pe(n,{[d]:"ST200"})):l("alert"),setTimeout(()=>{l("")},1800),m?.customers?.[n]?.bagsNumb?.[d],a?.callback(i[s])}else l("alert"),setTimeout(()=>{l("")},1800)},M=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[he.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},i=new _e("qr-reader_SSDM",e);i.render(P),me("cameraScanDelivery",i)};return(()=>{var e=Ne(),i=e.firstChild,s=i.firstChild,n=s.firstChild,d=n.nextSibling,m=i.nextSibling,w=m.firstChild,p=w.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),n.$$click=P,t(s,r(Le,{}),d),d.$$click=()=>{},t(d,r(Re,{name:"keyboard",size:32,color:"#2b2b2b"})),G(u=>{var _=N()?"92vw":"420px",b=`scanOverlay ${v()} `,y=v()?"block":"none";return _!==u.e&&((u.e=_)!=null?e.style.setProperty("width",_):e.style.removeProperty("width")),b!==u.t&&z(p,u.t=b),y!==u.a&&((u.a=y)!=null?p.style.setProperty("display",y):p.style.removeProperty("display")),u},{e:void 0,t:void 0,a:void 0}),e})()}const Te=async a=>await pe({params:a,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"});X(["click"]);export{Z as SepOnMobile,st as default,et as scannedQRs,tt as setScannedQRs,it as setStatus,Pe as setStatusD,rt as status,Q as statusD};
