const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-DZXApJd5.js","assets/index-DkkNlLnX.js","assets/index-lCkr9jrN.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-BXRgqw6I.js","assets/SVG-7m5L1R9W.js","assets/ButonHrm-BSeWNUGQ.css","assets/LoadingColorSpinner-De0F92t4.js","assets/LoadingColorSpinner-DPNLfwBi.css"])))=>i.map(i=>d[i]);
import{l as $,_ as C,c as j,a as B,i,d as c,aB as x,S as w,F as K,e as W,g as O,t as f,ab as A,O as E,I as H,o as U,j as D,ad as Z,p as N,q as Q}from"./index-DkkNlLnX.js";import{CloseModal as J}from"./DialogHRM-g_NvR9nw.js";import{i as X,b as k,c as P}from"./Scanning-DSbcd0rV.js";import{OpenToast as F}from"./Toast-B8ER3c08.js";import"./App.module-CbHnVtRQ.js";var Y=f('<div class="_dsplFlx flxWrp spaceAround ">'),ee=f('<div class="centerBx bottombx spaceAround"style=margin-top:20px><div style=padding:1px>'),te=f('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Subir Pendientes </h5></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx grid2Col">'),ne=f('<div class="centerBx bottombx "><h5> subiendo al servidor <!> / <!> '),ae=f('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">'),re=f('<div class="centerBx bottombx "><h5> descargando guias... ');const se=$(()=>C(()=>import("./CheckBoxSlide-DZXApJd5.js"),__vite__mapDeps([0,1,2,3]))),S=$(()=>C(()=>import("./ButonHrm-BXRgqw6I.js"),__vite__mapDeps([4,1,2,5,6]))),L=$(()=>C(()=>import("./LoadingColorSpinner-De0F92t4.js"),__vite__mapDeps([7,1,2,8])));function ge(r){const[n,l]=j({}),[u,p]=B(!1),[g,_]=B(0),T=()=>{J(r?.modalId)};let G=[42,43,44,45];const M=async t=>{_(x());const a=t.map(async s=>{await ie(s?.doc),A.remove(s?.doc,function(v,e){v||(console.log("dbScanned successfully removed "),k(P))})});await Promise.all(a),k(P),_(0)},R=async t=>{A.allDocs({include_docs:!0,descending:!0},function(a,s){M(s.rows)})};let m={};const q=async t=>{let a=await le("guia",t);m=Object.assign({},m,a)},z=async()=>{let t=[];E(n).map(a=>{n[a]&&t.push(a)}),p(!0),t.length>0?(await H(t,q),E(m).map(a=>{let s={...m[a]};s.id=s.ssg_track_key,U("manifestByKeys")[s?.ssg_track_key]||V(m[a])}),await X(),k(P),F({text:"El modo offline esta listo para escanear",timeout:2500,id:D()})):F({text:"Debe selecionar una guia",timeout:2500,id:D()}),p(!1)},V=async t=>{Z.post(t,function(s,b){s||console.log("Successfully posted")})};return(()=>{var t=te(),a=t.firstChild,s=a.firstChild,b=s.nextSibling,v=b.nextSibling;return t.style.setProperty("max-height","80vh"),t.style.setProperty("overflow","auto"),t.style.setProperty("background","#ffffff"),t.style.setProperty("border-radius","13"),i(a,c(w,{get when(){return x()>0},get children(){return c(w,{get when(){return!g()},get fallback(){return(()=>{var e=ne(),o=e.firstChild,d=o.firstChild,y=d.nextSibling,h=y.nextSibling,I=h.nextSibling;return I.nextSibling,i(e,c(L,{stroke:"rgb(200 25 60 / 1)",size:32}),o),i(o,()=>g()-x(),y),i(o,g,I),e})()},get children(){var e=Y();return i(e,c(S,{icon:"arrow_up_large",color:"#c8193c",label:"Subir pendientes",handleClick:R})),e}})}}),b),i(v,c(K,{each:G,children:(e,o)=>(()=>{var d=ae(),y=d.firstChild,h=y.firstChild;return i(y,c(se,{get initValue(){return n?.[e]},updChange:()=>l(e,!n?.[e]),color:"var(--background-red-ssg)"}),h),i(h,e),d})()})),i(t,c(w,{get when(){return!u()},get fallback(){return(()=>{var e=re();return i(e,c(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),e})()},get children(){var e=ee(),o=e.firstChild;return i(e,c(S,{icon:"cancel",color:"#7d7d7d",label:"Cancelar",handleClick:T}),o),i(e,c(S,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar",handleClick:z}),null),e}}),null),W(e=>{var o=O()?"86vw":"420px",d=O()?"15px 5px":"15px 25px";return o!==e.e&&((e.e=o)!=null?t.style.setProperty("width",o):t.style.removeProperty("width")),d!==e.t&&((e.t=d)!=null?t.style.setProperty("padding",d):t.style.removeProperty("padding")),e},{e:void 0,t:void 0}),t})()}const fe=r=>{let n=r,l="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const u=new RegExp(l);return n.length===13&&u.test(n)&&(n=n.slice(3,12)),n},ie=async r=>{let n={};r?.params&&(n.params=r?.params),r?.data2update&&(n.data2update=r?.data2update),r?.form&&(n.form=r?.form);let l=N(r?.actionKey);return n={...n,...l},await Q(n)},le=async(r,n)=>{let l={params:{idairguide:"all"},fldswQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","guia","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","isLMH","isPaid","hbls","noteTag","nameshipper","billedBy"]};r.split(" ").map((g,_)=>{g&&(l.params[":search"+_]=g.trim())}),l.params[":guia"]=n+"";let u=N(802001);l={...l,...u};const p=await Q(l);return p?.data?.error?{}:p};export{ge as default,fe as parseTrcking};
