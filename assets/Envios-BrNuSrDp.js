const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-B_V5Hrpr.js","assets/index-Davks-F7.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-BD31HpNN.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-CYTTjjhw.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DKmH3C8m.js","assets/debounces-khgXmkFO.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-Bon3_yg6.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-Dn34qKas.js","assets/Util-CHzs30Zz.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-BYRozdje.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DM727Ryc.js","assets/DialogHRM-D44MwW5Y.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-hV27f7Qu.js","assets/ShowQRPrintLabel-BCd5SSTx.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-CUYOHVUf.js","assets/Toast-FPAwwC2b.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-CNx31YIB.js"])))=>i.map(i=>d[i]);
import{l as D,_ as O,c as ne,a as M,o as Fe,h as Re,b as qe,i as r,d as t,f as j,e as Te,t as p,k as le,S as v,j as je,E as ge,q as K,F as J,g as ee,s as Qe,r as te}from"./index-Davks-F7.js";import{b as Q,d as We,f as re,a as N,O as T,g as G,e as Ye,s as Xe}from"./Util-CHzs30Zz.js";import{u as He}from"./debounces-khgXmkFO.js";import{i as X}from"./globalSignal-hV27f7Qu.js";import{g as se,S as Ue,l as Ze}from"./ShowQRPrintLabel-BCd5SSTx.js";import{OpenToast as Je}from"./Toast-FPAwwC2b.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-CUYOHVUf.js";var Ke=p("<div style=padding:4px>"),Z=p('<div class="icon_status centerBx">'),et=p('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),tt=p('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),rt=p('<div><div class="_dsplFlx flxWrp spaceAround ">'),nt=p('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),lt=p('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),st=p('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),it=p("<div class=centerBx><h5 style=margin-left:12px>generando excel"),me=p("<div> <!>."),he=p("<div> "),fe=p("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),at=p("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),_e=p("<h5 class=totalBagsNo> <!> / "),ve=p('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),be=p("<div class=leftMrg> "),ot=p("<div class=bottombx><h4>"),ct=p('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),ut=p("<div style=padding:16px;margin-left:20px;>"),dt=p("<div>"),gt=p('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const z=D(()=>O(()=>import("./LoadingColorSpinner-B_V5Hrpr.js"),__vite__mapDeps([0,1,2,3]))),mt=D(()=>O(()=>import("./InputHr-BD31HpNN.js"),__vite__mapDeps([4,1,2,5]))),A=D(()=>O(()=>import("./SVG-CYTTjjhw.js"),__vite__mapDeps([6,1,2,7]))),ht=D(()=>O(()=>import("./DropDwnSearch-DKmH3C8m.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ft=D(()=>O(()=>import("./ContainerElasticView-Bon3_yg6.js"),__vite__mapDeps([11,1,2,6,7,12]))),_t=D(()=>O(()=>import("./ButonHrm-Dn34qKas.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ie=D(()=>O(()=>import("./CheckBoxSlide-BYRozdje.js"),__vite__mapDeps([16,1,2,17]))),vt=D(()=>O(()=>import("./ItemOnEnvios-DM727Ryc.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27])));D(()=>O(()=>import("./ItemOnEnviosMobile-CNx31YIB.js"),__vite__mapDeps([28,1,2,14,7,19,20,9,21])));function Vt(){const[e,i]=ne({list:{manifest:{id:"",label:""},search:"",status:""}}),[n,o]=ne({}),[m,u]=ne({}),[C,w]=M(""),[d,W]=M(!1),[H,P]=M(64),[B,F]=M(!1),[R,U]=M(!1),[$e,pe]=M(""),V=He(w,500),[ye,ae]=M(!1),[ke,oe]=M(!1),[xe,ce]=M(!1),Y=(a,s)=>{i("list",{[a]:s}),V(G())},Ce=()=>{F(!B()),V(G())},we=()=>{W(!d()),V(G())},Se=()=>{U(!R()),V(G())};Fe(()=>{}),Re(()=>{});const Ie=()=>{P(a=>a+64)},Ee=a=>{let s=Math.ceil(a?.length/64);Xe(Ie,1250,s)},[L,{refetch:It}]=qe(C,async a=>{o(void 0),u("prov",void 0);let s=e?.list?.manifest?.id;$e()!==s&&pe(s);let S={},k=[],g={};var x={};if(s&&(S=await yt(s)),!d())o(S?.sumary),u("prov",S?.provinceGroup);else{x=await pt(e?.list?.search,s,e?.list?.status,e?.list?.estate,e?.list?.city),o(S?.sumary),P(0);let I={};B()?T(x).map(y=>{let b=x[y],$=b?.estate||b?.consigneeInfo?.ybestate;I[y]?k.push(b):I[y]=1,N("M023009")?.ZoneCity?.[b?.zone]?.[$]||k.push(b)}):R()?T(x).map(y=>{let b=x[y];b?.estate||b?.consigneeInfo?.ybestate||k.push(b),b?.currentStatus}):(T(x).map(y=>{let b=x[y],$=b?.estate||b?.consigneeInfo?.ybestate,l=b?.city||b?.consigneeInfo?.ybcity;($||l)&&(g[$]||(g[$]={cities:{},total:0}),g[$].cities?.[l]||(g[$].cities[l]=0),g[$].cities[l]+=1,g[$].total+=1),k.push(b)}),u("prov",g)),Ee(k)}return k}),ue=()=>L()?.length,Me=a=>{i("list",{manifest:a,status:void 0}),V(G())},Pe=()=>{xt(L())},Be=()=>{Ct(L())},Ge=()=>{},Ae=(a,s)=>{Y("estate",a),Y("city",s)},De=(a,s)=>{i("list",{estate:void 0,city:void 0}),V(G())},q=a=>a?" "+a:"",de=a=>{let s=a?.consigneeInfo;return q(s?.firstName)+q(s?.middleName)+q(s?.lastName)+q(s?.lastName2)},Oe=a=>{let s=a?.consigneeInfo,S=q(s?.altPhoneNumber);return q(s?.phoneNumber)+(S?" | "+S:"")},Le=async()=>{let a=[],s=360;if(ae(!0),L()?.length<s){const S=L().map(async(g,x)=>{let I=g?.tracking,y="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const b=new RegExp(y);I?.length===13&&b.test(I)&&(I=I.slice(3,12));let l=await se(I),h={provincia:g?.consigneeInfo?.ybestate,name:de(g),phoneNumber:get(g),altPhoneNumber:g?.consigneeInfo?.altPhoneNumber,guiaWeek:g?.guia,bulto:g?.bagnumber,tracking:I,qr:l};a.push(h)});await Promise.all(S);let k=await Ue(a);window.open(k),ae(!1)}else Je({text:`El limite de etiquetas a imprimir es de ${s}`,timeout:2500,id:G()})},Ne=async()=>{let a=[];ce(!0),setTimeout(async()=>{let s=400,S=619124,k=[],g=new Date().getFullYear().toString().slice(2,4);for(let y=0;y<s;y++)k.push(y);const x=k.map(async(y,b)=>{let $=S+y*2,l=$+1;const h=await se("Y"+g+$),c=await se("Y"+g+l);let f={mtrx:h,mtrx2:c,lbl:"Y"+g+$,lbl2:"Y"+g+l};a.push(f)});await Promise.all(x);let I=await Ze(a);window.open(I),ce(!1)},760)},Ve=async()=>{oe(!0);let a=[];L().map(async(s,S)=>{let k=s?.estate||s?.consigneeInfo?.ybestate,g=s?.city||s?.consigneeInfo?.ybcity,x={provincia:k,ciudad:g,nombre:de(s),telefonos:Oe(s),guia:s?.idairguide,bulto:s?.bagnumber,hbls:s?.hblS};a.push(x)}),Ye(`listas_caneados_${G()}.csv`,a),oe(!1)},ze=async a=>{await kt(e?.list?.manifest?.id)};return(()=>{var a=st(),s=a.firstChild,S=s.firstChild,k=S.nextSibling,g=k.firstChild,x=k.nextSibling,I=x.firstChild,y=s.nextSibling,b=y.firstChild,$=y.nextSibling;return r(g,()=>e?.list?.manifest?.id),r(x,t(ie,{get initValue(){return d()},updChange:we,color:"var(--background-red-ssg)"}),I),r(a,t(v,{get when(){return le?.profile?.isAdmin},get children(){return t(_t,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Pe})}}),y),r(b,t(ht,{get list(){return N("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:l=>Me(l),width:"260px"})),r(y,t(v,{get when(){return je(()=>!!e?.list?.manifest?.id)()&&d()},get children(){return[(()=>{var l=Ke();return r(l,t(mt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:h=>Y("search",h)})),l})(),(()=>{var l=tt(),h=l.firstChild,c=h.firstChild;return r(h,t(ie,{get initValue(){return B()},updChange:Ce,color:"var(--background-red-ssg)"}),c),r(l,t(v,{get when(){return le?.profile?.isAdmin},get children(){var f=et(),_=f.firstChild;return r(f,t(ie,{get initValue(){return R()},updChange:Se,color:"var(--background-red-ssg)"}),_),r(f,t(v,{get when(){return R()},get children(){var E=Z();return E.$$click=Be,r(E,t(A,{name:"outline_delete",size:24})),E}}),null),f}}),null),l})()]}}),null),r($,t(v,{get when(){return e?.list?.manifest?.id},get children(){var l=rt(),h=l.firstChild;return r(l,t(v,{get when(){return d()},get children(){return t(v,{get when(){return!ke()},get fallback(){return(()=>{var c=it(),f=c.firstChild;return r(c,t(z,{stroke:"rgb(200 25 60 / 1)",size:32}),f),c})()},get children(){var c=Z();return c.$$click=Ve,r(c,t(A,{name:"grid",size:24,color:"firebrick"})),c}})}}),h),r(h,t(ge,{fallback:c=>(()=>{var f=me(),_=f.firstChild,E=_.nextSibling;return E.nextSibling,r(f,()=>c.toString(),E),f})(),get children(){return t(K,{get fallback(){return(()=>{var c=he();return c.firstChild,r(c,t(z,{stroke:"rgb(200 25 60 / 1)",size:62}),null),c})()},get children(){return t(v,{get when(){return n?.total},get children(){return t(J,{get each(){return T(n)},children:(c,f)=>X()?t($t,{keyG:c,total:ue,get status(){return e?.list?.status},get amount(){return n?.[c]},get showItems(){return d()},updForm:Y}):t(bt,{keyG:c,total:ue,get showItems(){return d()},get status(){return e?.list?.status},get amount(){return n?.[c]},updForm:Y})})}})}})}})),j(()=>ee(l,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),l}}),null),r($,t(v,{get when(){return le?.profile?.isAdmin},get children(){var l=nt(),h=l.firstChild,c=h.firstChild,f=c.nextSibling;return r(h,t(v,{get when(){return!xe()},get fallback(){return(()=>{var _=fe(),E=_.firstChild;return r(_,t(z,{stroke:"rgb(200 25 60 / 1)",size:32}),E),_})()},get children(){var _=Z();return _.$$click=Ne,r(_,t(A,{name:"printer",size:24,color:"firebrick"})),_}}),c),c.$$click=ze,r(c,t(A,{name:"tag-outline",size:24})),f.$$click=Ge,r(f,t(A,{name:"outline_renew",size:24})),r(h,t(v,{get when(){return!ye()},get fallback(){return(()=>{var _=fe(),E=_.firstChild;return r(_,t(z,{stroke:"rgb(200 25 60 / 1)",size:32}),E),_})()},get children(){var _=Z();return _.$$click=Le,r(_,t(A,{name:"printer",size:32})),_}}),null),l}}),null),r($,t(v,{get when(){return m?.prov},get children(){var l=lt(),h=l.firstChild,c=h.firstChild,f=h.nextSibling;return r(c,t(v,{get when(){return m?.prov},get children(){return t(J,{get each(){return T(m?.prov)},children:(_,E)=>t(St,{ism:_,get item(){return m?.prov?.[_]},updS:Ae})})}})),f.$$click=De,r(f,t(A,{name:"Xclose",size:22})),j(()=>ee(l,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),l}}),null),r($,t(ge,{fallback:l=>(()=>{var h=me(),c=h.firstChild,f=c.nextSibling;return f.nextSibling,r(h,()=>l.toString(),f),h})(),get children(){return t(K,{get fallback(){return(()=>{var l=he();return l.firstChild,r(l,t(z,{stroke:"rgb(200 25 60 / 1)",size:62}),null),l})()},get children(){return t(v,{get when(){return L()},get children(){return t(J,{get each(){return L()?.slice(0,H())},children:(l,h)=>t(vt,{item:l,refresh:()=>V(G())})})}})}})}}),null),j(l=>Qe($,` ${X()?"":"width:94vw;"} margin: 0 auto;`,l)),a})()}const bt=e=>{const[i,n]=M(!1),[o,m]=M(0),u=()=>{let d=e?.keyG;e?.keyG==="total"&&(d=null),e?.updForm("status",d)},C=()=>{i()||!X()&&e?.keyG!=="total"&&(m(N("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),n(!0))},w=()=>{m("0px"),i()&&n(!1)};return t(v,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var d=be();return d.firstChild,r(d,t(z,{stroke:"rgb(200 25 60 / 1)",size:32}),null),d})()},get children(){var d=ve(),W=d.firstChild,H=W.nextSibling;return d.$$mouseout=w,d.$$mousemove=C,d.$$click=u,r(d,t(v,{get when(){return i()},get children(){var P=at(),B=P.firstChild,F=B.firstChild,R=F.firstChild;return r(R,()=>N("M023009")?.statusObjDesc?.[e?.keyG]),j(U=>(U=o())!=null?B.style.setProperty("width",U):B.style.removeProperty("width")),P}}),W),r(W,t(A,{get name(){return N("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(d,t(v,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var P=_e(),B=P.firstChild,F=B.nextSibling;return F.nextSibling,r(P,()=>e?.total(),F),P}}),H),r(H,()=>e?.amount),j(()=>ee(d,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),d}})}})},$t=e=>{const i=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t(v,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var n=be();return n.firstChild,r(n,t(z,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=ve(),o=n.firstChild,m=o.nextSibling;return n.$$click=i,r(o,t(A,{get name(){return N("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(n,t(v,{get when(){return N("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var u=ot(),C=u.firstChild;return r(C,()=>N("M023009")?.statusObjDesc?.[e?.keyG]),u}}),m),r(n,t(v,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var u=_e(),C=u.firstChild,w=C.nextSibling;return w.nextSibling,r(u,()=>e?.total(),w),u}}),m),r(m,()=>e?.amount),j(()=>ee(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},pt=async(e,i,n,o,m)=>{let u={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"]};e&&e.split(" ").map((w,d)=>{w&&(u.params[":search"+d]=w.trim())}),n&&(u.params[":status"]=n),o&&(u.params[":estate"]=o),m&&(u.params[":city"]=m),te?.roles?.agency&&(u.params[":agency"]=te?.roles?.agency+"");let C=Q(802001);if(u={...u,...C},i&&Object.keys(u.params)?.length>=2){const w=await re(u);return w?.data?.error?{}:w}return{}},yt=async e=>{let i={params:{idairguide:e}},n=Q(802004);i={...i,...n},te?.roles?.agency&&(i.params[":agency"]=te?.roles?.agency+"");const o=await re(i);return o?.error?{}:o},kt=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n=Q(802001);i={...i,...n};const o=await re(i);return o?.error?{}:o},xt=async e=>{e.map(i=>{let n={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},o=Q(802002);n={...n,...o}})},Ct=async e=>{e.map(i=>{let n={params:{ssg_track_key:i?.ssg_track_key,idairguide:i?.idairguide}},o=Q(802005);n={...n,...o}})},zt=async(e,i)=>{let n=[];e.map(o=>{let m={params:{ssg_track_key:o?.ssg_track_key,idairguide:o?.idairguide},data2update:{currentStatus:i}},u=Q(802004);m={...m,...u},n.push(m)}),We(n,wt)},wt=async e=>{const n=await re(e);if(n)return n},St=e=>(()=>{var i=dt();return r(i,t(v,{get when(){return e?.item?.total>0},get children(){var n=ct(),o=n.firstChild,m=o.firstChild,u=m.firstChild,C=m.nextSibling;return o.$$click=()=>e?.updS(e?.ism),r(m,()=>e?.ism,u),r(C,()=>e?.item?.total),n}}),null),r(i,t(ft,{get children(){var n=ut();return r(n,t(v,{get when(){return e?.item?.cities},get children(){return t(J,{get each(){return T(e?.item?.cities)},children:(o,m)=>(()=>{var u=gt(),C=u.firstChild,w=C.nextSibling;return u.$$click=()=>e?.updS(e?.ism,o),r(C,o),r(w,()=>e?.item?.cities?.[o]),u})()})}})),n}}),null),i})();Te(["click","mousemove","mouseout"]);export{bt as StatusGroupItem,Vt as default,Ct as deleteManifest,wt as fetchCSVInve,xt as loadManifest,zt as updateManifest};
