import{S as y,P as M,f as z,r as f}from"./fontkit.es-D3_o5DR4.js";import"./qrcode-C5vWJp7P.js";import{O as j,af as A,R as C,ag as J,j as k}from"./index-NKUnsseI.js";import{OpenToast as E}from"./Toast-B8NDJa6S.js";let G={webp:"image/webp",jpg:"image/jpg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",ts:"video/MP2T",m3u8:"application/x-mpegURL",mp4:"video/MP4",m4a:"audio/MP4",webm:"video/webm",weba:"audio/webm",m4s:"text/plain",txt:"text/plain",srt:"text/plain",vtt:"text/plain",js:"application/javascript; charset=UTF-8",css:"text/css; charset=utf-8",mpd:"video/vnd.mpeg.dash.mpd",aac:"audio/aac",mp3:"audio/mpeg",wav:"audio/wav",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pdf:"application/pdf","7z":"application/x-7z-compressed",zip:"application/zip",xml:"application/xml",json:"application/json",html:"text/html; charset=UTF-8"},N=["ggSans-Italic.ttf","ggSans-Medium.ttf","Roboto-Bold.ttf","Roboto-Regular.ttf","arial_bold.ttf","moms_typewriter3.ttf","JMHTypewriter-Bold.ttf","JMHTypewriter-Black.ttf","JMHTypewriter-Thin.ttf","JMHTypewriter.ttf","L.C.Smith5typewriter.ttf","Harting_plain.ttf","TT2020Base-Regular.ttf","Lexend_300.ttf","Lexend_400.ttf","Lexend_500.ttf","Lexend_600.ttf","Lexend_700.ttf"];const _={GSansItalic:"ggSans-Italic.ttf",GSansBold:"ggSans-Medium.ttf",gSans:"ggSans-Medium.ttf",roboto_bold:"Roboto-Bold.ttf",roboto_regular:"Roboto-Regular.ttf",aria_regurlar:"arial_bold.ttf",moms_typewriter:"moms_typewriter3.ttf",JMHTypewriterBold:"JMHTypewriter-Bold.ttf",JMHTypewriterBlack:"JMHTypewriter-Black.ttf",JMHTypewriterThin:"JMHTypewriter-Thin.ttf",JMHTypewriter:"JMHTypewriter.ttf",LCSmith5:"L.C.Smith5typewriter.ttf",Harting_plain:"Harting_plain.ttf",TT2020BaseRegular:"TT2020Base-Regular.ttf",Lexend_300:"Lexend_300.ttf",Lexend_400:"Lexend_400.ttf",Lexend_500:"Lexend_500.ttf",Lexend_600:"Lexend_600.ttf",Lexend_700:"Lexend_700.ttf"},D=t=>!1,P=t=>t&&t.split(".").pop().toLowerCase(),W=t=>{let a=P(t);return G[a]},q=async(t,a)=>{let e=await(await fetch(t)).blob();return a&&(e=e.slice(0,e.size,a)),URL.createObjectURL(e)},Q=async(t,a,n)=>{var e=await q(t,n);return C(a,e),1},Y=async(t,a)=>{let n=W(P(t)),e=await Q(J(t),t,n);return D()&&a(e),e},v={};function u(t,a){v[t]=a}function R(t){return t?v[t]:v}async function U(t){if(!R("helvetica")){const s=N.map(async o=>{await Y(o)});await Promise.all(s)}const a=await t.embedFont(y.Helvetica),n=await t.embedFont(y.HelveticaBold);let e=await t.embedFont(y.TimesRomanBold),i=await t.embedFont(y.TimesRoman);u("helvetica",a),u("helveticaBold",n),u("TimesRomanBold",e),u("TimesRomanItalic",i);const d=j(_).map(async s=>{let o=A(_[s]);const m=await fetch(o).then(g=>g.arrayBuffer()),l=await t.embedFont(m,{subset:!0});u(s,l)});return await Promise.all(d),R()}const r=t=>t?" "+t.toString().trim():"",K=t=>{let a=window.DATAMatrix;return a({msg:t,dim:256,rct:0,pad:2,pal:["#000000","#ffffff"],vrb:1})},V=t=>{let n=t.cloneNode(!0).outerHTML,e=new Blob([n],{type:"image/svg+xml;charset=utf-8"});return(window.URL||window.webkitURL||window).createObjectURL(e)},Z=async(t,a)=>{const n=document.createElement("img");document.body.appendChild(n),n.onload=function(){const e=document.createElement("canvas");e.width=n.clientWidth,e.height=n.clientHeight,e.getContext("2d").drawImage(n,0,0);const d=e.toDataURL("image/png");document.body.removeChild(n),a(d)},n.src=t},nt=t=>new Promise(async(a,n)=>{let e=K(t),i=V(e);Z(i,async d=>{var s=await X(d,"image/png");let o=URL.createObjectURL(s);a(o)})}),X=async(t,a)=>{let e=await(await fetch(t)).blob();return e=e.slice(0,e.size,a),e},it=t=>{window.navigator.clipboard.writeText(t),E({text:t+"  copiado",timeout:1500,id:k()})};function F(t){let a=new Blob([t],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(a)}const B=(t,a,n)=>{const e=a.widthOfTextAtSize(t,40),i=a.widthOfTextAtSize(t,10);return Math.floor(n/((e-i)/30))},rt=async(t,a,n)=>{const e=await M.create();e.registerFontkit(z);const i=await U(e);let d=265;const s=t.map(async(o,m)=>{const l=e.addPage([426,284]),{height:g}=l.getSize();let c=g-34;const b=await fetch(o?.qr).then(L=>L.arrayBuffer()),x=await e.embedPng(b);l&&x&&l.drawImage(x,{x:10,y:g-220,width:150,height:150}),o?.tracking?.length<14&&l.drawText(r(o?.tracking),{x:172,y:c-175,size:36,font:i.roboto_bold,color:f(0,0,0)});let w=B(r(o?.state),i.roboto_bold,d);w>42&&(w=42,c=c-6);let p=B(r(o?.name),i.GSansItalic,d);var T=i.GSansItalic?.widthOfTextAtSize(r(o?.name),p);if(T>d&&(p=p-1,T=i.GSansItalic?.widthOfTextAtSize(r(o?.name),p)),p=300/T*21,p=p>25?25:p,l.drawText(r(o?.name),{x:10,y:c-0,size:p,font:i.GSansItalic,color:f(0,0,0)}),console.log(p),o?.state){const L=i.roboto_bold?.widthOfTextAtSize(r(o?.state),w);l.drawText(r(o?.state),{x:420-L,y:c-46,size:w,font:i.roboto_bold,color:f(0,0,0)}),c=c-p}let h=29;const H=i.Lexend_700?.widthOfTextAtSize(r(o?.phoneNumber),h);l.drawText(r(o?.phoneNumber),{x:400-H,y:c-70,size:h,font:i.Lexend_700,color:f(0,0,0)});const I=i.Lexend_700?.widthOfTextAtSize(r(o?.altPhoneNumber),h);l.drawText(r(o?.altPhoneNumber),{x:400-I,y:c-105,size:h,font:i.Lexend_700,color:f(0,0,0)});let S=r(o?.bulto).trim();const O=i.Lexend_700?.widthOfTextAtSize(r(S),40);l.drawText(r(S),{x:418-O,y:c-205,size:40,font:i.GSansBold,color:f(0,0,0)})});await Promise.all(s);{const o=await e.save();return F(o)}},st=async(t,a,n)=>{const e=await M.create();e.registerFontkit(z);const i=await U(e),d=t.map(async(s,o)=>{const m=e.addPage([142,71]),{height:l}=m.getSize();if(s?.qr){const b=await fetch(s?.qr).then(w=>w.arrayBuffer()),x=await e.embedPng(b);x&&m.drawImage(x,{x:45,y:l-65,width:96,height:15})}const g=await fetch(s?.mtrx).then(b=>b.arrayBuffer()),c=await e.embedPng(g);m&&c&&m.drawImage(c,{x:0,y:l-65,width:60,height:60}),m.drawText(r(s?.lbl),{x:60,y:l-37,size:13,font:i.Lexend_700,color:f(0,0,0)})});await Promise.all(d);{const s=await e.save();return F(s)}};export{rt as S,it as c,nt as g,st as l};
