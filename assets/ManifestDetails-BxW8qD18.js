const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-D4GRluY_.js","assets/index-B9OoOeu1.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-VgGDq_PE.js","assets/SVG-CAUXY-_B.js"])))=>i.map(i=>d[i]);
import{l as T,_ as Q,G as se,c as U,a as H,o as re,b as ae,d as ne,i as s,e as l,S as N,R as le,F as ce,Q as oe,p as R,v as C,x as q,s as de,h as O,y as K,k as J,m as Z,U as me,A as ge,t as b,W as Y,a1 as ee,O as ue,r as he,an as fe,aw as X,aE as _e,ap as ve,aq as pe}from"./index-B9OoOeu1.js";import{u as be}from"./debounces-T0gsWK0X.js";import"./ButonHrm-B_aeZVMn.js";import{P as $e}from"./ShowQRPrintLabel-CtiIvsFw.js";import{i as ye,h as xe}from"./DashManifest-vNhZPMIP.js";import"./Reports-C2kFa_gN.js";/* empty css                 */import"./SVG-CAUXY-_B.js";import"./fontkit.es-DH4QHzrK.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-C5n_a2a5.js";import"./Toast-B6brb46Z.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-Nz34R2Bs.js";import"./ScanningServices-BGFXvXNN.js";import"./parseUpsSta-A5QmduFK.js";var ke=b('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg height=22 width=22><path>'),te=b("<h5>"),Se=b('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),we=b("<div> <!>."),Be=b("<div> "),Ne=b('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),Ae=b("<img width=48 height=24 class=picture-profile alt=ssg decoding=async>"),Ie=b('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Ce=b('<div class="icon_status centerBx">'),Oe=b("<h5 class=rpto>"),Le=b('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const je=T(()=>Q(()=>import("./LoadingColorSpinner-D4GRluY_.js"),__vite__mapDeps([0,1,2,3]))),G=T(()=>Q(()=>import("./FlexSpace-VgGDq_PE.js"),__vite__mapDeps([4,1,2]))),j=T(()=>Q(()=>import("./SVG-CAUXY-_B.js"),__vite__mapDeps([5,1,2])));function Ze(){const[t,g]=se(),[i,m]=U({search:""}),[x,o]=U(),[d,L]=H(0),[W,E]=U(),[M,z]=H("");be(z,400),re(()=>{}),ae(()=>{});const F=async()=>{if(t?.mId&&d()<X()){L(X()+7e3);let e={id:t?.mId},c=await Me(e);m("manifestObj",void 0),o("linked",void 0),m("manifestObj",c),o("linked",{...c?.linkedBags}),i?.province||(m("province",c?.province),m("city",c?.city))}};ne(async()=>{ye();let e=[];[33,46,40,41,42,50,52,54,56].map(h=>{let $=h,w=O("M023009")?.whStList?.[$];Y?.roles?.[w?.id]?.isActive&&e.push(w)}),E("list",e);let u=[];O("M023009")?.provincias.map(h=>{let $=h.label;Y?.roles?.[$]?.isActive&&u.push(h)}),E("prov",u),F()});const v=e=>e||"",k=e=>e?" "+e:"",P=e=>(v(e?.estate)+"_"+v(e?.city)+"_"+v(e?.rpto)+"_"+v(e?.streetName)+"_"+v(e?.streetNo)).toLowerCase(),r=e=>{if(e?.consigneeName)return e?.consigneeName;let c=e?.consigneeInfo;return k(c?.firstName)+k(c?.middleName)+k(c?.lastName)+k(c?.lastName2)},S=e=>{if(e?.ctelephone)return e?.ctelephone;let c=e?.consigneeInfo,u=k(c?.altPhoneNumber);return k(c?.phoneNumber)+(u?" |"+u:"")},A=e=>new Promise((c,u)=>{let h=(()=>{var _=ke(),B=_.firstChild;return R(()=>q(B,"d",_e?.[e])),_})(),$=h.cloneNode(!0);const w=new XMLSerializer().serializeToString($),y=`data:image/svg+xml;charset=utf-8;base64,${btoa(unescape(encodeURIComponent(w)))}`,f=new Image;f.addEventListener("load",()=>{const _=h.getAttribute("width"),B=h.getAttribute("height"),n=document.createElement("canvas");n.setAttribute("width",_),n.setAttribute("height",B),n.getContext("2d").drawImage(f,0,0,_,B);const I=n.toDataURL("image/png");c(I)}),f.src=y}),ie=async()=>{let e={},c={},u={};const $=["cellphone","receipt","home","open_package_file_outline","user"].map(async a=>{let y=await A(a);ee("icon_"+a,y)});await Promise.all($),i?.manifestObj?.linkedBagsInfo?.map(a=>{if(a?.currentStatus!="YABA_99"){let y=a?.address;a?.isSSG&&(y={streetName:"ANGEL GUERRA",streetNo:"16A",rpto:"PERALTA",betwen:"ESQUINA FOMENTO",city:"HOLGUIN",estate:"HOLGUIN"});let f=P(y),_=a?.cidentity,B=a?.address?.estate,n=a?.address?.city,p=a?.address?.Rpto||a?.address?.rpto;if(u[p]||(u[p]=1),c[n]||(c[n]=1),e[f]||(e[f]={city:n,estate:B,rpto:p,address:y,currentStatus:a?.currentStatus,customers:{},bagsNo:0}),!e[f].customers[_]){let D={name:r(a),phoneNumber:S(a),cid:a?.cidentity,nameshipper:a?.nameshipper},V={...a,...D};V.bagsNumb={},e[f].customers[_]=V}let I={bagnumber:a?.bagnumber,idairguide:a?.guia,tracking:a?.tracking,hbls:a?.hbls};e[f].customers[_].bagsNumb[a?.ssg_track_key]=I,e[f].bagsNo+=1}});let w=await $e(ue(e),e);window.open(w)};return(()=>{var e=Se(),c=e.firstChild,u=c.firstChild,h=u.firstChild,$=h.nextSibling,w=$.nextSibling,a=w.nextSibling,y=a.firstChild,f=a.nextSibling,_=f.nextSibling,B=c.nextSibling;return s(h,()=>i?.manifestObj?.name),s(u,l(N,{get when(){return i?.manifestObj?.city},get children(){return["|",(()=>{var n=te();return s(n,()=>i?.manifestObj?.city),n})()]}}),$),s(w,()=>i?.manifestObj?.province),a.$$click=()=>{},s(y,l(j,{name:"link",size:22})),_.$$click=ie,s(_,l(j,{name:"printer",size:24,color:"firebrick"})),s(B,l(oe,{fallback:n=>(()=>{var p=we(),I=p.firstChild,D=I.nextSibling;return D.nextSibling,s(p,()=>n.toString(),D),p})(),get children(){return l(le,{get fallback(){return(()=>{var n=Be();return n.firstChild,s(n,l(je,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return l(N,{get when(){return i?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(ce,{get each(){return i?.manifestObj?.linkedBagsInfo},children:n=>l(Ee,{item:n,get city(){return i?.manifestObj?.city},get manifestObj(){return i?.manifestObj},get isAlready(){return i?.manifestObj?.linkedBags?.[n.ssg_track_key]},setFormsM:m,get mId(){return t?.mId}})})}})}})}})),R(n=>{var p=`/link-manifest?mId=${t?.mId}`,I=` ${C(),"width:86vw;"} margin: 0 auto;`;return p!==n.e&&q(y,"href",n.e=p),n.t=de(B,I,n.t),n},{e:void 0,t:void 0}),e})()}const Ee=t=>{const g=()=>{let o=t?.item?.street.split(",");return o.slice(0,o.length-2).join(",")},i=o=>o?" "+o:"",m=o=>{if(o?.consigneeName)return o?.consigneeName;let d=o?.consigneeInfo;return i(d?.firstName)+i(d?.middleName)+i(d?.lastName)+i(d?.lastName2)},x=async o=>{if(t?.item?.currentStatus!=="99"){let d=he(O("manifestList"));d[t?.mId].linkedBags[t?.item?.ssg_track_key]&&(delete d[t?.mId].linkedBags[t?.item?.ssg_track_key],ee("manifestList",d),await fe(pe,ve,d)),t?.setFormsM("manifestObj","linkedBags",t?.item?.ssg_track_key,void 0)}};return l(N,{get when(){return t?.manifestObj?.linkedBags[t?.item?.ssg_track_key]},get children(){var o=Le(),d=o.firstChild,L=d.firstChild,W=L.firstChild,E=W.nextSibling,M=L.nextSibling,z=M.firstChild,F=z.firstChild,v=d.nextSibling,k=v.firstChild,P=k.nextSibling;return s(o,l(N,{get when(){return C()},get children(){var r=Ne(),S=r.firstChild,A=S.nextSibling;return s(S,()=>m(t?.item)),s(r,l(G,{}),A),A.$$click=x,s(A,l(j,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),r}}),d),s(d,l(N,{get when(){return t?.item?.isSSG},get children(){var r=Ae();return R(()=>q(r,"src",O("SSG.webp"))),r}}),L),s(W,l(j,{name:"open_package_file_outline",size:20})),s(E,()=>t?.item?.bagnumber),s(d,l(N,{get when(){return!C()},get children(){var r=Ie(),S=r.firstChild;return s(S,()=>m(t?.item)),r}}),M),s(d,l(G,{}),M),s(F,()=>t?.item?.idairguide),s(d,l(N,{get when(){return!C()},get children(){var r=Ce();return r.$$click=x,s(r,l(j,{get name(){return t?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return t?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),r}}),null),s(k,g),s(v,l(G,{}),P),s(v,l(N,{get when(){return t?.item?.address?.rpto},get children(){return[(()=>{var r=Oe();return s(r,()=>t?.item?.address?.rpto),r})(),"|"]}}),P),s(v,l(N,{get when(){return!t?.city&&t?.item?.address?.city},get children(){var r=te();return s(r,()=>t?.item?.address?.city),r}}),null),R(r=>{var S=`client_item_box gWXAaj jlytmu manifest ${C()?"isMobile":""}`,A=` ${C(),"centerBx"} bottombx flxWrp  centerBx`;return S!==r.e&&K(o,r.e=S),A!==r.t&&K(v,r.t=A),r},{e:void 0,t:void 0}),o}})},et=async(t,g)=>{let i={params:t,data2update:g},m=J(709002);return i={...i,...m},await Z(i)},Me=async t=>{let g={...O("manifestList")?.[t?.id]};g||(g=await xe());let i=[],m=g?.linkedBags;return m&&Object.keys(m)?.map(async x=>{if(x){let o=O("manifestByKeys")?.[x];i.push(o)}}),g.linkedBagsInfo=i,g},tt=async t=>{let g=[];t.map(i=>{let m={params:{id:i?.ssg_track_key,idairguide:"all"}},x=J(802002);m={...m,...x},g.push(m)}),me(g,Pe)},Pe=async t=>{const i=await Z(t);if(i)return i};ge(["click"]);export{Ze as default,Pe as fetchCSVInve,tt as loadManifest,et as updLinkedBags};
