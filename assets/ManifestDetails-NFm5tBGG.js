const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-Beo7zloT.js","assets/index-_PH4TKcl.js","assets/index-BRlA1Q7g.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-iSeBU6N-.js","assets/SVG-CQDwSTDp.js","assets/Util-CJwQ4eI5.js"])))=>i.map(i=>d[i]);
import{l as q,_ as T,r as ee,c as D,a as Q,o as te,b as ie,d as re,i as r,e as a,S as k,z as se,F as ne,E as ae,f as z,j as O,k as Y,s as le,m as U,h as ce,t as h,A as V}from"./index-_PH4TKcl.js";import{e as I,g as J,f as X,m as de,O as oe,b as me,u as ue,G as ge,K,H as fe,I as _e}from"./Util-CJwQ4eI5.js";import{u as he}from"./debounces-DOKM3k9t.js";import"./ButonHrm-eQX_h9-B.js";import{P as ve}from"./ShowQRPrintLabel-GFOonhSW.js";import{handleListManifest as be}from"./DashManifest-D5xqIp4O.js";import{getAddressPSS as pe}from"./Reports-BwFE6BEE.js";/* empty css                 */import"./SVG-CQDwSTDp.js";import"./fontkit.es-yAesCE8D.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-tbDVtYPt.js";import"./Toast-4RNGB2fR.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-BmJ_288a.js";import"./ScanningServices-Nb0zOetY.js";var Z=h("<h5>"),ye=h('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),$e=h("<div> <!>."),ke=h("<div> "),xe=h('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),Se=h("<img width=48 height=24 class=picture-profile alt=ssg decoding=async>"),Be=h('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Ne=h('<div class="icon_status centerBx">'),we=h("<h5 class=rpto>"),Ae=h('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const Oe=q(()=>T(()=>import("./LoadingColorSpinner-Beo7zloT.js"),__vite__mapDeps([0,1,2,3]))),G=q(()=>T(()=>import("./FlexSpace-iSeBU6N-.js"),__vite__mapDeps([4,1,2]))),j=q(()=>T(()=>import("./SVG-CQDwSTDp.js"),__vite__mapDeps([5,1,2,6])));function Ke(){const[e,m]=ee(),[i,o]=D({search:""}),[v,l]=D(),[u,C]=Q(0),[P,L]=D(),[M,F]=Q("");he(F,400),te(()=>{}),ie(()=>{});const R=async()=>{if(e?.mId&&u()<K()){C(K()+7e3);let t={id:e?.mId},c=await Ce(t);o("manifestObj",void 0),l("linked",void 0),o("manifestObj",c),l("linked",{...c?.linkedBags}),i?.province||(o("province",c?.province),o("city",c?.city))}};re(async()=>{let t=[];[33,46,40,41,42,50,52,54,56].map(y=>{let n=y,$=I("M023009")?.whStList?.[n];V?.roles?.[$?.id]?.isActive&&t.push($)}),L("list",t);let f=[];I("M023009")?.provincias.map(y=>{let n=y.label;V?.roles?.[n]?.isActive&&f.push(y)}),L("prov",f),R()});const g=t=>t||"",b=t=>t?" "+t:"",E=t=>(g(t?.estate)+"_"+g(t?.city)+"_"+g(t?.rpto)+"_"+g(t?.streetName)+"_"+g(t?.streetNo)).toLowerCase(),s=t=>{let c=t?.consigneeInfo;return b(c?.firstName)+b(c?.middleName)+b(c?.lastName)+b(c?.lastName2)},p=t=>{let c=t?.consigneeInfo,f=b(c?.altPhoneNumber);return b(c?.phoneNumber)+(f?" |"+f:"")},x=async()=>{let t={},c={},f={};i?.manifestObj?.linkedBagsInfo?.map(n=>{if(n?.currentStatus!="YABA_99"){let $=n?.address;n?.isSSG&&($={streetName:"ANGEL GUERRA",streetNo:"16A",rpto:"PERALTA",betwen:"ESQUINA FOMENTO",city:"HOLGUIN",estate:"HOLGUIN"});let _=E($),B=n?.cidentity,W=n?.address?.estate,N=n?.address?.city,w=n?.address?.rpto;if(f[w]||(f[w]=1),c[N]||(c[N]=1),t[_]||(t[_]={city:N,estate:W,rpto:w,address:$,currentStatus:n?.currentStatus,customers:{},bagsNo:0}),!t[_].customers[B]){let S={name:s(n),phoneNumber:p(n),cid:n?.cidentity,nameshipper:n?.nameshipper},A={...n,...S};A.bagsNumb={},t[_].customers[B]=A}let d={bagnumber:n?.bagnumber,idairguide:n?.guia,tracking:n?.tracking,hbls:n?.hbls};t[_].customers[B].bagsNumb[n?.ssg_track_key]=d,t[_].bagsNo+=1}});let y=await ve(oe(t),t);window.open(y)};return(()=>{var t=ye(),c=t.firstChild,f=c.firstChild,y=f.firstChild,n=y.nextSibling,$=n.nextSibling,_=$.nextSibling,B=_.firstChild,W=_.nextSibling,N=W.nextSibling,w=c.nextSibling;return r(y,()=>i?.manifestObj?.name),r(f,a(k,{get when(){return i?.manifestObj?.city},get children(){return["|",(()=>{var d=Z();return r(d,()=>i?.manifestObj?.city),d})()]}}),n),r($,()=>i?.manifestObj?.province),_.$$click=()=>{},r(B,a(j,{name:"link",size:22})),N.$$click=x,r(N,a(j,{name:"printer",size:24,color:"firebrick"})),r(w,a(ae,{fallback:d=>(()=>{var S=$e(),A=S.firstChild,H=A.nextSibling;return H.nextSibling,r(S,()=>d.toString(),H),S})(),get children(){return a(se,{get fallback(){return(()=>{var d=ke();return d.firstChild,r(d,a(Oe,{stroke:"rgb(200 25 60 / 1)",size:62}),null),d})()},get children(){return a(k,{get when(){return i?.manifestObj?.linkedBagsInfo?.length>0},get children(){return a(ne,{get each(){return i?.manifestObj?.linkedBagsInfo},children:d=>a(Ie,{item:d,get city(){return i?.manifestObj?.city},get manifestObj(){return i?.manifestObj},get isAlready(){return i?.manifestObj?.linkedBags?.[d.ssg_track_key]},setFormsM:o,get mId(){return e?.mId}})})}})}})}})),z(d=>{var S=`/link-manifest?mId=${e?.mId}`,A=` ${O(),"width:86vw;"} margin: 0 auto;`;return S!==d.e&&Y(B,"href",d.e=S),d.t=le(w,A,d.t),d},{e:void 0,t:void 0}),t})()}const Ie=e=>{const m=()=>{pe(e?.item.street);let l=e?.item?.street.split(",");return l.slice(0,l.length-2).join(",")},i=l=>l?" "+l:"",o=()=>{let l=e?.item?.consigneeInfo;return i(l?.firstName)+i(l?.middleName)+i(l?.lastName)+i(l?.lastName2)},v=async l=>{if(e?.item?.currentStatus!=="99"){let u=me(I("manifestList"));u[e?.mId].linkedBags[e?.item?.ssg_track_key]&&(delete u[e?.mId].linkedBags[e?.item?.ssg_track_key],ue("manifestList",u),await ge(_e,fe,u)),e?.setFormsM("manifestObj","linkedBags",e?.item?.ssg_track_key,void 0)}};return a(k,{get when(){return e?.manifestObj?.linkedBags[e?.item?.ssg_track_key]},get children(){var l=Ae(),u=l.firstChild,C=u.firstChild,P=C.firstChild,L=P.nextSibling,M=C.nextSibling,F=M.firstChild,R=F.firstChild,g=u.nextSibling,b=g.firstChild,E=b.nextSibling;return r(l,a(k,{get when(){return O()},get children(){var s=xe(),p=s.firstChild,x=p.nextSibling;return r(p,o),r(s,a(G,{}),x),x.$$click=v,r(x,a(j,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),s}}),u),r(u,a(k,{get when(){return e?.item?.isSSG},get children(){var s=Se();return z(()=>Y(s,"src",I("SSG.webp"))),s}}),C),r(P,a(j,{name:"open_package_file_outline",size:20})),r(L,()=>e?.item?.bagnumber),r(u,a(k,{get when(){return!O()},get children(){var s=Be(),p=s.firstChild;return r(p,o),s}}),M),r(u,a(G,{}),M),r(R,()=>e?.item?.idairguide),r(u,a(k,{get when(){return!O()},get children(){var s=Ne();return s.$$click=v,r(s,a(j,{get name(){return e?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return e?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),s}}),null),r(b,m),r(g,a(G,{}),E),r(g,a(k,{get when(){return e?.item?.address?.rpto},get children(){return[(()=>{var s=we();return r(s,()=>e?.item?.address?.rpto),s})(),"|"]}}),E),r(g,a(k,{get when(){return!e?.city&&e?.item?.address?.city},get children(){var s=Z();return r(s,()=>e?.item?.address?.city),s}}),null),z(s=>{var p=`client_item_box gWXAaj jlytmu manifest ${O()?"isMobile":""}`,x=` ${O(),"centerBx"} bottombx flxWrp  centerBx`;return p!==s.e&&U(l,s.e=p),x!==s.t&&U(g,s.t=x),s},{e:void 0,t:void 0}),l}})},Ye=async(e,m)=>{let i={params:e,data2update:m},o=J(709002);return i={...i,...o},await X(i)},Ce=async e=>{let m={...I("manifestList")?.[e?.id]};m||(m=await be());let i=[],o=m?.linkedBags;return o&&Object.keys(o)?.map(async v=>{if(v){let l=I("manifestByKeys")?.[v];i.push(l)}}),m.linkedBagsInfo=i,m},Je=async e=>{let m=[];e.map(i=>{let o={params:{id:i?.ssg_track_key,idairguide:"all"}},v=J(802002);o={...o,...v},m.push(o)}),de(m,je)},je=async e=>{const i=await X(e);if(i)return i};ce(["click"]);export{Ke as default,je as fetchCSVInve,Je as loadManifest,Ye as updLinkedBags};
