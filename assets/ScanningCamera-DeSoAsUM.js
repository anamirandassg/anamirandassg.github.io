import{a as o,c as K,h as U,o as V,m as X,d as a,S as C,G as ee,i as s,f as te,g as L,t as P}from"./index-B_53LJ_1.js";import"./ButonHrm-BqZiRWXy.js";import{b as re,u as se,g as O}from"./Util-dbxHFpkD.js";import{H as ae,a as oe}from"./html5-qrcode-scanner-Cl8XE5pu.js";import{u as ne}from"./debounces-CDdj8hRx.js";import n from"./FlexSpace-C6uoiUTH.js";import"./globalSignal-DX1TAe3C.js";import{h as ie}from"./ScanningServices-7rhfF9aD.js";import{OpenToast as le}from"./Toast-bDdMPYZa.js";/* empty css                 */import"./SVG-DVMkJ6pO.js";import"./index-Ci0zXM0r.js";var ce=P('<div class=scanWrp><div><div class=" _dsplFlx"><h3 class="errTxt err centerBx "></h3></div><div class=" _dsplFlx"><h3 class="errTxt ybcity centerBx"></h3></div><div class=" _dsplFlx"><h3 class="errTxt centerBx"></h3></div></div><div></div><div id=qr-reader style=width:300px>'),de=P("<slot name=plans style=margin-top:35px><div>"),me=P("<div>esta funcion es solo para dispositivos mobiles");function Pe(q){const[H,M]=o([]),[l,_]=K({}),[N,Q]=o(""),[$,I]=o(),[j,T]=o(),[R,G]=o(""),[k,z]=o(""),[v,A]=o("");U(()=>{}),V(()=>{I(!1),re("cameraScanLoc")?.clear()}),X(()=>{setTimeout(()=>{J()},90)});const D=(e,t)=>{G(t),z(e),setTimeout(()=>{z("")},1300)},W=e=>{A(e),setTimeout(()=>{A("")},2e3)},E=(e,t)=>{e!==j()&&(T(e),setTimeout(()=>{T("")},3e3),Y(e))},Y=e=>{e||(e=N()),e=e.split("'").join("-"),Q(""),!v()&&Z(e)},Z=async e=>{let t=await ie(e,q?.status);if(t?.data){D("","success"),le({text:`Pertenece a ${t?.data?.city?t?.data?.city:""}${t?.data?.estate?" :: "+t?.data?.estate:""}`,timeout:3500,theme:"green",id:O()});let c={consigneeInfo:{ybcity:t?.data?.city,ybestate:t?.data?.estate}};_(c),M([...H(),t.data])}else t?.error&&(D("",t?.error?.alert),_(t?.error?.scanData),W(O()))},J=()=>{I(!0);let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[ae.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},t=new oe("qr-reader",e);t.render(E),se("cameraScanLoc",t)};return ne(E,400),a(C,{when:!0,get fallback(){return me()},get children(){return a(C,{get when(){return $()},get children(){var e=de(),t=e.firstChild;return e._$owner=ee(),s(e,a(C,{get when(){return $()},style:"margin-top: 35px",get children(){var c=ce(),i=c.firstChild,d=i.firstChild,m=d.firstChild,p=d.nextSibling,u=p.firstChild,f=p.nextSibling,y=f.firstChild,h=i.nextSibling;return s(d,a(n,{}),m),s(m,k),s(d,a(n,{}),null),s(p,a(n,{}),u),s(u,()=>l?.consigneeInfo?.ybcity),s(p,a(n,{}),null),s(f,a(n,{}),y),s(y,()=>l?.consigneeInfo?.ybestate),s(f,a(n,{}),null),te(r=>{var F=`scanOverlayFront ${R()}`,S=v()?"block":"none",g=300/k()?.length*1.73+"px",b=300/l?.consigneeInfo?.ybcity?.length*1.13+"px",w=300/l?.consigneeInfo?.ybestate?.length*1.23+"px",B=`scanOverlay  ${R()} `,x=v()?"block":"none";return F!==r.e&&L(i,r.e=F),S!==r.t&&((r.t=S)!=null?i.style.setProperty("display",S):i.style.removeProperty("display")),g!==r.a&&((r.a=g)!=null?m.style.setProperty("font-size",g):m.style.removeProperty("font-size")),b!==r.o&&((r.o=b)!=null?u.style.setProperty("font-size",b):u.style.removeProperty("font-size")),w!==r.i&&((r.i=w)!=null?y.style.setProperty("font-size",w):y.style.removeProperty("font-size")),B!==r.n&&L(h,r.n=B),x!==r.s&&((r.s=x)!=null?h.style.setProperty("display",x):h.style.removeProperty("display")),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),c}}),t),e}})}})}export{Pe as default};
