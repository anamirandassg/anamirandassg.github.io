const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-D5Ze5vkI.js","assets/index-6DSqrwZk.js","assets/index-D4QuRvi-.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-DD2snXr_.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-Bn0GhLAF.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-BlC4dmm6.js","assets/debounces-CC98Seie.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-C_e5PhMM.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-Dc6e_jij.js","assets/Util-ATVR_Ai5.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-D_1o60s0.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DVHzlrdU.js","assets/DialogHRM-4mGdbPoc.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-C32NCwZL.js","assets/ShowQRPrintLabel-CV5mOArM.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-BD8z93eH.js","assets/Toast-Qj0KCn2y.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-DDrhf3dh.js"])))=>i.map(i=>d[i]);
import{l as B,_ as G,c as re,a as E,o as Le,h as Ne,b as ze,i as r,d as t,f as V,e as Fe,t as b,j as ne,S as v,w as qe,E as ue,q as K,F as Z,g as J,s as Re,x as ee}from"./index-6DSqrwZk.js";import{c as Ve,f as te,a as w,O as W,g as O,d as je,q as j,e as Te}from"./Util-ATVR_Ai5.js";import{u as Qe}from"./debounces-CC98Seie.js";import{i as Y}from"./globalSignal-C32NCwZL.js";import{g as se,S as We,l as Ye}from"./ShowQRPrintLabel-CV5mOArM.js";import{OpenToast as Xe}from"./Toast-Qj0KCn2y.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-BD8z93eH.js";var He=b("<div style=padding:4px>"),le=b('<div class="icon_status centerBx">'),Ue=b('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),Ze=b('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Ke=b('<div><div class="_dsplFlx flxWrp spaceAround ">'),Je=b('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),et=b('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),tt=b('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),de=b("<div> <!>."),ge=b("<div> "),me=b("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),rt=b("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),he=b("<h5 class=totalBagsNo> <!> / "),_e=b('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),fe=b("<div class=leftMrg> "),nt=b("<div class=bottombx><h4>"),st=b('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),lt=b("<div style=padding:16px;margin-left:20px;>"),it=b("<div>"),at=b('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const R=B(()=>G(()=>import("./LoadingColorSpinner-D5Ze5vkI.js"),__vite__mapDeps([0,1,2,3]))),ot=B(()=>G(()=>import("./InputHr-DD2snXr_.js"),__vite__mapDeps([4,1,2,5]))),D=B(()=>G(()=>import("./SVG-Bn0GhLAF.js"),__vite__mapDeps([6,1,2,7]))),ct=B(()=>G(()=>import("./DropDwnSearch-BlC4dmm6.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ut=B(()=>G(()=>import("./ContainerElasticView-C_e5PhMM.js"),__vite__mapDeps([11,1,2,6,7,12]))),dt=B(()=>G(()=>import("./ButonHrm-Dc6e_jij.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ie=B(()=>G(()=>import("./CheckBoxSlide-D_1o60s0.js"),__vite__mapDeps([16,1,2,17]))),gt=B(()=>G(()=>import("./ItemOnEnvios-DVHzlrdU.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27])));B(()=>G(()=>import("./ItemOnEnviosMobile-DDrhf3dh.js"),__vite__mapDeps([28,1,2,14,7,19,20,9,21])));function Pt(){const[e,l]=re({list:{manifest:{id:"",label:""},search:"",status:""}}),[n,i]=re({}),[d,a]=re({}),[k,x]=E(""),[c,T]=E(!1),[X,M]=E(64),[A,z]=E(!1),[F,H]=E(!1),[ve,be]=E(""),L=Qe(x,500),[$e,ae]=E(!1),[pe,oe]=E(!1),Q=(o,u)=>{l("list",{[o]:u}),L(O())},ye=()=>{z(!A()),L(O())},ke=()=>{T(!c()),L(O())},xe=()=>{H(!F()),L(O())};Le(()=>{}),Ne(()=>{});const Ce=()=>{M(o=>o+64)},we=o=>{let u=Math.ceil(o?.length/64);Te(Ce,1250,u)},[N,{refetch:kt}]=ze(k,async o=>{i(void 0),a("prov",void 0);let u=e?.list?.manifest?.id;ve()!==u&&be(u);const P=await ft(u);i(P?.sumary),a("prov",P?.provinceGroup);let y=[];var _={};if(c()){_=await _t(e?.list?.search,u,e?.list?.status,e?.list?.estate,e?.list?.city),M(0);let S={};A()?W(_).map($=>{let p=_[$],C=p?.estate||p?.consigneeInfo?.ybestate;S[$]?y.push(p):S[$]=1,w("M023009")?.ZoneCity?.[p?.zone]?.[C]||y.push(p)}):F()?W(_).map($=>{let p=_[$],C="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const s=new RegExp(C);p.tracking.length===13&&s.test(p.tracking)&&y.push(p),p?.currentStatus||y.push(p)}):y=je(_),we(y)}return y}),ce=()=>N()?.length,Se=o=>{l("list",{manifest:o,status:void 0}),L(O())},Ie=()=>{bt(N())},Ee=()=>{$t(N())},Me=()=>{},Ae=(o,u)=>{Q("estate",o),Q("city",u)},Be=(o,u)=>{l("list",{estate:void 0,city:void 0}),L(O())},U=o=>o?" "+o:"",Ge=o=>{let u=o?.consigneeInfo;return U(u?.firstName)+U(u?.middleName)+U(u?.lastName)+U(u?.lastName2)},Pe=async()=>{let o=[],u=360;if(ae(!0),N().length<u){const P=N().map(async(_,q)=>{let S=_?.tracking,$="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const p=new RegExp($);S.length===13&&p.test(S)&&(S=S.slice(3,12));let s=await se(S),g={state:_?.consigneeInfo?.ybestate,name:Ge(_),phoneNumber:_?.consigneeInfo?.phoneNumber,altPhoneNumber:_?.consigneeInfo?.altPhoneNumber,guiaWeek:_?.guia,bulto:_?.bagnumber,tracking:S,qr:s};o.push(g)});await Promise.all(P);let y=await We(o);window.open(y),ae(!1)}else Xe({text:`El limite de etiquetas a imprimir es de ${u}`,timeout:2500,id:O()})},Oe=async()=>{let o=[];oe(!0),setTimeout(async()=>{let u=400,P=619124,y=[],_=new Date().getFullYear().toString().slice(2,4);for(let $=0;$<u;$++)y.push($);const q=y.map(async($,p)=>{let C=P+$*2,s=C+1;const g=await se("Y"+_+C),m=await se("Y"+_+s);let f={mtrx:g,mtrx2:m,lbl:"Y"+_+C,lbl2:"Y"+_+s};o.push(f)});await Promise.all(q);let S=await Ye(o);window.open(S),oe(!1)},760)},De=async o=>{await vt(e?.list?.manifest?.id)};return(()=>{var o=tt(),u=o.firstChild,P=u.firstChild,y=P.nextSibling,_=y.firstChild,q=y.nextSibling,S=q.firstChild,$=u.nextSibling,p=$.firstChild,C=$.nextSibling;return r(_,()=>e?.list?.manifest?.id),r(q,t(ie,{get initValue(){return c()},updChange:ke,color:"var(--background-red-ssg)"}),S),r(o,t(v,{get when(){return ne?.profile?.isAdmin},get children(){return t(dt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Ie})}}),$),r(p,t(ct,{get list(){return w("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:s=>Se(s),width:"260px"})),r($,t(v,{get when(){return qe(()=>!!e?.list?.manifest?.id)()&&c()},get children(){return[(()=>{var s=He();return r(s,t(ot,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>Q("search",g)})),s})(),(()=>{var s=Ze(),g=s.firstChild,m=g.firstChild;return r(g,t(ie,{get initValue(){return A()},updChange:ye,color:"var(--background-red-ssg)"}),m),r(s,t(v,{get when(){return ne?.profile?.isAdmin},get children(){var f=Ue(),h=f.firstChild;return r(f,t(ie,{get initValue(){return F()},updChange:xe,color:"var(--background-red-ssg)"}),h),r(f,t(v,{get when(){return F()},get children(){var I=le();return I.$$click=Ee,r(I,t(D,{name:"outline_delete",size:24})),I}}),null),f}}),null),s})()]}}),null),r(C,t(v,{get when(){return e?.list?.manifest?.id},get children(){var s=Ke(),g=s.firstChild;return r(g,t(ue,{fallback:m=>(()=>{var f=de(),h=f.firstChild,I=h.nextSibling;return I.nextSibling,r(f,()=>m.toString(),I),f})(),get children(){return t(K,{get fallback(){return(()=>{var m=ge();return m.firstChild,r(m,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),m})()},get children(){return t(v,{get when(){return n?.total},get children(){return t(Z,{get each(){return W(n)},children:(m,f)=>Y()?t(ht,{keyG:m,total:ce,get status(){return e?.list?.status},get amount(){return n?.[m]},get showItems(){return c()},updForm:Q}):t(mt,{keyG:m,total:ce,get showItems(){return c()},get status(){return e?.list?.status},get amount(){return n?.[m]},updForm:Q})})}})}})}})),V(()=>J(s,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),s}}),null),r(C,t(v,{get when(){return ne?.profile?.isAdmin},get children(){var s=Je(),g=s.firstChild,m=g.firstChild,f=m.nextSibling;return r(g,t(v,{get when(){return!pe()},get fallback(){return(()=>{var h=me(),I=h.firstChild;return r(h,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),I),h})()},get children(){var h=le();return h.$$click=Oe,r(h,t(D,{name:"printer",size:24,color:"firebrick"})),h}}),m),m.$$click=De,r(m,t(D,{name:"tag-outline",size:24})),f.$$click=Me,r(f,t(D,{name:"outline_renew",size:24})),r(g,t(v,{get when(){return!$e()},get fallback(){return(()=>{var h=me(),I=h.firstChild;return r(h,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),I),h})()},get children(){var h=le();return h.$$click=Pe,r(h,t(D,{name:"printer",size:32})),h}}),null),s}}),null),r(C,t(v,{get when(){return d?.prov},get children(){var s=et(),g=s.firstChild,m=g.firstChild,f=g.nextSibling;return r(m,t(v,{get when(){return d?.prov},get children(){return t(Z,{get each(){return W(d?.prov)},children:(h,I)=>t(yt,{ism:h,get item(){return d?.prov?.[h]},updS:Ae})})}})),f.$$click=Be,r(f,t(D,{name:"Xclose",size:22})),V(()=>J(s,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),s}}),null),r(C,t(ue,{fallback:s=>(()=>{var g=de(),m=g.firstChild,f=m.nextSibling;return f.nextSibling,r(g,()=>s.toString(),f),g})(),get children(){return t(K,{get fallback(){return(()=>{var s=ge();return s.firstChild,r(s,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return t(v,{get when(){return N()},get children(){return t(Z,{get each(){return N()?.slice(0,X())},children:(s,g)=>t(gt,{item:s,refresh:()=>L(O())})})}})}})}}),null),V(s=>Re(C,` ${Y()?"":"width:94vw;"} margin: 0 auto;`,s)),o})()}const mt=e=>{const[l,n]=E(!1),[i,d]=E(0),a=()=>{let c=e?.keyG;e?.keyG==="total"&&(c=null),e?.updForm("status",c)},k=()=>{l()||!Y()&&e?.keyG!=="total"&&(d(w("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),n(!0))},x=()=>{d("0px"),l()&&n(!1)};return t(v,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var c=fe();return c.firstChild,r(c,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),c})()},get children(){var c=_e(),T=c.firstChild,X=T.nextSibling;return c.$$mouseout=x,c.$$mousemove=k,c.$$click=a,r(c,t(v,{get when(){return l()},get children(){var M=rt(),A=M.firstChild,z=A.firstChild,F=z.firstChild;return r(F,()=>w("M023009")?.statusObjDesc?.[e?.keyG]),V(H=>(H=i())!=null?A.style.setProperty("width",H):A.style.removeProperty("width")),M}}),T),r(T,t(D,{get name(){return w("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(c,t(v,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var M=he(),A=M.firstChild,z=A.nextSibling;return z.nextSibling,r(M,()=>e?.total(),z),M}}),X),r(X,()=>e?.amount),V(()=>J(c,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),c}})}})},ht=e=>{const l=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t(v,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var n=fe();return n.firstChild,r(n,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=_e(),i=n.firstChild,d=i.nextSibling;return n.$$click=l,r(i,t(D,{get name(){return w("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(n,t(v,{get when(){return w("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var a=nt(),k=a.firstChild;return r(k,()=>w("M023009")?.statusObjDesc?.[e?.keyG]),a}}),d),r(n,t(v,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var a=he(),k=a.firstChild,x=k.nextSibling;return x.nextSibling,r(a,()=>e?.total(),x),a}}),d),r(d,()=>e?.amount),V(()=>J(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},_t=async(e,l,n,i,d)=>{let a={params:{idairguide:l,":search5":l},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"]};e&&e.split(" ").map((x,c)=>{x&&(a.params[":search"+c]=x.trim())}),n&&(a.params[":status"]=n),i&&(a.params[":estate"]=i),d&&(a.params[":city"]=d),ee?.roles?.agency&&(a.params[":agency"]=ee?.roles?.agency+"");let k={...w(j())}[802001];if(a={...a,...k},l&&Object.keys(a.params).length>=2){const x=await te(a);return x?.data?.error?{}:x}return{}},ft=async e=>{let l={params:{idairguide:e}},n={...w(j())}[802004];l={...l,...n},ee?.roles?.agency&&(l.params[":agency"]=ee?.roles?.agency+"");const i=await te(l);return i?.error?{}:i},vt=async e=>{let l={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n={...w(j())}[802001];l={...l,...n};const i=await te(l);return i?.error?{}:i},bt=async e=>{e.map(l=>{let n={params:{id:l?.ssg_track_key,idairguide:l?.idairguide}},i={...w(j())}[802002];n={...n,...i}})},$t=async e=>{e.map(l=>{let n={params:{ssg_track_key:l?.ssg_track_key,idairguide:l?.idairguide}},i={...w(j())}[802005];n={...n,...i}})},Ot=async(e,l)=>{let n=[];e.map(i=>{let d={params:{ssg_track_key:i?.ssg_track_key,idairguide:i?.idairguide},data2update:{currentStatus:l}},a={...w(j())}[802004];d={...d,...a},n.push(d)}),Ve(n,pt)},pt=async e=>{const n=await te(e);if(n)return n},yt=e=>(()=>{var l=it();return r(l,t(v,{get when(){return e?.item?.total>0},get children(){var n=st(),i=n.firstChild,d=i.firstChild,a=d.firstChild,k=d.nextSibling;return i.$$click=()=>e?.updS(e?.ism),r(d,()=>e?.ism,a),r(k,()=>e?.item?.total),n}}),null),r(l,t(ut,{get children(){var n=lt();return r(n,t(v,{get when(){return e?.item?.cities},get children(){return t(Z,{get each(){return W(e?.item?.cities)},children:(i,d)=>(()=>{var a=at(),k=a.firstChild,x=k.nextSibling;return a.$$click=()=>e?.updS(e?.ism,i),r(k,i),r(x,()=>e?.item?.cities?.[i]),a})()})}})),n}}),null),l})();Fe(["click","mousemove","mouseout"]);export{mt as StatusGroupItem,Pt as default,$t as deleteManifest,pt as fetchCSVInve,bt as loadManifest,Ot as updateManifest};
