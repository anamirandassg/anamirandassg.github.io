const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BjsgGquL.js","assets/index-CSWRe9WA.js","assets/index-lCkr9jrN.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DeliveryCamera-CNdlYKKB.js","assets/ButonHrm-PkqUPOIE.js","assets/SVG-CnpMu39j.js","assets/ButonHrm-BSeWNUGQ.css","assets/html5-qrcode-scanner-Bq_hdwOU.js","assets/debounces-Hafqhk5o.js","assets/FlexSpace-CoS-w3fX.js","assets/DeliveryScanView-D3CF5WdV.js","assets/DialogHRM-xd_ePV8O.js","assets/DialogHRM-V9_lZntj.css","assets/DeliveryView-iarsBkuP.js","assets/PDFButton-CDCBNSM_.js","assets/qrcode-C5vWJp7P.js","assets/fontkit.es-BvE5c5FQ.js","assets/Toast-CZ1R9Tq2.js","assets/Toast-DLpFKn-Q.css","assets/components-Ca4eQAjW.js","assets/InputHr-udbEPdHr.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{c as B,l as h,_ as b,a as S,ap as q,u as z,k as W,r as j,s as H,b as J,i as c,d as u,S as $,O as C,H as K,F as X,G as Y,e as U,w as Z,g as ee,p as te,q as re,t as f,j as w,X as ne}from"./index-CSWRe9WA.js";import"./DialogHRM-xd_ePV8O.js";import"./ShowScanDeliveryManifest-Bf8Dt0aD.js";import"./PDFButton-CDCBNSM_.js";import{u as N}from"./debounces-Hafqhk5o.js";import"./html5-qrcode-scanner-Bq_hdwOU.js";import"./DeliveryScanView-D3CF5WdV.js";import"./DeliveryView-iarsBkuP.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-BvE5c5FQ.js";import"./Toast-CZ1R9Tq2.js";import"./components-Ca4eQAjW.js";var se=f("<h4>"),oe=f("<h5>"),ie=f('<div class=" flxWrp spaceAround centerBx bottombx"><div class=bag_number><h4>'),ae=f('<div class=" flxWrp spaceAround centerBx bottombx"><div style=padding:4px>'),le=f('<div><div class=" flxWrp spaceAround centerBx"><h2> Manifesto de Entrega </h2><div class=bottombx><h4></h4></div></div><div style=padding:16px></div><div>'),E=f("<div> "),ce=f("<div> <!>.");const[Ne,Ee]=B(),P=h(()=>b(()=>import("./LoadingColorSpinner-BjsgGquL.js"),__vite__mapDeps([0,1,2,3])));h(()=>b(()=>import("./DeliveryCamera-CNdlYKKB.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10])));const de=h(()=>b(()=>import("./DeliveryScanView-D3CF5WdV.js").then(o=>o.I),__vite__mapDeps([11,1,2,12,13,14,15,16,17,18,19,9,20])));h(()=>b(()=>import("./SVG-CnpMu39j.js"),__vite__mapDeps([6,1,2])));const ue=h(()=>b(()=>import("./InputHr-udbEPdHr.js"),__vite__mapDeps([21,1,2,22])));h(()=>b(()=>import("./FlexSpace-CoS-w3fX.js"),__vite__mapDeps([10,1,2])));const[Pe,Be]=S("");function Le(){const[o,i]=S(0),[n,k]=B({});q();const[L,fe]=z(),[I,O]=S(" ");S(0);const D=N(i,500),R=r=>{O(r),D(w())};W(()=>{F()}),j(()=>{});const M=r=>(v(r?.ybestate)+"_"+v(r?.ybcity)+"_"+v(r?.ybreparto)+"_"+v(r?.ybstreet)+"_"+v(r?.ybstreetNo)).toLowerCase();H(async()=>{let r=await ge({id:L?.dId,checkAuth:!0});k("detail",r);let a={},m={},y={};r?.linkedBagsInfo?.map(t=>{if(t?.currentStatus!="YABA_99"){let d=M(t?.consigneeInfo),l=t.cidentity,e=t?.estate||t?.consigneeInfo?.ybestate,s=t?.city||t?.consigneeInfo?.ybcity,p=t?.consigneeInfo?.ybreparto;if(y[p]||(y[p]=1),m[s]||(m[s]=1),a[d]||(a[d]={city:s,estate:e,rpto:p,address:{ybstreetNo:t?.consigneeInfo?.ybstreetNo,ybstreet:t?.consigneeInfo?.ybstreet,ybapt:t?.consigneeInfo?.ybapt,ybbetwen1:t?.consigneeInfo?.ybbetwen1,ybbetwen2:t?.consigneeInfo?.ybbetwen2},currentStatus:t?.currentStatus,customers:{},bagsNo:0}),!a[d].customers[l]){let G={name:me(t),phoneNumber:pe(t),cid:t.cidentity},A={...t,...G};A.bagsNumb={},a[d].customers[l]=A}let g={bagnumber:t?.bagnumber,idairguide:"all",tracking:t?.tracking};a[d].customers[l].bagsNumb[t?.ssg_track_key]=g,a[d].bagsNo+=1}}),k("linkedBagsInfo",a),N(w()),i(w())});function T(){return"geolocation"in navigator}function V(r){ne({latitude:r?.coords?.latitude,longitude:r?.coords?.longitude})}function F(){T()?navigator.geolocation.getCurrentPosition(V):showMessage("Geolocation isn't supported by your browser")}const x=r=>r,[Q,{refetch:_e}]=J(o,async r=>{let a=n?.linkedBagsInfo,m=[];return I().length>0&&C(a).map((t,d)=>{let l=a[t],e=JSON.stringify(l).toLowerCase(),s=I().toLowerCase();e.indexOf(s)>0&&m.push(t)}),I().length===0&&(m=C(a)),m&&m.sort((t,d)=>{let l=x(t),e=x(d);return l<e?1:l>e?-1:0})});return(()=>{var r=le(),a=r.firstChild,m=a.firstChild,y=m.nextSibling,t=y.firstChild,d=a.nextSibling,l=d.nextSibling;return c(t,()=>n?.detail?.name),c(r,u($,{get when(){return n?.detail?.name},get fallback(){return(()=>{var e=E();return e.firstChild,c(e,u(P,{stroke:"rgb(200 25 60 / 1)",size:62}),null),e})()},get children(){return[(()=>{var e=ie(),s=e.firstChild,p=s.firstChild;return c(e,u($,{get when(){return n?.detail?.city},get children(){return[(()=>{var g=se();return c(g,()=>n?.detail?.city),g})(),"|"]}}),s),c(e,u($,{get when(){return n?.detail?.province},get children(){return[(()=>{var g=oe();return c(g,()=>n?.detail?.province),g})(),"|"]}}),s),c(p,()=>C(n?.linkedBagsInfo)?.length),e})(),(()=>{var e=ae(),s=e.firstChild;return c(s,u(ue,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return I()},placeholder:"search...",colors:"#2b2b2b",handleClick:p=>R(p)})),e})()]}}),l),c(l,u(Y,{fallback:e=>(()=>{var s=ce(),p=s.firstChild,g=p.nextSibling;return g.nextSibling,c(s,()=>e.toString(),g),s})(),get children(){return u(K,{get fallback(){return(()=>{var e=E();return e.firstChild,c(e,u(P,{stroke:"rgb(200 25 60 / 1)",size:62}),null),e})()},get children(){return u($,{get when(){return C(n?.linkedBagsInfo)?.length>0},get children(){return u(X,{get each(){return Q()},children:(e,s)=>u(de,{addressId:e,get item(){return n?.linkedBagsInfo?.[e]},get list(){return n?.linkedBagsInfo}})})}})}})}})),U(e=>Z(l,` ${ee()?"":"width:94vw;"} margin: 0 auto`,e)),r})()}const ge=async o=>{let i={params:o},n=te(703003);return i={...i,...n},await re(i)},v=o=>o||"",_=o=>o?" "+o:"",me=o=>{let i=o?.consigneeInfo;return _(i?.firstName)+_(i?.middleName)+_(i?.lastName)+_(i?.lastName2)},pe=o=>{let i=o?.consigneeInfo,n=_(i?.altPhoneNumber);return _(i?.phoneNumber)+(n?" |"+n:"")};export{ge as LookupBagId,Le as default,Ne as scannedQRs,Ee as setScannedQRs,Be as setStatus,Pe as status};
