const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-Dy1oQlbZ.js","assets/index-DjvPVNJT.js","assets/index-BRlA1Q7g.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-IIeRO-So.js","assets/debounces-DIwPPKs0.js","assets/SVG-DwHyCtjz.js","assets/Util-BOZFT72w.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-BrQ5cF_F.js","assets/ButonUploadHrm-4rrVkZyo.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-Bprn5I61.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-B6qd61_Q.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as j,_ as A,r as xe,c as J,a as L,o as fe,b as $e,d as ye,i as e,e as l,S as w,f as se,k as ae,m as Ce,q as Se,P as Be,F as ne,g as te,h as Ie,t as u}from"./index-DjvPVNJT.js";import{e as ee,O as oe,h as ke,g as R,f as W,m as we,a as V,I as Pe}from"./Util-BOZFT72w.js";import{u as Ee}from"./debounces-DIwPPKs0.js";import{c as Oe,i as Le,g as je,a as Ae,b as Ue,u as Xe}from"./handelImagesServices-B4ncM90t.js";import{LookupInventory as De}from"./DashInventory-AHREoFkg.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-MtqXYXq9.js";var Fe=u('<div class="icon_status centerBx">'),qe=u("<div style=width:300px;max-height:300px;position:relative;><img alt=sf><div>"),Me=u("<div style=width:300px;position:relative;><img alt=sf>"),Ne=u('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Ve=u('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div style=margin:16px><div class=bottombx><h4>Codigos X tallas:</h4></div><div class="centerBx flxWrp "style=margin:16px>'),Te=u("<div class=hseparator>"),Ze=u('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Re=u('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),We=u('<div class="bottombx centerBx unit"style=padding:30px>'),Ye=u('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),Qe=u('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class="icon_status centerBx "style=margin-right:52px></div><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><div class=" centerBx spaceAround"><h4>Factura</h4></div></div><div class="tr_bar_40 centerBx spaceAround"><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),ze=u("<div> "),Ge=u("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),He=u('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ke=u('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),ce=u("<div style=margin:8px>"),Je=u('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>:'),et=u("<div class=unitBx><h5>"),tt=u('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const de=j(()=>A(()=>import("./LoadingColorSpinner-Dy1oQlbZ.js"),__vite__mapDeps([0,1,2,3]))),lt=j(()=>A(()=>import("./DropDwnSearch-IIeRO-So.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),rt=j(()=>A(()=>import("./FlexSpace-BrQ5cF_F.js"),__vite__mapDeps([9,1,2]))),it=j(()=>A(()=>import("./ButonUploadHrm-4rrVkZyo.js"),__vite__mapDeps([10,1,2,6,7,11]))),st=j(()=>A(()=>import("./CheckBoxSlide-Bprn5I61.js"),__vite__mapDeps([12,1,2,13]))),at=j(()=>A(()=>import("./InputHr-B6qd61_Q.js"),__vite__mapDeps([14,1,2,15]))),ue=j(()=>A(()=>import("./SVG-DwHyCtjz.js"),__vite__mapDeps([6,1,2,7])));function ft(s){const[r,o]=xe(),[t,h]=J({search:""});J(),J();const[m,Y]=L(null),[U,F]=L(!1),[X,q]=L(!1),[E,Q]=L(""),[ut,pe]=L("");Ee(pe,400),fe(()=>{}),$e(()=>{});const le=async()=>{if(r?.mId){let a={id:r?.mId,businessId:te?.profile?.businessYId},b=await be(a);if(!b?.codeN){let c="9209"+Pe(8),n={id:c,businessId:te?.profile?.businessYId};(await be(n))?.ssg_product_key||(console.log("mnf",b,c),_("codeN",c))}let S=await De(r?.mId),P=0,B=0,i=[],d={};oe(S)?.map(c=>{let n=S[c]?.store;S[c]?.products?.map(x=>{if(r?.mId===x?.product?.id){let $={...S[c]};delete $.products,$.qty=x?.qty*1,$.price=x?.price*1,P+=x?.price*1*x?.qty*1,d[n]||(d[n]={total:0}),d[n].total+=$.qty,B+=x?.qty*1,i.push($)}})});const g=P/B;Q(je()+Ae()+"/"+b?.productImageUrl),h("stockList",i),h("stock",{Balance:P,Total:B,priceCost:g,stockByStore:d}),h("productObj",b)}};ye(async()=>{le()});const z=async a=>{await ot(r?.mId,a),le()},re=async(a,b)=>{let S=await Ue(a.type,b,1);if(await Xe(S,a)){let B={...t?.productObj?.thumbnails};B[b]=1,await z({productImageUrl:b,thumbnails:B}),q(!1),F(!1)}else q(!1)},ve=async()=>{if(q(!0),m()?.name.split(".").pop()==="webp"){let a=t?.productObj?.code+"/"+V()+V()+".webp";re(m()?.file,a)}else{let a=await Oe(m()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),b=await Le(a),P=await(await fetch(b)).blob(),B=t?.productObj?.code+"/"+V()+V()+".webp";re(P,B)}},ge=a=>{Y(a),F(!0)},he=a=>{z({isPublic:a?"9":null})},_=async(a,b)=>{z({[a]:b})},me=async(a,b)=>{ct(t?.productObj,a)};return(()=>{var a=Qe(),b=a.firstChild,S=b.firstChild,P=S.nextSibling,B=P.nextSibling;return B.nextSibling,e(a,l(w,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var i=ze();return i.firstChild,e(i,l(de,{stroke:"rgb(200 25 60 / 1)",size:62}),null),i})()},get children(){var i=Ve(),d=i.firstChild,g=d.firstChild,c=g.firstChild,n=c.nextSibling,x=n.firstChild,$=n.nextSibling,M=d.nextSibling,G=M.nextSibling,N=G.firstChild,I=N.nextSibling,k=I.nextSibling,O=k.nextSibling,H=O.nextSibling,K=H.firstChild,f=K.nextSibling;return e(d,l(w,{get when(){return m()?.source},get children(){var y=qe(),D=y.firstChild,T=D.nextSibling;return e(T,l(w,{get when(){return!X()},get fallback(){return(()=>{var p=Ge(),Z=p.firstChild;return e(p,l(de,{stroke:"rgb(200 25 60 / 1)",size:32}),Z),p})()},get children(){var p=Fe();return p.$$click=ve,e(p,l(ue,{name:"arrow_up_large",size:24})),p}})),se(p=>{var Z=m()?.source,ie=X()?"floatBtn loading":"floatBtn ";return Z!==p.e&&ae(D,"src",p.e=Z),ie!==p.t&&Ce(T,p.t=ie),p},{e:void 0,t:void 0}),y}}),g),e(d,l(w,{get when(){return Se(()=>!!E())()&&!m()?.source},get children(){var y=Me(),D=y.firstChild;return se(()=>ae(D,"src",E())),y}}),g),e(c,()=>t?.productObj?.name),e(n,l(st,{get initValue(){return t?.productObj?.isPublic},updChange:he,color:"var(--background-red-ssg)"}),x),e($,l(it,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ge})),e(g,l(w,{get when(){return Be()},get children(){var y=Ne(),D=y.firstChild,T=D.nextSibling;return e(T,l(lt,{get list(){return ee("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:p=>me(p.id),width:"260px"})),y}}),null),e(N,l(v,{get value(){return t?.productObj?.name},label:"Nombre",key:"name",updItem:_,width:"600px"})),e(I,l(_e,{get value(){return t?.productObj?.category},label:"Categoria",key:"category",updItem:_}),null),e(I,l(C,{}),null),e(I,l(_e,{get value(){return t?.productObj?.unit},label:"U/M",key:"unit",updItem:_}),null),e(I,l(C,{}),null),e(I,l(v,{get value(){return t?.productObj?.brand},label:"Marca",key:"brand",updItem:_}),null),e(I,l(C,{}),null),e(I,l(v,{get value(){return t?.productObj?.model},label:"Modelo",key:"model",updItem:_}),null),e(k,l(v,{get value(){return t?.productObj?.ASIN},label:"ASIN",key:"ASIN",updItem:_}),null),e(k,l(C,{}),null),e(k,l(v,{get value(){return t?.productObj?.UPC},label:"UPC",key:"UPC",updItem:_}),null),e(k,l(C,{}),null),e(k,l(v,{get value(){return t?.productObj?.code},label:"codigo",key:"code",updItem:_}),null),e(k,l(v,{get value(){return t?.productObj?.codeN},label:"codigo numerico",key:"codeN",updItem:_}),null),e(O,l(v,{get value(){return t?.productObj?.description},label:"Description",key:"description",updItem:_}),null),e(O,l(C,{}),null),e(O,l(v,{get value(){return t?.productObj?.salePrice},label:"Precio Venta",key:"salePrice",updItem:_}),null),e(f,l(v,{get value(){return t?.productObj?.UPC_SIZE_XXXL},label:"XXXL",key:"UPC_SIZE_XXXL",updItem:_}),null),e(f,l(C,{}),null),e(f,l(v,{get value(){return t?.productObj?.UPC_SIZE_XXL},label:"XXL",key:"UPC_SIZE_XXL",updItem:_}),null),e(f,l(C,{}),null),e(f,l(v,{get value(){return t?.productObj?.UPC_SIZE_XL},label:"XL",key:"UPC_SIZE_XL",updItem:_}),null),e(f,l(C,{}),null),e(f,l(v,{get value(){return t?.productObj?.UPC_SIZE_L},label:"L",key:"UPC_SIZE_L",updItem:_}),null),e(f,l(C,{}),null),e(f,l(v,{get value(){return t?.productObj?.UPC_SIZE_M},label:"M",key:"UPC_SIZE_M",updItem:_}),null),e(f,l(C,{}),null),e(f,l(v,{get value(){return t?.productObj?.UPC_SIZE_S},label:"S",key:"UPC_SIZE_S",updItem:_}),null),i}}),b),e(b,l(w,{get when(){return t?.stockList},get children(){return[Te(),(()=>{var i=We();return e(i,l(w,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var d=Ze(),g=d.firstChild,c=g.nextSibling,n=c.firstChild;return e(n,()=>(t?.stock?.Total*1).toFixed(2)),d})(),l(rt,{}),(()=>{var d=Re(),g=d.firstChild,c=g.nextSibling,n=c.firstChild;return n.firstChild,e(n,()=>(t?.stock?.priceCost*1).toFixed(2),null),d})()]}})),i})(),(()=>{var i=Ye();return i.firstChild,e(i,l(ne,{get each(){return oe(t?.stock?.stockByStore)},children:(d,g)=>(()=>{var c=He(),n=c.firstChild,x=n.firstChild,$=n.nextSibling,M=$.firstChild;return e(n,()=>ee("storeGroupBy")?.[d]?.label,x),e(M,()=>(t?.stock?.stockByStore?.[d]?.total*1).toFixed(2)),c})()}),null),i})()]}}),S),e(b,l(ne,{get each(){return t?.stockList},children:(i,d)=>(()=>{var g=Ke(),c=g.firstChild,n=c.nextSibling,x=n.firstChild,$=n.nextSibling,M=$.firstChild,G=M.firstChild,N=$.nextSibling,I=N.firstChild,k=N.nextSibling,O=k.firstChild,H=O.firstChild,K=k.nextSibling,f=K.firstChild,y=f.firstChild;return y.firstChild,e(c,l(ue,{get name(){return nt[i?.type]},size:24,color:"var(--background-red-ssg)"})),e(x,()=>ke(i?.createDate)),e(G,()=>(i?.qty*1).toFixed(2)),e(I,()=>i?.invoice),e(O,()=>ee("storeGroupBy")?.[i?.store]?.label,H),e(y,()=>(i?.price*1).toFixed(2),null),g})()}),null),a})()}let nt={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const C=()=>[ce(),"|",ce()],v=s=>{const[r,o]=L(!1),[t,h]=L(""),m=()=>{s?.updItem(s?.key,t()),o(!1)},Y=()=>{let U=r();U||h(s?.value),o(!U)};return(()=>{var U=Je(),F=U.firstChild,X=F.firstChild,q=X.firstChild;return X.$$click=Y,e(X,()=>s?.label,q),e(F,l(w,{get when(){return r()},get fallback(){return l(w,{get when(){return s?.value},get children(){var E=et(),Q=E.firstChild;return e(Q,()=>s?.value),E}})},get children(){return l(at,{get width(){return s?.width||"160px"},backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()||""},get placeholder(){return s?.label},colors:"#2b2b2b",handleClick:E=>h(E),onEnter:m})}}),null),U})()},_e=s=>l(w,{get when(){return s?.value},get children(){var r=tt(),o=r.firstChild,t=o.firstChild,h=t.nextSibling,m=h.firstChild;return e(t,()=>s?.label),e(m,()=>s?.value),r}}),ot=async(s,r)=>{let o={params:{id:s,businessId:te?.profile?.businessYId},form:r},t=R(129004);return o={...o,...t},await W(o)},ct=async(s,r)=>{let o={...s};o.ssg_product_key=V(),o.businessId=r;let t={params:{businessId:r},form:o},h=R(129003);t={...t,...h};{const m=await W(t);return m?.data?.error?{}:m?.data}},be=async s=>{let r={params:s},o=R(122002);return r={...r,...o},await W(r)},$t=async s=>{let r=[];s.map(o=>{let t={params:{id:o?.ssg_track_key,idairguide:"all"}},h=R(802002);t={...t,...h},r.push(t)}),we(r,dt)},dt=async s=>{const o=await W(s);if(o)return o};Ie(["click"]);export{ft as default,dt as fetchCSVInve,$t as loadProduct,ot as updProducts};
