const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-B6jiXU73.js","assets/index-DLm-qbVb.js","assets/index-DGSEMnLR.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-CzkegoSq.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-DMQC_3si.js","assets/index-Ci0zXM0r.js"])))=>i.map(i=>d[i]);
import{l as P,_ as R,a as f,c as K,h as U,o as ee,m as te,b as se,i as a,d as c,f as w,e as re,t as m,s as ie,S as O,q as ne,F as ae,g as G,E as le,j as oe,z as ce}from"./index-DLm-qbVb.js";import{g as h,f as N}from"./Util-R0w8Fgio.js";import{i as M,g as V}from"./globalSignal-DG1rgUS8.js";import{status as T,scannedQRs as de}from"./Scanning-CYJaoyK3.js";import ge from"./FlexSpace-D3ljtz2L.js";import{t as A,d as ue,b as pe}from"./manifestList-CSHEgbpJ.js";import"./index-Ci0zXM0r.js";import"./App.module-CbHnVtRQ.js";var fe=m('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),be=m('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div class=scrollH>'),ye=m("<div> <!>."),_e=m("<div> "),he=m('<div class=itm0hist><div><div class="centerBx bottombx"><div class="icon_status centerBx"></div><p></p></div><div class="centerBx bottombx"><h5></h5><div class=vertseparator></div><h4>');const me=P(()=>R(()=>import("./LoadingColorSpinner-B6jiXU73.js"),__vite__mapDeps([0,1,2,3]))),ve=P(()=>R(()=>import("./InputHr-CzkegoSq.js"),__vite__mapDeps([4,1,2,5]))),B=P(()=>R(()=>import("./SVG-DMQC_3si.js"),__vite__mapDeps([6,1,2,7])));function De(v){const[d,I]=f([]),[D,g]=K({}),[L,C]=f(""),[W,$e]=f(""),[k,Q]=f(""),[Ie,q]=f(""),[E,F]=f("");U(()=>{}),ee(()=>{}),te(()=>{});const b=(r,n)=>{Q(n),q(r),setTimeout(()=>{q("")},300)},y=r=>{F(r),setTimeout(()=>{F("")},3e3)},X=r=>{r||(r=L()),r=r.split("'").join("-"),C(""),E();let n={timeStamp:new Date().getTime(),latitude:V?.latitude,longitude:V?.longitude,statusId:T(),userId:oe?.profile?.userId},t=r.split("/");r.split("-").length>3&&(t=r.split("-"));let e=t?.[0],u="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const s=new RegExp(u);let l=t.length>4&&e.length===12,o=e.length===13&&s.test(e),i={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};o&&(i={idairguide:"175-2383"+e.slice(3,7),":search0":e});let S="^[0-9]{4}-[1-9]{4}";const x=new RegExp(S);let p=e.length===9&&x.test(e);p&&(i={idairguide:"175-2383"+e.slice(0,4),":search0":e}),o||l||p?Y(i,n):(b("","error"),g({consigneeInfo:{ybestate:"Codigo Incorrecto"}}),y(h()))},Y=async(r,n)=>{let t=await Se(r),e=Object.keys(t)?.[0];if(t[e]?.idairguide){let u=t[e]?.statusHistory||[];u.push(n),r.ssg_track_key=e;let s=t[e]?.estate||t[e]?.consigneeInfo?.ybestate,l=t[e]?.city||t[e]?.consigneeInfo?.ybcity,o={estate:s,city:l,tracking:t[e]?.tracking,currentStatus:T(),timeStamp:new Date().getTime()};if(g(""),g(t[e]),y(h()),b("","success"),!ce?.roles?.[s])b("","warning"),g({consigneeInfo:{ybestate:"Zona incorrecta"}}),y(h());else if(t[e]?.currentStatus!==n.statusId){let i={statusHistory:u,currentStatus:n.statusId};await xe(r,i),I([...d(),o])}else b("","warning"),g({consigneeInfo:{ybcity:"Fue escaneado",ybestate:t[e]?.consigneeInfo?.ybestate}}),y(h())}else b("","error"),g({consigneeInfo:{ybestate:"Error con manifiesto"}}),y(h())};return se(W,async r=>de?.codes),(()=>{var r=be(),n=r.firstChild,t=n.nextSibling,e=t.firstChild,u=t.nextSibling;return n.style.setProperty("padding","16px"),a(n,c(O,{get when(){return E()},get children(){var s=fe(),l=s.firstChild,o=l.nextSibling;return a(l,c(B,{get name(){return A?.[k()]?.icon},size:32,get color(){return A?.[k()]?.svg}})),a(o,()=>D?.consigneeInfo?.ybestate),w(i=>ie(s,A?.[k()],i)),s}})),t.style.setProperty("padding","16px"),t.style.setProperty("margin-top","35px"),a(t,c(ve,{width:"250px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--hrm-palette-tertiary80)",get value(){return L()},placeholder:"codigo ...",colors:"#2b2b2b",handleClick:C,onEnter:X}),e),e.$$click=()=>C(""),a(e,c(B,{name:"Xclose",size:32,color:"#2b2b2b"})),a(u,c(le,{fallback:s=>(()=>{var l=ye(),o=l.firstChild,i=o.nextSibling;return i.nextSibling,a(l,()=>s.toString(),i),l})(),get children(){return c(ne,{get fallback(){return(()=>{var s=_e();return s.firstChild,a(s,c(me,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return c(O,{get when(){return d()},get children(){return c(ae,{get each(){return ue(d(),"timeStamp",0)},children:(s,l)=>(()=>{var o=he(),i=o.firstChild,S=i.firstChild,x=S.firstChild,p=x.nextSibling,$=S.nextSibling,j=$.firstChild,Z=j.nextSibling,J=Z.nextSibling;return a(x,c(B,{get name(){return pe?.[s?.currentStatus]},size:32})),p.style.setProperty("padding","8px"),a(p,()=>s?.tracking),a(i,c(ge,{}),$),a(j,()=>s?.city),a(J,()=>s?.estate),w(_=>{var z=`client_item_box gWXAaj jlytmu manifest  ${M()?"isMobile":"centerBx"}`,H=` title_scan centerBx ${M(),""} `;return z!==_.e&&G(i,_.e=z),H!==_.t&&G(p,_.t=H),_},{e:void 0,t:void 0}),o})()})}})}})}})),w(s=>(s=E()?"block":"none")!=null?n.style.setProperty("display",s):n.style.removeProperty("display")),r})()}const Se=async v=>await N({params:v,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2",fldsQry:["idairguide","currentStatus","ssg_track_key","statusHistory","tracking","estate","city","cidentity","consigneeInfo:ybestate","consigneeInfo:ybcity"]}),xe=async(v,d)=>await N({params:v,query:"updateLogisticYabaExpress",data2update:d});re(["click"]);export{De as default};
