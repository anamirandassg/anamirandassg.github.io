const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CxzVENLD.js","assets/index-DFgipc_K.js","assets/index-BRlA1Q7g.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-BrgYvb58.js","assets/SVG-Ctm1jOC0.js","assets/Util-CVANcjoa.js"])))=>i.map(i=>d[i]);
import{l as q,_ as V,r as Z,c as z,a as Q,o as ee,b as te,d as ie,i as s,e as l,S as x,z as ne,F as se,E as re,f as G,j as I,k as ae,s as le,m as T,h as ce,t as $,A as H}from"./index-DFgipc_K.js";import{g as J,f as U,m as oe,e as C,O as de,b as me,u as ue,G as ge,K as Y,H as fe,I as _e}from"./Util-CVANcjoa.js";import{u as he}from"./debounces-B1KdML84.js";import"./ButonHrm-frj-PKzL.js";import{P as be}from"./ShowQRPrintLabel-CFEHXSji.js";import{handleListManifest as ve}from"./DashManifest-CxS0MO_L.js";/* empty css                 */import"./SVG-Ctm1jOC0.js";import"./fontkit.es-C1JtbSzE.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-B2CiK_UV.js";import"./Toast-CEqGnKWE.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-BmvMg8h7.js";var X=$("<h5>"),ye=$('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),pe=$("<div> <!>."),$e=$("<div> "),ke=$('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),xe=$('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Se=$('<div class="icon_status centerBx">'),Be=$("<h5 class=rpto>"),Ie=$('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const we=q(()=>V(()=>import("./LoadingColorSpinner-CxzVENLD.js"),__vite__mapDeps([0,1,2,3]))),R=q(()=>V(()=>import("./FlexSpace-BrgYvb58.js"),__vite__mapDeps([4,1,2]))),N=q(()=>V(()=>import("./SVG-Ctm1jOC0.js"),__vite__mapDeps([5,1,2,6])));function Qe(){const[e,m]=Z(),[n,d]=z({search:""}),[h,a]=z(),[u,O]=Q(0),[E,j]=z(),[A,W]=Q("");he(W,400),ee(()=>{}),te(()=>{});const D=async()=>{if(e?.mId&&u()<Y()){O(Y()+7e3);let t={id:e?.mId},c=await Ce(t);d("manifestObj",void 0),a("linked",void 0),d("manifestObj",c),a("linked",{...c?.linkedBags}),n?.province||(d("province",c?.province),d("city",c?.city))}};ie(async()=>{let t=[];[33,46,40,41,42,50,52,54,56].map(y=>{let i=y,g=C("M023009")?.whStList?.[i];H?.roles?.[g?.id]?.isActive&&t.push(g)}),j("list",t);let _=[];C("M023009")?.provincias.map(y=>{let i=y.label;H?.roles?.[i]?.isActive&&_.push(y)}),j("prov",_),D()});const f=t=>t||"",b=t=>t?" "+t:"",M=t=>(f(t?.ybestate)+"_"+f(t?.ybcity)+"_"+f(t?.ybreparto)+"_"+f(t?.ybstreet)+"_"+f(t?.ybstreetNo)).toLowerCase(),r=t=>{let c=t?.consigneeInfo;return b(c?.firstName)+b(c?.middleName)+b(c?.lastName)+b(c?.lastName2)},v=t=>{let c=t?.consigneeInfo,_=b(c?.altPhoneNumber);return b(c?.phoneNumber)+(_?" |"+_:"")},k=async()=>{let t={},c={},_={};n?.manifestObj?.linkedBagsInfo?.map(i=>{if(i?.currentStatus!="YABA_99"){let g=M(i?.consigneeInfo),S=i?.cidentity,L=i?.estate||i?.consigneeInfo?.ybestate,w=i?.city||i?.consigneeInfo?.ybcity,B=i?.consigneeInfo?.ybreparto;if(_[B]||(_[B]=1),c[w]||(c[w]=1),t[g]||(t[g]={city:w,estate:L,rpto:B,address:{ybstreetNo:i?.consigneeInfo?.ybstreetNo,ybstreet:i?.consigneeInfo?.ybstreet,ybapt:i?.consigneeInfo?.ybapt,ybbetwen1:i?.consigneeInfo?.ybbetwen1,ybbetwen2:i?.consigneeInfo?.ybbetwen2},currentStatus:i?.currentStatus,customers:{},bagsNo:0}),!t[g].customers[S]){let o={name:r(i),phoneNumber:v(i),cid:i?.cidentity,nameshipper:i?.nameshipper},p={...i,...o};p.bagsNumb={},t[g].customers[S]=p}let P={bagnumber:i?.bagnumber,idairguide:"all",tracking:i?.tracking,hbls:i?.hbls};t[g].customers[S].bagsNumb[i?.ssg_track_key]=P,t[g].bagsNo+=1}});let y=await be(de(t),t);window.open(y)};return(()=>{var t=ye(),c=t.firstChild,_=c.firstChild,y=_.firstChild,i=y.nextSibling,g=i.nextSibling,S=g.nextSibling,L=S.firstChild,w=S.nextSibling,B=w.nextSibling,P=c.nextSibling;return s(y,()=>n?.manifestObj?.name),s(_,l(x,{get when(){return n?.manifestObj?.city},get children(){return["|",(()=>{var o=X();return s(o,()=>n?.manifestObj?.city),o})()]}}),i),s(g,()=>n?.manifestObj?.province),S.$$click=()=>{},s(L,l(N,{name:"link",size:22})),B.$$click=k,s(B,l(N,{name:"printer",size:24,color:"firebrick"})),s(P,l(re,{fallback:o=>(()=>{var p=pe(),F=p.firstChild,K=F.nextSibling;return K.nextSibling,s(p,()=>o.toString(),K),p})(),get children(){return l(ne,{get fallback(){return(()=>{var o=$e();return o.firstChild,s(o,l(we,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){return l(x,{get when(){return n?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(se,{get each(){return n?.manifestObj?.linkedBagsInfo},children:o=>l(Ne,{item:o,get city(){return n?.manifestObj?.city},get manifestObj(){return n?.manifestObj},get isAlready(){return n?.manifestObj?.linkedBags?.[o.ssg_track_key]},setFormsM:d,get mId(){return e?.mId}})})}})}})}})),G(o=>{var p=`/link-manifest?mId=${e?.mId}`,F=` ${I(),"width:86vw;"} margin: 0 auto;`;return p!==o.e&&ae(L,"href",o.e=p),o.t=le(P,F,o.t),o},{e:void 0,t:void 0}),t})()}const Ne=e=>{const m=()=>{let a=e?.item?.street.split(",");return a.slice(0,a.length-2).join(",")},n=a=>a?" "+a:"",d=()=>{let a=e?.item?.consigneeInfo;return n(a?.firstName)+n(a?.middleName)+n(a?.lastName)+n(a?.lastName2)},h=async a=>{if(e?.item?.currentStatus!=="99"){let u=me(C("manifestList"));u[e?.mId].linkedBags[e?.item?.ssg_track_key]&&(delete u[e?.mId].linkedBags[e?.item?.ssg_track_key],ue("manifestList",u),await ge(_e,fe,u)),e?.setFormsM("manifestObj","linkedBags",e?.item?.ssg_track_key,void 0)}};return l(x,{get when(){return e?.manifestObj?.linkedBags[e?.item?.ssg_track_key]},get children(){var a=Ie(),u=a.firstChild,O=u.firstChild,E=O.firstChild,j=E.nextSibling,A=O.nextSibling,W=A.firstChild,D=W.firstChild,f=u.nextSibling,b=f.firstChild,M=b.nextSibling;return s(a,l(x,{get when(){return I()},get children(){var r=ke(),v=r.firstChild,k=v.nextSibling;return s(v,d),s(r,l(R,{}),k),k.$$click=h,s(k,l(N,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),r}}),u),s(E,l(N,{name:"open_package_file_outline",size:20})),s(j,()=>e?.item?.bagnumber),s(u,l(x,{get when(){return!I()},get children(){var r=xe(),v=r.firstChild;return s(v,d),r}}),A),s(u,l(R,{}),A),s(D,()=>e?.item?.idairguide),s(u,l(x,{get when(){return!I()},get children(){var r=Se();return r.$$click=h,s(r,l(N,{get name(){return e?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return e?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),r}}),null),s(b,m),s(f,l(R,{}),M),s(f,l(x,{get when(){return e?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var r=Be();return s(r,()=>e?.item?.consigneeInfo?.ybreparto),r})(),"|"]}}),M),s(f,l(x,{get when(){return!e?.city&&e?.item?.city},get children(){var r=X();return s(r,()=>e?.item?.city),r}}),null),G(r=>{var v=`client_item_box gWXAaj jlytmu manifest ${I()?"isMobile":""}`,k=` ${I(),"centerBx"} bottombx flxWrp  centerBx`;return v!==r.e&&T(a,r.e=v),k!==r.t&&T(f,r.t=k),r},{e:void 0,t:void 0}),a}})},Te=async(e,m)=>{let n={params:e,data2update:m},d=J(709002);return n={...n,...d},await U(n)},Ce=async e=>{let m={...C("manifestList")?.[e?.id]};m||(m=await ve());let n=[],d=m?.linkedBags;return d&&Object.keys(d)?.map(async h=>{if(h){let a=C("manifestByKeys")?.[h];n.push(a)}}),m.linkedBagsInfo=n,m},He=async e=>{let m=[];e.map(n=>{let d={params:{id:n?.ssg_track_key,idairguide:"all"}},h=J(802002);d={...d,...h},m.push(d)}),oe(m,Oe)},Oe=async e=>{const n=await U(e);if(n)return n};ce(["click"]);export{Qe as default,Oe as fetchCSVInve,He as loadManifest,Te as updLinkedBags};
