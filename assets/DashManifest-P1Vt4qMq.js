const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-HoiGfe14.js","assets/index-D16NH-Ha.js","assets/index-BRlA1Q7g.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-K9FnUjhd.js","assets/SVG-BFZDkuHM.js","assets/Util-CugZcr5q.js","assets/ButonHrm-BSeWNUGQ.css","assets/LoadingColorSpinner-BlLJKxTv.js","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-a1At56JQ.js","assets/AddManifest-BjZdrJBF.js","assets/DialogHRM-t8Aqv5b6.js","assets/DialogHRM-V9_lZntj.css","assets/debounces-DJYpvv3-.js","assets/InputHr-BYBcT-WZ.js","assets/InputHr-BXFw4d2l.css","assets/ItemOnManifest-Bf_FXSjI.js","assets/components-DY77s8I7.js"])))=>i.map(i=>d[i]);
import{l as h,_ as y,c as pe,a as j,d as ae,i as o,e as i,$,S as V,F as se,f as re,j as Y,x as ue,g as fe,t as x,Y as ie,o as ge,b as _e,p as me,z as be,E as he,m as ye,J as ve,h as xe}from"./index-D16NH-Ha.js";import{s as Se}from"./App.module-CbHnVtRQ.js";import{g as E,f as q,O as P,I as le,X as N,e as Z,m as O,T as F,W as J,G as X,a as I,Y as ee,Z as te,$ as $e,U as we,V as ke,u as H,k as Pe,H as Ce}from"./Util-CugZcr5q.js";import{OpenModal as Oe}from"./DialogHRM-t8Aqv5b6.js";import{a as oe,i as Ie,b as Ee}from"./ScanningServices-DlgCg4CO.js";import{OpenToast as T}from"./Toast-DR5ncfch.js";var Ae=x('<div class="_dsplFlx flxWrp spaceAround ">'),Le=x('<div class="centerBx bottombx spaceAround flxWrp"style=margin-top:20px><div style=padding:6px></div><div style=padding:6px></div><div style=padding:6px>'),Me=x('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Subir Pendientes </h5></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx grid2Col"></div></div><div class="_dsplFlx flxWrp spaceAround "style="padding:18px 0px 0"><div class="_dsplFlx bottombx lowbordr"><h5>'),De=x('<div class="centerBx bottombx "><h5> subiendo al servidor <!> / <!> '),Te=x('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">'),Be=x('<div class="centerBx bottombx "><h5> descargando guias... ');const Ve=h(()=>y(()=>import("./CheckBoxSlide-HoiGfe14.js"),__vite__mapDeps([0,1,2,3]))),B=h(()=>y(()=>import("./ButonHrm-K9FnUjhd.js"),__vite__mapDeps([4,1,2,5,6,7]))),ne=h(()=>y(()=>import("./LoadingColorSpinner-BlLJKxTv.js"),__vite__mapDeps([8,1,2,9])));function je(n){const[e,a]=pe({}),[l,c]=j(!1),[g,v]=j(0);ae(()=>{K()});let b=[2503,2504,2505,2506,2507,2508];const u=async t=>{if(v($()),$()>30){let s=4,f=Array.from(Array(s).keys()),C=Math.ceil($()/s);const W=f.map(async M=>{let r=C*M,d=C*(M+1)-1;d>$()&&(d=$()),await O(t.slice(r,d),p)});await Promise.all(W)}else await O(t,p);v(0)},p=async t=>{let s=Z("dbScannedStore"),f=await Re(s?.[t]);return delete s[t],H("dbScannedStore",s),ie(P(s)?.length),Ee(),f},A=async()=>{u(Object.keys(Z("dbScannedStore")))};let S={};const L=async t=>{let s=await ze("guia",t);S=Object.assign({},S,s)},z=async()=>{let t=[];if(P(e).map(s=>{e[s]&&t.push(s)}),c(!0),t.length>0){await O(t,L);let s=await F(N,J),f=Object.assign({},s,S);X(N,J,f),T({text:"El modo offline esta listo para escanear",timeout:2500,id:I()})}else T({text:"Debe selecionar una guia",timeout:2500,id:I()});c(!1)};let k={};const Q=async t=>{let s=await qe(t);k=Object.assign({},k,s)},G=async()=>{let t=[];if(P(e).map(s=>{e[s]&&t.push(s)}),c(!0),t.length>0){await O(t,Q);let s=await F(te,ee),f=Object.assign({},s,k);X(te,ee,f),T({text:"se descargo con exito la lista de escaneos",timeout:2500,id:I()})}else T({text:"Debe selecionar una guia",timeout:2500,id:I()});c(!1)},_=()=>{$e(),setTimeout(()=>{oe()},600)};return(()=>{var t=Me(),s=t.firstChild,f=s.firstChild,C=f.nextSibling,W=C.nextSibling,M=s.nextSibling;return t.style.setProperty("max-height","80vh"),t.style.setProperty("overflow","auto"),t.style.setProperty("background","#ffffff"),t.style.setProperty("border-radius","13"),o(s,i(V,{get when(){return $()>0},get children(){return i(V,{get when(){return!g()},get fallback(){return(()=>{var r=De(),d=r.firstChild,m=d.firstChild,w=m.nextSibling,D=w.nextSibling,U=D.nextSibling;return U.nextSibling,o(r,i(ne,{stroke:"rgb(200 25 60 / 1)",size:32}),d),o(d,()=>g()-$(),w),o(d,g,U),r})()},get children(){var r=Ae();return o(r,i(B,{icon:"arrow_up_large",color:"#c8193c",get label(){return`Subir pendientes ${$()}`},handleClick:A})),r}})}}),C),o(W,i(se,{each:b,children:(r,d)=>(()=>{var m=Te(),w=m.firstChild,D=w.firstChild;return o(w,i(Ve,{get initValue(){return e?.[r]},updChange:()=>a(r,!e?.[r]),color:"var(--background-red-ssg)"}),D),o(D,r),m})()})),o(t,i(V,{get when(){return!l()},get fallback(){return(()=>{var r=Be();return o(r,i(ne,{stroke:"rgb(200 25 60 / 1)",size:32}),null),r})()},get children(){var r=Le(),d=r.firstChild,m=d.nextSibling,w=m.nextSibling;return o(d,i(B,{icon:"cancel",color:"#4a4a4a",label:"Limpiar",handleClick:_})),o(m,i(B,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar Guias",handleClick:z})),o(w,i(B,{icon:"arrow_down_large",color:"#c8193c",label:"Descargar locaciones",handleClick:G})),r}}),M),re(r=>{var d=Y()?"86vw":"420px",m=Y()?"15px 5px":"15px 25px";return d!==r.e&&((r.e=d)!=null?t.style.setProperty("width",d):t.style.removeProperty("width")),m!==r.t&&((r.t=m)!=null?t.style.setProperty("padding",m):t.style.removeProperty("padding")),r},{e:void 0,t:void 0}),t})()}const Fe=n=>{let e=n,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(a);return e.length===13&&l.test(e)&&(e=e.slice(3,12)),e},Re=async n=>{let e={};n?.params&&(e.params=n?.params),n?.data2update&&(e.data2update=n?.data2update),n?.form&&(e.form=n?.form);let a=E(n?.actionKey);return e={...e,...a},await q(e)},qe=async n=>{let e={params:{airguide:n,":search0":"ssg"}},a=E(815002);e={...e,...a};const l=await q(e);return l?.data?.error?{}:l},ze=async(n,e)=>{let a={params:{idairguide:e},fldswQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","guia","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","isLMH","isPaid","hbls","noteTag","nameshipper","billedBy"]};n.split(" ").map((g,v)=>{g&&(a.params[":search"+v]=g.trim())}),a.params[":guia"]=e+"";let l=E(802001);a={...a,...l};const c=await q(a);return c?.data?.error?{}:c},Qe=async(n,e)=>{let a={params:{":search0":" "},fldsjQry:["createDate","linkedUser","status","name","city","province","workgroup","ssg_manifest_key","isPending"]};ue()||(a.params.workgroup=fe?.profile?.workgroup?.id+"");let l=E(703001);a={...a,...l};const c=await q(a);if(c?.error)return{};{let g=[];return P(c).map(v=>{let b=c[v];b._id=b?.ssg_manifest_key,le.put(b,function(p,A){p||console.log("Successfully posted on manifest list")}),g.push(b)}),g}},Ge=()=>new Promise((n,e)=>{N.allDocs({include_docs:!0,descending:!0},function(a,l){n(l.rows)})}),We=async()=>{let n=await F(ke,we);H("dbScannedStore",n),ie(P(n)?.length)},K=()=>{oe(),Ie(),We()},pt=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets2:Qe,default:je,initializePouchD:K,loadManifestOffline:Ge,parseTrcking:Fe},Symbol.toStringTag,{value:"Module"}));var Ne=x('<div><div class="_dsplFlx flxWrp spaceAround centerBx"style="padding:16px 4vw"><h2>Manifiestos</h2><div class="icon_status centerBx"></div><div class="centerBx bottombx "><h5 class="">Entregados</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"style=padding:16px><div style=padding:4px></div></div><div class=" flxWrp spaceAround "style="padding:16px 5vw">'),He=x("<div> <!>."),Ke=x("<div> ");const Ue=h(()=>y(()=>import("./FlexSpace-a1At56JQ.js"),__vite__mapDeps([10,1,2]))),Ye=h(()=>y(()=>import("./SVG-BFZDkuHM.js"),__vite__mapDeps([5,1,2,6]))),Ze=h(()=>y(()=>import("./AddManifest-BjZdrJBF.js"),__vite__mapDeps([11,1,2,6,12,13,14]))),Je=h(()=>y(()=>import("./LoadingColorSpinner-BlLJKxTv.js"),__vite__mapDeps([8,1,2,9]))),Xe=h(()=>y(()=>import("./InputHr-BYBcT-WZ.js"),__vite__mapDeps([15,1,2,16]))),et=h(()=>y(()=>import("./CheckBoxSlide-HoiGfe14.js"),__vite__mapDeps([0,1,2,3]))),tt=h(()=>y(()=>import("./ItemOnManifest-Bf_FXSjI.js"),__vite__mapDeps([17,1,2,6,14,12,13,18])));function nt(){const[n,e]=j(0),[a,l]=j("");ge(()=>{}),_e(()=>{}),ae(async()=>{K(),R()});const c=()=>{let u=I(),p={};p.id=u,p.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},p.content=i(Ze,{modalId:u,refetch:b}),Oe(p)},g=u=>{e(u),b()},[v,{refetch:b}]=me(a,async u=>await R());return(()=>{var u=Ne(),p=u.firstChild,A=p.firstChild,S=A.nextSibling,L=S.nextSibling,z=L.firstChild,k=p.nextSibling,Q=k.firstChild,G=k.nextSibling;return o(p,i(Ue,{}),S),S.$$click=c,o(S,i(Ye,{name:"plus",size:22})),o(L,i(et,{get initValue(){return n()},updChange:g,color:"var(--background-red-ssg)"}),z),o(Q,i(Xe,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return a()},placeholder:"search...",colors:"#2b2b2b",handleClick:_=>l(_)})),o(G,i(he,{fallback:_=>(()=>{var t=He(),s=t.firstChild,f=s.nextSibling;return f.nextSibling,o(t,()=>_.toString(),f),t})(),get children(){return i(be,{get fallback(){return(()=>{var _=Ke();return _.firstChild,o(_,i(Je,{stroke:"rgb(200 25 60 / 1)",size:62}),null),_})()},get children(){return i(V,{get when(){return v()},get children(){return i(se,{get each(){return v()},children:(_,t)=>i(tt,{item:_,refetch:b})})}})}})}})),re(()=>ye(u,Se.App)),u})()}const at=async(n,e)=>{ve()&&R()},R=async()=>{let n=await de(),e=[];return P(n).map(a=>{let l=n?.[a];e.push(l)}),e},st=async n=>{let e=[];n.map(a=>{let l={params:{id:a?.ssg_track_key,idairguide:"all"}},c=E(802002);l={...l,...c},e.push(l)}),O(e,ce)},ce=async n=>{const a=await Pe(n);if(a)return a},de=async()=>{let n=await F(le,Ce);return H("manifestList",n),n};xe(["click"]);const ut=Object.freeze(Object.defineProperty({__proto__:null,LookupManifets:at,default:nt,fetchCSVInve:ce,handleListManifest:de,loadManifest2:st,loadManifestOffline:R},Symbol.toStringTag,{value:"Module"}));export{ut as D,pt as S,de as h,K as i,R as l};
