import{a as n,c as X,h as ee,o as te,m as re,d as s,S as I,G as oe,i as a,f as se,g as B,t as P}from"./index-CgMuzQKX.js";import{a as ae,u as ne,g as h}from"./Util-uEfv1z7O.js";import{H as le,a as ie}from"./html5-qrcode-scanner-Cl8XE5pu.js";import{u as ce}from"./debounces-jDOPB27u.js";import l from"./FlexSpace-CO8NVGpq.js";import{h as de,S as me,a as ue}from"./ShowScanAlert-uQUKDLP4.js";import{OpenToast as pe}from"./Toast-DNN79moQ.js";import{OpenModal as L,CloseModal as ge}from"./DialogHRM-1cJ-gMeB.js";import"./index-Ci0zXM0r.js";import"./globalSignal-B7euIFAZ.js";import"./ShowQRPrintLabel-CZeA_N7d.js";import"./PDFButton-B_0lS8EG.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-BKe7DAJ7.js";import"./InitPrintServices-CprHcwF4.js";var he=P('<div class=scanWrp><div><div class=" _dsplFlx"><h3 class="errTxt err centerBx "></h3></div><div class=" _dsplFlx"><h3 class="errTxt ybcity centerBx"></h3></div><div class=" _dsplFlx"><h3 class="errTxt centerBx"></h3></div></div><div></div><div id=qr-reader style=width:300px>'),ye=P("<slot name=plans style=margin-top:35px><div>"),ve=P("<div>esta funcion es solo para dispositivos mobiles");function Re(q){const[N,Q]=n([]),[c,_]=X({}),[j,W]=n(""),[$,T]=n(),[Y,z]=n(),[A,Z]=n(""),[D,M]=n(""),[y,R]=n("");ee(()=>{}),te(()=>{T(!1),ae("cameraScanLoc")?.clear()}),re(()=>{setTimeout(()=>{V()},90)});const k=(t,e)=>{Z(e),M(t),setTimeout(()=>{M("")},1300)},J=t=>{R(t),setTimeout(()=>{R("")},2e3)},E=(t,e)=>{t!==Y()&&(z(t),setTimeout(()=>{z("")},3e3),K(t))},K=t=>{t||(t=j()),t=t.split("'").join("-"),W(""),!y()&&U(t)},U=async t=>{let e=await de(t,q?.status);if(e?.data){if(e?.data?.isSSG)F();else{k("","success"),pe({text:`Pertenece a ${e?.data?.city?e?.data?.city:""}${e?.data?.estate?" :: "+e?.data?.estate:""}`,timeout:3500,theme:"green",id:h()});let r={consigneeInfo:{ybcity:e?.data?.city,ybestate:e?.data?.estate}};_(r),J(h()),G({color:e?.color,msg1:e?.data?.city,msg2:e?.data?.estate,bagnumber:e?.data?.bagnumber})}Q([...N(),e.data])}else e?.error&&(e?.error?.isSSG?F():(G({color:e?.error?.color,msg1:e?.error?.scanData?.consigneeInfo?.ybcity,msg2:e?.error?.scanData?.consigneeInfo?.ybestate,bagnumber:e?.error?.scanData?.consigneeInfo?.bagnumber}),k("",e?.error?.alert),_(e?.error?.scanData)))},V=()=>{T(!0);let t={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[le.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},e=new ie("qr-reader",t);e.render(E),ne("cameraScanLoc",e)};ce(E,400);const F=t=>{let e=h(),r={};r.id=e,r.overlayColor="rgb(200 25 60)",r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=s(me,{modalId:e}),L(r),setTimeout(()=>{ge(e)},1800)},G=t=>{let e=h(),r={};r.id=e,r.overlayColor=t.color,r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=s(ue,{modalId:e,get bagnumber(){return t.bagnumber},get msg1(){return t.msg1},get msg2(){return t.msg2}}),L(r),setTimeout(()=>{},1800)};return s(I,{when:!0,get fallback(){return ve()},get children(){return s(I,{get when(){return $()},get children(){var t=ye(),e=t.firstChild;return t._$owner=oe(),a(t,s(I,{get when(){return $()},style:"margin-top: 35px",get children(){var r=he(),i=r.firstChild,d=i.firstChild,m=d.firstChild,u=d.nextSibling,p=u.firstChild,v=u.nextSibling,g=v.firstChild,f=i.nextSibling;return a(d,s(l,{}),m),a(m,D),a(d,s(l,{}),null),a(u,s(l,{}),p),a(p,()=>c?.consigneeInfo?.ybcity),a(u,s(l,{}),null),a(v,s(l,{}),g),a(g,()=>c?.consigneeInfo?.ybestate),a(v,s(l,{}),null),se(o=>{var H=`scanOverlayFront ${A()}`,S=y()?"block":"none",b=300/D()?.length*1.73+"px",w=300/c?.consigneeInfo?.ybcity?.length*1.13+"px",x=300/c?.consigneeInfo?.ybestate?.length*1.23+"px",O=`scanOverlay  ${A()} `,C=y()?"block":"none";return H!==o.e&&B(i,o.e=H),S!==o.t&&((o.t=S)!=null?i.style.setProperty("display",S):i.style.removeProperty("display")),b!==o.a&&((o.a=b)!=null?m.style.setProperty("font-size",b):m.style.removeProperty("font-size")),w!==o.o&&((o.o=w)!=null?p.style.setProperty("font-size",w):p.style.removeProperty("font-size")),x!==o.i&&((o.i=x)!=null?g.style.setProperty("font-size",x):g.style.removeProperty("font-size")),O!==o.n&&B(f,o.n=O),C!==o.s&&((o.s=C)!=null?f.style.setProperty("display",C):f.style.removeProperty("display")),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),r}}),e),t}})}})}export{Re as default};
