const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckBoxSlide-CLIglEo8.js","assets/index-B64KRwJ9.js","assets/index-BmzAZVve.css","assets/CheckBoxSlide-uVD3DHDO.css","assets/ButonHrm-BsV9dxfm.js","assets/SVG-BzIF_sqP.js","assets/ButonHrm-BSeWNUGQ.css","assets/DropDwnSearch-EGkk7VDB.js","assets/debounces-BCR0jiXQ.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ScanningCamera-C6pZPK6R.js","assets/html5-qrcode-scanner-s0pDEIX1.js","assets/ShowScanAlert-BE9PV7dm.js","assets/Toast-Dqt7RlMA.js","assets/Toast-DLpFKn-Q.css","assets/ShowQRPrintLabel-BwG1icTX.js","assets/PDFButton-K3Vq22-R.js","assets/qrcode-C5vWJp7P.js","assets/fontkit.es-DNMqyNub.js","assets/InitPrintServices-BenUu1t8.js","assets/DialogHRM-DGmX8AM2.js","assets/DialogHRM-V9_lZntj.css","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/ScanningManual-8moIhoRY.js","assets/FlexSpace-BPUudVzd.js","assets/LoadingColorSpinner-CRbwY5Kr.js","assets/LoadingColorSpinner-DPNLfwBi.css"])))=>i.map(i=>d[i]);
import{l as u,_ as g,c as j,i as r,d as n,F as re,e as E,g as W,t as h,O as ae,a as F,k as pe,r as fe,s as be,M as N,N as he,S as T,P as q,H as me,Q as ve,R as K,T as ye,o as U,f as X,h as xe,U as ke,V as Y,W as G,X as Se,j as Z,Y as J,Z as $e,p as ie,q as le}from"./index-B64KRwJ9.js";import{s as Ce}from"./App.module-CbHnVtRQ.js";import{OpenToast as we}from"./Toast-Dqt7RlMA.js";import{CloseModal as ee,OpenModal as Ie}from"./DialogHRM-DGmX8AM2.js";var Pe=h('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Descargar Guias </h5></div></div><div class="centerBx bottombx spaceAround"style=margin-top:20px>|'),Ee=h('<div class="centerBx bottombx "><h5 class="">');const Be=u(()=>g(()=>import("./CheckBoxSlide-CLIglEo8.js"),__vite__mapDeps([0,1,2,3]))),te=u(()=>g(()=>import("./ButonHrm-BsV9dxfm.js"),__vite__mapDeps([4,1,2,5,6])));function Le(_){const[p,i]=j({}),f=()=>{ee(_?.modalId)},m=()=>{ee(_?.modalId),_?.confirm(ae(p))};let v=[42,43,44,45];return(()=>{var l=Pe(),y=l.firstChild,B=y.firstChild,x=B.nextSibling,R=x.firstChild;return l.style.setProperty("max-height","80vh"),l.style.setProperty("overflow","auto"),l.style.setProperty("background","#ffffff"),l.style.setProperty("border-radius","13"),l.style.setProperty("padding","50px 25px"),r(y,n(re,{each:v,children:(d,L)=>(()=>{var C=Ee(),O=C.firstChild;return r(C,n(Be,{get initValue(){return p?.[d]},updChange:()=>i(d,!p?.[d]),color:"var(--background-red-ssg)"}),O),r(O,d),C})()}),x),r(x,n(te,{icon:"cancel",color:"#7d7d7d",label:"Cancelar",handleClick:f}),R),r(x,n(te,{icon:"success",color:"#c8193c",label:"Confirmar",handleClick:m}),null),E(d=>(d=W()?"86vw":"420px")!=null?l.style.setProperty("width",d):l.style.removeProperty("width")),l})()}var Oe=h('<ul class=inline><li><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div style=width:135px>Camara</div></li><li><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div style=width:135px>Escaner RF'),Ae=h('<div class="centerBx100 ">'),De=h('<div class=" bottombx lowbordr centerBx "style=padding-top:26px;><h5>Escaneados'),Me=h('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Escanear</h2><div class="centerBx bottombx "><h5 class="">Offline</h5></div></div><div style=padding:16px></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class=centerBx100 style=margin-top:20px>'),Te=h("<div class=loader>Loading..."),Fe=h('<div style=background:#FFF;width:90%><div class="centerBx bottombx"><div class="icon_status centerBx"></div><h5 class=" centerBx "></h5><p class=" title_scan centerBx "></p></div><div class="centerBx bottombx"><h5></h5><div class=vertseparator></div><h4>');const[Xe,Ye]=j(),Re=u(()=>g(()=>import("./DropDwnSearch-EGkk7VDB.js"),__vite__mapDeps([7,1,2,8,5,9]))),Ve=u(()=>g(()=>import("./ScanningCamera-C6pZPK6R.js"),__vite__mapDeps([10,1,2,11,8,12,13,14,15,16,17,18,19,20,21,22,23]))),Ne=u(()=>g(()=>import("./ScanningManual-8moIhoRY.js"),__vite__mapDeps([24,1,2,12,13,14,15,16,17,18,19,20,21,22,23]))),Q=u(()=>g(()=>import("./SVG-BzIF_sqP.js"),__vite__mapDeps([5,1,2]))),Ge=u(()=>g(()=>import("./FlexSpace-BPUudVzd.js"),__vite__mapDeps([25,1,2])));u(()=>g(()=>import("./LoadingColorSpinner-CRbwY5Kr.js"),__vite__mapDeps([26,1,2,27])));const Qe=u(()=>g(()=>import("./CheckBoxSlide-CLIglEo8.js"),__vite__mapDeps([0,1,2,3]))),ne=u(()=>g(()=>import("./ButonHrm-BsV9dxfm.js"),__vite__mapDeps([4,1,2,5,6]))),[$,We]=F(""),[se,Ze]=F([]);function Je(){j({});const[_,p]=F(0),[i,f]=F(1),[m,v]=ke(),l=e=>()=>v(()=>f(e));pe(()=>{oe()}),fe(()=>{}),be(()=>{W()&&f(0),L(y),d(B)});const y=e=>{p(e?.length)},B=e=>{let t={},s={};e.map(a=>{a?.doc?.hbls?.map(c=>{s[c?.hbl]||(s[c?.hbl]=a?.doc?.ssg_track_key)}),t[a?.doc?.ssg_track_key]||(t[a?.doc?.ssg_track_key]=a?.doc,t[a?.doc?.ssg_track_key].key=a?.key)}),J("manifestByKeys",t),J("manifestByHbls",s)},x=async e=>{let t={};const s=e.map(async a=>{let c=await je("guia",a);t=Object.assign({},t,c)});await Promise.all(s),ae(t).map(a=>{let c={...t[a]};c.id=c.ssg_track_key,U("manifestByKeys")[c?.ssg_track_key]||R(t[a])}),d(B),L(y),we({text:"El modo offline esta listo para escanear",timeout:2500,id:Z()})},R=async e=>{Y.post(e,function(s,a){s||console.log("Successfully posted")})},d=async e=>{Y.allDocs({include_docs:!0,descending:!0},function(t,s){e(s.rows)})},L=async e=>{G.allDocs({include_docs:!0,descending:!0},function(t,s){e(s.rows)})};function C(){return"geolocation"in navigator}function O(e){$e({latitude:e?.coords?.latitude,longitude:e?.coords?.longitude})}function oe(){C()?navigator.geolocation.getCurrentPosition(O):showMessage("Geolocation isn't supported by your browser")}const ce=()=>Se?.list?.filter(e=>e.id),de=async e=>{const t=e.map(async s=>{await ze({ssg_track_key:s?.doc?.ssg_track_key,idairguide:"all"},s?.doc?.data2update),G.remove(s?.doc,function(c,V){c||console.log("dbScanned successfully removed ")})});await Promise.all(t),L(y)},ue=async e=>{G.allDocs({include_docs:!0,descending:!0},function(t,s){de(s.rows)})},ge=e=>{let t={},s=Z();t.id=s,t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=n(Le,{confirm:x,modalId:s}),Ie(t)};return(()=>{var e=Me(),t=e.firstChild,s=t.firstChild,a=s.nextSibling,c=a.firstChild,V=t.nextSibling,z=V.nextSibling,H=z.nextSibling;return r(a,n(Qe,{get initValue(){return N()},updChange:()=>he(!N()),color:"var(--background-red-ssg)"}),c),r(t,n(T,{get when(){return N()},get children(){return n(ne,{color:"rgb(200 25 60 / 1)",label:"preparar datos fuera de linea",handleClick:ge})}}),null),r(t,n(T,{get when(){return _()>0},get children(){return n(ne,{color:"rgb(200 25 60 / 1)",label:"Subir pendientes",handleClick:ue})}}),null),r(z,n(Re,{get list(){return ce()},lbl_empty:"Funciones de Escaneado",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return $()},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",hasDebounce:!1,onSelect:o=>We(o.id),width:"260px"})),r(H,n(T,{get when(){return $()},get children(){return[(()=>{var o=Oe(),w=o.firstChild,k=w.firstChild,A=k.firstChild,S=w.nextSibling,I=S.firstChild,D=I.firstChild;return q(w,"click",l(0),!0),r(A,n(Q,{name:"qrcode-scan",size:32,color:"#2b2b2b"})),q(S,"click",l(1),!0),r(D,n(Q,{name:"keyboard",size:32,color:"#2b2b2b"})),E(b=>{var P=i()===0,M=i()===1;return P!==b.e&&w.classList.toggle("selected",b.e=P),M!==b.t&&S.classList.toggle("selected",b.t=M),b},{e:void 0,t:void 0}),o})(),(()=>{var o=Ae();return r(o,n(me,{get fallback(){return Te()},get children(){return n(ve,{get children(){return[n(K,{get when(){return i()===0},get children(){return n(Ve,{get status(){return $()},get locat(){return $()}})}}),n(K,{get when(){return i()===1},get children(){return n(Ne,{get status(){return $()},get locat(){return $()}})}})]}})}})),E(()=>o.classList.toggle("pending",!!m())),o})()]}}),null),r(H,n(T,{get when(){return se()?.length>0},get children(){return[De(),n(re,{get each(){return ye(se(),"timeStamp",0)},children:(o,w)=>(()=>{var k=Fe(),A=k.firstChild,S=A.firstChild,I=S.nextSibling,D=I.nextSibling,b=A.nextSibling,P=b.firstChild,M=P.nextSibling,_e=M.nextSibling;return r(S,n(Q,{get name(){return U("M023009")?.statusListIcons?.[o?.currentStatus]},size:32})),I.style.setProperty("padding","8px"),r(I,()=>o?.idairguide),D.style.setProperty("padding","8px"),r(D,()=>o?.tracking),r(k,n(Ge,{}),b),r(P,()=>o?.city),r(_e,()=>o?.consigneeInfo?.ybestate),E(()=>X(k,`client_item_box gWXAaj jlytmu manifest  ${W()?"isMobile":"centerBx"}`)),k})()})]}}),null),E(()=>X(e,Ce.App)),e})()}const je=async(_,p)=>{let i={params:{idairguide:"all"},fldswQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","guia","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","isLMH","isPaid","hbls","noteTag","nameshipper","billedBy"]};_.split(" ").map((v,l)=>{v&&(i.params[":search"+l]=v.trim())}),i.params[":guia"]=p+"";let f=ie(802001);i={...i,...f};const m=await le(i);return m?.data?.error?{}:m},ze=async(_,p)=>{let i={params:_,data2update:p},f=ie(809004);return i={...i,...f},await le(i)};xe(["click"]);export{Je as default,Xe as scannedQRs,Ye as setScannedQRs,We as setStatus,Ze as setTaskScan,$ as status,se as taskScan};
