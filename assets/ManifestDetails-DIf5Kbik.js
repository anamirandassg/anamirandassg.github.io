const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BDZAIrpN.js","assets/index-zvI0Sb2M.js","assets/index-BmzAZVve.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-rETtiXs5.js","assets/debounces-CnaRpMAF.js","assets/SVG-39-WtnmX.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-IJUJIsRi.js","assets/InputHr-CdhwgT73.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as B,_ as I,u as ee,c as M,a as z,o as te,j as re,n as ne,i as n,d as l,S as f,w as ie,F as se,E as ae,e as J,s as le,g as S,f as V,h as ce,t as _,x as T}from"./index-zvI0Sb2M.js";import{x as oe,b as F,f as R,e as de,a as Q,O as me,z as H}from"./Util-BwLP_5oJ.js";import{u as ue}from"./debounces-CnaRpMAF.js";import ge from"./ButonHrm-IDBxN55w.js";import{P as fe}from"./ShowQRPrintLabel-ClrtLX3h.js";import"./index-Ci0zXM0r.js";/* empty css                 */import"./SVG-39-WtnmX.js";import"./PDFButton-B_0lS8EG.js";import"./fontkit.es-BqrvdTa9.js";import"./InitPrintServices-8lwggMm8.js";import"./Toast-BsrBzy-E.js";var K=_("<h5>"),_e=_('<div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx">'),he=_("<div><div>"),Y=_("<div> "),be=_("<div> <!>."),pe=_('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),ve=_('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),ye=_('<div class="icon_status centerBx">'),$e=_("<h5 class=rpto>"),ke=_('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const G=B(()=>I(()=>import("./LoadingColorSpinner-BDZAIrpN.js"),__vite__mapDeps([0,1,2,3])));B(()=>I(()=>import("./DropDwnSearch-rETtiXs5.js"),__vite__mapDeps([4,1,2,5,6,7,8])));const W=B(()=>I(()=>import("./FlexSpace-IJUJIsRi.js"),__vite__mapDeps([9,1,2])));B(()=>I(()=>import("./InputHr-CdhwgT73.js"),__vite__mapDeps([10,1,2,11])));const E=B(()=>I(()=>import("./SVG-39-WtnmX.js"),__vite__mapDeps([6,1,2,7])));function Fe(){const[i,g]=ee(),[r,d]=M({search:""});M();const[$,o]=M(),[p,O]=z(0),[P,N]=M(),[C,L]=z("");ue(L,400),te(()=>{}),re(()=>{});const j=async()=>{if(i?.mId&&p()<H()){O(H()+7e3);let e={id:i?.mId},c=await Se(e);d("manifestObj",void 0),o("linked",void 0),d("manifestObj",c),o("linked",{...c?.linkedBags}),r?.province||(d("province",c?.province),d("city",c?.city))}};ne(async()=>{let e=[];[33,46,40,41,42,50,52,54,56].map(u=>{let t=u,m=Q("M023009")?.whStList?.[t];T?.roles?.[m?.id]?.isActive&&e.push(m)}),N("list",e);let s=[];Q("M023009")?.provincias.map(u=>{let t=u.label;T?.roles?.[t]?.isActive&&s.push(u)}),N("prov",s),j()});const k=async()=>{await we({ssg_manifest_key:i?.mId},{linkedBags:r?.manifestObj?.linkedBags}),j()},v=e=>e||"",h=e=>e?" "+e:"",a=e=>(v(e?.ybestate)+"_"+v(e?.ybcity)+"_"+v(e?.ybreparto)+"_"+v(e?.ybstreet)+"_"+v(e?.ybstreetNo)).toLowerCase(),b=e=>{let c=e?.consigneeInfo;return h(c?.firstName)+h(c?.middleName)+h(c?.lastName)+h(c?.lastName2)},y=e=>{let c=e?.consigneeInfo,s=h(c?.altPhoneNumber);return h(c?.phoneNumber)+(s?" |"+s:"")},U=async()=>{let e={},c={},s={};r?.manifestObj?.linkedBagsInfo?.map(t=>{if(t?.currentStatus!="YABA_99"){let m=a(t?.consigneeInfo),x=t.cidentity,A=t?.estate||t?.consigneeInfo?.ybestate,w=t?.city||t?.consigneeInfo?.ybcity,D=t?.consigneeInfo?.ybreparto;if(s[D]||(s[D]=1),c[w]||(c[w]=1),e[m]||(e[m]={city:w,estate:A,rpto:D,address:{ybstreetNo:t?.consigneeInfo?.ybstreetNo,ybstreet:t?.consigneeInfo?.ybstreet,ybapt:t?.consigneeInfo?.ybapt,ybbetwen1:t?.consigneeInfo?.ybbetwen1,ybbetwen2:t?.consigneeInfo?.ybbetwen2},currentStatus:t?.currentStatus,customers:{},bagsNo:0}),!e[m].customers[x]){let Z={name:b(t),phoneNumber:y(t),cid:t?.cidentity,nameshipper:t?.nameshipper},q={...t,...Z};q.bagsNumb={},e[m].customers[x]=q}let X={bagnumber:t?.bagnumber,idairguide:"all",tracking:t?.tracking,hbls:t?.hbls};e[m].customers[x].bagsNumb[t?.ssg_track_key]=X,e[m].bagsNo+=1}});let u=await fe(me(e),e);window.open(u)};return(()=>{var e=he(),c=e.firstChild;return n(e,l(f,{get when(){return r?.manifestObj?.province},get fallback(){return(()=>{var s=Y();return s.firstChild,n(s,l(G,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){var s=_e(),u=s.firstChild,t=u.firstChild,m=t.nextSibling,x=m.nextSibling,A=x.nextSibling;return n(t,()=>r?.manifestObj?.name),n(u,l(f,{get when(){return r?.manifestObj?.city},get children(){return["|",(()=>{var w=K();return n(w,()=>r?.manifestObj?.city),w})()]}}),m),n(x,()=>r?.manifestObj?.province),A.$$click=U,n(A,l(E,{name:"printer",size:24,color:"firebrick"})),n(u,l(f,{get when(){return!oe(r?.manifestObj?.linkedBags,$?.linked)},get children(){return l(ge,{color:"#c8193c",label:"updManifest",handleClick:k})}}),null),s}}),c),n(c,l(ae,{fallback:s=>(()=>{var u=be(),t=u.firstChild,m=t.nextSibling;return m.nextSibling,n(u,()=>s.toString(),m),u})(),get children(){return l(ie,{get fallback(){return(()=>{var s=Y();return s.firstChild,n(s,l(G,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return l(f,{get when(){return r?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(se,{get each(){return r?.manifestObj?.linkedBagsInfo},children:s=>l(xe,{item:s,get city(){return r?.manifestObj?.city},get manifestObj(){return r?.manifestObj},get isAlready(){return r?.manifestObj?.linkedBags?.[s.ssg_track_key]},setFormsM:d})})}})}})}})),J(s=>le(c,` ${S(),"width:86vw;"} margin: 0 auto;`,s)),e})()}const xe=i=>{const g=()=>{let o=i?.item?.street.split(",");return o.slice(0,o.length-2).join(",")},r=o=>o?" "+o:"",d=()=>{let o=i?.item?.consigneeInfo;return r(o?.firstName)+r(o?.middleName)+r(o?.lastName)+r(o?.lastName2)},$=o=>{i?.item?.currentStatus!=="99"&&i?.setFormsM("manifestObj","linkedBags",i?.item?.ssg_track_key,void 0)};return l(f,{get when(){return i?.manifestObj?.linkedBags[i?.item?.ssg_track_key]},get children(){var o=ke(),p=o.firstChild,O=p.firstChild,P=O.firstChild,N=P.nextSibling,C=O.nextSibling,L=C.firstChild,j=L.firstChild,k=p.nextSibling,v=k.firstChild,h=v.nextSibling;return n(o,l(f,{get when(){return S()},get children(){var a=pe(),b=a.firstChild,y=b.nextSibling;return n(b,d),n(a,l(W,{}),y),y.$$click=$,n(y,l(E,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),a}}),p),n(P,l(E,{name:"open_package_file_outline",size:20})),n(N,()=>i?.item?.bagnumber),n(p,l(f,{get when(){return!S()},get children(){var a=ve(),b=a.firstChild;return n(b,d),a}}),C),n(p,l(W,{}),C),n(j,()=>i?.item?.idairguide),n(p,l(f,{get when(){return!S()},get children(){var a=ye();return a.$$click=$,n(a,l(E,{get name(){return i?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return i?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),a}}),null),n(v,g),n(k,l(W,{}),h),n(k,l(f,{get when(){return i?.item?.consigneeInfo?.ybreparto},get children(){return[(()=>{var a=$e();return n(a,()=>i?.item?.consigneeInfo?.ybreparto),a})(),"|"]}}),h),n(k,l(f,{get when(){return!i?.city&&i?.item?.city},get children(){var a=K();return n(a,()=>i?.item?.city),a}}),null),J(a=>{var b=`client_item_box gWXAaj jlytmu manifest ${S()?"isMobile":""}`,y=` ${S(),"centerBx"} bottombx flxWrp  centerBx`;return b!==a.e&&V(o,a.e=b),y!==a.t&&V(k,a.t=y),a},{e:void 0,t:void 0}),o}})},we=async(i,g)=>{let r={params:i,data2update:g},d=F(709002);return r={...r,...d},await R(r)},Se=async i=>{let g={params:i},r=F(703003);return g={...g,...r},await R(g)},Re=async i=>{let g=[];i.map(r=>{let d={params:{id:r?.ssg_track_key,idairguide:"all"}},$=F(802002);d={...d,...$},g.push(d)}),de(g,Be)},Be=async i=>{const r=await R(i);if(r)return r};ce(["click"]);export{Fe as default,Be as fetchCSVInve,Re as loadManifest,we as updLinkedBags};
