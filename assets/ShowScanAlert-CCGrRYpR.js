const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SVG-CwIR7Sbw.js","assets/index-BGOIoX1m.js","assets/index-DGHHyjai.css","assets/index-Ci0zXM0r.js","assets/CheckBoxSlide-C2txW7TR.js","assets/CheckBoxSlide-uVD3DHDO.css"])))=>i.map(i=>d[i]);
import"./Toast-B5drWTWD.js";import{k as h,v as f,f as S,n as A,t as _,l as w,_ as P,e as R,a as D,b as W,m as H,i as m}from"./index-BGOIoX1m.js";import{g as x,i as C}from"./globalSignal-DReTlKO1.js";import{b as k,f as I,a as L,j as z}from"./Util-uEfv1z7O.js";import{g as G,c as j}from"./ShowQRPrintLabel-DQih0po7.js";let q=[400,300,400,300,400],v=[300,80,300,80,300,80,300];const M=t=>{t=t.split("'").join("-");let r=t.split("/");t.split("-").length>3&&(r=t.split("-").join);let e=r?.[0];e.indexOf("2300")===0&&(e="2300"+(e.split("2300")?.[1]).slice(0,5));let a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const s=new RegExp(a);let l=e.length===13&&s.test(e),g="^[0-9]{4}-[1-9]{4}";const o=new RegExp(g);let d=e.length===9&&o.test(e),n=r.length>4&&e.length===12,b="^Y24[0-9]{6}";const c=new RegExp(b);let i=e.length===9&&c.test(e),u="^SS24[0-9]{6}";const y=new RegExp(u);let p=e.length===10&&y.test(e),$="^[0-9]";const E=new RegExp($);let F=e.length>6&&e.length<11&&E.test(e);if(l||n||d||p||F||i)return params={idairguide:"all",":search0":e},{params,code:1}},ee=async(t,r)=>{let e=M(t),a={timeStamp:new Date().getTime(),latitude:x?.latitude,longitude:x?.longitude,statusId:r,userId:h?.profile?.userId,userName:h?.profile?.name};if(e?.params)return await O(e.params,a);{let s=e?.txt||e?.params?.search0;return navigator.vibrate(v),{error:{alert:"error",color:"rgb(200 25 60)",scanData:{consigneeInfo:{ybestate:"Codigo Incorrecto",bagnumber:s}}}}}},O=async(t,r)=>{let e=await B(t),a=Object.keys(e)?.[0];if(e[a]?.cidentity){let l=Q(e[a],r);return navigator.vibrate(500),l}let s={consigneeInfo:{ybestate:"Codigo Incorrecto"}};return navigator.vibrate(v),{error:{alert:"error",color:"rgb(200 25 60)",scanData:s}}},Q=async(t,r)=>{let e=t?.statusHistory||[];e.push(r);let a=!1;if(t?.isSSG&&f?.roles?.SSG?.isActive&&(a=!0),f?.roles?.[t?.consigneeInfo?.ybestate]?.isActive)if(t?.currentStatus!==r.statusId){let s={statusHistory:e,currentStatus:r.statusId},l={ssg_track_key:t.ssg_track_key,idairguide:"all"},g=await Y(l,s),o={tracking:t?.tracking,idairguide:t.idairguide,city:t?.consigneeInfo?.ybcity,estate:t.estate,bagnumber:t?.bagnumber};return{data:{...g,...o,isSSG:a},color:"#0f5223ff"}}else{let s={consigneeInfo:{ybcity:"Fue escaneado",ybestate:t?.consigneeInfo?.ybestate,bagnumber:t?.bagnumber}};return navigator.vibrate(q),{error:{alert:"warning",color:"#FF6F1D",scanData:s,isSSG:a}}}else{let s={consigneeInfo:{ybestate:"Zona incorrecta",bagnumber:t?.bagnumber}};return navigator.vibrate(v),{error:{alert:"warning",color:"#FF6F1D",scanData:s}}}},Y=async(t,r)=>{let e={params:t,data2update:r},a=k(809004);return e={...e,...a},await I(e)},B=async t=>{let r={params:t,fldsQry:["idairguide","currentStatus","ssg_track_key","statusHistory","tracking","estate","city","cidentity","consigneeInfo:ybestate","consigneeInfo:ybcity"]},e=k(802001);return r={...r,...e},await I(r)};var N=_('<div><div class="_dsplFlx flxWrp spaceAround "><img ref alt=ssg>');function te(){return(()=>{var t=N(),r=t.firstChild,e=r.firstChild;return t.style.setProperty("max-height","80vh"),t.style.setProperty("overflow","auto"),t.style.setProperty("background","#fff"),t.style.setProperty("border-radius","13"),r.style.setProperty("padding","16px"),S(a=>{var s=C()?"96vw":"420px",l=L("SSG.webp");return s!==a.e&&((a.e=s)!=null?t.style.setProperty("width",s):t.style.removeProperty("width")),l!==a.t&&A(e,"src",a.t=l),a},{e:void 0,t:void 0}),t})()}var T=_('<div><div><div class="_dsplFlx flxWrp spaceAround "><div class="_dsplFlx bottombx lowbordr"><h5>Codigo </h5></div><div class="_dsplFlx bottombx "><h4></h4></div></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h5></h5></div><div class="_dsplFlx bottombx flxWrp spaceAround txtWrap"><h5>');w(()=>P(()=>import("./SVG-CwIR7Sbw.js"),__vite__mapDeps([0,1,2,3])));w(()=>P(()=>import("./CheckBoxSlide-C2txW7TR.js"),__vite__mapDeps([4,1,2,5])));function re(t){D(!1);const r=e=>{j(e)};return W(t?.val,async e=>await G(t?.val)),H(()=>{z()}),(()=>{var e=T(),a=e.firstChild,s=a.firstChild,l=s.firstChild,g=l.nextSibling,o=g.firstChild,d=s.nextSibling,n=d.firstChild,b=d.nextSibling,c=b.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","50px 25px"),o.$$click=()=>r(t?.bagnumber),m(o,()=>t?.bagnumber),d.style.setProperty("padding","16px"),n.$$click=()=>r(t?.msg1),m(n,()=>t?.msg1),b.style.setProperty("padding","16px"),c.$$click=()=>r(t?.msg2),m(c,()=>t?.msg2),S(i=>{var u=C()?"86vw":"420px",y=300/t?.msg1?.length*1.32+"px",p=300/t?.msg2?.length*1.32+"px";return u!==i.e&&((i.e=u)!=null?e.style.setProperty("width",u):e.style.removeProperty("width")),y!==i.t&&((i.t=y)!=null?n.style.setProperty("font-size",y):n.style.removeProperty("font-size")),p!==i.a&&((i.a=p)!=null?c.style.setProperty("font-size",p):c.style.removeProperty("font-size")),i},{e:void 0,t:void 0,a:void 0}),e})()}R(["click"]);export{te as S,re as a,ee as h};
