const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-B-pdVJPa.js","assets/index-CtKx0XWr.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-BU9AvXrf.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-DykKfUOd.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-B7Vax0gP.js","assets/debounces-D0TqFxOE.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-DDmPz2Ya.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-Ct0zB7tD.js","assets/Util-uEfv1z7O.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-C2nXlsW4.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-D4e3d-RR.js","assets/DialogHRM-ZoxhOS2G.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-BeLJshGj.js","assets/ShowQRPrintLabel-DSXK8Djy.js","assets/PDFButton-B_0lS8EG.js","assets/qrcode-C5vWJp7P.js","assets/fontkit.es-BKe7DAJ7.js","assets/InitPrintServices-CprHcwF4.js","assets/Toast-Di2dILX7.js","assets/Toast-DLpFKn-Q.css","assets/ShowPdfResume-5VZIca3l.js"])))=>i.map(i=>d[i]);
import{l as G,_ as B,c as ie,a as S,o as je,h as qe,b as Qe,m as We,i as n,d as t,f as H,e as Xe,t as _,k as ae,S as f,j as He,q as Ue,E as ge,r as re,F as te,g as ne,s as Ye,v as le}from"./index-CtKx0XWr.js";import{b as U,e as be,f as se,a as A,O as W,g as D,h as Je,s as Ke}from"./Util-uEfv1z7O.js";import{u as Ze}from"./debounces-D0TqFxOE.js";import{i as J}from"./globalSignal-BeLJshGj.js";import{g as me,l as et}from"./ShowQRPrintLabel-DSXK8Djy.js";import"./Toast-Di2dILX7.js";import"./DialogHRM-ZoxhOS2G.js";import"./index-Ci0zXM0r.js";import"./PDFButton-B_0lS8EG.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-BKe7DAJ7.js";import"./InitPrintServices-CprHcwF4.js";var he=_("<div style=padding:4px>"),Y=_('<div class="icon_status centerBx">'),tt=_('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),rt=_('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),nt=_('<div><div class="_dsplFlx flxWrp spaceAround ">'),lt=_('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),st=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div><div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),fe=_("<div> <!>."),_e=_("<div> "),it=_("<div class=centerBx><h5 style=margin-left:12px>generando excel"),at=_("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),ot=_("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),pe=_("<h5 class=totalBagsNo> <!> / "),$e=_('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),ye=_("<div class=leftMrg> "),ct=_("<div class=bottombx><h4>"),ut=_('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),dt=_("<div style=padding:16px;margin-left:20px;>"),gt=_("<div>"),mt=_('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const X=G(()=>B(()=>import("./LoadingColorSpinner-B-pdVJPa.js"),__vite__mapDeps([0,1,2,3]))),ht=G(()=>B(()=>import("./InputHr-BU9AvXrf.js"),__vite__mapDeps([4,1,2,5]))),P=G(()=>B(()=>import("./SVG-DykKfUOd.js"),__vite__mapDeps([6,1,2,7]))),ve=G(()=>B(()=>import("./DropDwnSearch-B7Vax0gP.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ft=G(()=>B(()=>import("./ContainerElasticView-DDmPz2Ya.js"),__vite__mapDeps([11,1,2,6,7,12]))),_t=G(()=>B(()=>import("./ButonHrm-Ct0zB7tD.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),oe=G(()=>B(()=>import("./CheckBoxSlide-C2nXlsW4.js"),__vite__mapDeps([16,1,2,17]))),vt=G(()=>B(()=>import("./ItemOnEnvios-D4e3d-RR.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27,28])));G(()=>B(()=>import("./ShowPdfResume-5VZIca3l.js"),__vite__mapDeps([29,1,2,21,22,23,7,24,25,26,14,27,28])));function Lt(){const[e,i]=ie({list:{manifest:{id:"",label:""},search:"",status:""}}),[l,a]=ie({}),[u,d]=ie({}),[g,I]=S(""),[o,O]=S(!1),[K,M]=S(64),[E,L]=S(!1),[z,Z]=S(!1),[xe,Ce]=S(""),F=Ze(I,500);S(!1);const[we,ce]=S(!1),[Se,ue]=S(!1),R=(c,s)=>{i("list",{[c]:s}),F(D())},Ie=()=>{L(!E()),F(D())},Me=()=>{O(!o()),F(D())},Ee=()=>{Z(!z()),F(D())};je(()=>{}),qe(()=>{});const Ae=()=>{M(c=>c+64)},Ge=c=>{let s=Math.ceil(c?.length/64);Ke(Ae,1250,s)},[T,{refetch:St}]=Qe(g,async c=>{a(void 0),d("prov",void 0);let s=e?.list?.manifest?.id;xe()!==s&&Ce(s);let w={},p=[],x={};var k={};if(s&&(w=await yt(s)),!o())a(w?.sumary),d("prov",w?.provinceGroup);else{k=await $t(e?.list?.search,s,e?.list?.status,e?.list?.estate,e?.list?.city,e?.list?.agency?.id),a(w?.sumary),M(0);let q={};E()?W(k).map($=>{let m=k[$],v=m?.estate||m?.consigneeInfo?.ybestate;q[$]?p.push(m):q[$]=1,A("M023009")?.ZoneCity?.[m?.zone]?.[v]||p.push(m)}):z()?W(k).map($=>{let m=k[$];m?.estate||m?.consigneeInfo?.ybestate||p.push(m),m?.bagnumber||p.push(m)}):(W(k).map($=>{let m=k[$],v=m?.estate||m?.consigneeInfo?.ybestate,C=m?.city||m?.consigneeInfo?.ybcity;(v||C)&&(x[v]||(x[v]={cities:{},total:0}),x[v].cities?.[C]||(x[v].cities[C]=0),x[v].cities[C]+=1,x[v].total+=1),p.push(m)}),d("prov",x)),Ge(p)}return p}),de=()=>T()?.length,Be=c=>{i("list",{manifest:c,status:void 0}),F(D())},De=()=>{xt(T())},Pe=()=>{Ct(T())},Oe=()=>{},Fe=(c,s)=>{R("estate",c),R("city",s)},Ne=(c,s)=>{i("list",{estate:void 0,city:void 0}),F(D())},j=c=>c?" "+c:"",Ve=c=>{let s=c?.consigneeInfo;return j(s?.firstName)+j(s?.middleName)+j(s?.lastName)+j(s?.lastName2)},Le=c=>{let s=c?.consigneeInfo,w=j(s?.altPhoneNumber);return j(s?.phoneNumber)+(w?" | "+w:"")},ze=async()=>{let c=[];ue(!0),setTimeout(async()=>{let s=30,w=900004,p=[],x=new Date().getFullYear().toString().slice(2,4);for(let $=0;$<s;$++)p.push($);const k=p.map(async($,m)=>{let v=w+$*2,C=v+1,N="SS"+x;const ee=await me(N+""+v),r=await me(N+""+C);let h={mtrx:ee,mtrx2:r,lbl:N+""+v,lbl2:N+""+C};c.push(h)});await Promise.all(k);let q=await et(c);window.open(q),ue(!1)},760)},Re=async()=>{ce(!0);let c=[];T().map(async(s,w)=>{let p=s?.estate||s?.consigneeInfo?.ybestate,x=s?.city||s?.consigneeInfo?.ybcity,k={provincia:p,ciudad:x,nombre:Ve(s),telefonos:Le(s),bulto:s?.bagnumber,hbls:s?.hblS};c.push(k)}),Je(`guia_${D()}.csv`,c),ce(!1)},Te=async c=>{await kt(e?.list?.manifest?.id)};return We(()=>{}),(()=>{var c=st(),s=c.firstChild,w=s.firstChild,p=w.nextSibling,x=p.firstChild,k=p.nextSibling,q=k.firstChild,$=s.nextSibling,m=$.nextSibling,v=m.firstChild,C=m.nextSibling,N=C.firstChild,ee=N.firstChild;return n(x,()=>e?.list?.manifest?.id),n(k,t(oe,{get initValue(){return o()},updChange:Me,color:"var(--background-red-ssg)"}),q),n(c,t(f,{get when(){return ae?.profile?.isAdmin},get children(){return t(_t,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:De})}}),m),n(v,t(ve,{get list(){return A("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:r=>Be(r),width:"260px"})),n(m,t(f,{get when(){return He(()=>!!e?.list?.manifest?.id)()&&o()},get children(){return[(()=>{var r=he();return n(r,t(f,{get when(){return Ue()},get children(){return t(ve,{get list(){return A("M023009")?.agencies},lbl_empty:"Agencia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.agency?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:h=>R("agency",h),width:"260px"})}})),r})(),(()=>{var r=he();return n(r,t(ht,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:h=>R("search",h)})),r})(),(()=>{var r=rt(),h=r.firstChild,b=h.firstChild;return n(h,t(oe,{get initValue(){return E()},updChange:Ie,color:"var(--background-red-ssg)"}),b),n(r,t(f,{get when(){return ae?.profile?.isAdmin},get children(){var y=tt(),Q=y.firstChild;return n(y,t(oe,{get initValue(){return z()},updChange:Ee,color:"var(--background-red-ssg)"}),Q),n(y,t(f,{get when(){return z()},get children(){var V=Y();return V.$$click=Pe,n(V,t(P,{name:"outline_delete",size:24})),V}}),null),y}}),null),r})()]}}),null),n(C,t(f,{get when(){return e?.list?.manifest?.id},get children(){var r=nt(),h=r.firstChild;return n(h,t(ge,{fallback:b=>(()=>{var y=fe(),Q=y.firstChild,V=Q.nextSibling;return V.nextSibling,n(y,()=>b.toString(),V),y})(),get children(){return t(re,{get fallback(){return(()=>{var b=_e();return b.firstChild,n(b,t(X,{stroke:"rgb(200 25 60 / 1)",size:62}),null),b})()},get children(){return t(f,{get when(){return l?.total},get children(){return t(te,{get each(){return W(l)},children:(b,y)=>J()?t(pt,{keyG:b,total:de,get status(){return e?.list?.status},get amount(){return l?.[b]},get showItems(){return o()},updForm:R}):t(bt,{keyG:b,total:de,get showItems(){return o()},get status(){return e?.list?.status},get amount(){return l?.[b]},updForm:R})})}})}})}})),H(()=>ne(r,`client_item_box gWXAaj jlytmu ${J()?"isMobile":""}`)),r}}),N),n(ee,t(f,{get when(){return o()},get children(){return t(f,{get when(){return!we()},get fallback(){return(()=>{var r=it(),h=r.firstChild;return n(r,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),h),r})()},get children(){var r=Y();return r.$$click=Re,n(r,t(P,{name:"grid",size:24,color:"firebrick"})),r}})}}),null),n(ee,t(f,{get when(){return ae?.profile?.isAdmin},get children(){return[t(f,{get when(){return!Se()},get fallback(){return(()=>{var r=at(),h=r.firstChild;return n(r,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),h),r})()},get children(){var r=Y();return r.$$click=ze,n(r,t(P,{name:"printer",size:24,color:"firebrick"})),r}}),(()=>{var r=Y();return r.$$click=Te,n(r,t(P,{name:"tag-outline",size:24})),r})(),(()=>{var r=Y();return r.$$click=Oe,n(r,t(P,{name:"outline_renew",size:24})),r})()]}}),null),n(C,t(f,{get when(){return u?.prov},get children(){var r=lt(),h=r.firstChild,b=h.firstChild,y=h.nextSibling;return n(b,t(f,{get when(){return u?.prov},get children(){return t(te,{get each(){return W(u?.prov)},children:(Q,V)=>t(wt,{ism:Q,get item(){return u?.prov?.[Q]},updS:Fe})})}})),y.$$click=Ne,n(y,t(P,{name:"Xclose",size:22})),H(()=>ne(r,`client_item_box gWXAaj jlytmu ${J()?"isMobile":""}`)),r}}),null),n(C,t(ge,{fallback:r=>(()=>{var h=fe(),b=h.firstChild,y=b.nextSibling;return y.nextSibling,n(h,()=>r.toString(),y),h})(),get children(){return t(re,{get fallback(){return(()=>{var r=_e();return r.firstChild,n(r,t(X,{stroke:"rgb(200 25 60 / 1)",size:62}),null),r})()},get children(){return t(f,{get when(){return T()},get children(){return t(te,{get each(){return T()?.slice(0,K())},children:(r,h)=>t(vt,{item:r,refresh:()=>F(D())})})}})}})}}),null),H(r=>Ye(C,` ${J()?"":"width:94vw;"} margin: 0 auto;`,r)),c})()}const bt=e=>{const[i,l]=S(!1),[a,u]=S(0),d=()=>{let o=e?.keyG;e?.keyG==="total"&&(o=null),e?.updForm("status",o)},g=()=>{i()||!J()&&e?.keyG!=="total"&&(u(A("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),l(!0))},I=()=>{u("0px"),i()&&l(!1)};return t(f,{get when(){return e?.amount>0},get children(){return t(re,{get fallback(){return(()=>{var o=ye();return o.firstChild,n(o,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),null),o})()},get children(){var o=$e(),O=o.firstChild,K=O.nextSibling;return o.$$mouseout=I,o.$$mousemove=g,o.$$click=d,n(o,t(f,{get when(){return i()},get children(){var M=ot(),E=M.firstChild,L=E.firstChild,z=L.firstChild;return n(z,()=>A("M023009")?.statusObjDesc?.[e?.keyG]),H(Z=>(Z=a())!=null?E.style.setProperty("width",Z):E.style.removeProperty("width")),M}}),O),n(O,t(P,{get name(){return A("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(o,t(f,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var M=pe(),E=M.firstChild,L=E.nextSibling;return L.nextSibling,n(M,()=>e?.total(),L),M}}),K),n(K,()=>e?.amount),H(()=>ne(o,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),o}})}})},pt=e=>{const i=()=>{let l=e?.keyG;e?.keyG==="total"&&(l=null),e?.updForm("status",l)};return t(f,{get when(){return e?.amount>0},get children(){return t(re,{get fallback(){return(()=>{var l=ye();return l.firstChild,n(l,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),null),l})()},get children(){var l=$e(),a=l.firstChild,u=a.nextSibling;return l.$$click=i,n(a,t(P,{get name(){return A("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(l,t(f,{get when(){return A("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var d=ct(),g=d.firstChild;return n(g,()=>A("M023009")?.statusObjDesc?.[e?.keyG]),d}}),u),n(l,t(f,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var d=pe(),g=d.firstChild,I=g.nextSibling;return I.nextSibling,n(d,()=>e?.total(),I),d}}),u),n(u,()=>e?.amount),H(()=>ne(l,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),l}})}})},$t=async(e,i,l,a,u,d)=>{let g={params:{idairguide:"all",":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG"]};e&&e.split(" ").map((o,O)=>{o&&(g.params[":search"+O]=o.trim())}),l&&(g.params[":status"]=l),a&&(g.params[":estate"]=a),u&&(g.params[":city"]=u),le?.roles?.agency?g.params[":agency"]=le?.roles?.agency+"":d&&(g.params[":agency"]=d);let I=U(802001);if(g={...g,...I},i&&Object.keys(g.params)?.length>=2){const o=await se(g);return o?.data?.error?{}:o}return{}},yt=async e=>{let i={params:{idairguide:"all",":search0":e}},l=U(802004);i={...i,...l},le?.roles?.agency&&(i.params[":agency"]=le?.roles?.agency+"");const a=await se(i);return a?.error?{}:a},kt=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},l=U(802001);i={...i,...l};const a=await se(i);return a?.error?{}:a},xt=async e=>{e.map(i=>{let l={params:{id:i?.ssg_track_key,idairguide:"all"}},a=U(802002);l={...l,...a}})},Ct=async e=>{let i=[];e.map(l=>{let a={params:{ssg_track_key:l?.ssg_track_key,idairguide:"all"}},u=U(809005);a={...a,...u},i.push(a)}),be(i,ke)},zt=async(e,i)=>{let l=[];e.map(a=>{let u={params:{ssg_track_key:a?.ssg_track_key,idairguide:"all"},data2update:{currentStatus:i}},d=U(802004);u={...u,...d},l.push(u)}),be(l,ke)},ke=async e=>{const l=await se(e);if(l)return l},wt=e=>(()=>{var i=gt();return n(i,t(f,{get when(){return e?.item?.total>0},get children(){var l=ut(),a=l.firstChild,u=a.firstChild,d=u.firstChild,g=u.nextSibling;return a.$$click=()=>e?.updS(e?.ism),n(u,()=>e?.ism,d),n(g,()=>e?.item?.total),l}}),null),n(i,t(ft,{get children(){var l=dt();return n(l,t(f,{get when(){return e?.item?.cities},get children(){return t(te,{get each(){return W(e?.item?.cities)},children:(a,u)=>(()=>{var d=mt(),g=d.firstChild,I=g.nextSibling;return d.$$click=()=>e?.updS(e?.ism,a),n(g,a),n(I,()=>e?.item?.cities?.[a]),d})()})}})),l}}),null),i})();Xe(["click","mousemove","mouseout"]);export{bt as StatusGroupItem,Lt as default,Ct as deleteManifest,ke as fetchCSVInve,xt as loadManifest,zt as updateManifest};
