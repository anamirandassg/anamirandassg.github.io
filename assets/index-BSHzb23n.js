function Aa(o,a){for(var c=0;c<a.length;c++){const f=a[c];if(typeof f!="string"&&!Array.isArray(f)){for(const g in f)if(g!=="default"&&!(g in o)){const h=Object.getOwnPropertyDescriptor(f,g);h&&Object.defineProperty(o,g,h.get?h:{enumerable:!0,get:()=>f[g]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))f(g);new MutationObserver(g=>{for(const h of g)if(h.type==="childList")for(const A of h.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&f(A)}).observe(document,{childList:!0,subtree:!0});function c(g){const h={};return g.integrity&&(h.integrity=g.integrity),g.referrerPolicy&&(h.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?h.credentials="include":g.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function f(g){if(g.ep)return;g.ep=!0;const h=c(g);fetch(g.href,h)}})();const de={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return ms(this.context.count)},getNextContextId(){return ms(this.context.count++)}};function ms(o){const a=String(o),c=a.length-1;return de.context.id+(c?String.fromCharCode(96+c):"")+a}function Sn(o){de.context=o}function Ca(){return{...de.context,id:de.getNextContextId(),count:0}}const pa=(o,a)=>o===a,tn=Symbol("solid-proxy"),Ti=Symbol("solid-track"),kr={equals:pa};let ar=null,Qs=no;const Ut=1,cr=2,qs={owned:null,cleanups:null,context:null,owner:null},pi={};var ge=null;let Z=null,ma=null,Re=null,xt=null,ot=null,Xr=0;function Hn(o,a){const c=Re,f=ge,g=o.length===0,h=a===void 0?f:a,A=g?qs:{owned:null,cleanups:null,context:h?h.context:null,owner:h},m=g?o:()=>o(()=>Et(()=>wn(A)));ge=A,Re=null;try{return vt(m,!0)}finally{Re=c,ge=f}}function Te(o,a){a=a?Object.assign({},kr,a):kr;const c={value:o,observers:null,observerSlots:null,comparator:a.equals||void 0},f=g=>(typeof g=="function"&&(Z&&Z.running&&Z.sources.has(c)?g=g(c.tValue):g=g(c.value)),to(c,g));return[eo.bind(c),f]}function Es(o,a,c){const f=xr(o,a,!0,Ut);zn(f)}function wt(o,a,c){const f=xr(o,a,!1,Ut);zn(f)}function gr(o,a,c){Qs=Na;const f=xr(o,a,!1,Ut),g=Tn&&Qr(Tn);g&&(f.suspense=g),f.user=!0,ot?ot.push(f):zn(f)}function Qe(o,a,c){c=c?Object.assign({},kr,c):kr;const f=xr(o,a,!0,0);return f.observers=null,f.observerSlots=null,f.comparator=c.equals||void 0,zn(f),eo.bind(f)}function Ea(o){return o&&typeof o=="object"&&"then"in o}function Fi(o,a,c){let f,g,h;arguments.length===2&&typeof a=="object"||arguments.length===1?(f=!0,g=o,h=a||{}):(f=o,g=a,h={});let A=null,m=pi,y=null,w=!1,S=!1,T="initialValue"in h,H=typeof f=="function"&&Qe(f);const k=new Set,[Q,B]=(h.storage||Te)(h.initialValue),[L,X]=Te(void 0),[j,G]=Te(void 0,{equals:!1}),[ne,Ie]=Te(T?"ready":"unresolved");de.context&&(y=de.getNextContextId(),h.ssrLoadFrom==="initial"?m=h.initialValue:de.load&&de.has(y)&&(m=de.load(y)));function K(pe,we,q,J){return A===pe&&(A=null,J!==void 0&&(T=!0),(pe===m||we===m)&&h.onHydrated&&queueMicrotask(()=>h.onHydrated(J,{value:we})),m=pi,Z&&pe&&w?(Z.promises.delete(pe),w=!1,vt(()=>{Z.running=!0,F(we,q)},!1)):F(we,q)),we}function F(pe,we){vt(()=>{we===void 0&&B(()=>pe),Ie(we!==void 0?"errored":T?"ready":"unresolved"),X(we);for(const q of k.keys())q.decrement();k.clear()},!1)}function oe(){const pe=Tn&&Qr(Tn),we=Q(),q=L();if(q!==void 0&&!A)throw q;return Re&&!Re.user&&pe&&Es(()=>{j(),A&&(pe.resolved&&Z&&w?Z.promises.add(A):k.has(pe)||(pe.increment(),k.add(pe)))}),we}function U(pe=!0){if(pe!==!1&&S)return;S=!1;const we=H?H():f;if(w=Z&&Z.running,we==null||we===!1){K(A,Et(Q));return}Z&&A&&Z.promises.delete(A);const q=m!==pi?m:Et(()=>g(we,{value:Q(),refetching:pe}));return Ea(q)?(A=q,"value"in q?(q.status==="success"?K(A,q.value,void 0,we):K(A,void 0,_i(q.value),we),q):(S=!0,queueMicrotask(()=>S=!1),vt(()=>{Ie(T?"refreshing":"pending"),G()},!1),q.then(J=>K(q,J,void 0,we),J=>K(q,void 0,_i(J),we)))):(K(A,q,void 0,we),q)}return Object.defineProperties(oe,{state:{get:()=>ne()},error:{get:()=>L()},loading:{get(){const pe=ne();return pe==="pending"||pe==="refreshing"}},latest:{get(){if(!T)return oe();const pe=L();if(pe&&!A)throw pe;return Q()}}}),H?Es(()=>U(!1)):U(!1),[oe,{refetch:U,mutate:B}]}function Ks(o){return vt(o,!1)}function Et(o){if(Re===null)return o();const a=Re;Re=null;try{return o()}finally{Re=a}}function Ui(o,a,c){const f=Array.isArray(o);let g,h=c&&c.defer;return A=>{let m;if(f){m=Array(o.length);for(let w=0;w<o.length;w++)m[w]=o[w]()}else m=o();if(h)return h=!1,A;const y=Et(()=>a(m,g,A));return g=m,y}}function $s(o){gr(()=>Et(o))}function Nn(o){return ge===null||(ge.cleanups===null?ge.cleanups=[o]:ge.cleanups.push(o)),o}function ya(o,a){ar||(ar=Symbol("error")),ge=xr(void 0,void 0,!0),ge.context={...ge.context,[ar]:[a]},Z&&Z.running&&Z.sources.add(ge);try{return o()}catch(c){wr(c)}finally{ge=ge.owner}}function Ni(){return Re}function _t(){return ge}function Js(o,a){const c=ge,f=Re;ge=o,Re=null;try{return vt(a,!0)}catch(g){wr(g)}finally{ge=c,Re=f}}function Ia(o){if(Z&&Z.running)return o(),Z.done;const a=Re,c=ge;return Promise.resolve().then(()=>{Re=a,ge=c;let f;return Tn&&(f=Z||(Z={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),f.done||(f.done=new Promise(g=>f.resolve=g)),f.running=!0),vt(o,!1),Re=ge=null,f?f.done:void 0})}const[b1,ys]=Te(!1);function ba(o){ot.push.apply(ot,o),o.length=0}function Zr(o,a){const c=Symbol("context");return{id:c,Provider:_a(c),defaultValue:o}}function Qr(o){let a;return ge&&ge.context&&(a=ge.context[o.id])!==void 0?a:o.defaultValue}function Vi(o){const a=Qe(o),c=Qe(()=>Oi(a()));return c.toArray=()=>{const f=c();return Array.isArray(f)?f:f!=null?[f]:[]},c}let Tn;function Sa(){return Tn||(Tn=Zr())}function eo(){const o=Z&&Z.running;if(this.sources&&(o?this.tState:this.state))if((o?this.tState:this.state)===Ut)zn(this);else{const a=xt;xt=null,vt(()=>Ur(this),!1),xt=a}if(Re){const a=this.observers?this.observers.length:0;Re.sources?(Re.sources.push(this),Re.sourceSlots.push(a)):(Re.sources=[this],Re.sourceSlots=[a]),this.observers?(this.observers.push(Re),this.observerSlots.push(Re.sources.length-1)):(this.observers=[Re],this.observerSlots=[Re.sources.length-1])}return o&&Z.sources.has(this)?this.tValue:this.value}function to(o,a,c){let f=Z&&Z.running&&Z.sources.has(o)?o.tValue:o.value;if(!o.comparator||!o.comparator(f,a)){if(Z){const g=Z.running;(g||!c&&Z.sources.has(o))&&(Z.sources.add(o),o.tValue=a),g||(o.value=a)}else o.value=a;o.observers&&o.observers.length&&vt(()=>{for(let g=0;g<o.observers.length;g+=1){const h=o.observers[g],A=Z&&Z.running;A&&Z.disposed.has(h)||((A?!h.tState:!h.state)&&(h.pure?xt.push(h):ot.push(h),h.observers&&ro(h)),A?h.tState=Ut:h.state=Ut)}if(xt.length>1e6)throw xt=[],new Error},!1)}return a}function zn(o){if(!o.fn)return;wn(o);const a=Xr;Is(o,Z&&Z.running&&Z.sources.has(o)?o.tValue:o.value,a),Z&&!Z.running&&Z.sources.has(o)&&queueMicrotask(()=>{vt(()=>{Z&&(Z.running=!0),Re=ge=o,Is(o,o.tValue,a),Re=ge=null},!1)})}function Is(o,a,c){let f;const g=ge,h=Re;Re=ge=o;try{f=o.fn(a)}catch(A){return o.pure&&(Z&&Z.running?(o.tState=Ut,o.tOwned&&o.tOwned.forEach(wn),o.tOwned=void 0):(o.state=Ut,o.owned&&o.owned.forEach(wn),o.owned=null)),o.updatedAt=c+1,wr(A)}finally{Re=h,ge=g}(!o.updatedAt||o.updatedAt<=c)&&(o.updatedAt!=null&&"observers"in o?to(o,f,!0):Z&&Z.running&&o.pure?(Z.sources.add(o),o.tValue=f):o.value=f,o.updatedAt=c)}function xr(o,a,c,f=Ut,g){const h={fn:o,state:f,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:a,owner:ge,context:ge?ge.context:null,pure:c};return Z&&Z.running&&(h.state=0,h.tState=f),ge===null||ge!==qs&&(Z&&Z.running&&ge.pure?ge.tOwned?ge.tOwned.push(h):ge.tOwned=[h]:ge.owned?ge.owned.push(h):ge.owned=[h]),h}function Fr(o){const a=Z&&Z.running;if((a?o.tState:o.state)===0)return;if((a?o.tState:o.state)===cr)return Ur(o);if(o.suspense&&Et(o.suspense.inFallback))return o.suspense.effects.push(o);const c=[o];for(;(o=o.owner)&&(!o.updatedAt||o.updatedAt<Xr);){if(a&&Z.disposed.has(o))return;(a?o.tState:o.state)&&c.push(o)}for(let f=c.length-1;f>=0;f--){if(o=c[f],a){let g=o,h=c[f+1];for(;(g=g.owner)&&g!==h;)if(Z.disposed.has(g))return}if((a?o.tState:o.state)===Ut)zn(o);else if((a?o.tState:o.state)===cr){const g=xt;xt=null,vt(()=>Ur(o,c[0]),!1),xt=g}}}function vt(o,a){if(xt)return o();let c=!1;a||(xt=[]),ot?c=!0:ot=[],Xr++;try{const f=o();return Ta(c),f}catch(f){c||(ot=null),xt=null,wr(f)}}function Ta(o){if(xt&&(no(xt),xt=null),o)return;let a;if(Z){if(!Z.promises.size&&!Z.queue.size){const f=Z.sources,g=Z.disposed;ot.push.apply(ot,Z.effects),a=Z.resolve;for(const h of ot)"tState"in h&&(h.state=h.tState),delete h.tState;Z=null,vt(()=>{for(const h of g)wn(h);for(const h of f){if(h.value=h.tValue,h.owned)for(let A=0,m=h.owned.length;A<m;A++)wn(h.owned[A]);h.tOwned&&(h.owned=h.tOwned),delete h.tValue,delete h.tOwned,h.tState=0}ys(!1)},!1)}else if(Z.running){Z.running=!1,Z.effects.push.apply(Z.effects,ot),ot=null,ys(!0);return}}const c=ot;ot=null,c.length&&vt(()=>Qs(c),!1),a&&a()}function no(o){for(let a=0;a<o.length;a++)Fr(o[a])}function Na(o){let a,c=0;for(a=0;a<o.length;a++){const f=o[a];f.user?o[c++]=f:Fr(f)}if(de.context){if(de.count){de.effects||(de.effects=[]),de.effects.push(...o.slice(0,c));return}Sn()}for(de.effects&&(de.done||!de.count)&&(o=[...de.effects,...o],c+=de.effects.length,delete de.effects),a=0;a<c;a++)Fr(o[a])}function Ur(o,a){const c=Z&&Z.running;c?o.tState=0:o.state=0;for(let f=0;f<o.sources.length;f+=1){const g=o.sources[f];if(g.sources){const h=c?g.tState:g.state;h===Ut?g!==a&&(!g.updatedAt||g.updatedAt<Xr)&&Fr(g):h===cr&&Ur(g,a)}}}function ro(o){const a=Z&&Z.running;for(let c=0;c<o.observers.length;c+=1){const f=o.observers[c];(a?!f.tState:!f.state)&&(a?f.tState=cr:f.state=cr,f.pure?xt.push(f):ot.push(f),f.observers&&ro(f))}}function wn(o){let a;if(o.sources)for(;o.sources.length;){const c=o.sources.pop(),f=o.sourceSlots.pop(),g=c.observers;if(g&&g.length){const h=g.pop(),A=c.observerSlots.pop();f<g.length&&(h.sourceSlots[A]=f,g[f]=h,c.observerSlots[f]=A)}}if(Z&&Z.running&&o.pure){if(o.tOwned){for(a=o.tOwned.length-1;a>=0;a--)wn(o.tOwned[a]);delete o.tOwned}io(o,!0)}else if(o.owned){for(a=o.owned.length-1;a>=0;a--)wn(o.owned[a]);o.owned=null}if(o.cleanups){for(a=o.cleanups.length-1;a>=0;a--)o.cleanups[a]();o.cleanups=null}Z&&Z.running?o.tState=0:o.state=0}function io(o,a){if(a||(o.tState=0,Z.disposed.add(o)),o.owned)for(let c=0;c<o.owned.length;c++)io(o.owned[c])}function _i(o){return o instanceof Error?o:new Error(typeof o=="string"?o:"Unknown error",{cause:o})}function bs(o,a,c){try{for(const f of a)f(o)}catch(f){wr(f,c&&c.owner||null)}}function wr(o,a=ge){const c=ar&&a&&a.context&&a.context[ar],f=_i(o);if(!c)throw f;ot?ot.push({fn(){bs(f,c,a)},state:Ut}):bs(f,c,a)}function Oi(o){if(typeof o=="function"&&!o.length)return Oi(o());if(Array.isArray(o)){const a=[];for(let c=0;c<o.length;c++){const f=Oi(o[c]);Array.isArray(f)?a.push.apply(a,f):a.push(f)}return a}return o}function _a(o,a){return function(f){let g;return wt(()=>g=Et(()=>(ge.context={...ge.context,[o]:f.value},Vi(()=>f.children))),void 0),g}}const Oa=Symbol("fallback");function Ss(o){for(let a=0;a<o.length;a++)o[a]()}function Ma(o,a,c={}){let f=[],g=[],h=[],A=0,m=a.length>1?[]:null;return Nn(()=>Ss(h)),()=>{let y=o()||[],w=y.length,S,T;return y[Ti],Et(()=>{let k,Q,B,L,X,j,G,ne,Ie;if(w===0)A!==0&&(Ss(h),h=[],f=[],g=[],A=0,m&&(m=[])),c.fallback&&(f=[Oa],g[0]=Hn(K=>(h[0]=K,c.fallback())),A=1);else if(A===0){for(g=new Array(w),T=0;T<w;T++)f[T]=y[T],g[T]=Hn(H);A=w}else{for(B=new Array(w),L=new Array(w),m&&(X=new Array(w)),j=0,G=Math.min(A,w);j<G&&f[j]===y[j];j++);for(G=A-1,ne=w-1;G>=j&&ne>=j&&f[G]===y[ne];G--,ne--)B[ne]=g[G],L[ne]=h[G],m&&(X[ne]=m[G]);for(k=new Map,Q=new Array(ne+1),T=ne;T>=j;T--)Ie=y[T],S=k.get(Ie),Q[T]=S===void 0?-1:S,k.set(Ie,T);for(S=j;S<=G;S++)Ie=f[S],T=k.get(Ie),T!==void 0&&T!==-1?(B[T]=g[S],L[T]=h[S],m&&(X[T]=m[S]),T=Q[T],k.set(Ie,T)):h[S]();for(T=j;T<w;T++)T in B?(g[T]=B[T],h[T]=L[T],m&&(m[T]=X[T],m[T](T))):g[T]=Hn(H);g=g.slice(0,A=w),f=y.slice(0)}return g});function H(k){if(h[T]=k,m){const[Q,B]=Te(T);return m[T]=B,a(y[T],Q)}return a(y[T])}}}let Ra=!1;function $(o,a){if(Ra&&de.context){const c=de.context;Sn(Ca());const f=Et(()=>o(a||{}));return Sn(c),f}return Et(()=>o(a||{}))}function Dr(){return!0}const Da={get(o,a,c){return a===tn?c:o.get(a)},has(o,a){return a===tn?!0:o.has(a)},set:Dr,deleteProperty:Dr,getOwnPropertyDescriptor(o,a){return{configurable:!0,enumerable:!0,get(){return o.get(a)},set:Dr,deleteProperty:Dr}},ownKeys(o){return o.keys()}};function mi(o){return(o=typeof o=="function"?o():o)?o:{}}function va(){for(let o=0,a=this.length;o<a;++o){const c=this[o]();if(c!==void 0)return c}}function La(...o){let a=!1;for(let A=0;A<o.length;A++){const m=o[A];a=a||!!m&&tn in m,o[A]=typeof m=="function"?(a=!0,Qe(m)):m}if(a)return new Proxy({get(A){for(let m=o.length-1;m>=0;m--){const y=mi(o[m])[A];if(y!==void 0)return y}},has(A){for(let m=o.length-1;m>=0;m--)if(A in mi(o[m]))return!0;return!1},keys(){const A=[];for(let m=0;m<o.length;m++)A.push(...Object.keys(mi(o[m])));return[...new Set(A)]}},Da);const c={},f=Object.create(null);for(let A=o.length-1;A>=0;A--){const m=o[A];if(!m)continue;const y=Object.getOwnPropertyNames(m);for(let w=y.length-1;w>=0;w--){const S=y[w];if(S==="__proto__"||S==="constructor")continue;const T=Object.getOwnPropertyDescriptor(m,S);if(!f[S])f[S]=T.get?{enumerable:!0,configurable:!0,get:va.bind(c[S]=[T.get.bind(m)])}:T.value!==void 0?T:void 0;else{const H=c[S];H&&(T.get?H.push(T.get.bind(m)):T.value!==void 0&&H.push(()=>T.value))}}}const g={},h=Object.keys(f);for(let A=h.length-1;A>=0;A--){const m=h[A],y=f[m];y&&y.get?Object.defineProperty(g,m,y):g[m]=y?y.value:void 0}return g}const Ba=o=>`Stale read from <${o}>.`;function Hi(o){const a="fallback"in o&&{fallback:()=>o.fallback};return Qe(Ma(()=>o.each,o.children,a||void 0))}function at(o){const a=o.keyed,c=Qe(()=>o.when,void 0,{equals:(f,g)=>a?f===g:!f==!g});return Qe(()=>{const f=c();if(f){const g=o.children;return typeof g=="function"&&g.length>0?Et(()=>g(a?f:()=>{if(!Et(c))throw Ba("Show");return o.when})):g}return o.fallback},void 0,void 0)}let Un;function Pa(){Un&&[...Un].forEach(o=>o())}function ka(o){let a;de.context&&de.load&&(a=de.load(de.getContextId()));const[c,f]=Te(a,void 0);return Un||(Un=new Set),Un.add(f),Nn(()=>Un.delete(f)),Qe(()=>{let g;if(g=c()){const h=o.fallback;return typeof h=="function"&&h.length?Et(()=>h(g,()=>f())):h}return ya(()=>o.children,f)},void 0,void 0)}const Fa=Zr();function Ts(o){let a=0,c,f,g,h,A;const[m,y]=Te(!1),w=Sa(),S={increment:()=>{++a===1&&y(!0)},decrement:()=>{--a===0&&y(!1)},inFallback:m,effects:[],resolved:!1},T=_t();if(de.context&&de.load){const Q=de.getContextId();let B=de.load(Q);if(B&&(typeof B!="object"||B.status!=="success"?g=B:de.gather(Q)),g&&g!=="$$f"){const[L,X]=Te(void 0,{equals:!1});h=L,g.then(()=>{if(de.done)return X();de.gather(Q),Sn(f),X(),Sn()},j=>{A=j,X()})}}const H=Qr(Fa);H&&(c=H.register(S.inFallback));let k;return Nn(()=>k&&k()),$(w.Provider,{value:S,get children(){return Qe(()=>{if(A)throw A;if(f=de.context,h)return h(),h=void 0;f&&g==="$$f"&&Sn();const Q=Qe(()=>o.children);return Qe(B=>{const L=S.inFallback(),{showContent:X=!0,showFallback:j=!0}=c?c():{};if((!L||g&&g!=="$$f")&&X)return S.resolved=!0,k&&k(),k=f=g=void 0,ba(S.effects),Q();if(j)return k?B:Hn(G=>(k=G,f&&(Sn({id:f.id+"F",count:0}),f=void 0),o.fallback),T)})})}})}function Ua(o,a,c){let f=c.length,g=a.length,h=f,A=0,m=0,y=a[g-1].nextSibling,w=null;for(;A<g||m<h;){if(a[A]===c[m]){A++,m++;continue}for(;a[g-1]===c[h-1];)g--,h--;if(g===A){const S=h<f?m?c[m-1].nextSibling:c[h-m]:y;for(;m<h;)o.insertBefore(c[m++],S)}else if(h===m)for(;A<g;)(!w||!w.has(a[A]))&&a[A].remove(),A++;else if(a[A]===c[h-1]&&c[m]===a[g-1]){const S=a[--g].nextSibling;o.insertBefore(c[m++],a[A++].nextSibling),o.insertBefore(c[--h],S),a[g]=c[h]}else{if(!w){w=new Map;let T=m;for(;T<h;)w.set(c[T],T++)}const S=w.get(a[A]);if(S!=null)if(m<S&&S<h){let T=A,H=1,k;for(;++T<g&&T<h&&!((k=w.get(a[T]))==null||k!==S+H);)H++;if(H>S-m){const Q=a[A];for(;m<S;)o.insertBefore(c[m++],Q)}else o.replaceChild(c[m++],a[A++])}else A++;else a[A++].remove()}}}const Ns="_$DX_DELEGATE";function Va(o,a,c,f={}){let g;return Hn(h=>{g=h,a===document?o():re(a,o(),a.firstChild?null:void 0,c)},f.owner),()=>{g(),a.textContent=""}}function ye(o,a,c){let f;const g=()=>{const A=document.createElement("template");return A.innerHTML=o,A.content.firstChild},h=()=>(f||(f=g())).cloneNode(!0);return h.cloneNode=h,h}function Ar(o,a=window.document){const c=a[Ns]||(a[Ns]=new Set);for(let f=0,g=o.length;f<g;f++){const h=o[f];c.has(h)||(c.add(h),a.addEventListener(h,Ha))}}function Ft(o,a,c){ji(o)||(c==null?o.removeAttribute(a):o.setAttribute(a,c))}function en(o,a){ji(o)||(a==null?o.removeAttribute("class"):o.className=a)}function ur(o,a,c){if(!a)return c?Ft(o,"style"):a;const f=o.style;if(typeof a=="string")return f.cssText=a;typeof c=="string"&&(f.cssText=c=void 0),c||(c={}),a||(a={});let g,h;for(h in c)a[h]==null&&f.removeProperty(h),delete c[h];for(h in a)g=a[h],g!==c[h]&&(f.setProperty(h,g),c[h]=g);return c}function re(o,a,c,f){if(c!==void 0&&!f&&(f=[]),typeof a!="function")return Vr(o,a,f,c);wt(g=>Vr(o,a(),g,c),f)}function ji(o){return!!de.context&&!de.done&&(!o||o.isConnected)}function Ha(o){if(de.registry&&de.events&&de.events.find(([f,g])=>g===o))return;const a=`$$${o.type}`;let c=o.composedPath&&o.composedPath()[0]||o.target;for(o.target!==c&&Object.defineProperty(o,"target",{configurable:!0,value:c}),Object.defineProperty(o,"currentTarget",{configurable:!0,get(){return c||document}}),de.registry&&!de.done&&(de.done=_$HY.done=!0);c;){const f=c[a];if(f&&!c.disabled){const g=c[`${a}Data`];if(g!==void 0?f.call(c,g,o):f.call(c,o),o.cancelBubble)return}c=c._$host||c.parentNode||c.host}}function Vr(o,a,c,f,g){const h=ji(o);if(h){!c&&(c=[...o.childNodes]);let y=[];for(let w=0;w<c.length;w++){const S=c[w];S.nodeType===8&&S.data.slice(0,2)==="!$"?S.remove():y.push(S)}c=y}for(;typeof c=="function";)c=c();if(a===c)return c;const A=typeof a,m=f!==void 0;if(o=m&&c[0]&&c[0].parentNode||o,A==="string"||A==="number"){if(h||A==="number"&&(a=a.toString(),a===c))return c;if(m){let y=c[0];y&&y.nodeType===3?y.data!==a&&(y.data=a):y=document.createTextNode(a),c=Fn(o,c,f,y)}else c!==""&&typeof c=="string"?c=o.firstChild.data=a:c=o.textContent=a}else if(a==null||A==="boolean"){if(h)return c;c=Fn(o,c,f)}else{if(A==="function")return wt(()=>{let y=a();for(;typeof y=="function";)y=y();c=Vr(o,y,c,f)}),()=>c;if(Array.isArray(a)){const y=[],w=c&&Array.isArray(c);if(Mi(y,a,c,g))return wt(()=>c=Vr(o,y,c,f,!0)),()=>c;if(h){if(!y.length)return c;if(f===void 0)return c=[...o.childNodes];let S=y[0];if(S.parentNode!==o)return c;const T=[S];for(;(S=S.nextSibling)!==f;)T.push(S);return c=T}if(y.length===0){if(c=Fn(o,c,f),m)return c}else w?c.length===0?_s(o,y,f):Ua(o,c,y):(c&&Fn(o),_s(o,y));c=y}else if(a.nodeType){if(h&&a.parentNode)return c=m?[a]:a;if(Array.isArray(c)){if(m)return c=Fn(o,c,f,a);Fn(o,c,null,a)}else c==null||c===""||!o.firstChild?o.appendChild(a):o.replaceChild(a,o.firstChild);c=a}}return c}function Mi(o,a,c,f){let g=!1;for(let h=0,A=a.length;h<A;h++){let m=a[h],y=c&&c[o.length],w;if(!(m==null||m===!0||m===!1))if((w=typeof m)=="object"&&m.nodeType)o.push(m);else if(Array.isArray(m))g=Mi(o,m,y)||g;else if(w==="function")if(f){for(;typeof m=="function";)m=m();g=Mi(o,Array.isArray(m)?m:[m],Array.isArray(y)?y:[y])||g}else o.push(m),g=!0;else{const S=String(m);y&&y.nodeType===3&&y.data===S?o.push(y):o.push(document.createTextNode(S))}}return g}function _s(o,a,c=null){for(let f=0,g=a.length;f<g;f++)o.insertBefore(a[f],c)}function Fn(o,a,c,f){if(c===void 0)return o.textContent="";const g=f||document.createTextNode("");if(a.length){let h=!1;for(let A=a.length-1;A>=0;A--){const m=a[A];if(g!==m){const y=m.parentNode===o;!h&&!A?y?o.replaceChild(g,m):o.insertBefore(g,c):y&&m.remove()}else h=!0}}else o.insertBefore(g,c);return[g]}const ja=!1;function so(){let o=new Set;function a(g){return o.add(g),()=>o.delete(g)}let c=!1;function f(g,h){if(c)return!(c=!1);const A={to:g,options:h,defaultPrevented:!1,preventDefault:()=>A.defaultPrevented=!0};for(const m of o)m.listener({...A,from:m.location,retry:y=>{y&&(c=!0),m.navigate(g,{...h,resolve:!1})}});return!A.defaultPrevented}return{subscribe:a,confirm:f}}let Ri;function zi(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ri=window.history.state._depth}zi();function za(o){return{...o,_depth:window.history.state&&window.history.state._depth}}function Wa(o,a){let c=!1;return()=>{const f=Ri;zi();const g=f==null?null:Ri-f;if(c){c=!1;return}g&&a(g)?(c=!0,window.history.go(-g)):o()}}const Ga=/^(?:[a-z0-9]+:)?\/\//i,Ya=/^\/+|(\/)\/+$/g,oo="http://sr";function lr(o,a=!1){const c=o.replace(Ya,"$1");return c?a||/^[?#]/.test(c)?c:"/"+c:""}function Br(o,a,c){if(Ga.test(a))return;const f=lr(o),g=c&&lr(c);let h="";return!g||a.startsWith("/")?h=f:g.toLowerCase().indexOf(f.toLowerCase())!==0?h=f+g:h=g,(h||"/")+lr(a,!h)}function Xa(o,a){return lr(o).replace(/\/*(\*.*)?$/g,"")+lr(a)}function ao(o){const a={};return o.searchParams.forEach((c,f)=>{a[f]=c}),a}function Za(o,a,c){const[f,g]=o.split("/*",2),h=f.split("/").filter(Boolean),A=h.length;return m=>{const y=m.split("/").filter(Boolean),w=y.length-A;if(w<0||w>0&&g===void 0&&!a)return null;const S={path:A?"":"/",params:{}},T=H=>c===void 0?void 0:c[H];for(let H=0;H<A;H++){const k=h[H],Q=y[H],B=k[0]===":",L=B?k.slice(1):k;if(B&&Ei(Q,T(L)))S.params[L]=Q;else if(B||!Ei(Q,k))return null;S.path+=`/${Q}`}if(g){const H=w?y.slice(-w).join("/"):"";if(Ei(H,T(g)))S.params[g]=H;else return null}return S}}function Ei(o,a){const c=f=>f.localeCompare(o,void 0,{sensitivity:"base"})===0;return a===void 0?!0:typeof a=="string"?c(a):typeof a=="function"?a(o):Array.isArray(a)?a.some(c):a instanceof RegExp?a.test(o):!1}function Qa(o){const[a,c]=o.pattern.split("/*",2),f=a.split("/").filter(Boolean);return f.reduce((g,h)=>g+(h.startsWith(":")?2:3),f.length-(c===void 0?0:1))}function lo(o){const a=new Map,c=_t();return new Proxy({},{get(f,g){return a.has(g)||Js(c,()=>a.set(g,Qe(()=>o()[g]))),a.get(g)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(o())}})}function co(o){let a=/(\/?\:[^\/]+)\?/.exec(o);if(!a)return[o];let c=o.slice(0,a.index),f=o.slice(a.index+a[0].length);const g=[c,c+=a[1]];for(;a=/^(\/\:[^\/]+)\?/.exec(f);)g.push(c+=a[1]),f=f.slice(a[0].length);return co(f).reduce((h,A)=>[...h,...g.map(m=>m+A)],[])}const qa=100,Ka=Zr(),uo=Zr();function $a(o,a=""){const{component:c,preload:f,load:g,children:h,info:A}=o,m=!h||Array.isArray(h)&&!h.length,y={key:o,component:c,preload:f||g,info:A};return fo(o.path).reduce((w,S)=>{for(const T of co(S)){const H=Xa(a,T);let k=m?H:H.split("/*",1)[0];k=k.split("/").map(Q=>Q.startsWith(":")||Q.startsWith("*")?Q:encodeURIComponent(Q)).join("/"),w.push({...y,originalPath:S,pattern:k,matcher:Za(k,!m,o.matchFilters)})}return w},[])}function Ja(o,a=0){return{routes:o,score:Qa(o[o.length-1])*1e4-a,matcher(c){const f=[];for(let g=o.length-1;g>=0;g--){const h=o[g],A=h.matcher(c);if(!A)return null;f.unshift({...A,route:h})}return f}}}function fo(o){return Array.isArray(o)?o:[o]}function ho(o,a="",c=[],f=[]){const g=fo(o);for(let h=0,A=g.length;h<A;h++){const m=g[h];if(m&&typeof m=="object"){m.hasOwnProperty("path")||(m.path="");const y=$a(m,a);for(const w of y){c.push(w);const S=Array.isArray(m.children)&&m.children.length===0;if(m.children&&!S)ho(m.children,w.pattern,c,f);else{const T=Ja([...c],f.length);f.push(T)}c.pop()}}}return c.length?f:f.sort((h,A)=>A.score-h.score)}function yi(o,a){for(let c=0,f=o.length;c<f;c++){const g=o[c].matcher(a);if(g)return g}return[]}function el(o,a){const c=new URL(oo),f=Qe(y=>{const w=o();try{return new URL(w,c)}catch{return console.error(`Invalid path ${w}`),y}},c,{equals:(y,w)=>y.href===w.href}),g=Qe(()=>f().pathname),h=Qe(()=>f().search,!0),A=Qe(()=>f().hash),m=()=>"";return{get pathname(){return g()},get search(){return h()},get hash(){return A()},get state(){return a()},get key(){return m()},query:lo(Ui(h,()=>ao(f())))}}let bn;function tl(){return bn}function nl(o,a,c,f={}){const{signal:[g,h],utils:A={}}=o,m=A.parsePath||(J=>J),y=A.renderPath||(J=>J),w=A.beforeLeave||so(),S=Br("",f.base||"");if(S===void 0)throw new Error(`${S} is not a valid base path`);S&&!g().value&&h({value:S,replace:!0,scroll:!1});const[T,H]=Te(!1);let k;const Q=(J,fe)=>{fe.value===B()&&fe.state===X()||(k===void 0&&H(!0),bn=J,k=fe,Ia(()=>{k===fe&&(L(k.value),j(k.state),Pa(),Ie[1]([]))}).finally(()=>{k===fe&&Ks(()=>{bn=void 0,J==="navigate"&&we(k),H(!1),k=void 0})}))},[B,L]=Te(g().value),[X,j]=Te(g().state),G=el(B,X),ne=[],Ie=Te([]),K=Qe(()=>typeof f.transformUrl=="function"?yi(a(),f.transformUrl(G.pathname)):yi(a(),G.pathname)),F=lo(()=>{const J=K(),fe={};for(let v=0;v<J.length;v++)Object.assign(fe,J[v].params);return fe}),oe={pattern:S,path:()=>S,outlet:()=>null,resolvePath(J){return Br(S,J)}};return wt(Ui(g,J=>Q("native",J),{defer:!0})),{base:oe,location:G,params:F,isRouting:T,renderPath:y,parsePath:m,navigatorFactory:pe,matches:K,beforeLeave:w,preloadRoute:q,singleFlight:f.singleFlight===void 0?!0:f.singleFlight,submissions:Ie};function U(J,fe,v){Et(()=>{if(typeof fe=="number"){fe&&(A.go?A.go(fe):console.warn("Router integration does not support relative routing"));return}const Fe=!fe||fe[0]==="?",{replace:he,resolve:Ke,scroll:At,state:lt}={replace:!1,resolve:!Fe,scroll:!0,...v};let Yn;const $e=Ke?J.resolvePath(fe):Br(Fe&&(Yn=g().value)&&Yn.split("?")[0]||"",fe);if($e===void 0)throw new Error(`Path '${fe}' is not a routable path`);if(ne.length>=qa)throw new Error("Too many redirects");const Gt=B();($e!==Gt||lt!==X())&&(ja||w.confirm($e,v)&&(ne.push({value:Gt,replace:he,scroll:At,state:X()}),Q("navigate",{value:$e,state:lt})))})}function pe(J){return J=J||Qr(uo)||oe,(fe,v)=>U(J,fe,v)}function we(J){const fe=ne[0];fe&&(h({...J,replace:fe.replace,scroll:fe.scroll}),ne.length=0)}function q(J,fe={}){const v=yi(a(),J.pathname),Fe=bn;bn="preload";for(let he in v){const{route:Ke,params:At}=v[he];Ke.component&&Ke.component.preload&&Ke.component.preload();const{preload:lt}=Ke;fe.preloadData&&lt&&Js(c(),()=>lt({params:At,location:{pathname:J.pathname,search:J.search,hash:J.hash,query:ao(J),state:null,key:""},intent:"preload"}))}bn=Fe}}function rl(o,a,c,f){const{base:g,location:h,params:A}=o,{pattern:m,component:y,preload:w}=f().route,S=Qe(()=>f().path);y&&y.preload&&y.preload();const T=w?w({params:A,location:h,intent:bn||"initial"}):void 0;return{parent:a,pattern:m,path:S,outlet:()=>y?$(y,{params:A,location:h,data:T,get children(){return c()}}):c(),resolvePath(k){return Br(g.path(),k,S())}}}const il=o=>a=>{const{base:c}=a,f=Vi(()=>a.children),g=Qe(()=>ho(f(),a.base||""));let h;const A=nl(o,g,()=>h,{base:c,singleFlight:a.singleFlight,transformUrl:a.transformUrl});return o.create&&o.create(A),$(Ka.Provider,{value:A,get children(){return $(sl,{routerState:A,get root(){return a.root},get preload(){return a.rootPreload||a.rootLoad},get children(){return[Qe(()=>(h=_t())&&null),$(ol,{routerState:A,get branches(){return g()}})]}})}})};function sl(o){const a=o.routerState.location,c=o.routerState.params,f=Qe(()=>o.preload&&Et(()=>{o.preload({params:c,location:a,intent:tl()||"initial"})}));return $(at,{get when(){return o.root},keyed:!0,get fallback(){return o.children},children:g=>$(g,{params:c,location:a,get data(){return f()},get children(){return o.children}})})}function ol(o){const a=[];let c;const f=Qe(Ui(o.routerState.matches,(g,h,A)=>{let m=h&&g.length===h.length;const y=[];for(let w=0,S=g.length;w<S;w++){const T=h&&h[w],H=g[w];A&&T&&H.route.key===T.route.key?y[w]=A[w]:(m=!1,a[w]&&a[w](),Hn(k=>{a[w]=k,y[w]=rl(o.routerState,y[w-1]||o.routerState.base,Os(()=>f()[w+1]),()=>o.routerState.matches()[w])}))}return a.splice(g.length).forEach(w=>w()),A&&m?A:(c=y[0],y)}));return Os(()=>f()&&c)()}const Os=o=>()=>$(at,{get when(){return o()},keyed:!0,children:a=>$(uo.Provider,{value:a,get children(){return a.outlet()}})}),vr=o=>{const a=Vi(()=>o.children);return La(o,{get children(){return a()}})};function al([o,a],c,f){return[o,f?g=>a(f(g)):a]}function ll(o){if(o==="#")return null;try{return document.querySelector(o)}catch{return null}}function cl(o){let a=!1;const c=g=>typeof g=="string"?{value:g}:g,f=al(Te(c(o.get()),{equals:(g,h)=>g.value===h.value&&g.state===h.state}),void 0,g=>(!a&&o.set(g),de.registry&&!de.done&&(de.done=!0),g));return o.init&&Nn(o.init((g=o.get())=>{a=!0,f[1](c(g)),a=!1})),il({signal:f,create:o.create,utils:o.utils})}function ul(o,a,c){return o.addEventListener(a,c),()=>o.removeEventListener(a,c)}function fl(o,a){const c=ll(`#${o}`);c?c.scrollIntoView():a&&window.scrollTo(0,0)}const hl=new Map;function dl(o=!0,a=!1,c="/_server",f){return g=>{const h=g.base.path(),A=g.navigatorFactory(g.base);let m={};function y(B){return B.namespaceURI==="http://www.w3.org/2000/svg"}function w(B){if(B.defaultPrevented||B.button!==0||B.metaKey||B.altKey||B.ctrlKey||B.shiftKey)return;const L=B.composedPath().find(K=>K instanceof Node&&K.nodeName.toUpperCase()==="A");if(!L||a&&!L.hasAttribute("link"))return;const X=y(L),j=X?L.href.baseVal:L.href;if((X?L.target.baseVal:L.target)||!j&&!L.hasAttribute("state"))return;const ne=(L.getAttribute("rel")||"").split(/\s+/);if(L.hasAttribute("download")||ne&&ne.includes("external"))return;const Ie=X?new URL(j,document.baseURI):new URL(j);if(!(Ie.origin!==window.location.origin||h&&Ie.pathname&&!Ie.pathname.toLowerCase().startsWith(h.toLowerCase())))return[L,Ie]}function S(B){const L=w(B);if(!L)return;const[X,j]=L,G=g.parsePath(j.pathname+j.search+j.hash),ne=X.getAttribute("state");B.preventDefault(),A(G,{resolve:!1,replace:X.hasAttribute("replace"),scroll:!X.hasAttribute("noscroll"),state:ne&&JSON.parse(ne)})}function T(B){const L=w(B);if(!L)return;const[X,j]=L;typeof f=="function"&&(j.pathname=f(j.pathname)),m[j.pathname]||g.preloadRoute(j,{preloadData:X.getAttribute("preload")!=="false"})}function H(B){const L=w(B);if(!L)return;const[X,j]=L;typeof f=="function"&&(j.pathname=f(j.pathname)),!m[j.pathname]&&(m[j.pathname]=setTimeout(()=>{g.preloadRoute(j,{preloadData:X.getAttribute("preload")!=="false"}),delete m[j.pathname]},200))}function k(B){const L=w(B);if(!L)return;const[,X]=L;typeof f=="function"&&(X.pathname=f(X.pathname)),m[X.pathname]&&(clearTimeout(m[X.pathname]),delete m[X.pathname])}function Q(B){if(B.defaultPrevented)return;let L=B.submitter&&B.submitter.hasAttribute("formaction")?B.submitter.getAttribute("formaction"):B.target.getAttribute("action");if(!L)return;if(!L.startsWith("https://action/")){const j=new URL(L,oo);if(L=g.parsePath(j.pathname+j.search),!L.startsWith(c))return}if(B.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const X=hl.get(L);if(X){B.preventDefault();const j=new FormData(B.target,B.submitter);X.call({r:g,f:B.target},B.target.enctype==="multipart/form-data"?j:new URLSearchParams(j))}}Ar(["click","submit"]),document.addEventListener("click",S),o&&(document.addEventListener("mouseover",H),document.addEventListener("mouseout",k),document.addEventListener("focusin",T),document.addEventListener("touchstart",T)),document.addEventListener("submit",Q),Nn(()=>{document.removeEventListener("click",S),o&&(document.removeEventListener("mouseover",H),document.removeEventListener("mouseout",k),document.removeEventListener("focusin",T),document.removeEventListener("touchstart",T)),document.removeEventListener("submit",Q)})}}function gl(o){const a=()=>({value:window.location.pathname.replace(/^\/+/,"/")+window.location.search+window.location.hash,state:window.history.state}),c=so();return cl({get:a,set({value:f,replace:g,scroll:h,state:A}){g?window.history.replaceState(za(A),"",f):window.history.pushState(A,"",f),fl(decodeURIComponent(window.location.hash.slice(1)),h),zi()},init:f=>ul(window,"popstate",Wa(f,g=>{if(g&&g<0)return!c.confirm(g);{const h=a();return!c.confirm(h.value,{state:h.state})}})),create:dl(o.preload,o.explicitLinks,o.actionBase,o.transformUrl),utils:{go:f=>window.history.go(f),beforeLeave:c}})(o)}const Di=Symbol("store-raw"),jn=Symbol("store-node"),rn=Symbol("store-has"),go=Symbol("store-self");function xo(o){let a=o[tn];if(!a&&(Object.defineProperty(o,tn,{value:a=new Proxy(o,Al)}),!Array.isArray(o))){const c=Object.keys(o),f=Object.getOwnPropertyDescriptors(o);for(let g=0,h=c.length;g<h;g++){const A=c[g];f[A].get&&Object.defineProperty(o,A,{enumerable:f[A].enumerable,get:f[A].get.bind(a)})}}return a}function Hr(o){let a;return o!=null&&typeof o=="object"&&(o[tn]||!(a=Object.getPrototypeOf(o))||a===Object.prototype||Array.isArray(o))}function fr(o,a=new Set){let c,f,g,h;if(c=o!=null&&o[Di])return c;if(!Hr(o)||a.has(o))return o;if(Array.isArray(o)){Object.isFrozen(o)?o=o.slice(0):a.add(o);for(let A=0,m=o.length;A<m;A++)g=o[A],(f=fr(g,a))!==g&&(o[A]=f)}else{Object.isFrozen(o)?o=Object.assign({},o):a.add(o);const A=Object.keys(o),m=Object.getOwnPropertyDescriptors(o);for(let y=0,w=A.length;y<w;y++)h=A[y],!m[h].get&&(g=o[h],(f=fr(g,a))!==g&&(o[h]=f))}return o}function jr(o,a){let c=o[a];return c||Object.defineProperty(o,a,{value:c=Object.create(null)}),c}function hr(o,a,c){if(o[a])return o[a];const[f,g]=Te(c,{equals:!1,internal:!0});return f.$=g,o[a]=f}function xl(o,a){const c=Reflect.getOwnPropertyDescriptor(o,a);return!c||c.get||!c.configurable||a===tn||a===jn||(delete c.value,delete c.writable,c.get=()=>o[tn][a]),c}function wo(o){Ni()&&hr(jr(o,jn),go)()}function wl(o){return wo(o),Reflect.ownKeys(o)}const Al={get(o,a,c){if(a===Di)return o;if(a===tn)return c;if(a===Ti)return wo(o),c;const f=jr(o,jn),g=f[a];let h=g?g():o[a];if(a===jn||a===rn||a==="__proto__")return h;if(!g){const A=Object.getOwnPropertyDescriptor(o,a);Ni()&&(typeof h!="function"||o.hasOwnProperty(a))&&!(A&&A.get)&&(h=hr(f,a,h)())}return Hr(h)?xo(h):h},has(o,a){return a===Di||a===tn||a===Ti||a===jn||a===rn||a==="__proto__"?!0:(Ni()&&hr(jr(o,rn),a)(),a in o)},set(){return!0},deleteProperty(){return!0},ownKeys:wl,getOwnPropertyDescriptor:xl};function zr(o,a,c,f=!1){if(!f&&o[a]===c)return;const g=o[a],h=o.length;c===void 0?(delete o[a],o[rn]&&o[rn][a]&&g!==void 0&&o[rn][a].$()):(o[a]=c,o[rn]&&o[rn][a]&&g===void 0&&o[rn][a].$());let A=jr(o,jn),m;if((m=hr(A,a,g))&&m.$(()=>c),Array.isArray(o)&&o.length!==h){for(let y=o.length;y<h;y++)(m=A[y])&&m.$();(m=hr(A,"length",h))&&m.$(o.length)}(m=A[go])&&m.$()}function Ao(o,a){const c=Object.keys(a);for(let f=0;f<c.length;f+=1){const g=c[f];zr(o,g,a[g])}}function Cl(o,a){if(typeof a=="function"&&(a=a(o)),a=fr(a),Array.isArray(a)){if(o===a)return;let c=0,f=a.length;for(;c<f;c++){const g=a[c];o[c]!==g&&zr(o,c,g)}zr(o,"length",f)}else Ao(o,a)}function or(o,a,c=[]){let f,g=o;if(a.length>1){f=a.shift();const A=typeof f,m=Array.isArray(o);if(Array.isArray(f)){for(let y=0;y<f.length;y++)or(o,[f[y]].concat(a),c);return}else if(m&&A==="function"){for(let y=0;y<o.length;y++)f(o[y],y)&&or(o,[y].concat(a),c);return}else if(m&&A==="object"){const{from:y=0,to:w=o.length-1,by:S=1}=f;for(let T=y;T<=w;T+=S)or(o,[T].concat(a),c);return}else if(a.length>1){or(o[f],a,[f].concat(c));return}g=o[f],c=[f].concat(c)}let h=a[0];typeof h=="function"&&(h=h(g,c),h===g)||f===void 0&&h==null||(h=fr(h),f===void 0||Hr(g)&&Hr(h)&&!Array.isArray(h)?Ao(g,h):zr(o,f,h))}function dr(...[o,a]){const c=fr(o||{}),f=Array.isArray(c),g=xo(c);function h(...A){Ks(()=>{f&&A.length===1?Cl(c,A[0]):or(c,A)})}return[g,h]}const pl="_App_ynghh_1",ml="_logo_ynghh_5",El="_header_ynghh_11",yl="_link_ynghh_21",on={App:pl,logo:ml,"logo-spin":"_logo-spin_ynghh_1",header:El,link:yl};var Il=ye("<div class=hrm-card><div class=hrm-card-grow><div class=hrm-container><div class=wrapper></div>");function bl(o){return(()=>{var a=Il(),c=a.firstChild,f=c.firstChild,g=f.firstChild;return re(g,()=>o.children),a})()}function Wi(){for(var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwyxz",a=16,c="",f=0;f<a;f++)c+=o.charAt(Math.floor(Math.random()*o.length));return c}const vi={},Sl=(o,a)=>{vi[o]=a},Tl=o=>o?vi[o]:vi;function Nl(o){var a=[];return o&&Object.keys(o).map(c=>{a.push(o[c])}),a}const _l=async(o,a,c)=>{for(let f of o.map((g,h)=>()=>a(g,h,o,c)))await f()},qr=async o=>{let a="",c="https://qvamarkets.com/gql_api",f={method:"post",headers:{"Content-Type":"application/json",Authorization:`${a}`},body:JSON.stringify(o)};try{return(await fetch(c,f)).json()}catch(g){return console.log(g),null}};var Ol=ye('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path>');function Gi(o){const[a,c]=Te(!1),[f]=Fi(o?.name,async()=>Tl("svgSymbols")?.[o?.name]);let g=o?.size?o?.size:24;return $(at,{get when(){return f()},get children(){var h=Ol(),A=h.firstChild;return h.addEventListener("mouseleave",()=>{o?.tooltipMessage&&(c(!1),setTimeout(()=>c(!0),50))}),Ft(h,"height",g),Ft(h,"width",g),wt(m=>{var y=o?.color,w=f();return y!==m.e&&Ft(h,"fill",m.e=y),w!==m.t&&Ft(A,"d",m.t=w),m},{e:void 0,t:void 0}),h}})}var Ml=ye('<div class=" jaqJnq_hrm1"><button class="gHAsFI_hrm1 dqn9fN jUrKkb"type=button><h5>');function Wr(o){Te(0);const[a,c]=Te(!1),f=()=>{o?.handleClick?.()},g=y=>{c(y)};let h={};if(o?.color){let{r:y,g:w,b:S}=vl(o.color),T="rgba("+[y,w,S].join(",")+", 0.17 )",H="rgba("+[y,w,S].join(",")+", 0.21 )",k="rgba("+[y,w,S].join(",")+", 0.42 )";h={"--btn_bg_hrm2":T,"--btn_bg_hover_hrm2":H,"--btn_text_hrm2":o?.color,"--btn_border_hrm2":a()?o?.color:"transparent","--border-radius-8":8},a()&&(h={"--btn_bg_hrm2":T,"--btn_bg_hover_hrm2":k,"--btn_text_hrm2":o?.color,"--btn_border_hrm2":o?.color,"--border-radius-8":"8px"})}function A(){const[y,w]=Te(!1);return $s(()=>{w(typeof window<"u")}),y}const m=A();return gr(()=>{m()&&Dl("obs-theme",g)}),(()=>{var y=Ml(),w=y.firstChild,S=w.firstChild;return w.$$click=f,re(w,$(at,{get when(){return o?.icon},get children(){return $(Gi,{get name(){return o?.icon}})}}),S),re(S,()=>o.label),wt(T=>ur(y,h,T)),y})()}const Rl={attributes:!0,characterData:!0},Dl=async(o,a,c,f)=>{const g=new MutationObserver(A=>{console.log(MutationObserver),A.forEach(m=>{if(m?.type==="attributes"){let y=m?.attributeName?.toString()?.trim(),w=o.toString().trim();y===w&&a&&a(Wi(),o)}})}),h=document.querySelector("html");g.observe(h,Rl)},vl=o=>{o=o.replace("#",""),o.length!==6&&(o=Ll(o));const a=parseInt(o.slice(0,2),16),c=parseInt(o.slice(2,4),16),f=parseInt(o.slice(4,6),16);return{r:a,g:c,b:f}};function Ll(o){return o.length===4&&(o=o.replace("#","")),o.length===3&&(o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]),o}Ar(["click"]);var Bl=ye("<div class=content><div><h3><slot name=title>Envios de paqueteria a Cuba</slot></h3><slot name=description>precios competitivos y una rapidez enviadiable</slot><slot name=chip>"),Pl=ye('<slot class=centeBx><div class=xsmall><div class=iconWrpp-symbols></div></div><div class="textVal _dsplFlx centeBx">precio por lbs<h5>'),kl=ye("<slot name=iconList>"),Fl=ye('<slot name=ctas><div class="_dsplFlx spaceAround"><a href="/envios?trk=83748203nd3983">'),Ul=ye('<slot class=centerBx><div class=xsmall><div class=iconWrpp-symbols></div></div><div class="textVal ">'),Vl=ye("<div class=pricing><div><slot name=pricingTotal></slot></div><slot name=pricingRegular>110");function Ii(o){const[a,c]=Te(0);let f=[{icon:"clock-outline",desc:"7-15 dias de entrega"},{icon:"money",desc:"precios accesibles"},{icon:"dolly",desc:"recogida en su casa"},{icon:"truck-fast-outline",desc:"notificacion del estado de su envio"}];return $(bl,{get children(){return[(()=>{var g=Bl(),h=g.firstChild,A=h.firstChild,m=A.firstChild,y=A.nextSibling,w=y.nextSibling;return m._$owner=_t(),y._$owner=_t(),w._$owner=_t(),re(g,$(jl,{get price(){return o.number()},get count(){return a()}}),null),g})(),(()=>{var g=kl();return g._$owner=_t(),re(g,$(at,{get when(){return a()%2},get children(){var h=Pl(),A=h.firstChild,m=A.firstChild,y=A.nextSibling,w=y.firstChild,S=w.nextSibling;return h._$owner=_t(),m.$$click=()=>c(a()+1),re(m,a),re(S,()=>(a()*4.5).toFixed(2)),h}}),null),re(g,$(Hi,{each:f,children:h=>$(Hl,{get icon(){return h?.icon},get desc(){return h?.desc}})}),null),g})(),(()=>{var g=Fl(),h=g.firstChild,A=h.firstChild;return g._$owner=_t(),re(A,$(Wr,{label:"Ver detalles",color:"#335d92",icon:"open_package_file_outline",handelClick:()=>c(a()+1)})),g})()]}})}function Hl(o){return(()=>{var a=Ul(),c=a.firstChild,f=c.firstChild,g=c.nextSibling;return a._$owner=_t(),re(f,$(Gi,{get name(){return o?.icon}})),re(g,()=>o?.desc),a})()}function jl(o){return Te(!1),Te("0"),(()=>{var a=Vl(),c=a.firstChild,f=c.firstChild,g=c.nextSibling;return f._$owner=_t(),re(f,()=>o.count*100),g._$owner=_t(),a})()}Ar(["click"]);var zl=ye("<div><header><nav><a href=/>Home</a><a href=/users>Users</a><a href=/scan>Scanning</a></nav></header><div class=centerBx100><slot name=plans>");function Wl(){return(()=>{var o=zl(),a=o.firstChild,c=a.nextSibling,f=c.firstChild;return f._$owner=_t(),re(f,$(Ii,{}),null),re(f,$(Ii,{}),null),re(f,$(Ii,{}),null),wt(g=>{var h=on.App,A=on.header;return h!==g.e&&en(o,g.e=h),A!==g.t&&en(a,g.t=A),g},{e:void 0,t:void 0}),o})()}var Gl=ye('<div><header><nav><a href=/>Home</a><a href=/users>Users</a></nav><p>Edit <code>src/App.jsx</code> and save to reload.</p><a href=https://github.com/solidjs/solid target=_blank rel="noopener noreferrer">Learn Solid');function Yl(){return(()=>{var o=Gl(),a=o.firstChild,c=a.firstChild,f=c.nextSibling,g=f.nextSibling;return wt(h=>{var A=on.App,m=on.header,y=on.link;return A!==h.e&&en(o,h.e=A),m!==h.t&&en(a,h.t=m),y!==h.a&&en(g,h.a=y),h},{e:void 0,t:void 0,a:void 0}),o})()}var Xl=ye("<p class=label>"),Zl=ye('<div class=_dsplFlx><div class=flexSpace></div><div class=field-block><input class="r7gAOb yyJm8b kk3791b"required=""></div><div class=flexSpace>');const Co=o=>{dr();const a=f=>{o?.handleClick(f)};let c={"--txtInput--width":o?.width,"--txtInput--color":o?.colors,"--txtInput--backColor":o?.backColor,"--txtInput--border-color":o?.borderColor,"--txtInput--aborder-color":o?.borderActiveColor};return(()=>{var f=Zl(),g=f.firstChild,h=g.nextSibling,A=h.firstChild;return re(h,$(at,{get when(){return o?.label},get children(){var m=Xl();return re(m,()=>o?.label),m}}),A),A.$$input=m=>a(m.currentTarget.value),wt(m=>{var y=c,w=o?.type,S=o?.name,T=o?.placeholder;return m.e=ur(A,y,m.e),w!==m.t&&Ft(A,"type",m.t=w),S!==m.a&&Ft(A,"name",m.a=S),T!==m.o&&Ft(A,"placeholder",m.o=T),m},{e:void 0,t:void 0,a:void 0,o:void 0}),wt(()=>A.value=o?.value),f})()};Ar(["input"]);const Ql=[{label:"175-22727246 AVCEN01",id:"5"},{label:"175-22727246 AVOCC01",id:"4"},{label:"175-22727246 AVORI01",id:"6"},{label:"175-22727250 AV-CEN02",id:"9"},{label:"175-22727250 AV-OCC02",id:"7"},{label:"175-22727250 AV-ORI02",id:"8"},{label:"175-23834414 AVOCC31",id:"96"},{label:"175-23834425 AVCENT31",id:"97"},{label:"175-23834436 AVORT31",id:"98"},{label:"175-23834440 AVOCC32",id:"99"},{label:"175-23834451 AVCENT32",id:"100"},{label:"175-23834462 AVORT32",id:"101"},{label:"175-23834473 AVOCC33",id:"102"},{label:"175-23834484 AVCENT33",id:"103"},{label:"175-23834495 AVORT33",id:"104"},{label:"175-23834506 AVOCC34",id:"105"},{label:"175-23834510 AVCENT34",id:"106"},{label:"175-23834521 AVORT34",id:"107"},{label:"175-23834532 AVOCC35",id:"108"},{label:"175-23834543 AVCENT35",id:"109"},{label:"175-23834554 AVORT35",id:"110"},{label:"175-23834565 AVOCC36",id:"111"},{label:"175-23834576 AVCENT36",id:"112"},{label:"175-23834580 AVORT36",id:"113"},{label:"175-23834591 AVOCC37",id:"114"},{label:"175-23834602 AVCENT37",id:"115"},{label:"175-23834613 AVORIT37",id:"116"},{label:"175-23834624 AVISLA01",id:"117"},{label:"175-23834635 AVOCC38",id:"118"},{label:"175-23834646 AVCENT38",id:"119"},{label:"175-23834650 AVORT38",id:"120"},{label:"175-23834661 AVOCC39",id:"121"},{label:"175-23834672 AVCENT39",id:"122"},{label:"175-23834683 AVORT39",id:"123"},{label:"175-23834694 AVOCC40",id:"124"},{label:"175-23834705 AVCENT40",id:"125"},{label:"175-23834716 AVORT40",id:"126"},{label:"17522725043 AVCENT03",id:"10"},{label:"17522725043 AVOCC03",id:"11"},{label:"17522725043 AVORIENT03",id:"12"},{label:"17522725054 AVCENT04",id:"14"},{label:"17522725054 AVOCC04",id:"15"},{label:"17522725054 AVORT04",id:"13"},{label:"17522725065 AVCENTR05",id:"17"},{label:"17522725065 AVOCCT05",id:"16"},{label:"17522725065 AVORIEN05",id:"18"},{label:"17522725076 AVCENTR06",id:"20"},{label:"17522725076 AVOCC06",id:"19"},{label:"17522725076 AVORIT06",id:"21"},{label:"17522725080 AVCENTR07",id:"23"},{label:"17522725080 AVOCC07",id:"22"},{label:"17522725080 ORIT07",id:"24"},{label:"17522725091 AVCENT08",id:"26"},{label:"17522725091 AVOCC08",id:"25"},{label:"17522725091 AVORT08",id:"27"},{label:"17522725102 AVOCC09",id:"28"},{label:"17522725113 AVCEN09",id:"31"},{label:"17522725124  AVORT09",id:"32"},{label:"17522725135 AVOCC10",id:"33"},{label:"17522725146 AVCENT10",id:"34"},{label:"17522725150 AVORT10",id:"35"},{label:"17522725161 AVOCC11",id:"36"},{label:"17522725172 AVCENT11",id:"37"},{label:"17522725183 AVORT11",id:"38"},{label:"17522725194 AVORT12",id:"39"},{label:"17522725205 AVOCC12",id:"40"},{label:"17522725216 AVCENT12",id:"41"},{label:"17522725220 AVCENT13",id:"42"},{label:"17522725231 AVORT13",id:"43"},{label:"17522725242 AVOCC13",id:"44"},{label:"17522725253 AVOCC14",id:"45"},{label:"17522725264 AVORT 14",id:"46"},{label:"17522725275 AVOCENT 14",id:"47"},{label:"17522725286 AVOCC15",id:"48"},{label:"17522725290 AVOCENTR15",id:"49"},{label:"17522725301 AVORT15",id:"50"},{label:"17522725312 AVOCC16",id:"51"},{label:"17522725323 AVOCENTR16",id:"52"},{label:"17522725334 AVORTE16",id:"53"},{label:"17522725345 AVOCC17",id:"54"},{label:"17522725356 AVCENTR17",id:"55"},{label:"17522725360 AVORIT17",id:"56"},{label:"17522725371 AVOCC18",id:"57"},{label:"17522725382 AVCENTR18",id:"58"},{label:"17522725393 AVORIT18",id:"59"},{label:"17522725404 AVOCC19",id:"60"},{label:"17522725415 AVCENT19",id:"61"},{label:"17522725426 AVORIT19",id:"62"},{label:"17522725430 AVOCC20",id:"63"},{label:"17522725441 AVCENT20",id:"64"},{label:"17522725452 AVORIT20",id:"65"},{label:"17522725463 AVOCC21",id:"66"},{label:"17522725474 AVCENT21",id:"67"},{label:"17522725485 AVORIT21",id:"68"},{label:"17522725496 AVOCC22",id:"69"},{label:"17522725500 AVCENT22",id:"70"},{label:"17522725511 AVORIT22",id:"71"},{label:"17522725522 AVOCC23",id:"72"},{label:"17522725533 AVCENT23",id:"73"},{label:"17522725544 AVORIT23",id:"74"},{label:"17522725555 AVOCC24",id:"75"},{label:"17522725566 AVCENT24",id:"76"},{label:"17522725570 AVORIT24",id:"77"},{label:"17523834230 AVOCC25",id:"78"},{label:"17523834241 AVCENT25",id:"79"},{label:"17523834252 AVORIT25",id:"80"},{label:"17523834263 AVOCC26",id:"81"},{label:"17523834274 AVCENT26",id:"82"},{label:"17523834285 AVORIT26",id:"83"},{label:"17523834296 AVOCC27",id:"84"},{label:"17523834300 AVCENT27",id:"85"},{label:"17523834311 AVORIT27",id:"86"},{label:"17523834322 AVOCC28",id:"87"},{label:"17523834333 AVCENT28",id:"88"},{label:"17523834344 AVORIT28",id:"89"},{label:"17523834355 AVOCC29",id:"90"},{label:"17523834366 AVCENT29",id:"91"},{label:"17523834370 AVORIT29",id:"92"},{label:"17523834381 AVOCC30",id:"93"},{label:"17523834392 AVCENT30",id:"94"},{label:"17523834403 AVORT30",id:"95"}],po=[{label:"Estatus",id:""},{label:"En transito para FL",id:"YABA_11",icon:"truck-fast-outline"},{label:"Entrega a la aerolinea",id:"YABA_22",icon:"airplane-takeoff"},{label:"LLegando a AeroVaradero",id:"AERO_28",icon:"airplane-landing"},{label:"Recogida en AeroVaradero",id:"AERO_33",icon:"truck-fast"},{label:"Entrada al Almacen",id:"YABA_39",icon:"store"},{label:"Escaneando por Locaciones",id:"YABA_44",icon:"sort-numeric-ascending"},{label:"Saliendo para entregar",id:"YABA_48",icon:"car-hatchback"}],ql={YABA_11:"truck-fast-outline",YABA_22:"airplane-takeoff",AERO_28:"airplane-landing",AERO_33:"truck-fast",YABA_39:"store",YABA_44:"sort-numeric-ascending",YABA_48:"car-hatchback"};function Yi(o,a){let c;function f(g){clearTimeout(c),c=setTimeout(()=>o(g),a)}return Nn(()=>clearInterval(c)),f}var Kl=ye('<div class="filter_search_btn _dsplFlx"><input type=text aria-haspopup=false auto-capitalize=off auto-complete=off auto-correct=off spell-check=false placeholder=search><div class=btn_close>'),$l=ye('<div class="filter_search_btn _dsplFlx"><div class="lbl date Lbldrp">'),Jl=ye('<div class=" monthList">'),ec=ye('<div class="OpenBoxContainer ">'),tc=ye("<div><div id=drpdwn_click_outside>"),nc=ye('<div class="filter_month_item _dsplFlx"><div class="lbl tr_bar_15"><div></div></div><div class="lbl tr_bar_80">');const bi=o=>[],Li=o=>{const[a,c]=Te(!1),[f,g]=Te(""),h=Yi(g,400),A=Q=>{o?.onSelect(Q),m()},m=()=>{a()?c(!1):a()||(c(!0),setTimeout(()=>{},50))},y=Q=>{o.hasDebounce?h(Q.target.value):g(Q.target.value)},w=()=>o?.list.filter(Q=>Q.id===o?.value)?.[0]?.label;let S=o?.direction||"left",T={"--pck--width":o?.width,"--pck--color":o?.color,"--pck--backColor":o?.backColor,"--pck--border-color":o?.borderColor,"--pck--aborder-color":o?.borderActiveColor};const[H,{refetch:k}]=Fi(f,async Q=>o.list.filter(L=>L?.label?.toLowerCase()?.indexOf(Q?.toLowerCase())>-1));return(()=>{var Q=tc(),B=Q.firstChild;return re(B,$(at,{get when(){return a()},get children(){var L=Kl(),X=L.firstChild,j=X.nextSibling;return X.$$input=y,j.$$click=m,re(j,$(bi,{name:"Xclose",color:"var(--color-pck)"})),L}}),null),re(B,$(at,{get when(){return!a()},get children(){var L=$l(),X=L.firstChild;return L.$$click=m,re(X,()=>w()||o?.lbl_empty),re(L,$(bi,{name:"arrow_drop_down",color:"var(--color-pck)"}),null),L}}),null),re(B,$(at,{get when(){return a()},get children(){var L=ec();return Ft(L,"direction",`${S}`),re(L,$(at,{get when(){return H()},get children(){var X=Jl();return re(X,$(Hi,{get each(){return H()},children:(j,G)=>{let ne=j.label;return $(at,{when:ne,get children(){var Ie=nc(),K=Ie.firstChild,F=K.firstChild,oe=K.nextSibling;return Ie.$$click=()=>A(j),Ft(Ie,"key",ne+"_"+G),re(F,$(bi,{get name(){return o?.value===j.id?"success":null},color:"var(--color-pck)"})),re(oe,ne),Ie}})}})),X}})),wt(X=>ur(L,o?.background?{backgroundColor:o?.background}:null,X)),L}}),null),wt(L=>{var X={...T,"min-width":"var(--pck--width)"},j=` searchDDBx ${a()?"open":""}`,G=`${a()}`;return L.e=ur(Q,X,L.e),j!==L.t&&en(B,L.t=j),G!==L.a&&(B.open=L.a=G),L},{e:void 0,t:void 0,a:void 0}),Q})()};Ar(["input","click"]);var rc=ye("<div class=flexSpace>");const Bi=()=>rc();var ic=ye('<div class=" tr_bar_10 _dsplFlx"><div class="icon_status centerBx"></div><div class=guide_number><h5>'),sc=ye('<p class="tr_bar_30 textleft fullName_consigne">'),oc=ye("<div style=margin-right:4vw>"),ac=ye('<h4 class="tr_bar_20 textleft">'),lc=ye("<div class=bag_number><h5>"),cc=ye('<div class="_dsplFlx bottombx"><p></p><div class="_dsplFlx bottombx"><h5></h5><div class=vertseparator></div><h4>'),uc=ye('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx topbx centerBx">');function fc(o){dr({search:"",status:"AERO_33"}),Te("");const[a,c]=Te("");Yi(c,400);const f=m=>m?" "+m:"",g=()=>{let m=o?.item?.consigneeInfo;return f(m?.firstName)+f(m?.middleName)+f(m?.lastName)+f(m?.lastName2)},h=()=>{let m=o?.item?.consigneeInfo,y=f(m?.altPhoneNumber);return f(m?.phoneNumber)+(y?" |"+y:"")};let A=o?.item?.street?.split(",");return $(at,{get when(){return o?.item?.guia},get children(){var m=uc(),y=m.firstChild;return re(y,$(at,{get when(){return o?.item?.guia},get children(){return[(()=>{var w=ic(),S=w.firstChild,T=S.nextSibling,H=T.firstChild;return re(S,$(Gi,{get name(){return ql?.[o?.item?.currentStatus]},size:32})),re(H,()=>o?.item?.guia),w})(),(()=>{var w=sc();return re(w,g),w})(),oc(),(()=>{var w=ac();return re(w,h),w})()]}}),null),re(y,$(Bi,{}),null),re(y,$(at,{get when(){return o?.item?.bagnumber},get children(){var w=lc(),S=w.firstChild;return re(S,()=>o?.item?.bagnumber),w}}),null),re(m,$(at,{get when(){return A?.[0]},get children(){var w=cc(),S=w.firstChild,T=S.nextSibling,H=T.firstChild,k=H.nextSibling,Q=k.nextSibling;return re(S,()=>A?.[0]),re(w,$(Bi,{}),T),re(H,()=>A?.[1]),re(Q,()=>A?.[2]),w}}),null),m}})}var sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ne={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ms=Object.getOwnPropertySymbols,dc=Object.prototype.hasOwnProperty,gc=Object.prototype.propertyIsEnumerable;function xc(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function wc(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},c=0;c<10;c++)a["_"+String.fromCharCode(c)]=c;var f=Object.getOwnPropertyNames(a).map(function(h){return a[h]});if(f.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(h){g[h]=h}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ac=wc()?Object.assign:function(o,a){for(var c,f=xc(o),g,h=1;h<arguments.length;h++){c=Object(arguments[h]);for(var A in c)dc.call(c,A)&&(f[A]=c[A]);if(Ms){g=Ms(c);for(var m=0;m<g.length;m++)gc.call(c,g[m])&&(f[g[m]]=c[g[m]])}}return f};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=Ac,Wn=60103,mo=60106;Ne.Fragment=60107;Ne.StrictMode=60108;Ne.Profiler=60114;var Eo=60109,yo=60110,Io=60112;Ne.Suspense=60113;var bo=60115,So=60116;if(typeof Symbol=="function"&&Symbol.for){var zt=Symbol.for;Wn=zt("react.element"),mo=zt("react.portal"),Ne.Fragment=zt("react.fragment"),Ne.StrictMode=zt("react.strict_mode"),Ne.Profiler=zt("react.profiler"),Eo=zt("react.provider"),yo=zt("react.context"),Io=zt("react.forward_ref"),Ne.Suspense=zt("react.suspense"),bo=zt("react.memo"),So=zt("react.lazy")}var Rs=typeof Symbol=="function"&&Symbol.iterator;function Cc(o){return o===null||typeof o!="object"?null:(o=Rs&&o[Rs]||o["@@iterator"],typeof o=="function"?o:null)}function Cr(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var To={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},No={};function Gn(o,a,c){this.props=o,this.context=a,this.refs=No,this.updater=c||To}Gn.prototype.isReactComponent={};Gn.prototype.setState=function(o,a){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error(Cr(85));this.updater.enqueueSetState(this,o,a,"setState")};Gn.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function _o(){}_o.prototype=Gn.prototype;function Zi(o,a,c){this.props=o,this.context=a,this.refs=No,this.updater=c||To}var Qi=Zi.prototype=new _o;Qi.constructor=Zi;Xi(Qi,Gn.prototype);Qi.isPureReactComponent=!0;var qi={current:null},Oo=Object.prototype.hasOwnProperty,Mo={key:!0,ref:!0,__self:!0,__source:!0};function Ro(o,a,c){var f,g={},h=null,A=null;if(a!=null)for(f in a.ref!==void 0&&(A=a.ref),a.key!==void 0&&(h=""+a.key),a)Oo.call(a,f)&&!Mo.hasOwnProperty(f)&&(g[f]=a[f]);var m=arguments.length-2;if(m===1)g.children=c;else if(1<m){for(var y=Array(m),w=0;w<m;w++)y[w]=arguments[w+2];g.children=y}if(o&&o.defaultProps)for(f in m=o.defaultProps,m)g[f]===void 0&&(g[f]=m[f]);return{$$typeof:Wn,type:o,key:h,ref:A,props:g,_owner:qi.current}}function pc(o,a){return{$$typeof:Wn,type:o.type,key:a,ref:o.ref,props:o.props,_owner:o._owner}}function Ki(o){return typeof o=="object"&&o!==null&&o.$$typeof===Wn}function mc(o){var a={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(c){return a[c]})}var Ds=/\/+/g;function Si(o,a){return typeof o=="object"&&o!==null&&o.key!=null?mc(""+o.key):a.toString(36)}function Pr(o,a,c,f,g){var h=typeof o;(h==="undefined"||h==="boolean")&&(o=null);var A=!1;if(o===null)A=!0;else switch(h){case"string":case"number":A=!0;break;case"object":switch(o.$$typeof){case Wn:case mo:A=!0}}if(A)return A=o,g=g(A),o=f===""?"."+Si(A,0):f,Array.isArray(g)?(c="",o!=null&&(c=o.replace(Ds,"$&/")+"/"),Pr(g,a,c,"",function(w){return w})):g!=null&&(Ki(g)&&(g=pc(g,c+(!g.key||A&&A.key===g.key?"":(""+g.key).replace(Ds,"$&/")+"/")+o)),a.push(g)),1;if(A=0,f=f===""?".":f+":",Array.isArray(o))for(var m=0;m<o.length;m++){h=o[m];var y=f+Si(h,m);A+=Pr(h,a,c,y,g)}else if(y=Cc(o),typeof y=="function")for(o=y.call(o),m=0;!(h=o.next()).done;)h=h.value,y=f+Si(h,m++),A+=Pr(h,a,c,y,g);else if(h==="object")throw a=""+o,Error(Cr(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a));return A}function Lr(o,a,c){if(o==null)return o;var f=[],g=0;return Pr(o,f,"","",function(h){return a.call(c,h,g++)}),f}function Ec(o){if(o._status===-1){var a=o._result;a=a(),o._status=0,o._result=a,a.then(function(c){o._status===0&&(c=c.default,o._status=1,o._result=c)},function(c){o._status===0&&(o._status=2,o._result=c)})}if(o._status===1)return o._result;throw o._result}var Do={current:null};function an(){var o=Do.current;if(o===null)throw Error(Cr(321));return o}var yc={ReactCurrentDispatcher:Do,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:qi,IsSomeRendererActing:{current:!1},assign:Xi};Ne.Children={map:Lr,forEach:function(o,a,c){Lr(o,function(){a.apply(this,arguments)},c)},count:function(o){var a=0;return Lr(o,function(){a++}),a},toArray:function(o){return Lr(o,function(a){return a})||[]},only:function(o){if(!Ki(o))throw Error(Cr(143));return o}};Ne.Component=Gn;Ne.PureComponent=Zi;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yc;Ne.cloneElement=function(o,a,c){if(o==null)throw Error(Cr(267,o));var f=Xi({},o.props),g=o.key,h=o.ref,A=o._owner;if(a!=null){if(a.ref!==void 0&&(h=a.ref,A=qi.current),a.key!==void 0&&(g=""+a.key),o.type&&o.type.defaultProps)var m=o.type.defaultProps;for(y in a)Oo.call(a,y)&&!Mo.hasOwnProperty(y)&&(f[y]=a[y]===void 0&&m!==void 0?m[y]:a[y])}var y=arguments.length-2;if(y===1)f.children=c;else if(1<y){m=Array(y);for(var w=0;w<y;w++)m[w]=arguments[w+2];f.children=m}return{$$typeof:Wn,type:o.type,key:g,ref:h,props:f,_owner:A}};Ne.createContext=function(o,a){return a===void 0&&(a=null),o={$$typeof:yo,_calculateChangedBits:a,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null},o.Provider={$$typeof:Eo,_context:o},o.Consumer=o};Ne.createElement=Ro;Ne.createFactory=function(o){var a=Ro.bind(null,o);return a.type=o,a};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(o){return{$$typeof:Io,render:o}};Ne.isValidElement=Ki;Ne.lazy=function(o){return{$$typeof:So,_payload:{_status:-1,_result:o},_init:Ec}};Ne.memo=function(o,a){return{$$typeof:bo,type:o,compare:a===void 0?null:a}};Ne.useCallback=function(o,a){return an().useCallback(o,a)};Ne.useContext=function(o,a){return an().useContext(o,a)};Ne.useDebugValue=function(){};Ne.useEffect=function(o,a){return an().useEffect(o,a)};Ne.useImperativeHandle=function(o,a,c){return an().useImperativeHandle(o,a,c)};Ne.useLayoutEffect=function(o,a){return an().useLayoutEffect(o,a)};Ne.useMemo=function(o,a){return an().useMemo(o,a)};Ne.useReducer=function(o,a,c){return an().useReducer(o,a,c)};Ne.useRef=function(o){return an().useRef(o)};Ne.useState=function(o){return an().useState(o)};Ne.version="17.0.2";var Ic=ye('<div id=loadingSpinner><svg class=spinnerSvg viewBox="25 25 50 50"><circle cx=50 cy=50 r=20 fill=none strokeMiterlimit=10>');const vs=o=>{let a="spinnerPath",c={};return o?.stroke&&(a="spinnerPathWC",c={stroke:o?.stroke}),(()=>{var f=Ic(),g=f.firstChild,h=g.firstChild;return f.style.setProperty("position","relative"),Ft(h,"class",a),wt(A=>{var m=o?.size+"px"||"10px",y=o?.size+"px"||"10px",w=c,S=o?.strokeW||2;return m!==A.e&&((A.e=m)!=null?f.style.setProperty("width",m):f.style.removeProperty("width")),y!==A.t&&((A.t=y)!=null?f.style.setProperty("height",y):f.style.removeProperty("height")),A.a=ur(h,w,A.a),S!==A.o&&Ft(h,"strokeWidth",A.o=S),A},{e:void 0,t:void 0,a:void 0,o:void 0}),f})()};var bc=ye("<div class=centerBx><h5 class=totalBagsNo> "),Sc=ye('<div><header><nav><a href=/>Home</a><a href=/users>Users</a></nav></header><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div style="width:94vw;margin:0 auto;"><div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround centerBx"><h5 class="totalBags centerBx">Total de Sacos:</h5></div></div>'),Tc=ye("<div class=leftMrg> "),Nc=ye("<div> <!>."),_c=ye("<div> ");function Oc(){const[o,a]=dr({search:"23834",status:""});Te("");const[c,f]=Te(""),g=Yi(f,400),h=(S,T)=>{a({[S]:T}),g(Wi())};gr(()=>{});const[A,{refetch:m}]=Fi(c,async S=>{let T=o?.manifest?.label?.split(" ")?.[0];const H=await Mc(o.search,T,o.status);return Nl(H)}),y=()=>A()?.length,w=()=>{Rc(A())};return(()=>{var S=Sc(),T=S.firstChild,H=T.nextSibling,k=H.nextSibling,Q=k.firstChild,B=Q.firstChild;return B.firstChild,re(H,$(Co,{width:"20vw",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return o?.search},label:"search...",colors:"#2b2b2b",handleClick:L=>h("search",L)}),null),re(H,$(Li,{list:po,lbl_empty:"Estatus",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return o?.status},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:L=>h("status",L.id),width:"260px"}),null),re(H,$(Li,{list:Ql,lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return o?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:L=>h("manifest",L),width:"260px"}),null),re(B,$(Ts,{get fallback(){return(()=>{var L=Tc();return L.firstChild,re(L,$(vs,{stroke:"rgb(200 25 60 / 1)",size:32}),null),L})()},get children(){var L=bc(),X=L.firstChild;return X.firstChild,re(X,y,null),L}}),null),re(B,$(Bi,{}),null),re(B,$(Wr,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:w}),null),re(k,$(ka,{fallback:L=>(()=>{var X=Nc(),j=X.firstChild,G=j.nextSibling;return G.nextSibling,re(X,()=>L.toString(),G),X})(),get children(){return $(Ts,{get fallback(){return(()=>{var L=_c();return L.firstChild,re(L,$(vs,{stroke:"rgb(200 25 60 / 1)",size:62}),null),L})()},get children(){return $(at,{get when(){return A()},get children(){return $(Hi,{get each(){return A()},children:L=>$(fc,{item:L})})}})}})}}),null),wt(L=>{var X=on.App,j=on.header;return X!==L.e&&en(S,L.e=X),j!==L.t&&en(T,L.t=j),L},{e:void 0,t:void 0}),S})()}const Mc=async(o,a,c)=>{let f={params:{idairguide:a,":status":c},query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status"};if(o&&o.split(" ").map((g,h)=>{g&&(f.params[":search"+h]=g.trim())}),a&&Object.keys(f.params).length>=2){const g=await qr(f);return console.log(g),g?.data?.error?{}:g?.data}return{}},Rc=async o=>{let a=[];o.map(c=>{let f={params:{id:c?.ssg_track_key,idairguide:c?.idairguide},query:"getLogisticOrderByKeyID"};a.push(f)}),console.log(a),_l(a,Dc)},Dc=async o=>{const c=await qr(o);if(c)return c};var te;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(te||(te={}));var Ls=new Map([[te.QR_CODE,"QR_CODE"],[te.AZTEC,"AZTEC"],[te.CODABAR,"CODABAR"],[te.CODE_39,"CODE_39"],[te.CODE_93,"CODE_93"],[te.CODE_128,"CODE_128"],[te.DATA_MATRIX,"DATA_MATRIX"],[te.MAXICODE,"MAXICODE"],[te.ITF,"ITF"],[te.EAN_13,"EAN_13"],[te.EAN_8,"EAN_8"],[te.PDF_417,"PDF_417"],[te.RSS_14,"RSS_14"],[te.RSS_EXPANDED,"RSS_EXPANDED"],[te.UPC_A,"UPC_A"],[te.UPC_E,"UPC_E"],[te.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Bs;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(Bs||(Bs={}));function vc(o){return Object.values(te).includes(o)}var An;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(An||(An={}));var Wt=function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[An.SCAN_TYPE_CAMERA,An.SCAN_TYPE_FILE],o}(),vo=function(){function o(a,c){this.format=a,this.formatName=c}return o.prototype.toString=function(){return this.formatName},o.create=function(a){if(!Ls.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new o(a,Ls.get(a))},o}(),Ps=function(){function o(){}return o.createFromText=function(a){var c={text:a};return{decodedText:a,result:c}},o.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},o}(),Pi;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Pi||(Pi={}));var Lo=function(){function o(){}return o.createFrom=function(a){return{errorMessage:a,type:Pi.UNKWOWN_ERROR}},o}(),Bo=function(){function o(a){this.verbose=a}return o.prototype.log=function(a){this.verbose&&console.log(a)},o.prototype.warn=function(a){this.verbose&&console.warn(a)},o.prototype.logError=function(a,c){(this.verbose||c===!0)&&console.error(a)},o.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},o}();function Jt(o){return typeof o>"u"||o===null}function Lc(o,a,c){return o>c?c:o<a?a:o}var Vn=function(){function o(){}return o.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},o.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o}(),ve=function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(a){return"Last Match: ".concat(a)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o}(),ks=function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o}(),Po=function(){function o(){}return o.isMediaStreamConstraintsValid=function(a,c){if(typeof a!="object"){var f=typeof a;return c.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(f,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(g),A=Object.keys(a),m=0,y=A;m<y.length;m++){var w=y[m];if(h.has(w))return c.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},o}(),ki={exports:{}};(function(o,a){(function(c,f){f(a)})(sr,function(c){function f(C){return C==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,e){C.__proto__=e}||function(C,e){for(var t in e)e.hasOwnProperty(t)&&(C[t]=e[t])};function h(C,e){g(C,e);function t(){this.constructor=C}C.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function A(C,e){var t=Object.setPrototypeOf;t?t(C,e):C.__proto__=e}function m(C,e){e===void 0&&(e=C.constructor);var t=Error.captureStackTrace;t&&t(C,e)}var y=function(C){h(e,C);function e(t){var n=this.constructor,r=C.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),A(r,n.prototype),m(r),r}return e}(Error);class w extends y{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}w.kind="Exception";class S extends w{}S.kind="ArgumentException";class T extends w{}T.kind="IllegalArgumentException";class H{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new H(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new H(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new H(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends w{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class Q{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class L extends w{}L.kind="IndexOutOfBoundsException";class X extends L{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}X.kind="ArrayIndexOutOfBoundsException";class j{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){j.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new T("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new X(t);if(n>e)throw new X(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return B.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=j.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,l=n(t,e[s]);if(l>0)r=s+1;else if(l<0)i=s-1;else return s}return-r-1}static numberComparator(e,t){return e-t}}class G{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}G.MIN_VALUE_32_BITS=-2147483648,G.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ne{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=ne.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=ne.makeArray(e);B.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=n[r]}const l=r*32+G.numberOfTrailingZeros(i);return l>t?t:l}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=~n[r]}const l=r*32+G.numberOfTrailingZeros(i);return l>t?t:l}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new T;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const l=s>n?0:e&31,d=(2<<(s<r?31:t&31))-(1<<l);i[s]|=d}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new T;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let l=r;l<=i;l++){const u=l>r?0:e&31,x=(2<<(l<i?31:t&31))-(1<<u)&4294967295;if((s[l]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let s=0;for(let l=0;l<8;l++)this.get(e)&&(s|=1<<7-l),e++;t[n+i]=s}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let s=r[i];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-i]=s}if(this.size!==n*32){const i=n*32-this.size;let s=e[0]>>>i;for(let l=1;l<n;l++){const u=e[l];s|=u<<32-i,e[l-1]=s,s=u>>>i}e[n-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ne))return!1;const t=e;return this.size===t.size&&j.equals(this.bits,t.bits)}hashCode(){return 31*this.size+j.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new ne(this.size,this.bits.slice())}}var Ie;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ie||(Ie={}));var K=Ie;class F extends w{static getFormatInstance(){return new F}}F.kind="FormatException";var oe;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(oe||(oe={}));class U{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,U.VALUE_IDENTIFIER_TO_ECI.set(e,this),U.NAME_TO_ECI.set(n,this);const i=this.values;for(let s=0,l=i.length;s!==l;s++){const u=i[s];U.VALUES_TO_ECI.set(u,this)}for(const s of r)U.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new F("incorect value");const t=U.VALUES_TO_ECI.get(e);if(t===void 0)throw new F("incorect value");return t}static getCharacterSetECIByName(e){const t=U.NAME_TO_ECI.get(e);if(t===void 0)throw new F("incorect value");return t}equals(e){if(!(e instanceof U))return!1;const t=e;return this.getName()===t.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(oe.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(oe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(oe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(oe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(oe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(oe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(oe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(oe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(oe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(oe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(oe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(oe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(oe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(oe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(oe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(oe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(oe.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(oe.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(oe.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(oe.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(oe.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(oe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(oe.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(oe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(oe.Big5,28,"Big5"),U.GB18030=new U(oe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(oe.EUC_KR,30,"EUC_KR","EUC-KR");class pe extends w{}pe.kind="UnsupportedOperationException";class we{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!we.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof U?e:U.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(we.isDecodeFallbackSupported(n)){let r="";for(let i=0,s=e.length;i<s;i++){let l=e[i].toString(16);l.length<2&&(l="0"+l),r+="%"+l}return decodeURIComponent(r)}if(n.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new pe(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(U.UTF8)||e.equals(U.ISO8859_1)||e.equals(U.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class q{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return we.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(K.CHARACTER_SET)!==void 0)return t.get(K.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,l=0,u=0,d=0,x=0,p=0,E=0,b=0,N=0,_=0,O=0,D=0;const z=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let W=0;W<n&&(r||i||s);W++){const V=e[W]&255;s&&(l>0?V&128?l--:s=!1:V&128&&(V&64?(l++,V&32?(l++,V&16?(l++,V&8?s=!1:x++):d++):u++):s=!1)),r&&(V>127&&V<160?r=!1:V>159&&(V<192||V===215||V===247)&&D++),i&&(p>0?V<64||V===127||V>252?i=!1:p--:V===128||V===160||V>239?i=!1:V>160&&V<224?(E++,N=0,b++,b>_&&(_=b)):V>127?(p++,b=0,N++,N>O&&(O=N)):(b=0,N=0))}return s&&l>0&&(s=!1),i&&p>0&&(i=!1),s&&(z||u+d+x>0)?q.UTF8:i&&(q.ASSUME_SHIFT_JIS||_>=3||O>=3)?q.SHIFT_JIS:r&&i?_===2&&E===2||D*10>=n?q.SHIFT_JIS:q.ISO88591:r?q.ISO88591:i?q.SHIFT_JIS:s?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(s,l,u,d,x,p){if(s==="%%")return"%";if(t[++n]===void 0)return;s=d?parseInt(d.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,b;switch(p){case"s":b=t[n];break;case"c":b=t[n][0];break;case"f":b=parseFloat(t[n]).toFixed(s);break;case"p":b=parseFloat(t[n]).toPrecision(s);break;case"e":b=parseFloat(t[n]).toExponential(s);break;case"x":b=parseInt(t[n]).toString(E||16);break;case"d":b=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(E);let N=parseInt(u),_=u&&u[0]+""=="0"?"0":" ";for(;b.length<N;)b=l!==void 0?b+_:_+b;return b}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return we.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}q.SHIFT_JIS=U.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=U.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=U.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class J{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=q.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class fe{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new T("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new fe(n,t);for(let i=0;i<t;i++){const s=e[i];for(let l=0;l<n;l++)s[l]&&r.set(l,i)}return r}static parseFromString(e,t,n){if(e===null)throw new T("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,l=-1,u=0,d=0;for(;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(i>s){if(l===-1)l=i-s;else if(i-s!==l)throw new T("row lengths do not match");s=i,u++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,r[i]=!0,i++;else if(e.substring(d,d+n.length)===n)d+=n.length,r[i]=!1,i++;else throw new T("illegal character encountered: "+e.substring(d));if(i>s){if(l===-1)l=i-s;else if(i-s!==l)throw new T("row lengths do not match");u++}const x=new fe(l,u);for(let p=0;p<i;p++)r[p]&&x.set(Math.floor(p%l),Math.floor(p/l));return x}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const t=new ne(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const l=i*n,u=e.getRow(i,t).getBitArray();for(let d=0;d<n;d++)r[l+d]^=u[d]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new T("Left and top must be nonnegative");if(r<1||n<1)throw new T("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new T("The region must fit inside the matrix");const l=this.rowSize,u=this.bits;for(let d=t;d<s;d++){const x=d*l;for(let p=e;p<i;p++)u[x+Math.floor(p/32)]|=1<<(p&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new ne(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(s*32,r[i+s]);return t}setRow(e,t){B.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new ne(e),r=new ne(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,l=-1,u=-1;for(let d=0;d<t;d++)for(let x=0;x<n;x++){const p=r[d*n+x];if(p!==0){if(d<s&&(s=d),d>u&&(u=d),x*32<i){let E=0;for(;!(p<<31-E&4294967295);)E++;x*32+E<i&&(i=x*32+E)}if(x*32+31>l){let E=31;for(;!(p>>>E);)E--;x*32+E>l&&(l=x*32+E)}}}return l<i||u<s?null:Int32Array.from([i,s,l-i+1,u-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let l=0;for(;!(s<<31-l&4294967295);)l++;return i+=l,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let i=Math.floor(n%e)*32;const s=t[n];let l=31;for(;!(s>>>l);)l--;return i+=l,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof fe))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&j.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+j.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new J;for(let i=0,s=this.height;i<s;i++){for(let l=0,u=this.width;l<u;l++)r.append(this.get(l,i)?e:t);r.append(n)}return r.toString()}clone(){return new fe(this.width,this.height,this.rowSize,this.bits.slice())}}class v extends w{static getNotFoundInstance(){return new v}}v.kind="NotFoundException";class Fe extends Q{constructor(e){super(e),this.luminances=Fe.EMPTY,this.buckets=new Int32Array(Fe.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new ne(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let u=0;u<r;u++)s[(i[u]&255)>>Fe.LUMINANCE_SHIFT]++;const l=Fe.estimateBlackPoint(s);if(r<3)for(let u=0;u<r;u++)(i[u]&255)<l&&t.set(u);else{let u=i[0]&255,d=i[1]&255;for(let x=1;x<r-1;x++){const p=i[x+1]&255;(d*4-u-p)/2<l&&t.set(x),u=d,d=p}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new fe(t,n);this.initArrays(t);const i=this.buckets;for(let u=1;u<5;u++){const d=Math.floor(n*u/5),x=e.getRow(d,this.luminances),p=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<p;E++){const b=x[E]&255;i[b>>Fe.LUMINANCE_SHIFT]++}}const s=Fe.estimateBlackPoint(i),l=e.getMatrix();for(let u=0;u<n;u++){const d=u*t;for(let x=0;x<t;x++)(l[d+x]&255)<s&&r.set(x,u)}return r}createBinarizer(e){return new Fe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Fe.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let x=0;x<t;x++)e[x]>i&&(r=x,i=e[x]),e[x]>n&&(n=e[x]);let s=0,l=0;for(let x=0;x<t;x++){const p=x-r,E=e[x]*p*p;E>l&&(s=x,l=E)}if(r>s){const x=r;r=s,s=x}if(s-r<=t/16)throw new v;let u=s-1,d=-1;for(let x=s-1;x>r;x--){const p=x-r,E=p*p*(s-x)*(n-e[x]);E>d&&(u=x,d=E)}return u<<Fe.LUMINANCE_SHIFT}}Fe.LUMINANCE_BITS=5,Fe.LUMINANCE_SHIFT=8-Fe.LUMINANCE_BITS,Fe.LUMINANCE_BUCKETS=1<<Fe.LUMINANCE_BITS,Fe.EMPTY=Uint8ClampedArray.from([0]);class he extends Fe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=he.MINIMUM_DIMENSION&&n>=he.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>he.BLOCK_SIZE_POWER;t&he.BLOCK_SIZE_MASK&&i++;let s=n>>he.BLOCK_SIZE_POWER;n&he.BLOCK_SIZE_MASK&&s++;const l=he.calculateBlackPoints(r,i,s,t,n),u=new fe(t,n);he.calculateThresholdForBlock(r,i,s,t,n,l,u),this.matrix=u}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new he(e)}static calculateThresholdForBlock(e,t,n,r,i,s,l){const u=i-he.BLOCK_SIZE,d=r-he.BLOCK_SIZE;for(let x=0;x<n;x++){let p=x<<he.BLOCK_SIZE_POWER;p>u&&(p=u);const E=he.cap(x,2,n-3);for(let b=0;b<t;b++){let N=b<<he.BLOCK_SIZE_POWER;N>d&&(N=d);const _=he.cap(b,2,t-3);let O=0;for(let z=-2;z<=2;z++){const W=s[E+z];O+=W[_-2]+W[_-1]+W[_]+W[_+1]+W[_+2]}const D=O/25;he.thresholdBlock(e,N,p,D,r,l)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let l=0,u=n*i+t;l<he.BLOCK_SIZE;l++,u+=i)for(let d=0;d<he.BLOCK_SIZE;d++)(e[u+d]&255)<=r&&s.set(t+d,n+l)}static calculateBlackPoints(e,t,n,r,i){const s=i-he.BLOCK_SIZE,l=r-he.BLOCK_SIZE,u=new Array(n);for(let d=0;d<n;d++){u[d]=new Int32Array(t);let x=d<<he.BLOCK_SIZE_POWER;x>s&&(x=s);for(let p=0;p<t;p++){let E=p<<he.BLOCK_SIZE_POWER;E>l&&(E=l);let b=0,N=255,_=0;for(let D=0,z=x*r+E;D<he.BLOCK_SIZE;D++,z+=r){for(let W=0;W<he.BLOCK_SIZE;W++){const V=e[z+W]&255;b+=V,V<N&&(N=V),V>_&&(_=V)}if(_-N>he.MIN_DYNAMIC_RANGE)for(D++,z+=r;D<he.BLOCK_SIZE;D++,z+=r)for(let W=0;W<he.BLOCK_SIZE;W++)b+=e[z+W]&255}let O=b>>he.BLOCK_SIZE_POWER*2;if(_-N<=he.MIN_DYNAMIC_RANGE&&(O=N/2,d>0&&p>0)){const D=(u[d-1][p]+2*u[d][p-1]+u[d-1][p-1])/4;N<D&&(O=D)}u[d][p]=O}}return u}}he.BLOCK_SIZE_POWER=3,he.BLOCK_SIZE=1<<he.BLOCK_SIZE_POWER,he.BLOCK_SIZE_MASK=he.BLOCK_SIZE-1,he.MINIMUM_DIMENSION=he.BLOCK_SIZE*5,he.MIN_DYNAMIC_RANGE=24;class Ke{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new pe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new pe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new pe("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new J;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const s=r[i]&255;let l;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()}}class At extends Ke{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new At(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new At(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new At(this.delegate.rotateCounterClockwise45())}}class lt extends Ke{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=lt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return lt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,l=e.length;i<l;i+=4,s++){let u;if(e[i+3]===0)u=255;else{const x=e[i],p=e[i+1],E=e[i+2];u=306*x+601*p+117*E+512>>10}r[s]=u}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*lt.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),u=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=l,t.height=u,n.translate(l/2,u/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=lt.makeBufferFromCanvasImageData(t),this}invert(){return new At(this)}}lt.DEGREE_TO_RADIANS=Math.PI/180;class Yn{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var $e=(globalThis||sr||self||window||void 0)&&(globalThis||sr||self||window||void 0).__awaiter||function(C,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function l(x){try{d(n.next(x))}catch(p){s(p)}}function u(x){try{d(n.throw(x))}catch(p){s(p)}}function d(x){x.done?i(x.value):r(x.value).then(l,u)}d((n=n.apply(C,e||[])).next())})};class Gt{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return $e(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const i=n.deviceId||n.id,s=n.label||`Video device ${t.length+1}`,l=n.groupId,u={deviceId:i,label:s,kind:r,groupId:l};t.push(u)}return t})}getVideoInputDevices(){return $e(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Yn(t.deviceId,t.label))})}findDeviceById(e){return $e(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return $e(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return $e(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return $e(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return $e(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return $e(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return $e(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return $e(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return $e(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return $e(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return $e(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new S(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new S(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new S("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new S("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new S("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return $e(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return $e(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode){s(new v("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const l=this.decode(e);i(l)}catch(l){const u=t&&l instanceof v,x=(l instanceof k||l instanceof F)&&n;if(u||x)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(l)}};return new Promise((i,s)=>r(i,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const i=r instanceof k||r instanceof F,s=r instanceof v;(i||s)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new lt(t),r=new he(n);return new H(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ct{constructor(e,t,n=t==null?0:8*t.length,r,i,s=B.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,s==null?this.timestamp=B.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);B.arraycopy(t,0,n,0,t.length),B.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Kr;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Kr||(Kr={}));var le=Kr,$r;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($r||($r={}));var rt=$r;class Xn{constructor(e,t,n,r,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Zn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class yt{constructor(e,t){if(t.length===0)throw new T;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),B.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let s=0,l=t.length;s!==l;s++){const u=t[s];n=Zn.addOrSubtract(n,u)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=Zn.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const s=t;t=n,n=s}let r=new Int32Array(n.length);const i=n.length-t.length;B.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=Zn.addOrSubtract(t[s-i],n[s]);return new yt(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),l=this.field;for(let u=0;u<n;u++){const d=t[u];for(let x=0;x<i;x++)s[u+x]=Zn.addOrSubtract(s[u+x],l.multiply(d,r[x]))}return new yt(l,s)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new yt(n,r)}multiplyByMonomial(e,t){if(e<0)throw new T;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let l=0;l<r;l++)i[l]=s.multiply(n[l],t);return new yt(s,i)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const l=r.getDegree()-e.getDegree(),u=t.multiply(r.getCoefficient(r.getDegree()),s),d=e.multiplyByMonomial(l,u),x=t.buildMonomial(l,u);n=n.addOrSubtract(x),r=r.addOrSubtract(d)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class pr extends w{}pr.kind="ArithmeticException";class _e extends Zn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let l=0;l<t;l++)r[l]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let l=0;l<t-1;l++)s[r[l]]=l;this.logTable=s,this.zero=new yt(this,Int32Array.from([0])),this.one=new yt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new yt(this,n)}inverse(e){if(e===0)throw new pr;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+G.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}_e.AZTEC_DATA_12=new _e(4201,4096,1),_e.AZTEC_DATA_10=new _e(1033,1024,1),_e.AZTEC_DATA_6=new _e(67,64,1),_e.AZTEC_PARAM=new _e(19,16,1),_e.QR_CODE_FIELD_256=new _e(285,256,0),_e.DATA_MATRIX_FIELD_256=new _e(301,256,1),_e.AZTEC_DATA_8=_e.DATA_MATRIX_FIELD_256,_e.MAXICODE_FIELD_64=_e.AZTEC_DATA_6;class _n extends w{}_n.kind="ReedSolomonException";class Yt extends w{}Yt.kind="IllegalStateException";class Qn{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new yt(n,e),i=new Int32Array(t);let s=!0;for(let b=0;b<t;b++){const N=r.evaluateAt(n.exp(b+n.getGeneratorBase()));i[i.length-1-b]=N,N!==0&&(s=!1)}if(s)return;const l=new yt(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),l,t),d=u[0],x=u[1],p=this.findErrorLocations(d),E=this.findErrorMagnitudes(x,p);for(let b=0;b<p.length;b++){const N=e.length-1-n.log(p[b]);if(N<0)throw new _n("Bad error location");e[N]=_e.addOrSubtract(e[N],E[b])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const b=e;e=t,t=b}const r=this.field;let i=e,s=t,l=r.getZero(),u=r.getOne();for(;s.getDegree()>=(n/2|0);){let b=i,N=l;if(i=s,l=u,i.isZero())throw new _n("r_{i-1} was zero");s=b;let _=r.getZero();const O=i.getCoefficient(i.getDegree()),D=r.inverse(O);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const z=s.getDegree()-i.getDegree(),W=r.multiply(s.getCoefficient(s.getDegree()),D);_=_.addOrSubtract(r.buildMonomial(z,W)),s=s.addOrSubtract(i.multiplyByMonomial(z,W))}if(u=_.multiply(l).addOrSubtract(N),s.getDegree()>=i.getDegree())throw new Yt("Division algorithm failed to reduce polynomial?")}const d=u.getCoefficient(0);if(d===0)throw new _n("sigmaTilde(0) was zero");const x=r.inverse(d),p=u.multiplyScalar(x),E=s.multiplyScalar(x);return[p,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)e.evaluateAt(s)===0&&(n[r]=i.inverse(s),r++);if(r!==t)throw new _n("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const l=i.inverse(t[s]);let u=1;for(let d=0;d<n;d++)if(s!==d){const x=i.multiply(t[d],l),p=x&1?x&-2:x|1;u=i.multiply(u,p)}r[s]=i.multiply(e.evaluateAt(l),i.inverse(u)),i.getGeneratorBase()!==0&&(r[s]=i.multiply(r[s],l))}return r}}var ct;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(ct||(ct={}));class Ue{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=Ue.convertBoolArrayToByteArray(r),s=Ue.getEncodedData(r),l=new Xn(i,s,null,null);return l.setNumBits(r.length),l}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=ct.UPPER,r=ct.UPPER,i="",s=0;for(;s<t;)if(r===ct.BINARY){if(t-s<5)break;let l=Ue.readCode(e,s,5);if(s+=5,l===0){if(t-s<11)break;l=Ue.readCode(e,s,11)+31,s+=11}for(let u=0;u<l;u++){if(t-s<8){s=t;break}const d=Ue.readCode(e,s,8);i+=q.castAsNonUtf8Char(d),s+=8}r=n}else{let l=r===ct.DIGIT?4:5;if(t-s<l)break;let u=Ue.readCode(e,s,l);s+=l;let d=Ue.getCharacter(r,u);d.startsWith("CTRL_")?(n=r,r=Ue.getTable(d.charAt(5)),d.charAt(6)==="L"&&(n=r)):(i+=d,r=n)}return i}static getTable(e){switch(e){case"L":return ct.LOWER;case"P":return ct.PUNCT;case"M":return ct.MIXED;case"D":return ct.DIGIT;case"B":return ct.BINARY;case"U":default:return ct.UPPER}}static getCharacter(e,t){switch(e){case ct.UPPER:return Ue.UPPER_TABLE[t];case ct.LOWER:return Ue.LOWER_TABLE[t];case ct.MIXED:return Ue.MIXED_TABLE[t];case ct.PUNCT:return Ue.PUNCT_TABLE[t];case ct.DIGIT:return Ue.DIGIT_TABLE[t];default:throw new Yt("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=_e.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=_e.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=_e.AZTEC_DATA_10):(n=12,t=_e.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new F;let s=e.length%n,l=new Int32Array(i);for(let E=0;E<i;E++,s+=n)l[E]=Ue.readCode(e,s,n);try{new Qn(t).decode(l,i-r)}catch(E){throw new F(E)}let u=(1<<n)-1,d=0;for(let E=0;E<r;E++){let b=l[E];if(b===0||b===u)throw new F;(b===1||b===u-1)&&d++}let x=new Array(r*n-d),p=0;for(let E=0;E<r;E++){let b=l[E];if(b===1||b===u-1)x.fill(b>1,p,p+n-1),p+=n-1;else for(let N=n-1;N>=0;--N)x[p++]=(b&1<<N)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let l=0;l<i.length;l++)i[l]=l;else{let l=r+1+2*G.truncDivision(G.truncDivision(r,2)-1,15),u=r/2,d=G.truncDivision(l,2);for(let x=0;x<u;x++){let p=x+G.truncDivision(x,15);i[u-x-1]=d-p-1,i[u+x]=d+p+1}}for(let l=0,u=0;l<n;l++){let d=(n-l)*4+(t?9:12),x=l*2,p=r-1-x;for(let E=0;E<d;E++){let b=E*2;for(let N=0;N<2;N++)s[u+b+N]=e.get(i[x+N],i[x+E]),s[u+2*d+b+N]=e.get(i[x+E],i[p-N]),s[u+4*d+b+N]=e.get(i[p-N],i[p-E]),s[u+6*d+b+N]=e.get(i[p-E],i[x+N])}u+=d*8}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?Ue.readCode(e,t,8):Ue.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=Ue.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Ue.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ue.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ue.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class be{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const i=e[n];t+=i}return t}}class mr{static floatToIntBits(e){return e}}mr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ie{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ie){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*mr.floatToIntBits(this.x)+mr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,l;if(n>=t&&n>=r?(s=e[0],i=e[1],l=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],l=e[2]):(s=e[2],i=e[0],l=e[1]),this.crossProductZ(i,s,l)<0){const u=i;i=l,l=u}e[0]=i,e[1]=s,e[2]=l}static distance(e,t){return be.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class Er{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class es extends Er{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class nn{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=nn.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new v}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,l=!1,u=!1,d=!1,x=!1,p=!1;const E=this.width,b=this.height;for(;s;){s=!1;let N=!0;for(;(N||!u)&&t<E;)N=this.containsBlackPoint(n,r,t,!1),N?(t++,s=!0,u=!0):u||t++;if(t>=E){i=!0;break}let _=!0;for(;(_||!d)&&r<b;)_=this.containsBlackPoint(e,t,r,!0),_?(r++,s=!0,d=!0):d||r++;if(r>=b){i=!0;break}let O=!0;for(;(O||!x)&&e>=0;)O=this.containsBlackPoint(n,r,e,!1),O?(e--,s=!0,x=!0):x||e--;if(e<0){i=!0;break}let D=!0;for(;(D||!p)&&n>=0;)D=this.containsBlackPoint(e,t,n,!0),D?(n--,s=!0,p=!0):p||n--;if(n<0){i=!0;break}s&&(l=!0)}if(!i&&l){const N=t-e;let _=null;for(let W=1;_===null&&W<N;W++)_=this.getBlackPointOnSegment(e,r-W,e+W,r);if(_==null)throw new v;let O=null;for(let W=1;O===null&&W<N;W++)O=this.getBlackPointOnSegment(e,n+W,e+W,n);if(O==null)throw new v;let D=null;for(let W=1;D===null&&W<N;W++)D=this.getBlackPointOnSegment(t,n+W,t-W,n);if(D==null)throw new v;let z=null;for(let W=1;z===null&&W<N;W++)z=this.getBlackPointOnSegment(t,r-W,t-W,r);if(z==null)throw new v;return this.centerEdges(z,_,D,O)}else throw new v}getBlackPointOnSegment(e,t,n,r){const i=be.round(be.distance(e,t,n,r)),s=(n-e)/i,l=(r-t)/i,u=this.image;for(let d=0;d<i;d++){const x=be.round(e+d*s),p=be.round(t+d*l);if(u.get(x,p))return new ie(x,p)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),l=t.getX(),u=t.getY(),d=n.getX(),x=n.getY(),p=r.getX(),E=r.getY(),b=nn.CORR;return i<this.width/2?[new ie(p-b,E+b),new ie(l+b,u+b),new ie(d-b,x-b),new ie(i+b,s-b)]:[new ie(p+b,E+b),new ie(l+b,u-b),new ie(d-b,x+b),new ie(i-b,s-b)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}nn.INIT_SIZE=10,nn.CORR=1;class Jr{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const l=Math.floor(t[s]),u=Math.floor(t[s+1]);if(l<-1||l>n||u<-1||u>r)throw new v;i=!1,l===-1?(t[s]=0,i=!0):l===n&&(t[s]=n-1,i=!0),u===-1?(t[s+1]=0,i=!0):u===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const l=Math.floor(t[s]),u=Math.floor(t[s+1]);if(l<-1||l>n||u<-1||u>r)throw new v;i=!1,l===-1?(t[s]=0,i=!0):l===n&&(t[s]=n-1,i=!0),u===-1?(t[s+1]=0,i=!0):u===r&&(t[s+1]=r-1,i=!0)}}}class Vt{constructor(e,t,n,r,i,s,l,u,d){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=l,this.a23=u,this.a33=d}static quadrilateralToQuadrilateral(e,t,n,r,i,s,l,u,d,x,p,E,b,N,_,O){const D=Vt.quadrilateralToSquare(e,t,n,r,i,s,l,u);return Vt.squareToQuadrilateral(d,x,p,E,b,N,_,O).times(D)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,l=this.a22,u=this.a23,d=this.a31,x=this.a32,p=this.a33;for(let E=0;E<t;E+=2){const b=e[E],N=e[E+1],_=i*b+u*N+p;e[E]=(n*b+s*N+d)/_,e[E+1]=(r*b+l*N+x)/_}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,l=this.a22,u=this.a23,d=this.a31,x=this.a32,p=this.a33,E=e.length;for(let b=0;b<E;b++){const N=e[b],_=t[b],O=i*N+u*_+p;e[b]=(n*N+s*_+d)/O,t[b]=(r*N+l*_+x)/O}}static squareToQuadrilateral(e,t,n,r,i,s,l,u){const d=e-n+i-l,x=t-r+s-u;if(d===0&&x===0)return new Vt(n-e,i-n,e,r-t,s-r,t,0,0,1);{const p=n-i,E=l-i,b=r-s,N=u-s,_=p*N-E*b,O=(d*N-E*x)/_,D=(p*x-d*b)/_;return new Vt(n-e+O*n,l-e+D*l,e,r-t+O*r,u-t+D*u,t,O,D,1)}}static quadrilateralToSquare(e,t,n,r,i,s,l,u){return Vt.squareToQuadrilateral(e,t,n,r,i,s,l,u).buildAdjoint()}buildAdjoint(){return new Vt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Vt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ts extends Jr{sampleGrid(e,t,n,r,i,s,l,u,d,x,p,E,b,N,_,O,D,z,W){const V=Vt.quadrilateralToQuadrilateral(r,i,s,l,u,d,x,p,E,b,N,_,O,D,z,W);return this.sampleGridWithTransform(e,t,n,V)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new v;const i=new fe(t,n),s=new Float32Array(2*t);for(let l=0;l<n;l++){const u=s.length,d=l+.5;for(let x=0;x<u;x+=2)s[x]=x/2+.5,s[x+1]=d;r.transformPoints(s),Jr.checkAndNudgePoints(e,s);try{for(let x=0;x<u;x+=2)e.get(Math.floor(s[x]),Math.floor(s[x+1]))&&i.set(x/2,l)}catch{throw new v}}return i}}class ln{static setGridSampler(e){ln.gridSampler=e}static getInstance(){return ln.gridSampler}}ln.gridSampler=new ts;class pt{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ns{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let s=n[0];n[0]=n[2],n[2]=s}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new es(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new v;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let l=n[(this.shift+s)%4];this.compact?(r<<=7,r+=l>>1&127):(r<<=10,r+=(l>>2&992)+(l>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,s)=>{let l=(r>>t-2<<1)+(r&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(G.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new v}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let u=n-1;u>=0;--u)s[u]=e&15,e>>=4;try{new Qn(_e.AZTEC_PARAM).decode(s,i)}catch{throw new v}let l=0;for(let u=0;u<r;u++)l=(l<<4)+s[u];return l}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let p=this.getFirstDifferent(t,s,1,-1),E=this.getFirstDifferent(n,s,1,1),b=this.getFirstDifferent(r,s,-1,1),N=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let _=this.distancePoint(N,p)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(_<.75||_>1.25||!this.isWhiteOrBlackRectangle(p,E,b,N))break}t=p,n=E,r=b,i=N,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new v;this.compact=this.nbCenterLayers===5;let l=new ie(t.getX()+.5,t.getY()-.5),u=new ie(n.getX()+.5,n.getY()+.5),d=new ie(r.getX()-.5,r.getY()+.5),x=new ie(i.getX()-.5,i.getY()-.5);return this.expandSquare([l,u,d,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let l=new nn(this.image).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch{let u=this.image.getWidth()/2,d=this.image.getHeight()/2;e=this.getFirstDifferent(new pt(u+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new pt(u+7,d+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pt(u-7,d+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new pt(u-7,d-7),!1,-1,-1).toResultPoint()}let i=be.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=be.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let l=new nn(this.image,15,i,s).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch{e=this.getFirstDifferent(new pt(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new pt(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pt(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new pt(i-7,s-7),!1,-1,-1).toResultPoint()}return i=be.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=be.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new pt(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=ln.getInstance(),l=this.getDimension(),u=l/2-this.nbCenterLayers,d=l/2+this.nbCenterLayers;return s.sampleGrid(e,l,l,u,u,d,u,d,d,u,d,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,l=e.getX(),u=e.getY(),d=s*(t.getX()-e.getX())/i,x=s*(t.getY()-e.getY())/i;for(let p=0;p<n;p++)this.image.get(be.round(l+p*d),be.round(u+p*x))&&(r|=1<<n-p-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new pt(e.getX()-i,e.getY()+i),t=new pt(t.getX()-i,t.getY()-i),n=new pt(n.getX()+i,n.getY()-i),r=new pt(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(s===0)return!1;let l=this.getColor(e,t);return l!==s||(l=this.getColor(t,n),l!==s)?!1:(l=this.getColor(n,r),l===s)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,l=e.getX(),u=e.getY(),d=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let E=0;E<x;E++)l+=r,u+=i,this.image.get(be.round(l),be.round(u))!==d&&s++;let p=s/n;return p>.1&&p<.9?0:p<=.1===d?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new pt(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,d=new ie(l+r*i,u+r*s),x=new ie(l-r*i,u-r*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;let p=new ie(l+r*i,u+r*s),E=new ie(l-r*i,u-r*s);return[d,p,x,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=be.round(e.getX()),n=be.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return be.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return be.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(G.truncDivision(this.nbLayers-4,8)+1)+15}}class yr{decode(e,t=null){let n=null,r=new ns(e.getBlackMatrix()),i=null,s=null;try{let x=r.detectMirror(!1);i=x.getPoints(),this.reportFoundResultPoints(t,i),s=new Ue().decode(x)}catch(x){n=x}if(s==null)try{let x=r.detectMirror(!0);i=x.getPoints(),this.reportFoundResultPoints(t,i),s=new Ue().decode(x)}catch(x){throw n??x}let l=new Ct(s.getText(),s.getRawBytes(),s.getNumBits(),i,le.AZTEC,B.currentTimeMillis()),u=s.getByteSegments();u!=null&&l.putMetadata(rt.BYTE_SEGMENTS,u);let d=s.getECLevel();return d!=null&&l.putMetadata(rt.ERROR_CORRECTION_LEVEL,d),l}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(K.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,s)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class Vo extends Gt{constructor(e=500){super(new yr,e)}}class Je{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(K.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),s=this.doDecode(i,t),l=s.getResultMetadata();let u=270;l!==null&&l.get(rt.ORIENTATION)===!0&&(u=u+l.get(rt.ORIENTATION)%360),s.putMetadata(rt.ORIENTATION,u);const d=s.getResultPoints();if(d!==null){const x=i.getHeight();for(let p=0;p<d.length;p++)d[p]=new ie(x-d[p].getY()-1,d[p].getX())}return s}else throw new v}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new ne(n);const s=t&&t.get(K.TRY_HARDER)===!0,l=Math.max(1,r>>(s?8:5));let u;s?u=r:u=15;const d=Math.trunc(r/2);for(let x=0;x<u;x++){const p=Math.trunc((x+1)/2),E=(x&1)===0,b=d+l*(E?p:-p);if(b<0||b>=r)break;try{i=e.getBlackRow(b,i)}catch{continue}for(let N=0;N<2;N++){if(N===1&&(i.reverse(),t&&t.get(K.NEED_RESULT_POINT_CALLBACK)===!0)){const _=new Map;t.forEach((O,D)=>_.set(D,O)),_.delete(K.NEED_RESULT_POINT_CALLBACK),t=_}try{const _=this.decodeRow(b,i,t);if(N===1){_.putMetadata(rt.ORIENTATION,180);const O=_.getResultPoints();O!==null&&(O[0]=new ie(n-O[0].getX()-1,O[0].getY()),O[1]=new ie(n-O[1].getX()-1,O[1].getY()))}return _}catch{}}}throw new v}static recordPattern(e,t,n){const r=n.length;for(let d=0;d<r;d++)n[d]=0;const i=e.getSize();if(t>=i)throw new v;let s=!e.get(t),l=0,u=t;for(;u<i;){if(e.get(u)!==s)n[l]++;else{if(++l===r)break;n[l]=1,s=!s}u++}if(!(l===r||l===r-1&&u===i))throw new v}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new v;Je.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let d=0;d<r;d++)i+=e[d],s+=t[d];if(i<s)return Number.POSITIVE_INFINITY;const l=i/s;n*=l;let u=0;for(let d=0;d<r;d++){const x=e[d],p=t[d]*l,E=x>p?x-p:p-x;if(E>n)return Number.POSITIVE_INFINITY;u+=E}return u/i}}class Y extends Je{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,l=!1;const u=6;for(let d=n;d<t;d++)if(e.get(d)!==l)i[r]++;else{if(r===u-1){let x=Y.MAX_AVG_VARIANCE,p=-1;for(let E=Y.CODE_START_A;E<=Y.CODE_START_C;E++){const b=Je.patternMatchVariance(i,Y.CODE_PATTERNS[E],Y.MAX_INDIVIDUAL_VARIANCE);b<x&&(x=b,p=E)}if(p>=0&&e.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,p]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,l=!l}throw new v}static decodeCode(e,t,n){Je.recordPattern(e,n,t);let r=Y.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<Y.CODE_PATTERNS.length;s++){const l=Y.CODE_PATTERNS[s],u=this.patternMatchVariance(t,l,Y.MAX_INDIVIDUAL_VARIANCE);u<r&&(r=u,i=s)}if(i>=0)return i;throw new v}decodeRow(e,t,n){const r=n&&n.get(K.ASSUME_GS1)===!0,i=Y.findStartPattern(t),s=i[2];let l=0;const u=new Uint8Array(20);u[l++]=s;let d;switch(s){case Y.CODE_START_A:d=Y.CODE_CODE_A;break;case Y.CODE_START_B:d=Y.CODE_CODE_B;break;case Y.CODE_START_C:d=Y.CODE_CODE_C;break;default:throw new F}let x=!1,p=!1,E="",b=i[0],N=i[1];const _=Int32Array.from([0,0,0,0,0,0]);let O=0,D=0,z=s,W=0,V=!0,me=!1,xe=!1;for(;!x;){const kn=p;switch(p=!1,O=D,D=Y.decodeCode(t,_,N),u[l++]=D,D!==Y.CODE_STOP&&(V=!0),D!==Y.CODE_STOP&&(W++,z+=W*D),b=N,N+=_.reduce((xa,wa)=>xa+wa,0),D){case Y.CODE_START_A:case Y.CODE_START_B:case Y.CODE_START_C:throw new F}switch(d){case Y.CODE_CODE_A:if(D<64)xe===me?E+=String.fromCharCode(32+D):E+=String.fromCharCode(32+D+128),xe=!1;else if(D<96)xe===me?E+=String.fromCharCode(D-64):E+=String.fromCharCode(D+64),xe=!1;else switch(D!==Y.CODE_STOP&&(V=!1),D){case Y.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case Y.CODE_FNC_2:case Y.CODE_FNC_3:break;case Y.CODE_FNC_4_A:!me&&xe?(me=!0,xe=!1):me&&xe?(me=!1,xe=!1):xe=!0;break;case Y.CODE_SHIFT:p=!0,d=Y.CODE_CODE_B;break;case Y.CODE_CODE_B:d=Y.CODE_CODE_B;break;case Y.CODE_CODE_C:d=Y.CODE_CODE_C;break;case Y.CODE_STOP:x=!0;break}break;case Y.CODE_CODE_B:if(D<96)xe===me?E+=String.fromCharCode(32+D):E+=String.fromCharCode(32+D+128),xe=!1;else switch(D!==Y.CODE_STOP&&(V=!1),D){case Y.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case Y.CODE_FNC_2:case Y.CODE_FNC_3:break;case Y.CODE_FNC_4_B:!me&&xe?(me=!0,xe=!1):me&&xe?(me=!1,xe=!1):xe=!0;break;case Y.CODE_SHIFT:p=!0,d=Y.CODE_CODE_A;break;case Y.CODE_CODE_A:d=Y.CODE_CODE_A;break;case Y.CODE_CODE_C:d=Y.CODE_CODE_C;break;case Y.CODE_STOP:x=!0;break}break;case Y.CODE_CODE_C:if(D<100)D<10&&(E+="0"),E+=D;else switch(D!==Y.CODE_STOP&&(V=!1),D){case Y.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case Y.CODE_CODE_A:d=Y.CODE_CODE_A;break;case Y.CODE_CODE_B:d=Y.CODE_CODE_B;break;case Y.CODE_STOP:x=!0;break}break}kn&&(d=d===Y.CODE_CODE_A?Y.CODE_CODE_B:Y.CODE_CODE_A)}const Tt=N-b;if(N=t.getNextUnset(N),!t.isRange(N,Math.min(t.getSize(),N+(N-b)/2),!1))throw new v;if(z-=W*O,z%103!==O)throw new k;const jt=E.length;if(jt===0)throw new v;jt>0&&V&&(d===Y.CODE_CODE_C?E=E.substring(0,jt-2):E=E.substring(0,jt-1));const Nt=(i[1]+i[0])/2,ke=b+Tt/2,ht=u.length,Ot=new Uint8Array(ht);for(let kn=0;kn<ht;kn++)Ot[kn]=u[kn];const Pn=[new ie(Nt,e),new ie(ke,e)];return new Ct(E,Ot,0,Pn,le.CODE_128,new Date().getTime())}}Y.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Y.MAX_AVG_VARIANCE=.25,Y.MAX_INDIVIDUAL_VARIANCE=.7,Y.CODE_SHIFT=98,Y.CODE_CODE_C=99,Y.CODE_CODE_B=100,Y.CODE_CODE_A=101,Y.CODE_FNC_1=102,Y.CODE_FNC_2=97,Y.CODE_FNC_3=96,Y.CODE_FNC_4_A=101,Y.CODE_FNC_4_B=100,Y.CODE_START_A=103,Y.CODE_START_B=104,Y.CODE_START_C=105,Y.CODE_STOP=106;class et extends Je{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i=et.findAsteriskPattern(t,r),s=t.getNextSet(i[1]),l=t.getSize(),u,d;do{et.recordPattern(t,s,r);let _=et.toNarrowWidePattern(r);if(_<0)throw new v;u=et.patternToChar(_),this.decodeRowResult+=u,d=s;for(let O of r)s+=O;s=t.getNextSet(s)}while(u!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let _ of r)x+=_;let p=s-d-x;if(s!==l&&p*2<x)throw new v;if(this.usingCheckDigit){let _=this.decodeRowResult.length-1,O=0;for(let D=0;D<_;D++)O+=et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(_)!==et.ALPHABET_STRING.charAt(O%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new v;let E;this.extendedMode?E=et.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let b=(i[1]+i[0])/2,N=d+x/2;return new Ct(E,null,0,[new ie(b,e),new ie(N,e)],le.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,l=!1,u=t.length;for(let d=r;d<n;d++)if(e.get(d)!==l)t[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(t)===et.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,l=!l}throw new v}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let i=2147483647;for(let u of e)u<i&&u>n&&(i=u);n=i,r=0;let s=0,l=0;for(let u=0;u<t;u++){let d=e[u];d>n&&(l|=1<<t-1-u,r++,s+=d)}if(r===3){for(let u=0;u<t&&r>0;u++){let d=e[u];if(d>n&&(r--,d*2>=s))return-1}return l}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<et.CHARACTER_ENCODINGS.length;t++)if(et.CHARACTER_ENCODINGS[t]===e)return et.ALPHABET_STRING.charAt(t);if(e===et.ASTERISK_ENCODING)return"*";throw new v}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let i=e.charAt(r);if(i==="+"||i==="$"||i==="%"||i==="/"){let s=e.charAt(r+1),l="\0";switch(i){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new F;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new F;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new F;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new F;break}n+=l,r++}else n+=i}return n}}et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],et.ASTERISK_ENCODING=148;class Be extends Je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new J;Be.decodeMiddle(t,r[1],i[0],s);let l=s.toString(),u=null;n!=null&&(u=n.get(K.ALLOWED_LENGTHS)),u==null&&(u=Be.DEFAULT_ALLOWED_LENGTHS);let d=l.length,x=!1,p=0;for(let N of u){if(d===N){x=!0;break}N>p&&(p=N)}if(!x&&d>p&&(x=!0),!x)throw new F;const E=[new ie(r[1],e),new ie(i[0],e)];return new Ct(l,null,0,E,le.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(i.fill(0),s.fill(0),l.fill(0);t<n;){Je.recordPattern(e,t,i);for(let d=0;d<5;d++){let x=2*d;s[d]=i[x],l[d]=i[x+1]}let u=Be.decodeDigit(s);r.append(u.toString()),u=this.decodeDigit(l),r.append(u.toString()),i.forEach(function(d){t+=d})}}decodeStart(e){let t=Be.skipWhiteSpace(e),n=Be.findGuardPattern(e,t,Be.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new v}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new v;return n}decodeEnd(e){e.reverse();try{let t=Be.skipWhiteSpace(e),n;try{n=Be.findGuardPattern(e,t,Be.END_PATTERN_REVERSED[0])}catch(i){i instanceof v&&(n=Be.findGuardPattern(e,t,Be.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),l=!1,u=0,d=t;i.fill(0);for(let x=t;x<s;x++)if(e.get(x)!==l)i[u]++;else{if(u===r-1){if(Je.patternMatchVariance(i,n,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return[d,x];d+=i[0]+i[1],B.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,l=!l}throw new v}static decodeDigit(e){let t=Be.MAX_AVG_VARIANCE,n=-1,r=Be.PATTERNS.length;for(let i=0;i<r;i++){let s=Be.PATTERNS[i],l=Je.patternMatchVariance(e,s,Be.MAX_INDIVIDUAL_VARIANCE);l<t?(t=l,n=i):l===t&&(n=-1)}if(n>=0)return n%10;throw new v}}Be.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Be.MAX_AVG_VARIANCE=.38,Be.MAX_INDIVIDUAL_VARIANCE=.5,Be.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Be.START_PATTERN=Int32Array.from([1,1,1,1]),Be.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ge extends Je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=Ge.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=n[0];r=n[1];let l=s-(r-s);l>=0&&(t=e.isRange(l,s,!1))}return n}static checkChecksum(e){return Ge.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Ge.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new F;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new F;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return Ge.findGuardPattern(e,t,!1,Ge.START_END_PATTERN,new Int32Array(Ge.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let l=0,u=t,d=r.length,x=n;for(let p=t;p<s;p++)if(e.get(p)!==x)i[l]++;else{if(l===d-1){if(Je.patternMatchVariance(i,r,Ge.MAX_INDIVIDUAL_VARIANCE)<Ge.MAX_AVG_VARIANCE)return Int32Array.from([u,p]);u+=i[0]+i[1];let E=i.slice(2,i.length-1);for(let b=0;b<l-1;b++)i[b]=E[b];i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,x=!x}throw new v}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,l=r.length;for(let u=0;u<l;u++){let d=r[u],x=Je.patternMatchVariance(t,d,Ge.MAX_INDIVIDUAL_VARIANCE);x<i&&(i=x,s=u)}if(s>=0)return s;throw new v}}Ge.MAX_AVG_VARIANCE=.48,Ge.MAX_INDIVIDUAL_VARIANCE=.7,Ge.START_END_PATTERN=Int32Array.from([1,1,1]),Ge.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ge.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ge.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class qn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),l=qn.parseExtensionString(s),u=[new ie((n[0]+n[1])/2,e),new ie(i,e)],d=new Ct(s,null,0,u,le.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],l=0;for(let d=0;d<5&&s<i;d++){let x=Ge.decodeDigit(e,r,s,Ge.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)s+=p;x>=10&&(l|=1<<4-d),d!==4&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==5)throw new v;let u=this.determineCheckDigit(l);if(qn.extensionChecksum(n.toString())!==u)throw new v;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new v}static parseExtensionString(e){if(e.length!==5)return null;let t=qn.parseExtension5String(e);return t==null?null:new Map([[rt.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,s=i<10?"0"+i:i.toString();return t+r+"."+s}}class ei{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),l=ei.parseExtensionString(s),u=[new ie((n[0]+n[1])/2,e),new ie(i,e)],d=new Ct(s,null,0,u,le.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],l=0;for(let u=0;u<2&&s<i;u++){let d=Ge.decodeDigit(e,r,s,Ge.L_AND_G_PATTERNS);n+=String.fromCharCode(48+d%10);for(let x of r)s+=x;d>=10&&(l|=1<<1-u),u!==1&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==2)throw new v;if(parseInt(n.toString())%4!==l)throw new v;return s}static parseExtensionString(e){return e.length!==2?null:new Map([[rt.ISSUE_NUMBER,parseInt(e)]])}}class rs{static decodeRow(e,t,n){let r=Ge.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new qn().decodeRow(e,t,r)}catch{return new ei().decodeRow(e,t,r)}}}rs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Oe extends Ge{constructor(){super(),this.decodeRowStringBuffer="",Oe.L_AND_G_PATTERNS=Oe.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Oe.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Oe.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Oe.findStartGuardPattern(t),i=n==null?null:n.get(K.NEED_RESULT_POINT_CALLBACK);if(i!=null){const V=new ie((r[0]+r[1])/2,e);i.foundPossibleResultPoint(V)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),l=s.rowOffset,u=s.resultString;if(i!=null){const V=new ie(l,e);i.foundPossibleResultPoint(V)}let d=this.decodeEnd(t,l);if(i!=null){const V=new ie((d[0]+d[1])/2,e);i.foundPossibleResultPoint(V)}let x=d[1],p=x+(x-d[0]);if(p>=t.getSize()||!t.isRange(x,p,!1))throw new v;let E=u.toString();if(E.length<8)throw new F;if(!Oe.checkChecksum(E))throw new k;let b=(r[1]+r[0])/2,N=(d[1]+d[0])/2,_=this.getBarcodeFormat(),O=[new ie(b,e),new ie(N,e)],D=new Ct(E,null,0,O,_,new Date().getTime()),z=0;try{let V=rs.decodeRow(e,t,d[1]);D.putMetadata(rt.UPC_EAN_EXTENSION,V.getText()),D.putAllMetadata(V.getResultMetadata()),D.addResultPoints(V.getResultPoints()),z=V.getText().length}catch{}let W=n==null?null:n.get(K.ALLOWED_EAN_EXTENSIONS);if(W!=null){let V=!1;for(let me in W)if(z.toString()===me){V=!0;break}if(!V)throw new v}return D}decodeEnd(e,t){return Oe.findGuardPattern(e,t,!1,Oe.START_END_PATTERN,new Int32Array(Oe.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Oe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Oe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new F;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new F;n+=i}return(1e3-n)%10}}class Cn extends Oe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],l=0;for(let d=0;d<6&&s<i;d++){let x=Oe.decodeDigit(e,r,s,Oe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)s+=p;x>=10&&(l|=1<<5-d)}n=Cn.determineFirstDigit(n,l),s=Oe.findGuardPattern(e,s,!0,Oe.MIDDLE_PATTERN,new Int32Array(Oe.MIDDLE_PATTERN.length).fill(0))[1];for(let d=0;d<6&&s<i;d++){let x=Oe.decodeDigit(e,r,s,Oe.L_PATTERNS);n+=String.fromCharCode(48+x);for(let p of r)s+=p}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new v}}Cn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class is extends Oe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let u=0;u<4&&s<i;u++){let d=Oe.decodeDigit(e,r,s,Oe.L_PATTERNS);n+=String.fromCharCode(48+d);for(let x of r)s+=x}s=Oe.findGuardPattern(e,s,!0,Oe.MIDDLE_PATTERN,new Int32Array(Oe.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<4&&s<i;u++){let d=Oe.decodeDigit(e,r,s,Oe.L_PATTERNS);n+=String.fromCharCode(48+d);for(let x of r)s+=x}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return le.EAN_8}}class ss extends Oe{constructor(){super(...arguments),this.ean13Reader=new Cn}getBarcodeFormat(){return le.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new Ct(t.substring(1),null,null,e.getResultPoints(),le.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new v}reset(){this.ean13Reader.reset()}}class Ht extends Oe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(d=>d);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],l=0;for(let d=0;d<6&&s<i;d++){const x=Ht.decodeDigit(e,r,s,Ht.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)s+=p;x>=10&&(l|=1<<5-d)}let u=Ht.determineNumSysAndCheckDigit(n,l);return{rowOffset:s,resultString:u}}decodeEnd(e,t){return Ht.findGuardPatternWithoutCounters(e,t,!0,Ht.MIDDLE_END_PATTERN)}checkChecksum(e){return Oe.checkChecksum(Ht.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode(48+n),s=String.fromCharCode(48+r);return i+e+s}throw v.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new J;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Ht.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ht.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ti extends Je{constructor(e){super();let t=e==null?null:e.get(K.POSSIBLE_FORMATS),n=[];f(t)?(n.push(new Cn),n.push(new ss),n.push(new is),n.push(new Ht)):(t.indexOf(le.EAN_13)>-1&&n.push(new Cn),t.indexOf(le.UPC_A)>-1&&n.push(new ss),t.indexOf(le.EAN_8)>-1&&n.push(new is),t.indexOf(le.UPC_E)>-1&&n.push(new Ht)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===le.EAN_13&&i.getText().charAt(0)==="0",l=n==null?null:n.get(K.POSSIBLE_FORMATS),u=l==null||l.includes(le.UPC_A);if(s&&u){const d=i.getRawBytes(),x=new Ct(i.getText().substring(1),d,d?d.length:null,i.getResultPoints(),le.UPC_A);return x.putAllMetadata(i.getResultMetadata()),x}return i}catch{}throw new v}reset(){for(let e of this.readers)e.reset()}}class dt extends Je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(Je.patternMatchVariance(e,t[n],dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return n;throw new v}static count(e){return be.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=dt.MIN_FINDER_PATTERN_RATIO&&r<=dt.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let l of e)l>s&&(s=l),l<i&&(i=l);return s<10*i}return!1}}dt.MAX_AVG_VARIANCE=.2,dt.MAX_INDIVIDUAL_VARIANCE=.45,dt.MIN_FINDER_PATTERN_RATIO=9.5/12,dt.MAX_FINDER_PATTERN_RATIO=12.5/14;class On{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof On))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ir{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ie(n,i)),this.resultPoints.push(new ie(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ir))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Xt{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let u of e)r+=u;let i=0,s=0,l=e.length;for(let u=0;u<l-1;u++){let d;for(d=1,s|=1<<u;d<e[u];d++,s&=~(1<<u)){let x=Xt.combins(r-d-1,l-u-2);if(n&&s===0&&r-d-(l-u-1)>=l-u-1&&(x-=Xt.combins(r-d-(l-u),l-u-2)),l-u-1>1){let p=0;for(let E=r-d-(l-u-2);E>t;E--)p+=Xt.combins(r-d-E-1,l-u-3);x-=p*(l-1-u)}else r-d>t&&x--;i+=x}r-=d}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let l=e;l>n;l--)i*=l,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class Ho{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new ne(n),i=0,l=e[0].getRightChar().getValue();for(let u=11;u>=0;--u)l&1<<u&&r.set(i),i++;for(let u=1;u<e.length;++u){let d=e[u],x=d.getLeftChar().getValue();for(let p=11;p>=0;--p)x&1<<p&&r.set(i),i++;if(d.getRightChar()!=null){let p=d.getRightChar().getValue();for(let E=11;E>=0;--E)p&1<<E&&r.set(i),i++}}return r}}class pn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ni{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class It extends ni{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===It.FNC1}}It.FNC1="$";class mn extends ni{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Lt extends ni{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new F;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Lt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Lt.FNC1}isAnyFNC1(){return this.firstDigit===Lt.FNC1||this.secondDigit===Lt.FNC1}}Lt.FNC1=10;class ee{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new v;let t=e.substring(0,2);for(let i of ee.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(2,i[2],e):ee.processFixedAI(2,i[1],e);if(e.length<3)throw new v;let n=e.substring(0,3);for(let i of ee.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(3,i[2],e):ee.processFixedAI(3,i[1],e);for(let i of ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,i[2],e):ee.processFixedAI(4,i[1],e);if(e.length<4)throw new v;let r=e.substring(0,4);for(let i of ee.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,i[2],e):ee.processFixedAI(4,i[1],e);throw new v}static processFixedAI(e,t,n){if(n.length<e)throw new v;let r=n.substring(0,e);if(n.length<e+t)throw new v;let i=n.substring(e,e+t),s=n.substring(e+t),l="("+r+")"+i,u=ee.parseFieldsInGeneralPurpose(s);return u==null?l:l+u}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let s=n.substring(e,i),l=n.substring(i),u="("+r+")"+s,d=ee.parseFieldsInGeneralPurpose(l);return d==null?u:u+d}}ee.VARIABLE_LENGTH=[],ee.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ee.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ee.VARIABLE_LENGTH,20],["22",ee.VARIABLE_LENGTH,29],["30",ee.VARIABLE_LENGTH,8],["37",ee.VARIABLE_LENGTH,8],["90",ee.VARIABLE_LENGTH,30],["91",ee.VARIABLE_LENGTH,30],["92",ee.VARIABLE_LENGTH,30],["93",ee.VARIABLE_LENGTH,30],["94",ee.VARIABLE_LENGTH,30],["95",ee.VARIABLE_LENGTH,30],["96",ee.VARIABLE_LENGTH,30],["97",ee.VARIABLE_LENGTH,3],["98",ee.VARIABLE_LENGTH,30],["99",ee.VARIABLE_LENGTH,30]],ee.THREE_DIGIT_DATA_LENGTH=[["240",ee.VARIABLE_LENGTH,30],["241",ee.VARIABLE_LENGTH,30],["242",ee.VARIABLE_LENGTH,6],["250",ee.VARIABLE_LENGTH,30],["251",ee.VARIABLE_LENGTH,30],["253",ee.VARIABLE_LENGTH,17],["254",ee.VARIABLE_LENGTH,20],["400",ee.VARIABLE_LENGTH,30],["401",ee.VARIABLE_LENGTH,30],["402",17],["403",ee.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ee.VARIABLE_LENGTH,20],["421",ee.VARIABLE_LENGTH,15],["422",3],["423",ee.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ee.VARIABLE_LENGTH,15],["391",ee.VARIABLE_LENGTH,18],["392",ee.VARIABLE_LENGTH,15],["393",ee.VARIABLE_LENGTH,18],["703",ee.VARIABLE_LENGTH,30]],ee.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ee.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ee.VARIABLE_LENGTH,20],["8003",ee.VARIABLE_LENGTH,30],["8004",ee.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ee.VARIABLE_LENGTH,30],["8008",ee.VARIABLE_LENGTH,12],["8018",18],["8020",ee.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ee.VARIABLE_LENGTH,70],["8200",ee.VARIABLE_LENGTH,70]];class Mn{constructor(e){this.buffer=new J,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),s=ee.parseFieldsInGeneralPurpose(i.getNewString());if(s!=null&&e.append(s),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new Lt(this.information.getSize(),Lt.FNC1,Lt.FNC1):new Lt(this.information.getSize(),i-1,Lt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new Lt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return Mn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new mn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new mn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new mn(this.current.getPosition(),this.buffer.toString()):t=new mn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new pn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new mn(this.current.getPosition(),this.buffer.toString());return new pn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new pn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new mn(this.current.getPosition(),this.buffer.toString());return new pn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new pn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new mn(this.current.getPosition(),this.buffer.toString());return new pn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new pn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new It(e+5,It.FNC1);if(t>=5&&t<15)return new It(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new It(e+7,""+(n+1));if(n>=90&&n<116)return new It(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new F}return new It(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new It(e+5,It.FNC1);if(t>=5&&t<15)return new It(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new It(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Yt("Decoding invalid alphanumeric value: "+n)}return new It(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class ri{constructor(e){this.information=e,this.generalDecoder=new Mn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class bt extends ri{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}bt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-48;n+=r&1?i:3*i}n=10-n%10,n===10&&(n=0),e.append(n)}}bt.GTIN_SIZE=40;class Rn extends bt{constructor(e){super(e)}parseInformation(){let e=new J;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Rn.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Rn.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Rn.HEADER_SIZE+44)}}Rn.HEADER_SIZE=4;class br extends ri{constructor(e){super(e)}parseInformation(){let e=new J;return this.getGeneralDecoder().decodeAllCodes(e,br.HEADER_SIZE)}}br.HEADER_SIZE=5;class Sr extends bt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let l=0;l<5;++l)i/s===0&&e.append("0"),s/=10;e.append(i)}}class Zt extends Sr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Zt.HEADER_SIZE+Sr.GTIN_SIZE+Zt.WEIGHT_SIZE)throw new v;let e=new J;return this.encodeCompressedGtin(e,Zt.HEADER_SIZE),this.encodeCompressedWeight(e,Zt.HEADER_SIZE+Sr.GTIN_SIZE,Zt.WEIGHT_SIZE),e.toString()}}Zt.HEADER_SIZE=5,Zt.WEIGHT_SIZE=15;class jo extends Zt{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class zo extends Zt{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Qt extends bt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Qt.HEADER_SIZE+bt.GTIN_SIZE)throw new v;let e=new J;this.encodeCompressedGtin(e,Qt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Qt.HEADER_SIZE+bt.GTIN_SIZE,Qt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Qt.HEADER_SIZE+bt.GTIN_SIZE+Qt.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Qt.HEADER_SIZE=8,Qt.LAST_DIGIT_SIZE=2;class mt extends bt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<mt.HEADER_SIZE+bt.GTIN_SIZE)throw new v;let e=new J;this.encodeCompressedGtin(e,mt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(mt.HEADER_SIZE+bt.GTIN_SIZE,mt.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(mt.HEADER_SIZE+bt.GTIN_SIZE+mt.LAST_DIGIT_SIZE,mt.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(mt.HEADER_SIZE+bt.GTIN_SIZE+mt.LAST_DIGIT_SIZE+mt.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}mt.HEADER_SIZE=8,mt.LAST_DIGIT_SIZE=2,mt.FIRST_THREE_DIGITS_SIZE=10;class ze extends Sr{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=ze.HEADER_SIZE+ze.GTIN_SIZE+ze.WEIGHT_SIZE+ze.DATE_SIZE)throw new v;let e=new J;return this.encodeCompressedGtin(e,ze.HEADER_SIZE),this.encodeCompressedWeight(e,ze.HEADER_SIZE+ze.GTIN_SIZE,ze.WEIGHT_SIZE),this.encodeCompressedDate(e,ze.HEADER_SIZE+ze.GTIN_SIZE+ze.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,ze.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}ze.HEADER_SIZE=8,ze.WEIGHT_SIZE=20,ze.DATE_SIZE=16;function os(C){try{if(C.get(1))return new Rn(C);if(!C.get(2))return new br(C);switch(Mn.extractNumericValueFromBitArray(C,1,4)){case 4:return new jo(C);case 5:return new zo(C)}switch(Mn.extractNumericValueFromBitArray(C,1,5)){case 12:return new Qt(C);case 13:return new mt(C)}switch(Mn.extractNumericValueFromBitArray(C,1,7)){case 56:return new ze(C,"310","11");case 57:return new ze(C,"320","11");case 58:return new ze(C,"310","13");case 59:return new ze(C,"320","13");case 60:return new ze(C,"310","15");case 61:return new ze(C,"320","15");case 62:return new ze(C,"310","17");case 63:return new ze(C,"320","17")}}catch(e){throw console.log(e),new Yt("unknown decoder: "+C)}}class cn{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof cn?cn.equalsOrNull(e.leftchar,t.leftchar)&&cn.equalsOrNull(e.rightchar,t.rightchar)&&cn.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:cn.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ii{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof ii?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(s=>{r.getLeftChar().getValue()===s.getLeftChar().getValue()&&r.getRightChar().getValue()===s.getRightChar().getValue()&&r.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}}class P extends dt{constructor(e){super(...arguments),this.pairs=new Array(P.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return P.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,P.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof v){if(!this.pairs.length)throw new v;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new v}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(r.getPairs()),!P.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(s){this.verbose&&console.log(s)}}throw new v}static isValidSequence(e){for(let t of P.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let s=this.rows[n];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}r=s.isEquivalent(this.pairs),n++}i||r||P.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new ii(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(cn.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let s=!1;for(let l of n.getPairs())if(i.equals(l)){s=!0;break}if(!s){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Ho.buildBitArray(e),r=os(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),l=[i[0],i[1],s[0],s[1]];return new Ct(r,null,null,l,le.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let l=1;l<this.pairs.size();++l){let u=this.pairs.get(l);r+=u.getLeftChar().getChecksumPortion(),i++;let d=u.getRightChar();d!=null&&(r+=d.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,s=!0,l=-1;do this.findNextPair(e,t,l),i=this.parseFoundFinderPattern(e,n,r),i==null?l=P.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let u=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new v;let d;try{d=this.decodeDataCharacter(e,i,r,!1)}catch(x){d=null,this.verbose&&console.log(x)}return new cn(u,d,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s;n>=0?s=n:this.isEmptyPair(t)?s=0:s=t[t.length-1].getFinderPattern().getStartEnd()[1];let l=t.length%2!=0;this.startFromEven&&(l=!l);let u=!1;for(;s<i&&(u=!e.get(s),!!u);)s++;let d=0,x=s;for(let p=s;p<i;p++)if(e.get(p)!=u)r[d]++;else{if(d==3){if(l&&P.reverseCounters(r),P.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=p;return}l&&P.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,d--}else d++;r[d]=1,u=!u}throw new v}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let d=this.startEnd[0]-1;for(;d>=0&&!e.get(d);)d--;d++,r=this.startEnd[0]-d,i=d,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let l=this.getDecodeFinderCounters();B.arraycopy(l,0,l,1,l.length-1),l[0]=r;let u;try{u=this.parseFinderValue(l,P.FINDER_PATTERNS)}catch{return null}return new Ir(u,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let ke=0;ke<i.length;ke++)i[ke]=0;if(r)P.recordPatternInReverse(e,t.getStartEnd()[0],i);else{P.recordPattern(e,t.getStartEnd()[1],i);for(let ke=0,ht=i.length-1;ke<ht;ke++,ht--){let Ot=i[ke];i[ke]=i[ht],i[ht]=Ot}}let s=17,l=be.sum(new Int32Array(i))/s,u=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(l-u)/u>.3)throw new v;let d=this.getOddCounts(),x=this.getEvenCounts(),p=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ke=0;ke<i.length;ke++){let ht=1*i[ke]/l,Ot=ht+.5;if(Ot<1){if(ht<.3)throw new v;Ot=1}else if(Ot>8){if(ht>8.7)throw new v;Ot=8}let Pn=ke/2;ke&1?(x[Pn]=Ot,E[Pn]=ht-Ot):(d[Pn]=Ot,p[Pn]=ht-Ot)}this.adjustOddEvenCounts(s);let b=4*t.getValue()+(n?0:2)+(r?0:1)-1,N=0,_=0;for(let ke=d.length-1;ke>=0;ke--){if(P.isNotA1left(t,n,r)){let ht=P.WEIGHTS[b][2*ke];_+=d[ke]*ht}N+=d[ke]}let O=0;for(let ke=x.length-1;ke>=0;ke--)if(P.isNotA1left(t,n,r)){let ht=P.WEIGHTS[b][2*ke+1];O+=x[ke]*ht}let D=_+O;if(N&1||N>13||N<4)throw new v;let z=(13-N)/2,W=P.SYMBOL_WIDEST[z],V=9-W,me=Xt.getRSSvalue(d,W,!0),xe=Xt.getRSSvalue(x,V,!1),Tt=P.EVEN_TOTAL_SUBSET[z],jt=P.GSUM[z],Nt=me*Tt+xe+jt;return new On(Nt,D)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=be.sum(new Int32Array(this.getOddCounts())),n=be.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,l=!1;n>13?l=!0:n<4&&(s=!0);let u=t+n-e,d=(t&1)==1,x=(n&1)==0;if(u==1)if(d){if(x)throw new v;i=!0}else{if(!x)throw new v;l=!0}else if(u==-1)if(d){if(x)throw new v;r=!0}else{if(!x)throw new v;s=!0}else if(u==0){if(d){if(!x)throw new v;t<n?(r=!0,l=!0):(i=!0,s=!0)}else if(x)throw new v}else throw new v;if(r){if(i)throw new v;P.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&P.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new v;P.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&P.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}P.SYMBOL_WIDEST=[7,5,4,3,1],P.EVEN_TOTAL_SUBSET=[4,20,52,104,204],P.GSUM=[0,348,1388,2948,3988],P.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],P.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],P.FINDER_PAT_A=0,P.FINDER_PAT_B=1,P.FINDER_PAT_C=2,P.FINDER_PAT_D=3,P.FINDER_PAT_E=4,P.FINDER_PAT_F=5,P.FINDER_PATTERN_SEQUENCES=[[P.FINDER_PAT_A,P.FINDER_PAT_A],[P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B],[P.FINDER_PAT_A,P.FINDER_PAT_C,P.FINDER_PAT_B,P.FINDER_PAT_D],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_C],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_D,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_D],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_E],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F]],P.MAX_PAIRS=11;class Wo extends On{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ye extends dt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);Ye.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);Ye.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1){for(let l of this.possibleRightPairs)if(l.getCount()>1&&Ye.checkChecksum(s,l))return Ye.constructResult(s,l)}throw new v}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new J;for(let d=13-r.length;d>0;d--)i.append("0");i.append(r);let s=0;for(let d=0;d<13;d++){let x=i.charAt(d).charCodeAt(0)-48;s+=d&1?x:3*x}s=10-s%10,s===10&&(s=0),i.append(s.toString());let l=e.getFinderPattern().getResultPoints(),u=t.getFinderPattern().getResultPoints();return new Ct(i.toString(),null,0,[l[0],l[1],u[0],u[1]],le.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),l=r==null?null:r.get(K.NEED_RESULT_POINT_CALLBACK);if(l!=null){let x=(i[0]+i[1])/2;t&&(x=e.getSize()-1-x),l.foundPossibleResultPoint(new ie(x,n))}let u=this.decodeDataCharacter(e,s,!0),d=this.decodeDataCharacter(e,s,!1);return new Wo(1597*u.getValue()+d.getValue(),u.getChecksumPortion()+4*d.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let O=0;O<r.length;O++)r[O]=0;if(n)Je.recordPatternInReverse(e,t.getStartEnd()[0],r);else{Je.recordPattern(e,t.getStartEnd()[1]+1,r);for(let O=0,D=r.length-1;O<D;O++,D--){let z=r[O];r[O]=r[D],r[D]=z}}let i=n?16:15,s=be.sum(new Int32Array(r))/i,l=this.getOddCounts(),u=this.getEvenCounts(),d=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let O=0;O<r.length;O++){let D=r[O]/s,z=Math.floor(D+.5);z<1?z=1:z>8&&(z=8);let W=Math.floor(O/2);O&1?(u[W]=z,x[W]=D-z):(l[W]=z,d[W]=D-z)}this.adjustOddEvenCounts(n,i);let p=0,E=0;for(let O=l.length-1;O>=0;O--)E*=9,E+=l[O],p+=l[O];let b=0,N=0;for(let O=u.length-1;O>=0;O--)b*=9,b+=u[O],N+=u[O];let _=E+3*b;if(n){if(p&1||p>12||p<4)throw new v;let O=(12-p)/2,D=Ye.OUTSIDE_ODD_WIDEST[O],z=9-D,W=Xt.getRSSvalue(l,D,!1),V=Xt.getRSSvalue(u,z,!0),me=Ye.OUTSIDE_EVEN_TOTAL_SUBSET[O],xe=Ye.OUTSIDE_GSUM[O];return new On(W*me+V+xe,_)}else{if(N&1||N>10||N<4)throw new v;let O=(10-N)/2,D=Ye.INSIDE_ODD_WIDEST[O],z=9-D,W=Xt.getRSSvalue(l,D,!0),V=Xt.getRSSvalue(u,z,!1),me=Ye.INSIDE_ODD_TOTAL_SUBSET[O],xe=Ye.INSIDE_GSUM[O];return new On(V*me+W+xe,_)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let l=0,u=s;for(let d=s;d<r;d++)if(e.get(d)!==i)n[l]++;else{if(l===3){if(dt.isFinderPattern(n))return[u,d];u+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,i=!i}throw new v}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const l=r[0]-s,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);B.arraycopy(u,0,d,1,u.length-1),d[0]=l;const x=this.parseFinderValue(d,Ye.FINDER_PATTERNS);let p=s,E=r[1];return n&&(p=e.getSize()-1-p,E=e.getSize()-1-E),new Ir(x,[s,r[1]],p,E,t)}adjustOddEvenCounts(e,t){let n=be.sum(new Int32Array(this.getOddCounts())),r=be.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,l=!1,u=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?u=!0:r<4&&(l=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?u=!0:r<4&&(l=!0));let d=n+r-t,x=(n&1)===(e?1:0),p=(r&1)===1;if(d===1)if(x){if(p)throw new v;s=!0}else{if(!p)throw new v;u=!0}else if(d===-1)if(x){if(p)throw new v;i=!0}else{if(!p)throw new v;l=!0}else if(d===0){if(x){if(!p)throw new v;n<r?(i=!0,u=!0):(s=!0,l=!0)}else if(p)throw new v}else throw new v;if(i){if(s)throw new v;dt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&dt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new v;dt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&dt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ye.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ye.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ye.OUTSIDE_GSUM=[0,161,961,2015,2715],Ye.INSIDE_GSUM=[0,336,1036,1516],Ye.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ye.INSIDE_ODD_WIDEST=[2,4,6,8],Ye.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Dn extends Je{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(K.POSSIBLE_FORMATS):null,r=e&&e.get(K.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(le.EAN_13)||n.includes(le.UPC_A)||n.includes(le.EAN_8)||n.includes(le.UPC_E))&&this.readers.push(new ti(e)),n.includes(le.CODE_39)&&this.readers.push(new et(r)),n.includes(le.CODE_128)&&this.readers.push(new Y),n.includes(le.ITF)&&this.readers.push(new Be),n.includes(le.RSS_14)&&this.readers.push(new Ye),n.includes(le.RSS_EXPANDED)&&this.readers.push(new P(this.verbose))):(this.readers.push(new ti(e)),this.readers.push(new et),this.readers.push(new ti(e)),this.readers.push(new Y),this.readers.push(new Be),this.readers.push(new Ye),this.readers.push(new P(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new v}reset(){this.readers.forEach(e=>e.reset())}}class Go extends Gt{constructor(e=500,t){super(new Dn(t),e,t)}}class De{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Me{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ee{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let l=0;const u=s.getECCodewords(),d=s.getECBlocks();for(let x of d)l+=x.getCount()*(x.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new F;for(let n of Ee.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Ee(1,10,10,8,8,new De(5,new Me(1,3))),new Ee(2,12,12,10,10,new De(7,new Me(1,5))),new Ee(3,14,14,12,12,new De(10,new Me(1,8))),new Ee(4,16,16,14,14,new De(12,new Me(1,12))),new Ee(5,18,18,16,16,new De(14,new Me(1,18))),new Ee(6,20,20,18,18,new De(18,new Me(1,22))),new Ee(7,22,22,20,20,new De(20,new Me(1,30))),new Ee(8,24,24,22,22,new De(24,new Me(1,36))),new Ee(9,26,26,24,24,new De(28,new Me(1,44))),new Ee(10,32,32,14,14,new De(36,new Me(1,62))),new Ee(11,36,36,16,16,new De(42,new Me(1,86))),new Ee(12,40,40,18,18,new De(48,new Me(1,114))),new Ee(13,44,44,20,20,new De(56,new Me(1,144))),new Ee(14,48,48,22,22,new De(68,new Me(1,174))),new Ee(15,52,52,24,24,new De(42,new Me(2,102))),new Ee(16,64,64,14,14,new De(56,new Me(2,140))),new Ee(17,72,72,16,16,new De(36,new Me(4,92))),new Ee(18,80,80,18,18,new De(48,new Me(4,114))),new Ee(19,88,88,20,20,new De(56,new Me(4,144))),new Ee(20,96,96,22,22,new De(68,new Me(4,174))),new Ee(21,104,104,24,24,new De(56,new Me(6,136))),new Ee(22,120,120,18,18,new De(68,new Me(6,175))),new Ee(23,132,132,20,20,new De(62,new Me(8,163))),new Ee(24,144,144,22,22,new De(62,new Me(8,156),new Me(2,155))),new Ee(25,8,18,6,16,new De(7,new Me(1,5))),new Ee(26,8,32,6,14,new De(11,new Me(1,10))),new Ee(27,12,26,10,24,new De(14,new Me(1,16))),new Ee(28,12,36,10,16,new De(18,new Me(1,22))),new Ee(29,16,36,14,16,new De(24,new Me(1,32))),new Ee(30,16,48,14,22,new De(28,new Me(1,49)))]}}Ee.VERSIONS=Ee.buildVersions();class si{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new F;this.version=si.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return Ee.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let l=!1,u=!1,d=!1,x=!1;do if(n===i&&r===0&&!l)e[t++]=this.readCorner1(i,s)&255,n-=2,r+=2,l=!0;else if(n===i-2&&r===0&&s&3&&!u)e[t++]=this.readCorner2(i,s)&255,n-=2,r+=2,u=!0;else if(n===i+4&&r===2&&!(s&7)&&!d)e[t++]=this.readCorner3(i,s)&255,n-=2,r+=2,d=!0;else if(n===i-2&&r===0&&(s&7)===4&&!x)e[t++]=this.readCorner4(i,s)&255,n-=2,r+=2,x=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n-=2,r+=2;while(n>=0&&r<s);n+=1,r+=3;do n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new F;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new T("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,l=n/i|0,u=s*r,d=l*i,x=new fe(d,u);for(let p=0;p<s;++p){const E=p*r;for(let b=0;b<l;++b){const N=b*i;for(let _=0;_<r;++_){const O=p*(r+2)+1+_,D=E+_;for(let z=0;z<i;++z){const W=b*(i+2)+1+z;if(e.get(W,O)){const V=N+z;x.set(V,D)}}}}}return x}}class oi{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let _ of i)r+=_.getCount();const s=new Array(r);let l=0;for(let _ of i)for(let O=0;O<_.getCount();O++){const D=_.getDataCodewords(),z=n.getECCodewords()+D;s[l++]=new oi(D,new Uint8Array(z))}const d=s[0].codewords.length-n.getECCodewords(),x=d-1;let p=0;for(let _=0;_<x;_++)for(let O=0;O<l;O++)s[O].codewords[_]=e[p++];const E=t.getVersionNumber()===24,b=E?8:l;for(let _=0;_<b;_++)s[_].codewords[d-1]=e[p++];const N=s[0].codewords.length;for(let _=d;_<N;_++)for(let O=0;O<l;O++){const D=E?(O+8)%l:O,z=E&&D>7?_-1:_;s[D].codewords[z]=e[p++]}if(p!==e.length)throw new T;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ai{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,l=e<s?e:s,u=s-l,d=255>>8-l<<u;t=(i[r]&d)>>u,e-=l,n+=l,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){const s=8-e,l=255>>s<<s;t=t<<e|(i[r]&l)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var tt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(tt||(tt={}));class un{static decode(e){const t=new ai(e),n=new J,r=new J,i=new Array;let s=tt.ASCII_ENCODE;do if(s===tt.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case tt.C40_ENCODE:this.decodeC40Segment(t,n);break;case tt.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case tt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case tt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case tt.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new F}s=tt.ASCII_ENCODE}while(s!==tt.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Xn(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new F;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),tt.ASCII_ENCODE;if(i===129)return tt.PAD_ENCODE;if(i<=229){const s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return tt.C40_ENCODE;case 231:return tt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return tt.ANSIX12_ENCODE;case 239:return tt.TEXT_ENCODE;case 240:return tt.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new F;break}}while(e.available()>0);return tt.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let l=0;l<3;l++){const u=r[l];switch(i){case 0:if(u<3)i=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){const d=this.C40_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else throw new F;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){const d=this.C40_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new F}i=0;break;case 3:n?(t.append(String.fromCharCode(u+224)),n=!1):t.append(String.fromCharCode(u+96)),i=0;break;default:throw new F}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let l=0;l<3;l++){const u=r[l];switch(i){case 0:if(u<3)i=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){const d=this.TEXT_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else throw new F;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){const d=this.TEXT_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new F}i=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){const d=this.TEXT_SHIFT3_SET_CHARS[u];n?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):t.append(d),i=0}else throw new F;break;default:throw new F}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const s=n[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new F;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}r&32||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(i===0?s=e.available()/8|0:i<250?s=i:s=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new F;const l=new Uint8Array(s);for(let u=0;u<s;u++){if(e.available()<8)throw new F;l[u]=this.unrandomize255State(e.readBits(8),r++)}n.push(l);try{t.append(we.decode(l,q.ISO88591))}catch(u){throw new Yt("Platform does not support required encoding: "+u.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}un.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],un.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],un.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],un.TEXT_SHIFT2_SET_CHARS=un.C40_SHIFT2_SET_CHARS,un.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Yo{constructor(){this.rsDecoder=new Qn(_e.DATA_MATRIX_FIELD_256)}decode(e){const t=new si(e),n=t.getVersion(),r=t.readCodewords(),i=oi.getDataBlocks(r,n);let s=0;for(let d of i)s+=d.getNumDataCodewords();const l=new Uint8Array(s),u=i.length;for(let d=0;d<u;d++){const x=i[d],p=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(p,E);for(let b=0;b<E;b++)l[b*u+d]=p[b]}return un.decode(l)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new k}for(let r=0;r<t;r++)e[r]=n[r]}}class qe{constructor(e){this.image=e,this.rectangleDetector=new nn(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new v;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let l=this.transitionsBetween(n,s)+1,u=this.transitionsBetween(i,s)+1;(l&1)===1&&(l+=1),(u&1)===1&&(u+=1),4*l<7*u&&4*u<7*l&&(l=u=Math.max(l,u));let d=qe.sampleGrid(this.image,n,r,i,s,l,u);return new Er(d,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new ie(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new ie(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),l=this.transitionsBetween(n,r),u=this.transitionsBetween(r,i),d=this.transitionsBetween(i,t),x=s,p=[i,t,n,r];return x>l&&(x=l,p[0]=t,p[1]=n,p[2]=r,p[3]=i),x>u&&(x=u,p[0]=n,p[1]=r,p[2]=i,p[3]=t),x>d&&(p[0]=r,p[1]=i,p[2]=t,p[3]=n),p}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),l=qe.shiftPoint(n,r,(s+1)*4),u=qe.shiftPoint(r,n,(s+1)*4),d=this.transitionsBetween(l,t),x=this.transitionsBetween(u,i);return d<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),l=this.transitionsBetween(n,i),u=qe.shiftPoint(t,n,(l+1)*4),d=qe.shiftPoint(r,n,(s+1)*4);s=this.transitionsBetween(u,i),l=this.transitionsBetween(d,i);let x=new ie(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),p=new ie(i.getX()+(t.getX()-n.getX())/(l+1),i.getY()+(t.getY()-n.getY())/(l+1));if(!this.isValid(x))return this.isValid(p)?p:null;if(!this.isValid(p))return x;let E=this.transitionsBetween(u,x)+this.transitionsBetween(d,x),b=this.transitionsBetween(u,p)+this.transitionsBetween(d,p);return E>b?x:p}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,l=this.transitionsBetween(r,i)+1,u=qe.shiftPoint(t,n,l*4),d=qe.shiftPoint(r,n,s*4);s=this.transitionsBetween(u,i)+1,l=this.transitionsBetween(d,i)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);let x=(t.getX()+n.getX()+r.getX()+i.getX())/4,p=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=qe.moveAway(t,x,p),n=qe.moveAway(n,x,p),r=qe.moveAway(r,x,p),i=qe.moveAway(i,x,p);let E,b;return u=qe.shiftPoint(t,n,l*4),u=qe.shiftPoint(u,i,s*4),E=qe.shiftPoint(n,t,l*4),E=qe.shiftPoint(E,r,s*4),d=qe.shiftPoint(r,i,l*4),d=qe.shiftPoint(d,n,s*4),b=qe.shiftPoint(i,r,l*4),b=qe.shiftPoint(b,t,s*4),[u,E,d,b]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,l){return ln.getInstance().sampleGrid(e,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.abs(s-r)>Math.abs(i-n);if(l){let _=n;n=r,r=_,_=i,i=s,s=_}let u=Math.abs(i-n),d=Math.abs(s-r),x=-u/2,p=r<s?1:-1,E=n<i?1:-1,b=0,N=this.image.get(l?r:n,l?n:r);for(let _=n,O=r;_!==i;_+=E){let D=this.image.get(l?O:_,l?_:O);if(D!==N&&(b++,N=D),x+=d,x>0){if(O===s)break;O+=p,x-=u}}return b}}class fn{constructor(){this.decoder=new Yo}decode(e,t=null){let n,r;if(t!=null&&t.has(K.PURE_BARCODE)){const d=fn.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(d),r=fn.NO_POINTS}else{const d=new qe(e.getBlackMatrix()).detect();n=this.decoder.decode(d.getBits()),r=d.getPoints()}const i=n.getRawBytes(),s=new Ct(n.getText(),i,8*i.length,r,le.DATA_MATRIX,B.currentTimeMillis()),l=n.getByteSegments();l!=null&&s.putMetadata(rt.BYTE_SEGMENTS,l);const u=n.getECLevel();return u!=null&&s.putMetadata(rt.ERROR_CORRECTION_LEVEL,u),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new v;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let l=t[0];const d=(n[0]-l+1)/r,x=(s-i+1)/r;if(d<=0||x<=0)throw new v;const p=r/2;i+=p,l+=p;const E=new fe(d,x);for(let b=0;b<x;b++){const N=i+b*r;for(let _=0;_<d;_++)e.get(l+_*r,N)&&E.set(_,b)}return E}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new v;const s=r-e[0];if(s===0)throw new v;return s}}fn.NO_POINTS=[];class Xo extends Gt{constructor(e=500){super(new fn,e)}}var vn;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(vn||(vn={}));class Ve{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Ve.FOR_BITS.set(n,this),Ve.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ve.L;case"M":return Ve.M;case"Q":return Ve.Q;case"H":return Ve.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ve))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Ve.FOR_BITS.size)throw new T;return Ve.FOR_BITS.get(e)}}Ve.FOR_BITS=new Map,Ve.FOR_VALUE=new Map,Ve.L=new Ve(vn.L,"L",1),Ve.M=new Ve(vn.M,"M",0),Ve.Q=new Ve(vn.Q,"Q",3),Ve.H=new Ve(vn.H,"H",2);class gt{constructor(e){this.errorCorrectionLevel=Ve.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return G.bitCount(e^t)}static decodeFormatInformation(e,t){const n=gt.doDecodeFormatInformation(e,t);return n!==null?n:gt.doDecodeFormatInformation(e^gt.FORMAT_INFO_MASK_QR,t^gt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of gt.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new gt(i[1]);let l=gt.numBitsDiffering(e,s);l<n&&(r=i[1],n=l),e!==t&&(l=gt.numBitsDiffering(t,s),l<n&&(r=i[1],n=l))}return n<=3?new gt(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof gt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}gt.FORMAT_INFO_MASK_QR=21522,gt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class M{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class se{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(const l of s)r+=l.getCount()*(l.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new F;try{return this.getVersionForNumber((e-17)/4)}catch{throw new F}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return se.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<se.VERSION_DECODE_INFO.length;r++){const i=se.VERSION_DECODE_INFO[r];if(i===e)return se.getVersionForNumber(r+7);const s=gt.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?se.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new fe(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)r===0&&(s===0||s===n-1)||r===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}se.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),se.VERSIONS=[new se(1,new Int32Array(0),new M(7,new I(1,19)),new M(10,new I(1,16)),new M(13,new I(1,13)),new M(17,new I(1,9))),new se(2,Int32Array.from([6,18]),new M(10,new I(1,34)),new M(16,new I(1,28)),new M(22,new I(1,22)),new M(28,new I(1,16))),new se(3,Int32Array.from([6,22]),new M(15,new I(1,55)),new M(26,new I(1,44)),new M(18,new I(2,17)),new M(22,new I(2,13))),new se(4,Int32Array.from([6,26]),new M(20,new I(1,80)),new M(18,new I(2,32)),new M(26,new I(2,24)),new M(16,new I(4,9))),new se(5,Int32Array.from([6,30]),new M(26,new I(1,108)),new M(24,new I(2,43)),new M(18,new I(2,15),new I(2,16)),new M(22,new I(2,11),new I(2,12))),new se(6,Int32Array.from([6,34]),new M(18,new I(2,68)),new M(16,new I(4,27)),new M(24,new I(4,19)),new M(28,new I(4,15))),new se(7,Int32Array.from([6,22,38]),new M(20,new I(2,78)),new M(18,new I(4,31)),new M(18,new I(2,14),new I(4,15)),new M(26,new I(4,13),new I(1,14))),new se(8,Int32Array.from([6,24,42]),new M(24,new I(2,97)),new M(22,new I(2,38),new I(2,39)),new M(22,new I(4,18),new I(2,19)),new M(26,new I(4,14),new I(2,15))),new se(9,Int32Array.from([6,26,46]),new M(30,new I(2,116)),new M(22,new I(3,36),new I(2,37)),new M(20,new I(4,16),new I(4,17)),new M(24,new I(4,12),new I(4,13))),new se(10,Int32Array.from([6,28,50]),new M(18,new I(2,68),new I(2,69)),new M(26,new I(4,43),new I(1,44)),new M(24,new I(6,19),new I(2,20)),new M(28,new I(6,15),new I(2,16))),new se(11,Int32Array.from([6,30,54]),new M(20,new I(4,81)),new M(30,new I(1,50),new I(4,51)),new M(28,new I(4,22),new I(4,23)),new M(24,new I(3,12),new I(8,13))),new se(12,Int32Array.from([6,32,58]),new M(24,new I(2,92),new I(2,93)),new M(22,new I(6,36),new I(2,37)),new M(26,new I(4,20),new I(6,21)),new M(28,new I(7,14),new I(4,15))),new se(13,Int32Array.from([6,34,62]),new M(26,new I(4,107)),new M(22,new I(8,37),new I(1,38)),new M(24,new I(8,20),new I(4,21)),new M(22,new I(12,11),new I(4,12))),new se(14,Int32Array.from([6,26,46,66]),new M(30,new I(3,115),new I(1,116)),new M(24,new I(4,40),new I(5,41)),new M(20,new I(11,16),new I(5,17)),new M(24,new I(11,12),new I(5,13))),new se(15,Int32Array.from([6,26,48,70]),new M(22,new I(5,87),new I(1,88)),new M(24,new I(5,41),new I(5,42)),new M(30,new I(5,24),new I(7,25)),new M(24,new I(11,12),new I(7,13))),new se(16,Int32Array.from([6,26,50,74]),new M(24,new I(5,98),new I(1,99)),new M(28,new I(7,45),new I(3,46)),new M(24,new I(15,19),new I(2,20)),new M(30,new I(3,15),new I(13,16))),new se(17,Int32Array.from([6,30,54,78]),new M(28,new I(1,107),new I(5,108)),new M(28,new I(10,46),new I(1,47)),new M(28,new I(1,22),new I(15,23)),new M(28,new I(2,14),new I(17,15))),new se(18,Int32Array.from([6,30,56,82]),new M(30,new I(5,120),new I(1,121)),new M(26,new I(9,43),new I(4,44)),new M(28,new I(17,22),new I(1,23)),new M(28,new I(2,14),new I(19,15))),new se(19,Int32Array.from([6,30,58,86]),new M(28,new I(3,113),new I(4,114)),new M(26,new I(3,44),new I(11,45)),new M(26,new I(17,21),new I(4,22)),new M(26,new I(9,13),new I(16,14))),new se(20,Int32Array.from([6,34,62,90]),new M(28,new I(3,107),new I(5,108)),new M(26,new I(3,41),new I(13,42)),new M(30,new I(15,24),new I(5,25)),new M(28,new I(15,15),new I(10,16))),new se(21,Int32Array.from([6,28,50,72,94]),new M(28,new I(4,116),new I(4,117)),new M(26,new I(17,42)),new M(28,new I(17,22),new I(6,23)),new M(30,new I(19,16),new I(6,17))),new se(22,Int32Array.from([6,26,50,74,98]),new M(28,new I(2,111),new I(7,112)),new M(28,new I(17,46)),new M(30,new I(7,24),new I(16,25)),new M(24,new I(34,13))),new se(23,Int32Array.from([6,30,54,78,102]),new M(30,new I(4,121),new I(5,122)),new M(28,new I(4,47),new I(14,48)),new M(30,new I(11,24),new I(14,25)),new M(30,new I(16,15),new I(14,16))),new se(24,Int32Array.from([6,28,54,80,106]),new M(30,new I(6,117),new I(4,118)),new M(28,new I(6,45),new I(14,46)),new M(30,new I(11,24),new I(16,25)),new M(30,new I(30,16),new I(2,17))),new se(25,Int32Array.from([6,32,58,84,110]),new M(26,new I(8,106),new I(4,107)),new M(28,new I(8,47),new I(13,48)),new M(30,new I(7,24),new I(22,25)),new M(30,new I(22,15),new I(13,16))),new se(26,Int32Array.from([6,30,58,86,114]),new M(28,new I(10,114),new I(2,115)),new M(28,new I(19,46),new I(4,47)),new M(28,new I(28,22),new I(6,23)),new M(30,new I(33,16),new I(4,17))),new se(27,Int32Array.from([6,34,62,90,118]),new M(30,new I(8,122),new I(4,123)),new M(28,new I(22,45),new I(3,46)),new M(30,new I(8,23),new I(26,24)),new M(30,new I(12,15),new I(28,16))),new se(28,Int32Array.from([6,26,50,74,98,122]),new M(30,new I(3,117),new I(10,118)),new M(28,new I(3,45),new I(23,46)),new M(30,new I(4,24),new I(31,25)),new M(30,new I(11,15),new I(31,16))),new se(29,Int32Array.from([6,30,54,78,102,126]),new M(30,new I(7,116),new I(7,117)),new M(28,new I(21,45),new I(7,46)),new M(30,new I(1,23),new I(37,24)),new M(30,new I(19,15),new I(26,16))),new se(30,Int32Array.from([6,26,52,78,104,130]),new M(30,new I(5,115),new I(10,116)),new M(28,new I(19,47),new I(10,48)),new M(30,new I(15,24),new I(25,25)),new M(30,new I(23,15),new I(25,16))),new se(31,Int32Array.from([6,30,56,82,108,134]),new M(30,new I(13,115),new I(3,116)),new M(28,new I(2,46),new I(29,47)),new M(30,new I(42,24),new I(1,25)),new M(30,new I(23,15),new I(28,16))),new se(32,Int32Array.from([6,34,60,86,112,138]),new M(30,new I(17,115)),new M(28,new I(10,46),new I(23,47)),new M(30,new I(10,24),new I(35,25)),new M(30,new I(19,15),new I(35,16))),new se(33,Int32Array.from([6,30,58,86,114,142]),new M(30,new I(17,115),new I(1,116)),new M(28,new I(14,46),new I(21,47)),new M(30,new I(29,24),new I(19,25)),new M(30,new I(11,15),new I(46,16))),new se(34,Int32Array.from([6,34,62,90,118,146]),new M(30,new I(13,115),new I(6,116)),new M(28,new I(14,46),new I(23,47)),new M(30,new I(44,24),new I(7,25)),new M(30,new I(59,16),new I(1,17))),new se(35,Int32Array.from([6,30,54,78,102,126,150]),new M(30,new I(12,121),new I(7,122)),new M(28,new I(12,47),new I(26,48)),new M(30,new I(39,24),new I(14,25)),new M(30,new I(22,15),new I(41,16))),new se(36,Int32Array.from([6,24,50,76,102,128,154]),new M(30,new I(6,121),new I(14,122)),new M(28,new I(6,47),new I(34,48)),new M(30,new I(46,24),new I(10,25)),new M(30,new I(2,15),new I(64,16))),new se(37,Int32Array.from([6,28,54,80,106,132,158]),new M(30,new I(17,122),new I(4,123)),new M(28,new I(29,46),new I(14,47)),new M(30,new I(49,24),new I(10,25)),new M(30,new I(24,15),new I(46,16))),new se(38,Int32Array.from([6,32,58,84,110,136,162]),new M(30,new I(4,122),new I(18,123)),new M(28,new I(13,46),new I(32,47)),new M(30,new I(48,24),new I(14,25)),new M(30,new I(42,15),new I(32,16))),new se(39,Int32Array.from([6,26,54,82,110,138,166]),new M(30,new I(20,117),new I(4,118)),new M(28,new I(40,47),new I(7,48)),new M(30,new I(43,24),new I(22,25)),new M(30,new I(10,15),new I(67,16))),new se(40,Int32Array.from([6,30,58,86,114,142,170]),new M(30,new I(19,118),new I(6,119)),new M(28,new I(18,47),new I(31,48)),new M(30,new I(34,24),new I(34,25)),new M(30,new I(20,15),new I(61,16)))];var it;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(it||(it={}));class Bt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Bt.values=new Map([[it.DATA_MASK_000,new Bt(it.DATA_MASK_000,(C,e)=>(C+e&1)===0)],[it.DATA_MASK_001,new Bt(it.DATA_MASK_001,(C,e)=>(C&1)===0)],[it.DATA_MASK_010,new Bt(it.DATA_MASK_010,(C,e)=>e%3===0)],[it.DATA_MASK_011,new Bt(it.DATA_MASK_011,(C,e)=>(C+e)%3===0)],[it.DATA_MASK_100,new Bt(it.DATA_MASK_100,(C,e)=>(Math.floor(C/2)+Math.floor(e/3)&1)===0)],[it.DATA_MASK_101,new Bt(it.DATA_MASK_101,(C,e)=>C*e%6===0)],[it.DATA_MASK_110,new Bt(it.DATA_MASK_110,(C,e)=>C*e%6<3)],[it.DATA_MASK_111,new Bt(it.DATA_MASK_111,(C,e)=>(C+e+C*e%3&1)===0)]]);class Zo{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new F;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=gt.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return se.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let l=e-9;l>=r;l--)n=this.copyBit(l,s,n);let i=se.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let l=e-9;l>=r;l--)n=this.copyBit(s,l,n);if(i=se.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new F}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Bt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const l=new Uint8Array(t.getTotalCodewords());let u=0,d=0,x=0;for(let p=r-1;p>0;p-=2){p===6&&p--;for(let E=0;E<r;E++){const b=s?r-1-E:E;for(let N=0;N<2;N++)i.get(p-N,b)||(x++,d<<=1,this.bitMatrix.get(p-N,b)&&(d|=1),x===8&&(l[u++]=d,x=0,d=0))}s=!s}if(u!==t.getTotalCodewords())throw new F;return l}remask(){if(this.parsedFormatInfo===null)return;const e=Bt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class li{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new T;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const N of s)i+=N.getCount();const l=new Array(i);let u=0;for(const N of s)for(let _=0;_<N.getCount();_++){const O=N.getDataCodewords(),D=r.getECCodewordsPerBlock()+O;l[u++]=new li(O,new Uint8Array(D))}const d=l[0].codewords.length;let x=l.length-1;for(;x>=0&&l[x].codewords.length!==d;)x--;x++;const p=d-r.getECCodewordsPerBlock();let E=0;for(let N=0;N<p;N++)for(let _=0;_<u;_++)l[_].codewords[N]=e[E++];for(let N=x;N<u;N++)l[N].codewords[p]=e[E++];const b=l[0].codewords.length;for(let N=p;N<b;N++)for(let _=0;_<u;_++){const O=_<x?N:N+1;l[_].codewords[O]=e[E++]}return l}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pt;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(Pt||(Pt={}));class ae{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,ae.FOR_BITS.set(r,this),ae.FOR_VALUE.set(e,this)}static forBits(e){const t=ae.FOR_BITS.get(e);if(t===void 0)throw new T;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof ae))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}ae.FOR_BITS=new Map,ae.FOR_VALUE=new Map,ae.TERMINATOR=new ae(Pt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ae.NUMERIC=new ae(Pt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ae.ALPHANUMERIC=new ae(Pt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ae.STRUCTURED_APPEND=new ae(Pt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ae.BYTE=new ae(Pt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ae.ECI=new ae(Pt.ECI,"ECI",Int32Array.from([0,0,0]),7),ae.KANJI=new ae(Pt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ae.FNC1_FIRST_POSITION=new ae(Pt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ae.FNC1_SECOND_POSITION=new ae(Pt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ae.HANZI=new ae(Pt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class We{static decode(e,t,n,r){const i=new ai(e);let s=new J;const l=new Array;let u=-1,d=-1;try{let x=null,p=!1,E;do{if(i.available()<4)E=ae.TERMINATOR;else{const b=i.readBits(4);E=ae.forBits(b)}switch(E){case ae.TERMINATOR:break;case ae.FNC1_FIRST_POSITION:case ae.FNC1_SECOND_POSITION:p=!0;break;case ae.STRUCTURED_APPEND:if(i.available()<16)throw new F;u=i.readBits(8),d=i.readBits(8);break;case ae.ECI:const b=We.parseECIValue(i);if(x=U.getCharacterSetECIByValue(b),x===null)throw new F;break;case ae.HANZI:const N=i.readBits(4),_=i.readBits(E.getCharacterCountBits(t));N===We.GB2312_SUBSET&&We.decodeHanziSegment(i,s,_);break;default:const O=i.readBits(E.getCharacterCountBits(t));switch(E){case ae.NUMERIC:We.decodeNumericSegment(i,s,O);break;case ae.ALPHANUMERIC:We.decodeAlphanumericSegment(i,s,O,p);break;case ae.BYTE:We.decodeByteSegment(i,s,O,x,l,r);break;case ae.KANJI:We.decodeKanjiSegment(i,s,O);break;default:throw new F}break}}while(E!==ae.TERMINATOR)}catch{throw new F}return new Xn(e,s.toString(),l.length===0?null:l,n===null?null:n.toString(),u,d)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new F;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,r[i]=l>>8&255,r[i+1]=l&255,i+=2,n--}try{t.append(we.decode(r,q.GB2312))}catch(s){throw new F(s)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new F;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,r[i]=l>>8,r[i+1]=l,i+=2,n--}try{t.append(we.decode(r,q.SHIFT_JIS))}catch(s){throw new F(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new F;const l=new Uint8Array(n);for(let d=0;d<n;d++)l[d]=e.readBits(8);let u;r===null?u=q.guessEncoding(l,s):u=r.getName();try{t.append(we.decode(l,u))}catch(d){throw new F(d)}i.push(l)}static toAlphaNumericChar(e){if(e>=We.ALPHANUMERIC_CHARS.length)throw new F;return We.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new F;const s=e.readBits(11);t.append(We.toAlphaNumericChar(Math.floor(s/45))),t.append(We.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new F;t.append(We.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new F;const r=e.readBits(10);if(r>=1e3)throw new F;t.append(We.toAlphaNumericChar(Math.floor(r/100))),t.append(We.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(We.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new F;const r=e.readBits(7);if(r>=100)throw new F;t.append(We.toAlphaNumericChar(Math.floor(r/10))),t.append(We.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new F;const r=e.readBits(4);if(r>=10)throw new F;t.append(We.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new F}}We.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",We.GB2312_SUBSET=1;class as{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Qo{constructor(){this.rsDecoder=new Qn(_e.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(fe.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Zo(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new as(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=li.getDataBlocks(i,n,r);let l=0;for(const x of s)l+=x.getNumDataCodewords();const u=new Uint8Array(l);let d=0;for(const x of s){const p=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(p,E);for(let b=0;b<E;b++)u[d++]=p[b]}return We.decode(u,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new k}for(let r=0;r<t;r++)e[r]=n[r]}}class ci extends ie{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new ci(r,i,s)}}class Tr{constructor(e,t,n,r,i,s,l){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,s=new Int32Array(3),l=this.image;for(let u=0;u<t;u++){const d=i+(u&1?-Math.floor((u+1)/2):Math.floor((u+1)/2));s[0]=0,s[1]=0,s[2]=0;let x=e;for(;x<r&&!l.get(x,d);)x++;let p=0;for(;x<r;){if(l.get(x,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,d,x);if(E!==null)return E}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;x++}if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,d,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new v}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;let u=e;for(;u>=0&&i.get(t,u)&&l[1]<=n;)l[1]++,u--;if(u<0||l[1]>n)return NaN;for(;u>=0&&!i.get(t,u)&&l[0]<=n;)l[0]++,u--;if(l[0]>n)return NaN;for(u=e+1;u<s&&i.get(t,u)&&l[1]<=n;)l[1]++,u++;if(u===s||l[1]>n)return NaN;for(;u<s&&!i.get(t,u)&&l[2]<=n;)l[2]++,u++;if(l[2]>n)return NaN;const d=l[0]+l[1]+l[2];return 5*Math.abs(d-r)>=2*r?NaN:this.foundPatternCross(l)?Tr.centerFromEnd(l,u):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Tr.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const l=(e[0]+e[1]+e[2])/3;for(const d of this.possibleCenters)if(d.aboutEquals(l,s,i))return d.combineEstimate(s,i,l);const u=new ci(i,s,l);this.possibleCenters.push(u),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(u)}return null}}class ui extends ie{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,l=(this.count*this.estimatedModuleSize+n)/r;return new ui(i,s,l,r)}}class qo{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class st{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(K.TRY_HARDER)!==void 0,n=e!=null&&e.get(K.PURE_BARCODE)!==void 0,r=this.image,i=r.getHeight(),s=r.getWidth();let l=Math.floor(3*i/(4*st.MAX_MODULES));(l<st.MIN_SKIP||t)&&(l=st.MIN_SKIP);let u=!1;const d=new Int32Array(5);for(let p=l-1;p<i&&!u;p+=l){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;let E=0;for(let b=0;b<s;b++)if(r.get(b,p))(E&1)===1&&E++,d[E]++;else if(E&1)d[E]++;else if(E===4)if(st.foundPatternCross(d)){if(this.handlePossibleCenter(d,p,b,n)===!0)if(l=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{const _=this.findRowSkip();_>d[2]&&(p+=_-d[2]-l,b=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,E=3;continue}E=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,E=3;else d[++E]++;st.foundPatternCross(d)&&this.handlePossibleCenter(d,p,s,n)===!0&&(l=d[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return ie.orderBestPatterns(x),new qo(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const s=e[i];if(s===0)return!1;t+=s}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const l=this.image;for(;e>=s&&t>=s&&l.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!l.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&l.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const u=l.getHeight(),d=l.getWidth();for(s=1;e+s<u&&t+s<d&&l.get(t+s,e+s);)i[2]++,s++;if(e+s>=u||t+s>=d)return!1;for(;e+s<u&&t+s<d&&!l.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=u||t+s>=d||i[3]>=n)return!1;for(;e+s<u&&t+s<d&&l.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const x=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(x-r)<2*r&&st.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),l=this.getCrossCheckStateCount();let u=e;for(;u>=0&&i.get(t,u);)l[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(t,u)&&l[1]<=n;)l[1]++,u--;if(u<0||l[1]>n)return NaN;for(;u>=0&&i.get(t,u)&&l[0]<=n;)l[0]++,u--;if(l[0]>n)return NaN;for(u=e+1;u<s&&i.get(t,u);)l[2]++,u++;if(u===s)return NaN;for(;u<s&&!i.get(t,u)&&l[3]<n;)l[3]++,u++;if(u===s||l[3]>=n)return NaN;for(;u<s&&i.get(t,u)&&l[4]<n;)l[4]++,u++;if(l[4]>=n)return NaN;const d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-r)>=2*r?NaN:st.foundPatternCross(l)?st.centerFromEnd(l,u):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),l=this.getCrossCheckStateCount();let u=e;for(;u>=0&&i.get(u,t);)l[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,t)&&l[1]<=n;)l[1]++,u--;if(u<0||l[1]>n)return NaN;for(;u>=0&&i.get(u,t)&&l[0]<=n;)l[0]++,u--;if(l[0]>n)return NaN;for(u=e+1;u<s&&i.get(u,t);)l[2]++,u++;if(u===s)return NaN;for(;u<s&&!i.get(u,t)&&l[3]<n;)l[3]++,u++;if(u===s||l[3]>=n)return NaN;for(;u<s&&i.get(u,t)&&l[4]<n;)l[4]++,u++;if(l[4]>=n)return NaN;const d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-r)>=r?NaN:st.foundPatternCross(l)?st.centerFromEnd(l,u):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=st.centerFromEnd(e,n),l=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),e[2],i)))){const u=i/7;let d=!1;const x=this.possibleCenters;for(let p=0,E=x.length;p<E;p++){const b=x[p];if(b.aboutEquals(u,l,s)){x[p]=b.combineEstimate(l,s,u),d=!0;break}}if(!d){const p=new ui(s,l,u);x.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=st.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=st.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new v;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const u of this.possibleCenters){const d=u.getEstimatedModuleSize();r+=d,i+=d*d}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((u,d)=>{const x=Math.abs(d.getEstimatedModuleSize()-n),p=Math.abs(u.getEstimatedModuleSize()-n);return x<p?-1:x>p?1:0});const l=Math.max(.2*n,s);for(let u=0;u<t.length&&t.length>3;u++){const d=t[u];Math.abs(d.getEstimatedModuleSize()-n)>l&&(t.splice(u,1),u--)}}if(t.length>3){let r=0;for(const i of t)r+=i.getEstimatedModuleSize();n=r/t.length,t.sort((i,s)=>{if(s.getCount()===i.getCount()){const l=Math.abs(s.getEstimatedModuleSize()-n),u=Math.abs(i.getEstimatedModuleSize()-n);return l<u?1:l>u?-1:0}else return s.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}st.CENTER_QUORUM=2,st.MIN_SKIP=3,st.MAX_MODULES=57;class Kn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(K.NEED_RESULT_POINT_CALLBACK);const n=new st(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new v("No pattern found in proccess finder.");const s=Kn.computeDimension(t,n,r,i),l=se.getProvisionalVersionForDimension(s),u=l.getDimensionForVersion()-7;let d=null;if(l.getAlignmentPatternCenters().length>0){const b=n.getX()-t.getX()+r.getX(),N=n.getY()-t.getY()+r.getY(),_=1-3/u,O=Math.floor(t.getX()+_*(b-t.getX())),D=Math.floor(t.getY()+_*(N-t.getY()));for(let z=4;z<=16;z<<=1)try{d=this.findAlignmentInRegion(i,O,D,z);break}catch(W){if(!(W instanceof v))throw W}}const x=Kn.createTransform(t,n,r,d,s),p=Kn.sampleGrid(this.image,x,s);let E;return d===null?E=[r,t,n]:E=[r,t,n,d],new Er(p,E)}static createTransform(e,t,n,r,i){const s=i-3.5;let l,u,d,x;return r!==null?(l=r.getX(),u=r.getY(),d=s-3,x=d):(l=t.getX()-e.getX()+n.getX(),u=t.getY()-e.getY()+n.getY(),d=s,x=s),Vt.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,x,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),l,u,n.getX(),n.getY())}static sampleGrid(e,t,n){return ln.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=be.round(ie.distance(e,t)/r),s=be.round(ie.distance(e,n)/r);let l=Math.floor((i+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new v("Dimensions could be not found.")}return l}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,l=e-(n-e);l<0?(s=e/(e-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);let u=Math.floor(t-(r-t)*s);return s=1,u<0?(s=t/(t-u),u=0):u>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),l=Math.floor(e+(l-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,l,u),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let b=e;e=t,t=b,b=n,n=r,r=b}const s=Math.abs(n-e),l=Math.abs(r-t);let u=-s/2;const d=e<n?1:-1,x=t<r?1:-1;let p=0;const E=n+d;for(let b=e,N=t;b!==E;b+=d){const _=i?N:b,O=i?b:N;if(p===1===this.image.get(_,O)){if(p===2)return be.distance(b,N,e,t);p++}if(u+=l,u>0){if(N===r)break;N+=x,u-=s}}return p===2?be.distance(n+d,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),l=Math.min(this.image.getWidth()-1,t+i);if(l-s<e*3)throw new v("Alignment top exceeds estimated module size.");const u=Math.max(0,n-i),d=Math.min(this.image.getHeight()-1,n+i);if(d-u<e*3)throw new v("Alignment bottom exceeds estimated module size.");return new Tr(this.image,s,u,l-s,d-u,e,this.resultPointCallback).find()}}class hn{constructor(){this.decoder=new Qo}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(K.PURE_BARCODE)!==void 0){const u=hn.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(u,t),r=hn.NO_POINTS}else{const u=new Kn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(u.getBits(),t),r=u.getPoints()}n.getOther()instanceof as&&n.getOther().applyMirroredCorrection(r);const i=new Ct(n.getText(),n.getRawBytes(),void 0,r,le.QR_CODE,void 0),s=n.getByteSegments();s!==null&&i.putMetadata(rt.BYTE_SEGMENTS,s);const l=n.getECLevel();return l!==null&&i.putMetadata(rt.ERROR_CORRECTION_LEVEL,l),n.hasStructuredAppend()&&(i.putMetadata(rt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(rt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new v;const r=this.moduleSize(t,e);let i=t[1],s=n[1],l=t[0],u=n[0];if(l>=u||i>=s)throw new v;if(s-i!==u-l&&(u=l+(s-i),u>=e.getWidth()))throw new v;const d=Math.round((u-l+1)/r),x=Math.round((s-i+1)/r);if(d<=0||x<=0)throw new v;if(x!==d)throw new v;const p=Math.floor(r/2);i+=p,l+=p;const E=l+Math.floor((d-1)*r)-u;if(E>0){if(E>p)throw new v;l-=E}const b=i+Math.floor((x-1)*r)-s;if(b>0){if(b>p)throw new v;i-=b}const N=new fe(d,x);for(let _=0;_<x;_++){const O=i+Math.floor(_*r);for(let D=0;D<d;D++)e.get(l+Math.floor(D*r),O)&&N.set(D,_)}return N}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],l=!0,u=0;for(;i<r&&s<n;){if(l!==t.get(i,s)){if(++u===5)break;l=!l}i++,s++}if(i===r||s===n)throw new v;return(i-e[0])/7}}hn.NO_POINTS=new Array;class ue{PDF417Common(){}static getBitCountSum(e){return be.sum(e)}static toIntArray(e){if(e==null||!e.length)return ue.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=j.binarySearch(ue.SYMBOL_TABLE,e&262143);return t<0?-1:(ue.CODEWORD_TABLE[t]-1)%ue.NUMBER_OF_CODEWORDS}}ue.NUMBER_OF_CODEWORDS=929,ue.MAX_CODEWORDS_IN_BARCODE=ue.NUMBER_OF_CODEWORDS-1,ue.MIN_ROWS_IN_BARCODE=3,ue.MAX_ROWS_IN_BARCODE=90,ue.MODULES_IN_CODEWORD=17,ue.MODULES_IN_STOP_PATTERN=18,ue.BARS_IN_MODULE=8,ue.EMPTY_INT_ARRAY=new Int32Array([]),ue.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ue.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ko{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ae{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Ae.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Ae.detect(n,r)),new Ko(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const l=Ae.findVertices(t,r,i);if(l[0]==null&&l[3]==null){if(!s)break;s=!1,i=0;for(const u of n)u[1]!=null&&(r=Math.trunc(Math.max(r,u[1].getY()))),u[3]!=null&&(r=Math.max(r,Math.trunc(u[3].getY())));r+=Ae.ROW_STEP;continue}if(s=!0,n.push(l),!e)break;l[2]!=null?(i=Math.trunc(l[2].getX()),r=Math.trunc(l[2].getY())):(i=Math.trunc(l[4].getX()),r=Math.trunc(l[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return Ae.copyToResult(s,Ae.findRowsWithPattern(e,r,i,t,n,Ae.START_PATTERN),Ae.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Ae.copyToResult(s,Ae.findRowsWithPattern(e,r,i,t,n,Ae.STOP_PATTERN),Ae.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const l=new Array(4);let u=!1;const d=new Int32Array(s.length);for(;r<t;r+=Ae.ROW_STEP){let p=Ae.findGuardPattern(e,i,r,n,!1,s,d);if(p!=null){for(;r>0;){const E=Ae.findGuardPattern(e,i,--r,n,!1,s,d);if(E!=null)p=E;else{r++;break}}l[0]=new ie(p[0],r),l[1]=new ie(p[1],r),u=!0;break}}let x=r+1;if(u){let p=0,E=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);for(;x<t;x++){const b=Ae.findGuardPattern(e,E[0],x,n,!1,s,d);if(b!=null&&Math.abs(E[0]-b[0])<Ae.MAX_PATTERN_DRIFT&&Math.abs(E[1]-b[1])<Ae.MAX_PATTERN_DRIFT)E=b,p=0;else{if(p>Ae.SKIPPED_ROW_COUNT_MAX)break;p++}}x-=p+1,l[2]=new ie(E[0],x),l[3]=new ie(E[1],x)}return x-r<Ae.BARCODE_MIN_HEIGHT&&j.fill(l,null),l}static findGuardPattern(e,t,n,r,i,s,l){j.fillWithin(l,0,l.length,0);let u=t,d=0;for(;e.get(u,n)&&u>0&&d++<Ae.MAX_PIXEL_DRIFT;)u--;let x=u,p=0,E=s.length;for(let b=i;x<r;x++)if(e.get(x,n)!==b)l[p]++;else{if(p===E-1){if(Ae.patternMatchVariance(l,s,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return new Int32Array([u,x]);u+=l[0]+l[1],B.arraycopy(l,2,l,0,p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,b=!b}return p===E-1&&Ae.patternMatchVariance(l,s,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE?new Int32Array([u,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let d=0;d<r;d++)i+=e[d],s+=t[d];if(i<s)return 1/0;let l=i/s;n*=l;let u=0;for(let d=0;d<r;d++){let x=e[d],p=t[d]*l,E=x>p?x-p:p-x;if(E>n)return 1/0;u+=E}return u/i}}Ae.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ae.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ae.MAX_AVG_VARIANCE=.42,Ae.MAX_INDIVIDUAL_VARIANCE=.8,Ae.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ae.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ae.MAX_PIXEL_DRIFT=3,Ae.MAX_PATTERN_DRIFT=5,Ae.SKIPPED_ROW_COUNT_MAX=25,Ae.ROW_STEP=5,Ae.BARCODE_MIN_HEIGHT=10;class ut{constructor(e,t){if(t.length===0)throw new T;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),B.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),i=n.length-t.length;B.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new ut(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof ut?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new ut(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let l=0;l<n;l++){let u=t[l];for(let d=0;d<i;d++)s[l+d]=this.field.add(s[l+d],this.field.multiply(u,r[d]))}return new ut(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new ut(this.field,t)}multiplyScalar(e){if(e===0)return new ut(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new ut(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new T;if(t===0)return new ut(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new ut(this.field,r)}toString(){let e=new J;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class $o{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new pr;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class fi extends $o{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new ut(this,new Int32Array([0])),this.one=new ut(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new ut(this,n)}}fi.PDF417_GF=new fi(ue.NUMBER_OF_CODEWORDS,3);class ls{constructor(){this.field=fi.PDF417_GF}decode(e,t,n){let r=new ut(this.field,e),i=new Int32Array(t),s=!1;for(let N=t;N>0;N--){let _=r.evaluateAt(this.field.exp(N));i[t-N]=_,_!==0&&(s=!0)}if(!s)return 0;let l=this.field.getOne();if(n!=null)for(const N of n){let _=this.field.exp(e.length-1-N),O=new ut(this.field,new Int32Array([this.field.subtract(0,_),1]));l=l.multiply(O)}let u=new ut(this.field,i),d=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),u,t),x=d[0],p=d[1],E=this.findErrorLocations(x),b=this.findErrorMagnitudes(p,x,E);for(let N=0;N<E.length;N++){let _=e.length-1-this.field.log(E[N]);if(_<0)throw k.getChecksumInstance();e[_]=this.field.subtract(e[_],b[N])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,i=t,s=this.field.getZero(),l=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let E=r,b=s;if(r=i,s=l,r.isZero())throw k.getChecksumInstance();i=E;let N=this.field.getZero(),_=r.getCoefficient(r.getDegree()),O=this.field.inverse(_);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let D=i.getDegree()-r.getDegree(),z=this.field.multiply(i.getCoefficient(i.getDegree()),O);N=N.add(this.field.buildMonomial(D,z)),i=i.subtract(r.multiplyByMonomial(D,z))}l=N.multiply(s).subtract(b).negative()}let u=l.getCoefficient(0);if(u===0)throw k.getChecksumInstance();let d=this.field.inverse(u),x=l.multiply(d),p=i.multiply(d);return[x,p]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw k.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let d=1;d<=r;d++)i[r-d]=this.field.multiply(d,t.getCoefficient(d));let s=new ut(this.field,i),l=n.length,u=new Int32Array(l);for(let d=0;d<l;d++){let x=this.field.inverse(n[d]),p=this.field.subtract(0,e.evaluateAt(x)),E=this.field.inverse(s.evaluateAt(x));u[d]=this.field.multiply(p,E)}return u}}class En{constructor(e,t,n,r,i){e instanceof En?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=t==null||n==null,l=r==null||i==null;if(s&&l)throw new v;s?(t=new ie(0,r.getY()),n=new ie(0,i.getY())):l&&(r=new ie(e.getWidth()-1,t.getY()),i=new ie(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new En(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(e>0){let u=n?this.topLeft:this.topRight,d=Math.trunc(u.getY()-e);d<0&&(d=0);let x=new ie(u.getX(),d);n?r=x:s=x}if(t>0){let u=n?this.bottomLeft:this.bottomRight,d=Math.trunc(u.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);let x=new ie(u.getX(),d);n?i=x:l=x}return new En(this.image,r,i,s,l)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Jo{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $n{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(s,l,u,d,x,p){if(s==="%%")return"%";if(t[++n]===void 0)return;s=d?parseInt(d.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,b;switch(p){case"s":b=t[n];break;case"c":b=t[n][0];break;case"f":b=parseFloat(t[n]).toFixed(s);break;case"p":b=parseFloat(t[n]).toPrecision(s);break;case"e":b=parseFloat(t[n]).toExponential(s);break;case"x":b=parseInt(t[n]).toString(E||16);break;case"d":b=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(E);let N=parseInt(u),_=u&&u[0]+""=="0"?"0":" ";for(;b.length<N;)b=l!==void 0?b+_:_+b;return b}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=$n.form(e,t)}toString(){return this.buffer}}class Jn{constructor(e){this.boundingBox=new En(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<Jn.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new $n;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}Jn.MAX_NEARBY_DISTANCE=5;class er{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return ue.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class cs extends Jn{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,x=0;for(let p=s;p<l;p++){if(t[p]==null)continue;let E=t[p],b=E.getRowNumber()-u;if(b===0)x++;else if(b===1)d=Math.max(d,x),x=1,u=E.getRowNumber();else if(b<0||E.getRowNumber()>=e.getRowCount()||b>p)t[p]=null;else{let N;d>2?N=(d-2)*b:N=b;let _=N>=p;for(let O=1;O<=N&&!_;O++)_=t[p-O]!=null;_?t[p]=null:(u=E.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),l=this.getCodewords(),u=-1;for(let d=i;d<s;d++){if(l[d]==null)continue;let x=l[d];x.setRowNumberAsRowIndicatorColumn();let p=x.getRowNumber()-u;p===0||(p===1?u=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?l[d]=null:u=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new er,n=new er,r=new er,i=new er;for(let l of e){if(l==null)continue;l.setRowNumberAsRowIndicatorColumn();let u=l.getValue()%30,d=l.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:n.setValue(u*3+1);break;case 1:i.setValue(u/3),r.setValue(u%3);break;case 2:t.setValue(u+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ue.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ue.MAX_ROWS_IN_BARCODE)return null;let s=new Jo(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class tr{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ue.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(i=tr.adjustRowNumberIfValid(r,i,l),l.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(i=tr.adjustRowNumberIfValid(r,i,l),l.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;this.detectionResultColumns[e+1]!=null&&(s=this.detectionResultColumns[e+1].getCodewords());let l=new Array(14);l[2]=i[t],l[3]=s[t],t>0&&(l[0]=n[t-1],l[4]=i[t-1],l[5]=s[t-1]),t>1&&(l[8]=n[t-2],l[10]=i[t-2],l[11]=s[t-2]),t<n.length-1&&(l[1]=n[t+1],l[6]=i[t+1],l[7]=s[t+1]),t<n.length-2&&(l[9]=n[t+2],l[12]=i[t+2],l[13]=s[t+2]);for(let u of l)if(tr.adjustRowNumber(r,u))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new $n;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class nr{constructor(e,t,n,r){this.rowNumber=nr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==nr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}nr.BARCODE_ROW_UNKNOWN=-1;class St{static initialize(){for(let e=0;e<ue.SYMBOL_TABLE.length;e++){let t=ue.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<ue.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,St.RATIOS_TABLE[e]||(St.RATIOS_TABLE[e]=new Array(ue.BARS_IN_MODULE)),St.RATIOS_TABLE[e][ue.BARS_IN_MODULE-r-1]=Math.fround(i/ue.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=St.getDecodedCodewordValue(St.sampleBitCounts(e));return t!==-1?t:St.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=be.sum(e),n=new Int32Array(ue.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<ue.MODULES_IN_CODEWORD;s++){let l=t/(2*ue.MODULES_IN_CODEWORD)+s*t/ue.MODULES_IN_CODEWORD;i+e[r]<=l&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=St.getBitValue(e);return ue.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=be.sum(e),n=new Array(ue.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=mr.MAX_VALUE,i=-1;this.bSymbolTableReady||St.initialize();for(let s=0;s<St.RATIOS_TABLE.length;s++){let l=0,u=St.RATIOS_TABLE[s];for(let d=0;d<ue.BARS_IN_MODULE;d++){let x=Math.fround(u[d]-n[d]);if(l+=Math.fround(x*x),l>=r)break}l<r&&(r=l,i=ue.SYMBOL_TABLE[s])}return i}}St.bSymbolTableReady=!1,St.RATIOS_TABLE=new Array(ue.SYMBOL_TABLE.length).map(C=>new Array(ue.BARS_IN_MODULE));class us{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class fs{static parseLong(e,t=void 0){return parseInt(e,t)}}class hs extends w{}hs.kind="NullPointerException";class ea{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new hs;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new L;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class ta extends w{}class na extends ea{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new ta;n=G.MAX_VALUE}this.buf=j.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new L;this.ensureCapacity(this.count+n),B.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return j.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Le;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Le||(Le={}));function ds(){if(typeof window<"u")return window.BigInt||null;if(typeof sr<"u")return sr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Nr;function dn(C){if(typeof Nr>"u"&&(Nr=ds()),Nr===null)throw new Error("BigInt is not supported!");return Nr(C)}function ra(){let C=[];C[0]=dn(1);let e=dn(900);C[1]=e;for(let t=2;t<16;t++)C[t]=C[t-1]*e;return C}class R{static decode(e,t){let n=new J(""),r=U.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],l=new us;for(;i<e[0];){switch(s){case R.TEXT_COMPACTION_MODE_LATCH:i=R.textCompaction(e,i,n);break;case R.BYTE_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH_6:i=R.byteCompaction(s,e,r,i,n);break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case R.NUMERIC_COMPACTION_MODE_LATCH:i=R.numericCompaction(e,i,n);break;case R.ECI_CHARSET:U.getCharacterSetECIByValue(e[i++]);break;case R.ECI_GENERAL_PURPOSE:i+=2;break;case R.ECI_USER_DEFINED:i++;break;case R.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=R.decodeMacroBlock(e,i,l);break;case R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case R.MACRO_PDF417_TERMINATOR:throw new F;default:i--,i=R.textCompaction(e,i,n);break}if(i<e.length)s=e[i++];else throw F.getFormatInstance()}if(n.length()===0)throw F.getFormatInstance();let u=new Xn(null,n.toString(),null,t);return u.setOther(l),u}static decodeMacroBlock(e,t,n){if(t+R.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw F.getFormatInstance();let r=new Int32Array(R.NUMBER_OF_SEQUENCE_CODEWORDS);for(let l=0;l<R.NUMBER_OF_SEQUENCE_CODEWORDS;l++,t++)r[l]=e[t];n.setSegmentIndex(G.parseInt(R.decodeBase900toBase10(r,R.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new J;t=R.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case R.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let l=new J;t=R.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case R.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let u=new J;t=R.textCompaction(e,t+1,u),n.setSender(u.toString());break;case R.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let d=new J;t=R.textCompaction(e,t+1,d),n.setAddressee(d.toString());break;case R.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new J;t=R.numericCompaction(e,t+1,x),n.setSegmentCount(G.parseInt(x.toString()));break;case R.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let p=new J;t=R.numericCompaction(e,t+1,p),n.setTimestamp(fs.parseLong(p.toString()));break;case R.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new J;t=R.numericCompaction(e,t+1,E),n.setChecksum(G.parseInt(E.toString()));break;case R.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let b=new J;t=R.numericCompaction(e,t+1,b),n.setFileSize(fs.parseLong(b.toString()));break;default:throw F.getFormatInstance()}break;case R.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(s!==-1){let l=t-s;n.isLastSegment()&&l--,n.setOptionalData(j.copyOfRange(e,s,s+l))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,l=!1;for(;t<e[0]&&!l;){let u=e[t++];if(u<R.TEXT_COMPACTION_MODE_LATCH)r[s]=u/30,r[s+1]=u%30,s+=2;else switch(u){case R.TEXT_COMPACTION_MODE_LATCH:r[s++]=R.TEXT_COMPACTION_MODE_LATCH;break;case R.BYTE_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH_6:case R.NUMERIC_COMPACTION_MODE_LATCH:case R.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case R.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],i[s]=u,s++;break}}return R.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=Le.ALPHA,s=Le.ALPHA,l=0;for(;l<n;){let u=e[l],d="";switch(i){case Le.ALPHA:if(u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case R.LL:i=Le.LOWER;break;case R.ML:i=Le.MIXED;break;case R.PS:s=i,i=Le.PUNCT_SHIFT;break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case R.TEXT_COMPACTION_MODE_LATCH:i=Le.ALPHA;break}break;case Le.LOWER:if(u<26)d=String.fromCharCode(97+u);else switch(u){case 26:d=" ";break;case R.AS:s=i,i=Le.ALPHA_SHIFT;break;case R.ML:i=Le.MIXED;break;case R.PS:s=i,i=Le.PUNCT_SHIFT;break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case R.TEXT_COMPACTION_MODE_LATCH:i=Le.ALPHA;break}break;case Le.MIXED:if(u<R.PL)d=R.MIXED_CHARS[u];else switch(u){case R.PL:i=Le.PUNCT;break;case 26:d=" ";break;case R.LL:i=Le.LOWER;break;case R.AL:i=Le.ALPHA;break;case R.PS:s=i,i=Le.PUNCT_SHIFT;break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case R.TEXT_COMPACTION_MODE_LATCH:i=Le.ALPHA;break}break;case Le.PUNCT:if(u<R.PAL)d=R.PUNCT_CHARS[u];else switch(u){case R.PAL:i=Le.ALPHA;break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case R.TEXT_COMPACTION_MODE_LATCH:i=Le.ALPHA;break}break;case Le.ALPHA_SHIFT:if(i=s,u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case R.TEXT_COMPACTION_MODE_LATCH:i=Le.ALPHA;break}break;case Le.PUNCT_SHIFT:if(i=s,u<R.PAL)d=R.PUNCT_CHARS[u];else switch(u){case R.PAL:i=Le.ALPHA;break;case R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[l]);break;case R.TEXT_COMPACTION_MODE_LATCH:i=Le.ALPHA;break}break}d!==""&&r.append(d),l++}}static byteCompaction(e,t,n,r,i){let s=new na,l=0,u=0,d=!1;switch(e){case R.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),p=t[r++];for(;r<t[0]&&!d;)switch(x[l++]=p,u=900*u+p,p=t[r++],p){case R.TEXT_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH:case R.NUMERIC_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH_6:case R.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case R.MACRO_PDF417_TERMINATOR:r--,d=!0;break;default:if(l%5===0&&l>0){for(let E=0;E<6;++E)s.write(Number(dn(u)>>dn(8*(5-E))));u=0,l=0}break}r===t[0]&&p<R.TEXT_COMPACTION_MODE_LATCH&&(x[l++]=p);for(let E=0;E<l;E++)s.write(x[E]);break;case R.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!d;){let E=t[r++];if(E<R.TEXT_COMPACTION_MODE_LATCH)l++,u=900*u+E;else switch(E){case R.TEXT_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH:case R.NUMERIC_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH_6:case R.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case R.MACRO_PDF417_TERMINATOR:r--,d=!0;break}if(l%5===0&&l>0){for(let b=0;b<6;++b)s.write(Number(dn(u)>>dn(8*(5-b))));u=0,l=0}}break}return i.append(we.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(R.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let l=e[t++];if(t===e[0]&&(i=!0),l<R.TEXT_COMPACTION_MODE_LATCH)s[r]=l,r++;else switch(l){case R.TEXT_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH:case R.BYTE_COMPACTION_MODE_LATCH_6:case R.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case R.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%R.MAX_NUMERIC_CODEWORDS===0||l===R.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(R.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let i=0;i<t;i++)n+=R.EXP900[t-i-1]*dn(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new F;return r.substring(1)}}R.TEXT_COMPACTION_MODE_LATCH=900,R.BYTE_COMPACTION_MODE_LATCH=901,R.NUMERIC_COMPACTION_MODE_LATCH=902,R.BYTE_COMPACTION_MODE_LATCH_6=924,R.ECI_USER_DEFINED=925,R.ECI_GENERAL_PURPOSE=926,R.ECI_CHARSET=927,R.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,R.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,R.MACRO_PDF417_TERMINATOR=922,R.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,R.MAX_NUMERIC_CODEWORDS=15,R.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,R.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,R.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,R.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,R.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,R.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,R.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,R.PL=25,R.LL=27,R.AS=27,R.ML=28,R.AL=28,R.PS=29,R.PAL=29,R.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,R.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",R.EXP900=ds()?ra():[],R.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ce{constructor(){}static decode(e,t,n,r,i,s,l){let u=new En(e,t,n,r,i),d=null,x=null,p;for(let N=!0;;N=!1){if(t!=null&&(d=Ce.getRowIndicatorColumn(e,u,t,!0,s,l)),r!=null&&(x=Ce.getRowIndicatorColumn(e,u,r,!1,s,l)),p=Ce.merge(d,x),p==null)throw v.getNotFoundInstance();let _=p.getBoundingBox();if(N&&_!=null&&(_.getMinY()<u.getMinY()||_.getMaxY()>u.getMaxY()))u=_;else break}p.setBoundingBox(u);let E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(E,x);let b=d!=null;for(let N=1;N<=E;N++){let _=b?N:E-N;if(p.getDetectionResultColumn(_)!==void 0)continue;let O;_===0||_===E?O=new cs(u,_===0):O=new Jn(u),p.setDetectionResultColumn(_,O);let D=-1,z=D;for(let W=u.getMinY();W<=u.getMaxY();W++){if(D=Ce.getStartColumn(p,_,W,b),D<0||D>u.getMaxX()){if(z===-1)continue;D=z}let V=Ce.detectCodeword(e,u.getMinX(),u.getMaxX(),b,D,W,s,l);V!=null&&(O.setCodeword(W,V),z=D,s=Math.min(s,V.getWidth()),l=Math.max(l,V.getWidth()))}}return Ce.createDecoderResult(p)}static merge(e,t){if(e==null&&t==null)return null;let n=Ce.getBarcodeMetadata(e,t);if(n==null)return null;let r=En.merge(Ce.adjustBoundingBox(e),Ce.adjustBoundingBox(t));return new tr(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=Ce.getMax(t),r=0;for(let l of t)if(r+=n-l,l>0)break;let i=e.getCodewords();for(let l=0;r>0&&i[l]==null;l++)r--;let s=0;for(let l=t.length-1;l>=0&&(s+=n-t[l],!(t[l]>0));l--);for(let l=i.length-1;s>0&&i[l]==null;l--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let l=new cs(t,r);for(let u=0;u<2;u++){let d=u===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let p=Math.trunc(Math.trunc(n.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){let E=Ce.detectCodeword(e,0,e.getWidth(),r,x,p,i,s);E!=null&&(l.setCodeword(p,E),r?x=E.getStartX():x=E.getEndX())}}return l}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Ce.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>ue.MAX_CODEWORDS_IN_BARCODE)throw v.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=Ce.createBarcodeMatrix(e);Ce.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let u=0;u<e.getBarcodeRowCount();u++)for(let d=0;d<e.getBarcodeColumnCount();d++){let x=t[u][d+1].getValue(),p=u*e.getBarcodeColumnCount()+d;x.length===0?n.push(p):x.length===1?r[p]=x[0]:(s.push(p),i.push(x))}let l=new Array(i.length);for(let u=0;u<l.length;u++)l[u]=i[u];return Ce.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,ue.toIntArray(n),ue.toIntArray(s),l)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),l=100;for(;l-- >0;){for(let u=0;u<s.length;u++)t[r[u]]=i[u][s[u]];try{return Ce.decodeCodewords(t,e,n)}catch(u){if(!(u instanceof k))throw u}if(s.length===0)throw k.getChecksumInstance();for(let u=0;u<s.length;u++)if(s[u]<i[u].length-1){s[u]++;break}else if(s[u]=0,u===s.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new er;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(Ce.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),s!=null)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),s!=null)return r?s.getStartX():s.getEndX();if(Ce.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),s!=null)return r?s.getEndX():s.getStartX();let l=0;for(;Ce.isValidBarcodeColumn(e,t-i);){t-=i;for(let u of e.getDetectionResultColumn(t).getCodewords())if(u!=null)return(r?u.getEndX():u.getStartX())+i*l*(u.getEndX()-u.getStartX());l++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,l,u){i=Ce.adjustCodewordStartColumn(e,t,n,r,i,s);let d=Ce.getModuleBitCount(e,t,n,r,i,s);if(d==null)return null;let x,p=be.sum(d);if(r)x=i+p;else{for(let N=0;N<d.length/2;N++){let _=d[N];d[N]=d[d.length-1-N],d[d.length-1-N]=_}x=i,i=x-p}if(!Ce.checkCodewordSkew(p,l,u))return null;let E=St.getDecodedValue(d),b=ue.getCodeword(E);return b===-1?null:new nr(i,x,Ce.getCodewordBucketNumber(E),b)}static getModuleBitCount(e,t,n,r,i,s){let l=i,u=new Int32Array(8),d=0,x=r?1:-1,p=r;for(;(r?l<n:l>=t)&&d<u.length;)e.get(l,s)===p?(u[d]++,l+=x):(d++,p=!p);return d===u.length||l===(r?n:t)&&d===u.length-1?u:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let l=i,u=r?-1:1;for(let d=0;d<2;d++){for(;(r?l>=t:l<n)&&r===e.get(l,s);){if(Math.abs(i-l)>Ce.CODEWORD_SKEW_SIZE)return i;l+=u}u=-u,r=!r}return l}static checkCodewordSkew(e,t,n){return t-Ce.CODEWORD_SKEW_SIZE<=e&&e<=n+Ce.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw F.getFormatInstance();let r=1<<t+1,i=Ce.correctErrors(e,n,r);Ce.verifyCodewordCount(e,r);let s=R.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+Ce.MAX_ERRORS||n<0||n>Ce.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return Ce.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw F.getFormatInstance();let n=e[0];if(n>e.length)throw F.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw F.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Ce.getCodewordBucketNumber(Ce.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new $n;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}Ce.CODEWORD_SKEW_SIZE=2,Ce.MAX_ERRORS=3,Ce.MAX_EC_CODEWORDS=512,Ce.errorCorrection=new ls;class ft{decode(e,t=null){let n=ft.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw v.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return ft.decode(e,t,!0)}catch(n){throw n instanceof F||n instanceof k?v.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=Ae.detectMultiple(e,t,n);for(const s of i.getPoints()){const l=Ce.decode(i.getBits(),s[4],s[5],s[6],s[7],ft.getMinCodewordWidth(s),ft.getMaxCodewordWidth(s)),u=new Ct(l.getText(),l.getRawBytes(),void 0,s,le.PDF_417);u.putMetadata(rt.ERROR_CORRECTION_LEVEL,l.getECLevel());const d=l.getOther();d!=null&&u.putMetadata(rt.PDF417_EXTRA_METADATA,d),r.push(u)}return r.map(s=>s)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?G.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(ft.getMaxWidth(e[0],e[4]),ft.getMaxWidth(e[6],e[2])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN),Math.max(ft.getMaxWidth(e[1],e[5]),ft.getMaxWidth(e[7],e[3])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(ft.getMinWidth(e[0],e[4]),ft.getMinWidth(e[6],e[2])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN),Math.min(ft.getMinWidth(e[1],e[5]),ft.getMinWidth(e[7],e[3])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN)))}reset(){}}class _r extends w{}_r.kind="ReaderException";class gs{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!f(e)&&e.get(K.TRY_HARDER)===!0,n=f(e)?null:e.get(K.POSSIBLE_FORMATS),r=new Array;if(!f(n)){const i=n.some(s=>s===le.UPC_A||s===le.UPC_E||s===le.EAN_13||s===le.EAN_8||s===le.CODABAR||s===le.CODE_39||s===le.CODE_93||s===le.CODE_128||s===le.ITF||s===le.RSS_14||s===le.RSS_EXPANDED);i&&!t&&r.push(new Dn(e,this.verbose)),n.includes(le.QR_CODE)&&r.push(new hn),n.includes(le.DATA_MATRIX)&&r.push(new fn),n.includes(le.AZTEC)&&r.push(new yr),n.includes(le.PDF_417)&&r.push(new ft),i&&t&&r.push(new Dn(e,this.verbose))}r.length===0&&(t||r.push(new Dn(e,this.verbose)),r.push(new hn),r.push(new fn),r.push(new yr),r.push(new ft),t&&r.push(new Dn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new _r("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof _r)continue}throw new v("No MultiFormat Readers were able to detect the code.")}}class ia extends Gt{constructor(e=null,t=500){const n=new gs;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class sa extends Gt{constructor(e=500){super(new ft,e)}}class oa extends Gt{constructor(e=500){super(new hn,e)}}var hi;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(hi||(hi={}));var nt=hi;class di{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new yt(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const s=n.multiply(new yt(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(s),n=s}}return t[e]}encode(e,t){if(t===0)throw new T("No error correction bytes");const n=e.length-t;if(n<=0)throw new T("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);B.arraycopy(e,0,i,0,n);let s=new yt(this.field,i);s=s.multiplyByMonomial(t,1);const u=s.divide(r)[1].getCoefficients(),d=t-u.length;for(let x=0;x<d;x++)e[n+x]=0;B.arraycopy(u,0,e,n+d,u.length)}}class Xe{constructor(){}static applyMaskPenaltyRule1(e){return Xe.applyMaskPenaltyRule1Internal(e,!0)+Xe.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const l=n[s];for(let u=0;u<r-1;u++){const d=l[u];d===l[u+1]&&d===n[s+1][u]&&d===n[s+1][u+1]&&t++}}return Xe.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let l=0;l<r;l++){const u=n[s];l+6<r&&u[l]===1&&u[l+1]===0&&u[l+2]===1&&u[l+3]===1&&u[l+4]===1&&u[l+5]===0&&u[l+6]===1&&(Xe.isWhiteHorizontal(u,l-4,l)||Xe.isWhiteHorizontal(u,l+7,l+11))&&t++,s+6<i&&n[s][l]===1&&n[s+1][l]===0&&n[s+2][l]===1&&n[s+3][l]===1&&n[s+4][l]===1&&n[s+5][l]===0&&n[s+6][l]===1&&(Xe.isWhiteVertical(n,l,s-4,s)||Xe.isWhiteVertical(n,l,s+7,s+11))&&t++}return t*Xe.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let u=0;u<i;u++){const d=n[u];for(let x=0;x<r;x++)d[x]===1&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-s)*10/s)*Xe.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(i&1)+i%3;break;case 6:i=n*t,r=(i&1)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let l=0;l<r;l++){let u=0,d=-1;for(let x=0;x<i;x++){const p=t?s[l][x]:s[x][l];p===d?u++:(u>=5&&(n+=Xe.N1+(u-5)),u=1,d=p)}u>=5&&(n+=Xe.N1+(u-5))}return n}}Xe.N1=3,Xe.N2=3,Xe.N3=40,Xe.N4=10;class Or{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)j.fill(t,e)}equals(e){if(!(e instanceof Or))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],s=t.bytes[n];for(let l=0,u=this.width;l<u;++l)if(i[l]!==s[l])return!1}return!0}toString(){const e=new J;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class yn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new J;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<yn.NUM_MASK_PATTERNS}}yn.NUM_MASK_PATTERNS=8;class Pe extends w{}Pe.kind="WriterException";class ce{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){ce.clearMatrix(i),ce.embedBasicPatterns(n,i),ce.embedTypeInfo(t,r,i),ce.maybeEmbedVersionInfo(n,i),ce.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){ce.embedPositionDetectionPatternsAndSeparators(t),ce.embedDarkDotAtLeftBottomCorner(t),ce.maybeEmbedPositionAdjustmentPatterns(e,t),ce.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new ne;ce.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const l=r.get(r.getSize()-1-i),u=ce.TYPE_INFO_COORDINATES[i],d=u[0],x=u[1];if(n.setBoolean(d,x,l),i<8){const p=n.getWidth()-i-1;n.setBoolean(p,8,l)}else{const E=n.getHeight()-7+(i-8);n.setBoolean(8,E,l)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new ne;ce.makeVersionInfoBits(e,n);let r=6*3-1;for(let i=0;i<6;++i)for(let s=0;s<3;++s){const l=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+s,l),t.setBoolean(t.getHeight()-11+s,i,l)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,l=n.getHeight()-1;for(;s>0;){for(s===6&&(s-=1);l>=0&&l<n.getHeight();){for(let u=0;u<2;++u){const d=s-u;if(!ce.isEmpty(n.get(d,l)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&Xe.getDataMaskBit(t,d,l)&&(x=!x),n.setBoolean(d,l,x)}l+=i}i=-i,l+=i,s-=2}if(r!==e.getSize())throw new Pe("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-G.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new T("0 polynomial");const n=ce.findMSBSet(t);for(e<<=n-1;ce.findMSBSet(e)>=n;)e^=t<<ce.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!yn.isValidMaskPattern(t))throw new Pe("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=ce.calculateBCHCode(r,ce.TYPE_INFO_POLY);n.appendBits(i,10);const s=new ne;if(s.appendBits(ce.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new Pe("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=ce.calculateBCHCode(e.getVersionNumber(),ce.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Pe("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;ce.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),ce.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Pe;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!ce.isEmpty(n.get(e+r,t)))throw new Pe;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!ce.isEmpty(n.get(e,t+r)))throw new Pe;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=ce.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=ce.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=ce.POSITION_DETECTION_PATTERN[0].length;ce.embedPositionDetectionPattern(0,0,e),ce.embedPositionDetectionPattern(e.getWidth()-t,0,e),ce.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;ce.embedHorizontalSeparationPattern(0,n-1,e),ce.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),ce.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;ce.embedVerticalSeparationPattern(r,0,e),ce.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),ce.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const l=r[i];if(l>=0)for(let u=0;u!==s;u++){const d=r[u];d>=0&&ce.isEmpty(t.get(d,l))&&ce.embedPositionAdjustmentPattern(d-2,l-2,t)}}}}ce.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ce.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ce.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ce.VERSION_INFO_POLY=7973,ce.TYPE_INFO_POLY=1335,ce.TYPE_INFO_MASK_PATTERN=21522;class aa{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class He{constructor(){}static calculateMaskPenalty(e){return Xe.applyMaskPenaltyRule1(e)+Xe.applyMaskPenaltyRule2(e)+Xe.applyMaskPenaltyRule3(e)+Xe.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=He.DEFAULT_BYTE_MODE_ENCODING;const i=n!==null&&n.get(nt.CHARACTER_SET)!==void 0;i&&(r=n.get(nt.CHARACTER_SET).toString());const s=this.chooseMode(e,r),l=new ne;if(s===ae.BYTE&&(i||He.DEFAULT_BYTE_MODE_ENCODING!==r)){const W=U.getCharacterSetECIByName(r);W!==void 0&&this.appendECI(W,l)}this.appendModeInfo(s,l);const u=new ne;this.appendBytes(e,s,u,r);let d;if(n!==null&&n.get(nt.QR_VERSION)!==void 0){const W=Number.parseInt(n.get(nt.QR_VERSION).toString(),10);d=se.getVersionForNumber(W);const V=this.calculateBitsNeeded(s,l,u,d);if(!this.willFit(V,d,t))throw new Pe("Data too big for requested version")}else d=this.recommendVersion(t,s,l,u);const x=new ne;x.appendBitArray(l);const p=s===ae.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(p,d,s,x),x.appendBitArray(u);const E=d.getECBlocksForLevel(t),b=d.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(b,x);const N=this.interleaveWithECBytes(x,d.getTotalCodewords(),b,E.getNumBlocks()),_=new yn;_.setECLevel(t),_.setMode(s),_.setVersion(d);const O=d.getDimensionForVersion(),D=new Or(O,O),z=this.chooseMaskPattern(N,t,d,D);return _.setMaskPattern(z),ce.buildMatrix(N,t,d,z,D),_.setMatrix(D),_}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,se.getVersionForNumber(1)),s=this.chooseVersion(i,e),l=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(l,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<He.ALPHANUMERIC_TABLE.length?He.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(U.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ae.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const l=e.charAt(i);if(He.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)r=!0;else return ae.BYTE}return r?ae.ALPHANUMERIC:n?ae.NUMERIC:ae.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=we.encode(e,U.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let l=0;l<yn.NUM_MASK_PATTERNS;l++){ce.buildMatrix(e,t,n,l,r);let u=this.calculateMaskPenalty(r);u<i&&(i=u,s=l)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=se.getVersionForNumber(n);if(He.willFit(e,r,t))return r}throw new Pe("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),s=t.getECBlocksForLevel(n).getTotalECCodewords(),l=r-s,u=(e+7)/8;return l>=u}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Pe("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(s&1?17:236,8);if(t.getSize()!==n)throw new Pe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new Pe("Block ID too large");const l=e%n,u=n-l,d=Math.floor(e/n),x=d+1,p=Math.floor(t/n),E=p+1,b=d-p,N=x-E;if(b!==N)throw new Pe("EC bytes mismatch");if(n!==u+l)throw new Pe("RS blocks mismatch");if(e!==(p+b)*u+(E+N)*l)throw new Pe("Total bytes mismatch");r<u?(i[0]=p,s[0]=b):(i[0]=E,s[0]=N)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Pe("Number of bits and data bytes does not match");let i=0,s=0,l=0;const u=new Array;for(let x=0;x<r;++x){const p=new Int32Array(1),E=new Int32Array(1);He.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,p,E);const b=p[0],N=new Uint8Array(b);e.toBytes(8*i,N,0,b);const _=He.generateECBytes(N,E[0]);u.push(new aa(N,_)),s=Math.max(s,b),l=Math.max(l,_.length),i+=p[0]}if(n!==i)throw new Pe("Data bytes does not match offset");const d=new ne;for(let x=0;x<s;++x)for(const p of u){const E=p.getDataBytes();x<E.length&&d.appendBits(E[x],8)}for(let x=0;x<l;++x)for(const p of u){const E=p.getErrorCorrectionBytes();x<E.length&&d.appendBits(E[x],8)}if(t!==d.getSizeInBytes())throw new Pe("Interleaving error: "+t+" and "+d.getSizeInBytes()+" differ.");return d}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=e[s]&255;new di(_e.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Pe(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case ae.NUMERIC:He.appendNumericBytes(e,n);break;case ae.ALPHANUMERIC:He.appendAlphanumericBytes(e,n);break;case ae.BYTE:He.append8BitBytes(e,n,r);break;case ae.KANJI:He.appendKanjiBytes(e,n);break;default:throw new Pe("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=He.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=He.getDigit(e.charAt(r));if(r+2<n){const s=He.getDigit(e.charAt(r+1)),l=He.getDigit(e.charAt(r+2));t.appendBits(i*100+s*10+l,10),r+=3}else if(r+1<n){const s=He.getDigit(e.charAt(r+1));t.appendBits(i*10+s,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=He.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new Pe;if(r+1<n){const s=He.getAlphanumericCode(e.charCodeAt(r+1));if(s===-1)throw new Pe;t.appendBits(i*45+s,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=we.encode(e,n)}catch(i){throw new Pe(i)}for(let i=0,s=r.length;i!==s;i++){const l=r[i];t.appendBits(l,8)}}static appendKanjiBytes(e,t){let n;try{n=we.encode(e,U.SJIS)}catch(i){throw new Pe(i)}const r=n.length;for(let i=0;i<r;i+=2){const s=n[i]&255,l=n[i+1]&255,u=s<<8&4294967295|l;let d=-1;if(u>=33088&&u<=40956?d=u-33088:u>=57408&&u<=60351&&(d=u-49472),d===-1)throw new Pe("Invalid byte sequence");const x=(d>>8)*192+(d&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(ae.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}He.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),He.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class In{write(e,t,n,r=null){if(e.length===0)throw new T("Found empty contents");if(t<0||n<0)throw new T("Requested dimensions are too small: "+t+"x"+n);let i=Ve.L,s=In.QUIET_ZONE_SIZE;r!==null&&(r.get(nt.ERROR_CORRECTION)!==void 0&&(i=Ve.fromString(r.get(nt.ERROR_CORRECTION).toString())),r.get(nt.MARGIN)!==void 0&&(s=Number.parseInt(r.get(nt.MARGIN).toString(),10)));const l=He.encode(e,i,r);return this.renderResult(l,t,n,s)}writeToDom(e,t,n,r,i=null){typeof e=="string"&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new Yt;const s=i.getWidth(),l=i.getHeight(),u=s+r*2,d=l+r*2,x=Math.max(t,u),p=Math.max(n,d),E=Math.min(Math.floor(x/u),Math.floor(p/d)),b=Math.floor((x-s*E)/2),N=Math.floor((p-l*E)/2),_=this.createSVGElement(x,p);for(let O=0,D=N;O<l;O++,D+=E)for(let z=0,W=b;z<s;z++,W+=E)if(i.get(z,O)===1){const V=this.createSvgRectElement(W,D,E,E);_.appendChild(V)}return _}createSVGElement(e,t){const n=document.createElementNS(In.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(In.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}In.QUIET_ZONE_SIZE=4,In.SVG_NS="http://www.w3.org/2000/svg";class Ln{encode(e,t,n,r,i){if(e.length===0)throw new T("Found empty contents");if(t!==le.QR_CODE)throw new T("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new T(`Requested dimensions are too small: ${n}x${r}`);let s=Ve.L,l=Ln.QUIET_ZONE_SIZE;i!==null&&(i.get(nt.ERROR_CORRECTION)!==void 0&&(s=Ve.fromString(i.get(nt.ERROR_CORRECTION).toString())),i.get(nt.MARGIN)!==void 0&&(l=Number.parseInt(i.get(nt.MARGIN).toString(),10)));const u=He.encode(e,s,i);return Ln.renderResult(u,n,r,l)}static renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new Yt;const s=i.getWidth(),l=i.getHeight(),u=s+r*2,d=l+r*2,x=Math.max(t,u),p=Math.max(n,d),E=Math.min(Math.floor(x/u),Math.floor(p/d)),b=Math.floor((x-s*E)/2),N=Math.floor((p-l*E)/2),_=new fe(x,p);for(let O=0,D=N;O<l;O++,D+=E)for(let z=0,W=b;z<s;z++,W+=E)i.get(z,O)===1&&_.setRegion(W,D,E,E);return _}}Ln.QUIET_ZONE_SIZE=4;class la{encode(e,t,n,r,i){let s;switch(t){case le.QR_CODE:s=new Ln;break;default:throw new T("No encoder available for format "+t)}return s.encode(e,t,n,r,i)}}class qt extends Ke{constructor(e,t,n,r,i,s,l,u){if(super(s,l),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+l>n)throw new T("Crop rectangle does not fit within image data.");u&&this.reverseHorizontal(s,l)}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const l=s*e;B.arraycopy(this.yuvData,i,r,l,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new qt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/qt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/qt.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const l=s*e;for(let u=0;u<e;u++){const d=r[i+u*qt.THUMBNAIL_SCALE_FACTOR]&255;n[l+u]=4278190080|d*65793}i+=this.dataWidth*qt.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/qt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/qt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const s=i+e/2;for(let l=i,u=i+e-1;l<s;l++,u--){const d=n[l];n[l]=n[u],n[u]=d}}}invert(){return new At(this)}}qt.THUMBNAIL_SCALE_FACTOR=2;class gi extends Ke{constructor(e,t,n,r,i,s,l){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=l,e.BYTES_PER_ELEMENT===4){const u=t*n,d=new Uint8ClampedArray(u);for(let x=0;x<u;x++){const p=e[x],E=p>>16&255,b=p>>7&510,N=p&255;d[x]=(E+b+N)/4&255}this.luminances=d}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),s===void 0&&(this.left=0),l===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return B.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const l=s*e;B.arraycopy(this.luminances,i,r,l,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new gi(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new At(this)}}class xs extends U{static forName(e){return this.getCharacterSetECIByName(e)}}class xi{}xi.ISO_8859_1=U.ISO8859_1;class ws{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class As{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class ca{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Bn extends ca{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Bn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Bn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+G.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class wi extends Bn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new wi(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ua(C,e,t){return new wi(C,e,t)}function rr(C,e,t){return new Bn(C,e,t)}const fa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gn=0,Mr=1,kt=2,Cs=3,Kt=4,ha=new Bn(null,0,0),Ai=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function da(C){for(let e of C)j.fill(e,-1);return C[gn][Kt]=0,C[Mr][Kt]=0,C[Mr][gn]=28,C[Cs][Kt]=0,C[kt][Kt]=0,C[kt][gn]=15,C}const ps=da(j.createInt32Array(6,6));class $t{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let s=Ai[this.mode][e];r=rr(r,s&65535,s>>16),n+=s>>16}let i=e===kt?4:5;return r=rr(r,t,i),new $t(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===kt?4:5;return n=rr(n,ps[this.mode][e],r),n=rr(n,t,5),new $t(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Kt||this.mode===kt){let l=Ai[n][gn];t=rr(t,l&65535,l>>16),r+=l>>16,n=gn}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new $t(t,n,this.binaryShiftByteCount+1,r+i);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=ua(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new $t(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Ai[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=$t.calculateBinaryShiftCost(e)-$t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new ne;for(const r of t)r.appendTo(n,e);return n}toString(){return q.format("%s bits=%d bytes=%d",fa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}$t.INITIAL_STATE=new $t(ha,gn,0,0);function ga(C){const e=q.getCharCode(" "),t=q.getCharCode("."),n=q.getCharCode(",");C[gn][e]=1;const r=q.getCharCode("Z"),i=q.getCharCode("A");for(let E=i;E<=r;E++)C[gn][E]=E-i+2;C[Mr][e]=1;const s=q.getCharCode("z"),l=q.getCharCode("a");for(let E=l;E<=s;E++)C[Mr][E]=E-l+2;C[kt][e]=1;const u=q.getCharCode("9"),d=q.getCharCode("0");for(let E=d;E<=u;E++)C[kt][E]=E-d+2;C[kt][n]=12,C[kt][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<x.length;E++)C[Cs][q.getCharCode(x[E])]=E;const p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<p.length;E++)q.getCharCode(p[E])>0&&(C[Kt][q.getCharCode(p[E])]=E);return C}const Ci=ga(j.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=q.getCharCode(" "),t=q.getCharCode(`
`);let n=As.singletonList($t.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let s,l=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case q.getCharCode("\r"):s=l===t?2:0;break;case q.getCharCode("."):s=l===e?3:0;break;case q.getCharCode(","):s=l===e?4:0;break;case q.getCharCode(":"):s=l===e?5:0;break;default:s=0}s>0?(n=ir.updateStateListForPair(n,i,s),i++):n=this.updateStateListForChar(n,i)}return As.min(n,(i,s)=>i.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=Ci[e.getMode()][r]>0,s=null;for(let l=0;l<=Kt;l++){let u=Ci[l][r];if(u>0){if(s==null&&(s=e.endBinaryShift(t)),!i||l===e.getMode()||l===kt){const d=s.latchAndAppend(l,u);n.push(d)}if(!i&&ps[e.getMode()][l]>=0){const d=s.shiftAndAppend(l,u);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||Ci[e.getMode()][r]===0){let l=e.addBinaryShiftChar(t);n.push(l)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Kt,n)),e.getMode()!==Kt&&r.push(i.shiftAndAppend(Kt,n)),n===3||n===4){let s=i.latchAndAppend(kt,16-n).latchAndAppend(kt,1);r.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(s)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(s=>s!==i))}r&&t.push(n)}return t}}class Se{constructor(){}static encodeBytes(e){return Se.encode(e,Se.DEFAULT_EC_PERCENT,Se.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new ir(e).encode(),i=G.truncDivision(r.getSize()*t,100)+11,s=r.getSize()+i,l,u,d,x,p;if(n!==Se.DEFAULT_AZTEC_LAYERS){if(l=n<0,u=Math.abs(n),u>(l?Se.MAX_NB_BITS_COMPACT:Se.MAX_NB_BITS))throw new T(q.format("Illegal value %s for layers",n));d=Se.totalBitsInLayer(u,l),x=Se.WORD_SIZE[u];let V=d-d%x;if(p=Se.stuffBits(r,x),p.getSize()+i>V)throw new T("Data to large for user specified layer");if(l&&p.getSize()>x*64)throw new T("Data to large for user specified layer")}else{x=0,p=null;for(let V=0;;V++){if(V>Se.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(l=V<=3,u=l?V+1:V,d=Se.totalBitsInLayer(u,l),s>d)continue;(p==null||x!==Se.WORD_SIZE[u])&&(x=Se.WORD_SIZE[u],p=Se.stuffBits(r,x));let me=d-d%x;if(!(l&&p.getSize()>x*64)&&p.getSize()+i<=me)break}}let E=Se.generateCheckWords(p,d,x),b=p.getSize()/x,N=Se.generateModeMessage(l,u,b),_=(l?11:14)+u*4,O=new Int32Array(_),D;if(l){D=_;for(let V=0;V<O.length;V++)O[V]=V}else{D=_+1+2*G.truncDivision(G.truncDivision(_,2)-1,15);let V=G.truncDivision(_,2),me=G.truncDivision(D,2);for(let xe=0;xe<V;xe++){let Tt=xe+G.truncDivision(xe,15);O[V-xe-1]=me-Tt-1,O[V+xe]=me+Tt+1}}let z=new fe(D);for(let V=0,me=0;V<u;V++){let xe=(u-V)*4+(l?9:12);for(let Tt=0;Tt<xe;Tt++){let jt=Tt*2;for(let Nt=0;Nt<2;Nt++)E.get(me+jt+Nt)&&z.set(O[V*2+Nt],O[V*2+Tt]),E.get(me+xe*2+jt+Nt)&&z.set(O[V*2+Tt],O[_-1-V*2-Nt]),E.get(me+xe*4+jt+Nt)&&z.set(O[_-1-V*2-Nt],O[_-1-V*2-Tt]),E.get(me+xe*6+jt+Nt)&&z.set(O[_-1-V*2-Tt],O[V*2+Nt])}me+=xe*8}if(Se.drawModeMessage(z,l,D,N),l)Se.drawBullsEye(z,G.truncDivision(D,2),5);else{Se.drawBullsEye(z,G.truncDivision(D,2),7);for(let V=0,me=0;V<G.truncDivision(_,2)-1;V+=15,me+=16)for(let xe=G.truncDivision(D,2)&1;xe<D;xe+=2)z.set(G.truncDivision(D,2)-me,xe),z.set(G.truncDivision(D,2)+me,xe),z.set(xe,G.truncDivision(D,2)-me),z.set(xe,G.truncDivision(D,2)+me)}let W=new ws;return W.setCompact(l),W.setSize(D),W.setLayers(u),W.setCodeWords(b),W.setMatrix(z),W}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new ne;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=Se.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=Se.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=G.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let l=i-3+s;r.get(s)&&e.set(l,i-5),r.get(s+7)&&e.set(i+5,l),r.get(20-s)&&e.set(l,i+5),r.get(27-s)&&e.set(i-5,l)}else for(let s=0;s<10;s++){let l=i-5+s+G.truncDivision(s,5);r.get(s)&&e.set(l,i-7),r.get(s+10)&&e.set(i+7,l),r.get(29-s)&&e.set(l,i+7),r.get(39-s)&&e.set(i-7,l)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new di(Se.getGF(n)),s=G.truncDivision(t,n),l=Se.bitsToWords(e,n,s);i.encode(l,s-r);let u=t%n,d=new ne;d.appendBits(0,u);for(const x of Array.from(l))d.appendBits(x,n);return d}static bitsToWords(e,t,n){let r=new Int32Array(n),i,s;for(i=0,s=e.getSize()/t;i<s;i++){let l=0;for(let u=0;u<t;u++)l|=e.get(i*t+u)?1<<t-u-1:0;r[i]=l}return r}static getGF(e){switch(e){case 4:return _e.AZTEC_PARAM;case 6:return _e.AZTEC_DATA_6;case 8:return _e.AZTEC_DATA_8;case 10:return _e.AZTEC_DATA_10;case 12:return _e.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,t){let n=new ne,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let l=0;for(let u=0;u<t;u++)(s+u>=r||e.get(s+u))&&(l|=1<<t-1-u);(l&i)===i?(n.appendBits(l&i,t),s--):l&i?n.appendBits(l,t):(n.appendBits(l|1,t),s--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Se.DEFAULT_EC_PERCENT=33,Se.DEFAULT_AZTEC_LAYERS=0,Se.MAX_NB_BITS=32,Se.MAX_NB_BITS_COMPACT=4,Se.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Rr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=xi.ISO_8859_1,l=Se.DEFAULT_EC_PERCENT,u=Se.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(nt.CHARACTER_SET)&&(s=xs.forName(i.get(nt.CHARACTER_SET).toString())),i.has(nt.ERROR_CORRECTION)&&(l=G.parseInt(i.get(nt.ERROR_CORRECTION).toString())),i.has(nt.AZTEC_LAYERS)&&(u=G.parseInt(i.get(nt.AZTEC_LAYERS).toString()))),Rr.encodeLayers(e,t,n,r,s,l,u)}static encodeLayers(e,t,n,r,i,s,l){if(t!==le.AZTEC)throw new T("Can only encode AZTEC, but got "+t);let u=Se.encode(q.getBytes(e,i),s,l);return Rr.renderResult(u,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new Yt;let i=r.getWidth(),s=r.getHeight(),l=Math.max(t,i),u=Math.max(n,s),d=Math.min(l/i,u/s),x=(l-i*d)/2,p=(u-s*d)/2,E=new fe(l,u);for(let b=0,N=p;b<s;b++,N+=d)for(let _=0,O=x;_<i;_++,O+=d)r.get(_,b)&&E.setRegion(O,N,d,d);return E}}c.AbstractExpandedDecoder=ri,c.ArgumentException=S,c.ArithmeticException=pr,c.AztecCode=ws,c.AztecCodeReader=yr,c.AztecCodeWriter=Rr,c.AztecDecoder=Ue,c.AztecDetector=ns,c.AztecDetectorResult=es,c.AztecEncoder=Se,c.AztecHighLevelEncoder=ir,c.AztecPoint=pt,c.BarcodeFormat=le,c.Binarizer=Q,c.BinaryBitmap=H,c.BitArray=ne,c.BitMatrix=fe,c.BitSource=ai,c.BrowserAztecCodeReader=Vo,c.BrowserBarcodeReader=Go,c.BrowserCodeReader=Gt,c.BrowserDatamatrixCodeReader=Xo,c.BrowserMultiFormatReader=ia,c.BrowserPDF417Reader=sa,c.BrowserQRCodeReader=oa,c.BrowserQRCodeSvgWriter=In,c.CharacterSetECI=U,c.ChecksumException=k,c.Code128Reader=Y,c.Code39Reader=et,c.DataMatrixDecodedBitStreamParser=un,c.DataMatrixReader=fn,c.DecodeHintType=K,c.DecoderResult=Xn,c.DefaultGridSampler=ts,c.DetectorResult=Er,c.EAN13Reader=Cn,c.EncodeHintType=nt,c.Exception=w,c.FormatException=F,c.GenericGF=_e,c.GenericGFPoly=yt,c.GlobalHistogramBinarizer=Fe,c.GridSampler=Jr,c.GridSamplerInstance=ln,c.HTMLCanvasElementLuminanceSource=lt,c.HybridBinarizer=he,c.ITFReader=Be,c.IllegalArgumentException=T,c.IllegalStateException=Yt,c.InvertedLuminanceSource=At,c.LuminanceSource=Ke,c.MathUtils=be,c.MultiFormatOneDReader=Dn,c.MultiFormatReader=gs,c.MultiFormatWriter=la,c.NotFoundException=v,c.OneDReader=Je,c.PDF417DecodedBitStreamParser=R,c.PDF417DecoderErrorCorrection=ls,c.PDF417Reader=ft,c.PDF417ResultMetadata=us,c.PerspectiveTransform=Vt,c.PlanarYUVLuminanceSource=qt,c.QRCodeByteMatrix=Or,c.QRCodeDataMask=Bt,c.QRCodeDecodedBitStreamParser=We,c.QRCodeDecoderErrorCorrectionLevel=Ve,c.QRCodeDecoderFormatInformation=gt,c.QRCodeEncoder=He,c.QRCodeEncoderQRCode=yn,c.QRCodeMaskUtil=Xe,c.QRCodeMatrixUtil=ce,c.QRCodeMode=ae,c.QRCodeReader=hn,c.QRCodeVersion=se,c.QRCodeWriter=Ln,c.RGBLuminanceSource=gi,c.RSS14Reader=Ye,c.RSSExpandedReader=P,c.ReaderException=_r,c.ReedSolomonDecoder=Qn,c.ReedSolomonEncoder=di,c.ReedSolomonException=_n,c.Result=Ct,c.ResultMetadataType=rt,c.ResultPoint=ie,c.StringUtils=q,c.UnsupportedOperationException=pe,c.VideoInputDevice=Yn,c.WhiteRectangleDetector=nn,c.WriterException=Pe,c.ZXingArrays=j,c.ZXingCharset=xs,c.ZXingInteger=G,c.ZXingStandardCharsets=xi,c.ZXingStringBuilder=J,c.ZXingStringEncoding=we,c.ZXingSystem=B,c.createAbstractExpandedDecoder=os,Object.defineProperty(c,"__esModule",{value:!0})})})(ki,ki.exports);var je=ki.exports;const Bc=hc(je),Pc=Aa({__proto__:null,default:Bc},[je]);var Fs=function(){function o(a,c,f){if(this.formatMap=new Map([[te.QR_CODE,je.BarcodeFormat.QR_CODE],[te.AZTEC,je.BarcodeFormat.AZTEC],[te.CODABAR,je.BarcodeFormat.CODABAR],[te.CODE_39,je.BarcodeFormat.CODE_39],[te.CODE_93,je.BarcodeFormat.CODE_93],[te.CODE_128,je.BarcodeFormat.CODE_128],[te.DATA_MATRIX,je.BarcodeFormat.DATA_MATRIX],[te.MAXICODE,je.BarcodeFormat.MAXICODE],[te.ITF,je.BarcodeFormat.ITF],[te.EAN_13,je.BarcodeFormat.EAN_13],[te.EAN_8,je.BarcodeFormat.EAN_8],[te.PDF_417,je.BarcodeFormat.PDF_417],[te.RSS_14,je.BarcodeFormat.RSS_14],[te.RSS_EXPANDED,je.BarcodeFormat.RSS_EXPANDED],[te.UPC_A,je.BarcodeFormat.UPC_A],[te.UPC_E,je.BarcodeFormat.UPC_E],[te.UPC_EAN_EXTENSION,je.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Pc)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=c,this.logger=f;var g=this.createZXingFormats(a),h=new Map;h.set(je.DecodeHintType.POSSIBLE_FORMATS,g),h.set(je.DecodeHintType.TRY_HARDER,!1),this.hints=h}return o.prototype.decodeAsync=function(a){var c=this;return new Promise(function(f,g){try{f(c.decode(a))}catch(h){g(h)}})},o.prototype.decode=function(a){var c=new je.MultiFormatReader(this.verbose,this.hints),f=new je.HTMLCanvasElementLuminanceSource(a),g=new je.BinaryBitmap(new je.HybridBinarizer(f)),h=c.decode(g);return{text:h.text,format:vo.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(c,f,g){a.set(c,f)}),a},o.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},o.prototype.createZXingFormats=function(a){for(var c=[],f=0,g=a;f<g.length;f++){var h=g[f];this.formatMap.has(h)?c.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return c},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o}(),kc=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},Fc=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Us=function(){function o(a,c,f){if(this.formatMap=new Map([[te.QR_CODE,"qr_code"],[te.AZTEC,"aztec"],[te.CODABAR,"codabar"],[te.CODE_39,"code_39"],[te.CODE_93,"code_93"],[te.CODE_128,"code_128"],[te.DATA_MATRIX,"data_matrix"],[te.ITF,"itf"],[te.EAN_13,"ean_13"],[te.EAN_8,"ean_8"],[te.PDF_417,"pdf417"],[te.UPC_A,"upc_a"],[te.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=f;var g=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},o.prototype.decodeAsync=function(a){return kc(this,void 0,void 0,function(){var c,f;return Fc(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(a)];case 1:if(c=g.sent(),!c||c.length===0)throw"No barcode or QR code detected.";return f=this.selectLargestBarcode(c),[2,{text:f.rawValue,format:vo.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(a){for(var c=null,f=0,g=0,h=a;g<h.length;g++){var A=h[g],m=A.boundingBox.width*A.boundingBox.height;m>f&&(f=m,c=A)}if(!c)throw"No largest barcode found";return c},o.prototype.createBarcodeDetectorFormats=function(a){for(var c=[],f=0,g=a;f<g.length;f++){var h=g[f];this.formatMap.has(h)?c.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:c}},o.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},o.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(c,f,g){a.set(c,f)}),a},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o}(),Vs=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},Hs=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Uc=function(){function o(a,c,f,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=f,c&&Us.isSupported()?(this.primaryDecoder=new Us(a,f,g),this.secondaryDecoder=new Fs(a,f,g)):this.primaryDecoder=new Fs(a,f,g)}return o.prototype.decodeAsync=function(a){return Vs(this,void 0,void 0,function(){var c;return Hs(this,function(f){switch(f.label){case 0:c=performance.now(),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,f.sent()];case 3:return this.possiblyLogPerformance(c),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(a){return Vs(this,void 0,void 0,function(){var c,f;return Hs(this,function(g){switch(g.label){case 0:c=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,g.sent()];case 3:if(f=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw f;case 4:return this.possiblyLogPerformance(c),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(a){if(this.verbose){var c=performance.now()-a;this.executionResults.push(c),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,c=0,f=this.executionResults;c<f.length;c++){var g=f[c];a+=g}var h=a/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o}(),$i=function(){var o=function(a,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(f[h]=g[h])},o(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(a,c);function f(){this.constructor=a}a.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}(),Gr=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},Yr=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},ko=function(){function o(a,c){this.name=a,this.track=c}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(a){var c={};c[this.name]=a;var f={advanced:[c]};return this.track.applyConstraints(f)},o.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var c=a[this.name];return c}return null},o}(),Vc=function(o){$i(a,o);function a(c,f){return o.call(this,c,f)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(c){var f={};f[this.name]=c;var g={advanced:[f]};return this.track.applyConstraints(g)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var c=this.track.getCapabilities(),f=c[this.name];return{min:f.min,max:f.max,step:f.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(ko),Hc=function(o){$i(a,o);function a(c){return o.call(this,"zoom",c)||this}return a}(Vc),jc=function(o){$i(a,o);function a(c){return o.call(this,"torch",c)||this}return a}(ko),zc=function(){function o(a){this.track=a}return o.prototype.zoomFeature=function(){return new Hc(this.track)},o.prototype.torchFeature=function(){return new jc(this.track)},o}(),Wc=function(){function o(a,c,f){this.isClosed=!1,this.parentElement=a,this.mediaStream=c,this.callbacks=f,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return o.prototype.createVideoElement=function(a){var c=document.createElement("video");return c.style.width="".concat(a,"px"),c.style.display="block",c.muted=!0,c.setAttribute("muted","true"),c.playsInline=!0,c},o.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var c=function(){var f=a.surface.clientWidth,g=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(f,g),a.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(a,c,f,g){return Gr(this,void 0,void 0,function(){var h,A;return Yr(this,function(m){switch(m.label){case 0:return h=new o(a,c,g),f.aspectRatio?(A={aspectRatio:f.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(A)]):[3,2];case 1:m.sent(),m.label=2;case 2:return h.setupSurface(),[2,h]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(a){this.failIfClosed();var c=this,f=function(){setTimeout(a,200),c.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(a){return Gr(this,void 0,void 0,function(){return Yr(this,function(c){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(c,f){var g=a.mediaStream.getVideoTracks(),h=g.length,A=0;a.mediaStream.getVideoTracks().forEach(function(m){a.mediaStream.removeTrack(m),m.stop(),++A,A>=h&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),c())})})},o.prototype.getCapabilities=function(){return new zc(this.getFirstTrackOrFail())},o}(),Gc=function(){function o(a){this.mediaStream=a}return o.prototype.render=function(a,c,f){return Gr(this,void 0,void 0,function(){return Yr(this,function(g){return[2,Wc.create(a,this.mediaStream,c,f)]})})},o.create=function(a){return Gr(this,void 0,void 0,function(){var c,f;return Yr(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return f=g.sent(),[2,new o(f)]}})})},o}(),js=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},zs=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Yc=function(){function o(){}return o.failIfNotSupported=function(){return js(this,void 0,void 0,function(){return zs(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(a){return js(this,void 0,void 0,function(){return zs(this,function(c){return[2,Gc.create(a)]})})},o}(),Xc=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},Zc=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Qc=function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var a=Vn.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(a=Vn.insecureContextCameraQueryError()),Promise.reject(a)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},o.getCamerasFromMediaDevices=function(){return Xc(this,void 0,void 0,function(){var a,c,f,g,h,A,m;return Zc(this,function(y){switch(y.label){case 0:return a=function(w){for(var S=w.getVideoTracks(),T=0,H=S;T<H.length;T++){var k=H[T];k.enabled=!1,k.stop(),w.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return c=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(f=y.sent(),g=[],h=0,A=f;h<A.length;h++)m=A[h],m.kind==="videoinput"&&g.push({id:m.deviceId,label:m.label});return a(c),[2,g]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,c){var f=function(h){for(var A=[],m=0,y=h;m<y.length;m++){var w=y[m];w.kind==="video"&&A.push({id:w.id,label:w.label})}a(A)},g=MediaStreamTrack;g.getSources(f)})},o}(),Ze;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(Ze||(Ze={}));var qc=function(){function o(){this.state=Ze.NOT_STARTED,this.onGoingTransactionNewState=Ze.UNKNOWN}return o.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},o.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===Ze.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ze.UNKNOWN,this.directTransition(a)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ze.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ze.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ze.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(a){switch(this.state){case Ze.UNKNOWN:throw"Transition from unknown is not allowed";case Ze.NOT_STARTED:this.failIfNewStateIs(a,[Ze.PAUSED]);break;case Ze.SCANNING:break;case Ze.PAUSED:break}},o.prototype.failIfNewStateIs=function(a,c){for(var f=0,g=c;f<g.length;f++){var h=g[f];if(a===h)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},o}(),Kc=function(){function o(a){this.stateManager=a}return o.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},o.prototype.directTransition=function(a){this.stateManager.directTransition(a)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===Ze.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==Ze.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ze.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===Ze.PAUSED},o}(),$c=function(){function o(){}return o.create=function(){return new Kc(new qc)},o}(),Jc=function(){var o=function(a,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(f[h]=g[h])},o(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(a,c);function f(){this.constructor=a}a.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}(),Mt=function(o){Jc(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(Wt),e1=function(){function o(a,c){this.logger=c,this.fps=Mt.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=Mt.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Po.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!Jt(this.qrbox)},o.create=function(a,c){return new o(a,c)},o}(),Ws=function(){function o(a,c){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var f;typeof c=="boolean"?this.verbose=c===!0:c&&(f=c,this.verbose=f.verbose===!0,f.experimentalFeatures),this.logger=new Bo(this.verbose),this.qrcode=new Uc(this.getSupportedFormats(c),this.getUseBarCodeDetectorIfSupported(f),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=$c.create()}return o.prototype.start=function(a,c,f,g){var h=this;if(!a)throw"cameraIdOrConfig is required";if(!f||typeof f!="function")throw"qrCodeSuccessCallback is required and should be a function.";var A;g?A=g:A=this.verbose?this.logger.log:function(){};var m=e1.create(c,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=y,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Mt.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var T=this,H=this.stateManagerProxy.startTransition(Ze.SCANNING);return new Promise(function(k,Q){var B=w?m.videoConstraints:T.createVideoConstraints(a);if(!B){H.cancel(),Q("videoConstraints should be defined");return}var L={};(!w||m.aspectRatio)&&(L.aspectRatio=m.aspectRatio);var X={onRenderSurfaceReady:function(j,G){T.setupUi(j,G,m),T.isScanning=!0,T.foreverScan(m,f,A)}};Yc.failIfNotSupported().then(function(j){j.create(B).then(function(G){return G.render(h.element,L,X).then(function(ne){T.renderedCamera=ne,H.execute(),k(null)}).catch(function(ne){H.cancel(),Q(ne)})}).catch(function(G){H.cancel(),Q(Vn.errorGettingUserMedia(G))})}).catch(function(j){H.cancel(),Q(Vn.cameraStreamingNotSupported())})})},o.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ze.PAUSED),this.showPausedState(),(Jt(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,c=function(){a.stateManagerProxy.directTransition(Ze.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){c();return}this.renderedCamera.resume(function(){c()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var c=this.stateManagerProxy.startTransition(Ze.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var f=function(){if(a.element){var h=document.getElementById(Mt.SHADED_REGION_ELEMENT_ID);h&&a.element.removeChild(h)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),f(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),c.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(a,c){return this.scanFileV2(a,c).then(function(f){return f.decodedText})},o.prototype.scanFileV2=function(a,c){var f=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Jt(c)&&(c=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,h){f.possiblyCloseLastScanImageFile(),f.clearElement(),f.lastScanImageFile=URL.createObjectURL(a);var A=new Image;A.onload=function(){var m=A.width,y=A.height,w=document.getElementById(f.elementId),S=w.clientWidth?w.clientWidth:Mt.DEFAULT_WIDTH,T=Math.max(w.clientHeight?w.clientHeight:y,Mt.FILE_SCAN_MIN_HEIGHT),H=f.computeCanvasDrawConfig(m,y,S,T);if(c){var k=f.createCanvasElement(S,T,"qr-canvas-visible");k.style.display="inline-block",w.appendChild(k);var Q=k.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=S,Q.canvas.height=T,Q.drawImage(A,0,0,m,y,H.x,H.y,H.width,H.height)}var B=Mt.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(A.width,H.width),X=Math.max(A.height,H.height),j=L+2*B,G=X+2*B,ne=f.createCanvasElement(j,G);w.appendChild(ne);var Ie=ne.getContext("2d");if(!Ie)throw"Unable to get 2d context from canvas";Ie.canvas.width=j,Ie.canvas.height=G,Ie.drawImage(A,0,0,m,y,B,B,L,X);try{f.qrcode.decodeRobustlyAsync(ne).then(function(K){g(Ps.createFromQrcodeResult(K))}).catch(h)}catch(K){h("QR code parse error, error = ".concat(K))}},A.onerror=h,A.onabort=h,A.onstalled=h,A.onsuspend=h,A.src=URL.createObjectURL(a)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return Qc.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(a){if(a){if(!Po.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(a){var c=[te.QR_CODE,te.AZTEC,te.CODABAR,te.CODE_39,te.CODE_93,te.CODE_128,te.DATA_MATRIX,te.MAXICODE,te.ITF,te.EAN_13,te.EAN_8,te.PDF_417,te.RSS_14,te.RSS_EXPANDED,te.UPC_A,te.UPC_E,te.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return c;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var f=[],g=0,h=a.formatsToSupport;g<h.length;g++){var A=h[g];vc(A)?f.push(A):this.logger.warn("Invalid format: ".concat(A," passed in config, ignoring."))}if(f.length===0)throw"None of formatsToSupport match supported values.";return f},o.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Jt(a))return!0;if(!Jt(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Jt(a.experimentalFeatures))return!0;var c=a.experimentalFeatures;return Jt(c.useBarCodeDetectorIfSupported)?!0:c.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(a,c,f){var g=this,h=f.qrbox;this.validateQrboxConfig(h);var A=this.toQrdimensions(a,c,h),m=function(w){if(w<Mt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Mt.MIN_QR_BOX_SIZE,"px.")},y=function(w){return w>a&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=a),w};m(A.width),m(A.height),A.width=y(A.width)},o.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(a,c,f){if(typeof f=="number")return{width:f,height:f};if(typeof f=="function")try{return f(a,c)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return f},o.prototype.setupUi=function(a,c,f){f.isShadedBoxEnabled()&&this.validateQrboxSize(a,c,f);var g=Jt(f.qrbox)?{width:a,height:c}:f.qrbox;this.validateQrboxConfig(g);var h=this.toQrdimensions(a,c,g);h.height>c&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var A=f.isShadedBoxEnabled()&&h.height<=c,m={x:0,y:0,width:a,height:c},y=A?this.getShadedRegionBounds(a,c,h):m,w=this.createCanvasElement(y.width,y.height),S={willReadFrequently:!0},T=w.getContext("2d",S);T.canvas.width=y.width,T.canvas.height=y.height,this.element.append(w),A&&this.possiblyInsertShadingElement(this.element,a,c,h),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=T,this.canvasElement=w},o.prototype.createScannerPausedUiElement=function(a){var c=document.createElement("div");c.innerText=Vn.scannerPaused(),c.style.display="none",c.style.position="absolute",c.style.top="0px",c.style.zIndex="1",c.style.background="rgba(9, 9, 9, 0.46)",c.style.color="#FFECEC",c.style.textAlign="center",c.style.width="100%",a.appendChild(c),this.scannerPausedUiElement=c},o.prototype.scanContext=function(a,c){var f=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return a(g.text,Ps.createFromQrcodeResult(g)),f.possiblyUpdateShaders(!0),!0}).catch(function(g){f.possiblyUpdateShaders(!1);var h=Vn.codeParseError(g);return c(h,Lo.createFrom(h)),!1})},o.prototype.foreverScan=function(a,c,f){var g=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),A=h.videoWidth/h.clientWidth,m=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*A,w=this.qrRegion.height*m,S=this.qrRegion.x*A,T=this.qrRegion.y*m;this.context.drawImage(h,S,T,y,w,0,0,this.qrRegion.width,this.qrRegion.height);var H=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(a,c,f)},g.getTimeoutFps(a.fps))};this.scanContext(c,f).then(function(k){!k&&a.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(c,f).finally(function(){H()})):H()}).catch(function(k){g.logger.logError("Error happend while scanning context",k),H()})}},o.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var c="facingMode",f="deviceId",g={user:!0,environment:!0},h="exact",A=function(Q){if(Q in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Q,"'")},m=Object.keys(a);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var y=Object.keys(a)[0];if(y!==c&&y!==f)throw"Only '".concat(c,"' and '").concat(f,"' ")+" are supported for 'cameraIdOrConfig'";if(y===c){var w=a.facingMode;if(typeof w=="string"){if(A(w))return{facingMode:w}}else if(typeof w=="object")if(h in w){if(A(w["".concat(h)]))return{facingMode:{exact:w["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var S=typeof w;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var T=a.deviceId;if(typeof T=="string")return{deviceId:T};if(typeof T=="object"){if(h in T)return{deviceId:{exact:T["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var H=typeof T;throw"Invalid type of 'deviceId' = ".concat(H)}}}var k=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},o.prototype.computeCanvasDrawConfig=function(a,c,f,g){if(a<=f&&c<=g){var h=(f-a)/2,A=(g-c)/2;return{x:h,y:A,width:a,height:c}}else{var m=a,y=c;return a>f&&(c=f/a*c,a=f),c>g&&(a=g/c*a,c=g),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(y)+" to ".concat(a,"X").concat(c,".")),this.computeCanvasDrawConfig(a,c,f,g)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},o.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(c){c.style.backgroundColor=a?Mt.BORDER_SHADER_MATCH_COLOR:Mt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(a,c,f){var g=a,h=c,A=document.createElement("canvas");return A.style.width="".concat(g,"px"),A.style.height="".concat(h,"px"),A.style.display="none",A.id=Jt(f)?"qr-canvas":f,A},o.prototype.getShadedRegionBounds=function(a,c,f){if(f.width>a||f.height>c)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-f.width)/2,y:(c-f.height)/2,width:f.width,height:f.height}},o.prototype.possiblyInsertShadingElement=function(a,c,f,g){if(!(c-g.width<1||f-g.height<1)){var h=document.createElement("div");h.style.position="absolute";var A=(c-g.width)/2,m=(f-g.height)/2;if(h.style.borderLeft="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Mt.SHADED_REGION_ELEMENT_ID),c-g.width<11||f-g.height<11)this.hasBorderShaders=!1;else{var y=5,w=40;this.insertShaderBorders(h,w,y,-y,null,0,!0),this.insertShaderBorders(h,w,y,-y,null,0,!1),this.insertShaderBorders(h,w,y,null,-y,0,!0),this.insertShaderBorders(h,w,y,null,-y,0,!1),this.insertShaderBorders(h,y,w+y,-y,null,-y,!0),this.insertShaderBorders(h,y,w+y,null,-y,-y,!0),this.insertShaderBorders(h,y,w+y,-y,null,-y,!1),this.insertShaderBorders(h,y,w+y,null,-y,-y,!1),this.hasBorderShaders=!0}a.append(h)}},o.prototype.insertShaderBorders=function(a,c,f,g,h,A,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Mt.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(c,"px"),y.style.height="".concat(f,"px"),g!==null&&(y.style.top="".concat(g,"px")),h!==null&&(y.style.bottom="".concat(h,"px")),m?y.style.left="".concat(A,"px"):y.style.right="".concat(A,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),a.appendChild(y)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(a){return 1e3/a},o}(),Ji="data:image/svg+xml;base64,",t1=Ji+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",n1=Ji+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Gs=Ji+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",r1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Ys=function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o}(),i1=function(){function o(){this.data=Ys.createDefault();var a=localStorage.getItem(o.LOCAL_STORAGE_KEY);a?this.data=JSON.parse(a):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(a){this.data.hasPermission=a,this.flush()},o.prototype.setLastUsedCameraId=function(a){this.data.lastUsedCameraId=a,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=Ys.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o}(),s1=function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(a){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ks.poweredBy();var c=document.createElement("a");c.innerText="ScanApp",c.href="https://scanapp.org",c.target="new",c.style.color="white",this.infoDiv.appendChild(c);var f=document.createElement("br"),g=document.createElement("br");this.infoDiv.appendChild(f),this.infoDiv.appendChild(g);var h=document.createElement("a");h.innerText=ks.reportIssues(),h.href="https://github.com/mebjas/html5-qrcode/issues",h.target="new",h.style.color="white",this.infoDiv.appendChild(h),a.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o}(),o1=function(){function o(a,c){this.isShowingInfoIcon=!0,this.onTapIn=a,this.onTapOut=c,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(a){var c=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Gs,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(f){return c.onHoverIn()},this.infoIcon.onmouseout=function(f){return c.onHoverOut()},this.infoIcon.onclick=function(f){return c.onClick()},a.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=r1,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Gs,this.infoIcon.style.opacity="0.6")},o}(),a1=function(){function o(){var a=this;this.infoDiv=new s1,this.infoIcon=new o1(function(){a.infoDiv.show()},function(){a.infoDiv.hide()})}return o.prototype.renderInto=function(a){this.infoDiv.renderInto(a),this.infoIcon.renderInto(a)},o}(),l1=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},c1=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Xs=function(){function o(){}return o.hasPermissions=function(){return l1(this,void 0,void 0,function(){var a,c,f,g;return c1(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(a=h.sent(),c=0,f=a;c<f.length;c++)if(g=f[c],g.kind==="videoinput"&&g.label)return[2,!0];return[2,!1]}})})},o}(),xn=function(){function o(a){this.supportedScanTypes=this.validateAndReturnScanTypes(a)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var a=0,c=this.supportedScanTypes;a<c.length;a++){var f=c[a];if(o.isCameraScanType(f))return!0}return!1},o.isCameraScanType=function(a){return a===An.SCAN_TYPE_CAMERA},o.isFileScanType=function(a){return a===An.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(a){if(!a||a.length===0)return Wt.DEFAULT_SUPPORTED_SCAN_TYPE;var c=Wt.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(a.length>c)throw"Max ".concat(c," values expected for ")+"supportedScanTypes";for(var f=0,g=a;f<g.length;f++){var h=g[f];if(!Wt.DEFAULT_SUPPORTED_SCAN_TYPE.includes(h))throw"Unsupported scan type ".concat(h)}return a},o}(),Dt=function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o}(),sn=function(){function o(){}return o.createElement=function(a,c){var f=document.createElement(a);return f.id=c,f.classList.add(Dt.ALL_ELEMENT_CLASS),a==="button"&&f.setAttribute("type","button"),f},o}(),Fo=function(o,a,c,f){function g(h){return h instanceof c?h:new c(function(A){A(h)})}return new(c||(c=Promise))(function(h,A){function m(S){try{w(f.next(S))}catch(T){A(T)}}function y(S){try{w(f.throw(S))}catch(T){A(T)}}function w(S){S.done?h(S.value):g(S.value).then(m,y)}w((f=f.apply(o,a||[])).next())})},Uo=function(o,a){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(w){return function(S){return y([w,S])}}function y(w){if(f)throw new TypeError("Generator is already executing.");for(;A&&(A=0,w[0]&&(c=0)),c;)try{if(f=1,g&&(h=w[0]&2?g.return:w[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,w[1])).done)return h;switch(g=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,g=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){c.label=w[1];break}if(w[0]===6&&c.label<h[1]){c.label=h[1],h=w;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(w);break}h[2]&&c.ops.pop(),c.trys.pop();continue}w=a.call(o,c)}catch(S){w=[6,S],g=0}finally{f=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Zs=function(){function o(a,c,f){this.isTorchOn=!1,this.torchCapability=a,this.buttonController=c,this.onTorchActionFailureCallback=f}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return Fo(this,void 0,void 0,function(){var a,c;return Uo(this,function(f){switch(f.label){case 0:this.buttonController.disable(),a=!this.isTorchOn,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.torchCapability.apply(a)];case 2:return f.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),a),[3,4];case 3:return c=f.sent(),this.propagateFailure(a,c),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(a,c){a===c?(this.buttonController.setText(c?ve.torchOffButton():ve.torchOnButton()),this.isTorchOn=c):this.propagateFailure(c),this.buttonController.enable()},o.prototype.propagateFailure=function(a,c){var f=a?ve.torchOnFailedMessage():ve.torchOffFailedMessage();c&&(f+="; Error = "+c),this.onTorchActionFailureCallback(f)},o.prototype.reset=function(){this.isTorchOn=!1},o}(),u1=function(){function o(a,c){this.onTorchActionFailureCallback=c,this.torchButton=sn.createElement("button",Dt.TORCH_BUTTON_ID),this.torchController=new Zs(a,this,c)}return o.prototype.render=function(a,c){var f=this;this.torchButton.innerText=ve.torchOnButton(),this.torchButton.style.display=c.display,this.torchButton.style.marginLeft=c.marginLeft;var g=this;this.torchButton.addEventListener("click",function(h){return Fo(f,void 0,void 0,function(){return Uo(this,function(A){switch(A.label){case 0:return[4,g.torchController.flipState()];case 1:return A.sent(),g.torchController.isTorchEnabled()?(g.torchButton.classList.remove(Dt.TORCH_BUTTON_CLASS_TORCH_OFF),g.torchButton.classList.add(Dt.TORCH_BUTTON_CLASS_TORCH_ON)):(g.torchButton.classList.remove(Dt.TORCH_BUTTON_CLASS_TORCH_ON),g.torchButton.classList.add(Dt.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),a.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(a){this.torchController=new Zs(a,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(a){this.torchButton.innerText=a},o.prototype.reset=function(){this.torchButton.innerText=ve.torchOnButton(),this.torchController.reset()},o.create=function(a,c,f,g){var h=new o(c,g);return h.render(a,f),h},o}(),f1=function(){function o(a,c,f){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=c?"block":"none",a.appendChild(this.fileBasedScanRegion);var g=document.createElement("label");g.setAttribute("for",this.getFileScanInputId()),g.style.display="inline-block",this.fileBasedScanRegion.appendChild(g),this.fileSelectionButton=sn.createElement("button",Dt.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){g.click()}),g.append(this.fileSelectionButton),this.fileScanInput=sn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",g.appendChild(this.fileScanInput);var h=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var y=m.target;if(!(y.files&&y.files.length===0)){var w=y.files,S=w[0],T=S.name;h.setImageNameToButton(T),f(S)}}});var A=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(A),this.fileBasedScanRegion.addEventListener("dragenter",function(m){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder();var y=m.dataTransfer;if(y){var w=y.files;if(!w||w.length===0)return;for(var S=!1,T=0;T<w.length;++T){var H=w.item(T);if(H){var k=/image.*/;if(H.type.match(k)){S=!0;var Q=H.name;h.setImageNameToButton(Q),f(H),A.innerText=ve.dragAndDropMessage();break}}}S||(A.innerText=ve.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var a=document.createElement("div");return a.style.textAlign="center",a.style.margin="auto",a.style.width="80%",a.style.maxWidth="600px",a.style.border=this.fileBasedScanRegionDefaultBorder(),a.style.padding="10px",a.style.marginBottom="10px",a},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var a=document.createElement("div");return a.innerText=ve.dragAndDropMessage(),a.style.fontWeight="400",a},o.prototype.setImageNameToButton=function(a){var c=20;if(a.length>c){var f=a.substring(0,8),g=a.length,h=a.substring(g-8,g);a="".concat(f,"....").concat(h)}var A=ve.fileSelectionChooseAnother()+" - "+a;this.fileSelectionButton.innerText=A},o.prototype.setInitialValueToButton=function(){var a=ve.fileSelectionChooseImage()+" - "+ve.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=a},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(a,c,f){var g=new o(a,c,f);return g},o}(),h1=function(){function o(a){this.selectElement=sn.createElement("select",Dt.CAMERA_SELECTION_SELECT_ID),this.cameras=a,this.options=[]}return o.prototype.render=function(a){var c=document.createElement("span");c.style.marginRight="10px";var f=this.cameras.length;if(f===0)throw new Error("No cameras found");if(f===1)c.style.display="none";else{var g=ve.selectCamera();c.innerText="".concat(g," (").concat(this.cameras.length,")  ")}for(var h=1,A=0,m=this.cameras;A<m.length;A++){var y=m[A],w=y.id,S=y.label==null?w:y.label;(!S||S==="")&&(S=[ve.anonymousCameraPrefix(),h++].join(" "));var T=document.createElement("option");T.value=w,T.innerText=S,this.options.push(T),this.selectElement.appendChild(T)}c.appendChild(this.selectElement),a.appendChild(c)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(a){for(var c=0,f=this.options;c<f.length;c++){var g=f[c];if(g.value===a)return!0}return!1},o.prototype.setValue=function(a){if(!this.hasValue(a))throw new Error("".concat(a," is not present in the camera list."));this.selectElement.value=a},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(a,c){var f=new o(c);return f.render(a),f},o}(),d1=function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=sn.createElement("input",Dt.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(a,c){this.zoomElementContainer.style.display=c?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",a.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var f=ve.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(f),this.rangeText.style.marginRight="10px";var g=this;this.rangeInput.addEventListener("input",function(){return g.onValueChange()}),this.rangeInput.addEventListener("change",function(){return g.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var a=ve.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(a,c,f,g){this.rangeInput.min=a.toString(),this.rangeInput.max=c.toString(),this.rangeInput.step=g.toString(),this.rangeInput.value=f.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(a){this.onChangeCallback=a},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(a,c){var f=new o;return f.render(a,c),f},o}(),Rt;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Rt||(Rt={}));function g1(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function x1(o,a){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:a}}var w1=function(){function o(a,c,f){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=a,this.config=this.createConfig(c),this.verbose=f===!0,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.scanTypeSelector=new xn(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Bo(this.verbose),this.persistedDataManager=new i1,c.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(a,c){var f=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(h,A){if(a)a(h,A);else{if(f.lastMatchFound===h)return;f.lastMatchFound=h,f.setHeaderMessage(ve.lastMatch(h),Rt.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(h,A){c&&c(h,A)};var g=document.getElementById(this.elementId);if(!g)throw"HTML Element with id=".concat(this.elementId," not found");g.innerHTML="",this.createBasicLayout(g),this.html5Qrcode=new Ws(this.getScanRegionId(),x1(this.config,this.verbose))},o.prototype.pause=function(a){(Jt(a)||a!==!0)&&(a=!1),this.getHtml5QrcodeOrFail().pause(a)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var a=this,c=function(){var f=document.getElementById(a.elementId);f&&(f.innerHTML="",a.resetBasicLayout(f))};return this.html5Qrcode?new Promise(function(f,g){if(!a.html5Qrcode){f();return}a.html5Qrcode.isScanning?a.html5Qrcode.stop().then(function(h){if(!a.html5Qrcode){f();return}a.html5Qrcode.clear(),c(),f()}).catch(function(h){a.verbose&&a.logger.logError("Unable to stop qrcode scanner",h),g(h)}):(a.html5Qrcode.clear(),c(),f())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(a){return this.getHtml5QrcodeOrFail().applyVideoConstraints(a)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(a){return a?(a.fps||(a.fps=Wt.SCAN_DEFAULT_FPS),a.rememberLastUsedCamera!==!Wt.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(a.rememberLastUsedCamera=Wt.DEFAULT_REMEMBER_LAST_CAMERA_USED),a.supportedScanTypes||(a.supportedScanTypes=Wt.DEFAULT_SUPPORTED_SCAN_TYPE),a):{fps:Wt.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Wt.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Wt.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(a){a.style.position="relative",a.style.padding="0px",a.style.border="1px solid silver",this.createHeader(a);var c=document.createElement("div"),f=this.getScanRegionId();c.id=f,c.style.width="100%",c.style.minHeight="100px",c.style.textAlign="center",a.appendChild(c),xn.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var g=document.createElement("div"),h=this.getDashboardId();g.id=h,g.style.width="100%",a.appendChild(g),this.setupInitialDashboard(g)},o.prototype.resetBasicLayout=function(a){a.style.border="none"},o.prototype.setupInitialDashboard=function(a){this.createSection(a),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(a){var c=document.createElement("div");c.style.textAlign="left",c.style.margin="0px",a.appendChild(c);var f=new a1;f.renderInto(c);var g=document.createElement("div");g.id=this.getHeaderMessageContainerId(),g.style.display="none",g.style.textAlign="center",g.style.fontSize="14px",g.style.padding="2px 10px",g.style.margin="4px",g.style.borderTop="1px solid #f6f6f6",c.appendChild(g)},o.prototype.createSection=function(a){var c=document.createElement("div");c.id=this.getDashboardSectionId(),c.style.width="100%",c.style.padding="10px 0px 10px 0px",c.style.textAlign="left",a.appendChild(c)},o.prototype.createCameraListUi=function(a,c,f){var g=this;g.showHideScanTypeSwapLink(!1),g.setHeaderMessage(ve.cameraPermissionRequesting());var h=function(){f||g.createPermissionButton(a,c)};Ws.getCameras().then(function(A){g.persistedDataManager.setHasPermission(!0),g.showHideScanTypeSwapLink(!0),g.resetHeaderMessage(),A&&A.length>0?(a.removeChild(c),g.renderCameraSelection(A)):(g.setHeaderMessage(ve.noCameraFound(),Rt.STATUS_WARNING),h())}).catch(function(A){g.persistedDataManager.setHasPermission(!1),f?f.disabled=!1:h(),g.setHeaderMessage(A,Rt.STATUS_WARNING),g.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(a,c){var f=this,g=sn.createElement("button",this.getCameraPermissionButtonId());g.innerText=ve.cameraPermissionTitle(),g.addEventListener("click",function(){g.disabled=!0,f.createCameraListUi(a,c,g)}),c.appendChild(g)},o.prototype.createPermissionsUi=function(a,c){var f=this;if(xn.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Xs.hasPermissions().then(function(g){g?f.createCameraListUi(a,c):(f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(a,c))}).catch(function(g){f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(a,c)});return}this.createPermissionButton(a,c)},o.prototype.createSectionControlPanel=function(){var a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");a.appendChild(c);var f=document.createElement("div");f.id=this.getDashboardSectionCameraScanRegionId(),f.style.display=xn.isCameraScanType(this.currentScanType)?"block":"none",c.appendChild(f);var g=document.createElement("div");g.style.textAlign="center",f.appendChild(g),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(f,g),this.renderFileScanUi(c)},o.prototype.renderFileScanUi=function(a){var c=xn.isFileScanType(this.currentScanType),f=this,g=function(h){if(!f.html5Qrcode)throw"html5Qrcode not defined";xn.isFileScanType(f.currentScanType)&&(f.setHeaderMessage(ve.loadingImage()),f.html5Qrcode.scanFileV2(h,!0).then(function(A){f.resetHeaderMessage(),f.qrCodeSuccessCallback(A.decodedText,A)}).catch(function(A){f.setHeaderMessage(A,Rt.STATUS_WARNING),f.qrCodeErrorCallback(A,Lo.createFrom(A))}))};this.fileSelectionUi=f1.create(a,c,g)},o.prototype.renderCameraSelection=function(a){var c=this,f=this,g=document.getElementById(this.getDashboardSectionCameraScanRegionId());g.style.textAlign="center";var h=d1.create(g,!1),A=function(B){var L=B.zoomFeature();if(L.isSupported()){h.setOnCameraZoomValueChangeCallback(function(j){L.apply(j)});var X=1;c.config.defaultZoomValueIfSupported&&(X=c.config.defaultZoomValueIfSupported),X=Lc(X,L.min(),L.max()),h.setValues(L.min(),L.max(),X,L.step()),h.show()}},m=h1.create(g,a),y=document.createElement("span"),w=sn.createElement("button",Dt.CAMERA_START_BUTTON_ID);w.innerText=ve.scanButtonStartScanningText(),y.appendChild(w);var S=sn.createElement("button",Dt.CAMERA_STOP_BUTTON_ID);S.innerText=ve.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,y.appendChild(S);var T,H=function(B){if(!B.torchFeature().isSupported()){T&&T.hide();return}T?T.updateTorchCapability(B.torchFeature()):T=u1.create(y,B.torchFeature(),{display:"none",marginLeft:"5px"},function(L){f.setHeaderMessage(L,Rt.STATUS_WARNING)}),T.show()};g.appendChild(y);var k=function(B){B||(w.style.display="none"),w.innerText=ve.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,B&&(w.style.display="inline-block")};if(w.addEventListener("click",function(B){w.innerText=ve.scanButtonScanningStarting(),m.disable(),w.disabled=!0,w.style.opacity="0.5",c.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!1),f.resetHeaderMessage();var L=m.getValue();f.persistedDataManager.setLastUsedCameraId(L),f.html5Qrcode.start(L,g1(f.config),f.qrCodeSuccessCallback,f.qrCodeErrorCallback).then(function(X){S.disabled=!1,S.style.display="inline-block",k(!1);var j=f.html5Qrcode.getRunningTrackCameraCapabilities();c.config.showTorchButtonIfSupported===!0&&H(j),c.config.showZoomSliderIfSupported===!0&&A(j)}).catch(function(X){f.showHideScanTypeSwapLink(!0),m.enable(),k(!0),f.setHeaderMessage(X,Rt.STATUS_WARNING)})}),m.hasSingleItem()&&w.click(),S.addEventListener("click",function(B){if(!f.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,f.html5Qrcode.stop().then(function(L){c.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!0),m.enable(),w.disabled=!1,S.style.display="none",w.style.display="inline-block",T&&(T.reset(),T.hide()),h.removeOnCameraZoomValueChangeCallback(),h.hide(),f.insertCameraScanImageToScanRegion()}).catch(function(L){S.disabled=!1,f.setHeaderMessage(L,Rt.STATUS_WARNING)})}),f.persistedDataManager.getLastUsedCameraId()){var Q=f.persistedDataManager.getLastUsedCameraId();m.hasValue(Q)?(m.setValue(Q),w.click()):f.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var a=this,c=ve.textIfCameraScanSelected(),f=ve.textIfFileScanSelected(),g=document.getElementById(this.getDashboardSectionId()),h=document.createElement("div");h.style.textAlign="center";var A=sn.createElement("span",this.getDashboardSectionSwapLinkId());A.style.textDecoration="underline",A.style.cursor="pointer",A.innerText=xn.isCameraScanType(this.currentScanType)?c:f,A.addEventListener("click",function(){if(!a.sectionSwapAllowed){a.verbose&&a.logger.logError("Section swap called when not allowed");return}a.resetHeaderMessage(),a.fileSelectionUi.resetValue(),a.sectionSwapAllowed=!1,xn.isCameraScanType(a.currentScanType)?(a.clearScanRegion(),a.getCameraScanRegion().style.display="none",a.fileSelectionUi.show(),A.innerText=f,a.currentScanType=An.SCAN_TYPE_FILE,a.insertFileScanImageToScanRegion()):(a.clearScanRegion(),a.getCameraScanRegion().style.display="block",a.fileSelectionUi.hide(),A.innerText=c,a.currentScanType=An.SCAN_TYPE_CAMERA,a.insertCameraScanImageToScanRegion(),a.startCameraScanIfPermissionExistsOnSwap()),a.sectionSwapAllowed=!0}),h.appendChild(A),g.appendChild(h)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var a=this,c=this;if(this.persistedDataManager.hasCameraPermissions()){Xs.hasPermissions().then(function(f){if(f){var g=document.getElementById(c.getCameraPermissionButtonId());if(!g)throw a.logger.logError("Permission button not found, fail;"),"Permission button not found";g.click()}else c.persistedDataManager.setHasPermission(!1)}).catch(function(f){c.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var a=document.getElementById(this.getHeaderMessageContainerId());a.style.display="none"},o.prototype.setHeaderMessage=function(a,c){c||(c=Rt.STATUS_DEFAULT);var f=this.getHeaderMessageDiv();switch(f.innerText=a,f.style.display="block",c){case Rt.STATUS_SUCCESS:f.style.background="rgba(106, 175, 80, 0.26)",f.style.color="#477735";break;case Rt.STATUS_WARNING:f.style.background="rgba(203, 36, 49, 0.14)",f.style.color="#cb2431";break;case Rt.STATUS_DEFAULT:default:f.style.background="rgba(0, 0, 0, 0)",f.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(a){this.scanTypeSelector.hasMoreThanOneScanType()&&(a!==!0&&(a=!1),this.sectionSwapAllowed=a,this.getDashboardSectionSwapLink().style.display=a?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var a=this,c=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){c.innerHTML="<br>",c.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(f){c.innerHTML="<br>",c.appendChild(a.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=t1,this.cameraScanImage.alt=ve.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var a=this,c=document.getElementById(this.getScanRegionId());if(this.fileScanImage){c.innerHTML="<br>",c.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(f){c.innerHTML="<br>",c.appendChild(a.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=n1,this.fileScanImage.alt=ve.fileScanAltText()},o.prototype.clearScanRegion=function(){var a=document.getElementById(this.getScanRegionId());a.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return Dt.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return Dt.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o}(),A1=ye("<div id=qr-reader style=width:500px>"),C1=ye('<div><header><nav><a href=/>Home</a><a href=/users>Users</a></nav></header><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div style=padding:16px></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class=centerBx100><div></div><slot name=plans><div></div><div></div><div></div><div>');function p1(){const[o,a]=dr({lbs:"",price:0}),[c,f]=dr({lbs:"",price:0}),[g,h]=Te(),[A,m]=Te(""),[y,w]=Te(),[S,T]=Te(),[H,k]=Te(""),Q=(K,F)=>{a({[K]:F}),k(Wi())};gr(()=>{X(),Nn(()=>w(!1))});function B(){return"geolocation"in navigator}function L(K){console.log("location",K.coords),f({latitude:K?.coords?.latitude,longitude:K?.coords?.longitude})}function X(){B()?navigator.geolocation.getCurrentPosition(L):showMessage("Geolocation isn't supported by your browser")}const j=(K,F)=>{K!==S()&&(T(K),G(K))},G=K=>{K=A();let F={timeStamp:new Date().getTime(),latitude:c?.latitude,longitude:c?.longitude,statusId:o?.status},oe=K.split("/"),U={idairguide:oe?.[0],":search0":oe?.[1],":search1":oe?.[3]};ne(U,F)},ne=async(K,F)=>{console.log(K);let oe=await m1(K),U=Object.keys(oe)?.[0];if(oe[U]?.cidentity){let pe=oe[U]?.statusHistory||[];pe.push(F),K.ssg_track_key=U;let we={statusHistory:pe,currentStatus:F.statusId};console.log(U,oe),await E1(K,we)}console.log(staUpd)},Ie=async(K,F)=>{w(!0);var oe=new w1("qr-reader",{fps:10,qrbox:250});oe.render(j)};return(()=>{var K=C1(),F=K.firstChild,oe=F.nextSibling,U=oe.nextSibling,pe=U.nextSibling,we=pe.nextSibling,q=we.firstChild,J=q.nextSibling,fe=J.firstChild,v=fe.nextSibling,Fe=v.nextSibling,he=Fe.nextSibling;return re(K,$(at,{get when(){return g()},get children(){return[]}}),oe),re(K,A,oe),re(oe,$(Co,{width:"20vw",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--hrm-palette-tertiary80)",get value(){return A()},label:"search...",colors:"#2b2b2b",handleClick:m}),null),re(oe,$(Wr,{color:"rgb(200 25 60 / .9)",label:"add Manual",handleClick:G}),null),re(pe,$(Li,{list:po,lbl_empty:"Estatus",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return o?.status},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",hasDebounce:!1,onSelect:Ke=>Q("status",Ke.id),width:"260px"})),re(q,$(Wr,{color:"rgb(200 25 60 / .9)",label:"scannear",handleClick:Ie})),J._$owner=_t(),re(v,()=>o?.lbs),re(Fe,()=>o?.price),re(he,()=>(o?.lbs*o?.price).toFixed(2)),re(J,$(at,{get when(){return y()},get children(){return A1()}}),null),wt(Ke=>{var At=on.App,lt=on.header;return At!==Ke.e&&en(K,Ke.e=At),lt!==Ke.t&&en(F,Ke.t=lt),Ke},{e:void 0,t:void 0}),K})()}const m1=async o=>{let a={params:o,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"};return console.log(a),(await qr(a))?.data},E1=async(o,a)=>{let c={params:o,query:"updateLogisticYabaExpress",data2update:a};return console.log(c),(await qr(c))?.data};function y1(){const o=async()=>{let c=await(await fetch("https://qvamarkets.com/gql_api/getStatic?fileName=svgs.json")).json();return Sl("svgSymbols",c),c};return gr(()=>{$s(o)}),$(gl,{get children(){return[$(vr,{path:"/",get component(){return $(Wl,{})}}),$(vr,{path:"/users",get component(){return $(Yl,{})}}),$(vr,{path:"/envios",get component(){return $(Oc,{})}}),$(vr,{path:"/scan",get component(){return $(p1,{})}})]}})}const I1=document.getElementById("root");Va(()=>$(y1,{}),I1);
