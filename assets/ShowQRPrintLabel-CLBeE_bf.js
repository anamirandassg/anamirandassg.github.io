import{P as A,r as l}from"./PDFButton-B_0lS8EG.js";import{f as v}from"./fontkit.es-BqrvdTa9.js";import{i as O,t as a}from"./InitPrintServices-DzdLVHm-.js";import{OpenToast as R}from"./Toast-CqBaWA5c.js";import{g as G,a as U,O as L}from"./Util-C77m685E.js";const D=n=>{let c=window?.DATAMatrix;return c?c({msg:n,dim:256,rct:0,pad:2,pal:["#000000","#ffffff"],vrb:1}):null},M=n=>{let d=n.cloneNode(!0).outerHTML,o=new Blob([d],{type:"image/svg+xml;charset=utf-8"});return(window.URL||window.webkitURL||window).createObjectURL(o)},F=async(n,c)=>{const d=document.createElement("img");document.body.appendChild(d),d.onload=function(){const o=document.createElement("canvas");o.width=d.clientWidth,o.height=d.clientHeight,o.getContext("2d").drawImage(d,0,0);const f=o.toDataURL("image/png");document.body.removeChild(d),c(f)},d.src=n},Z=n=>new Promise(async(c,d)=>{let o=D(n),e=o&&M(o);e&&F(e,async f=>{var g=await k(f,"image/png");let t=URL.createObjectURL(g);c(t)})}),k=async(n,c)=>{let o=await(await fetch(n)).blob();return o=o.slice(0,o.size,c),o},q=n=>{window.navigator.clipboard.writeText(n),R({text:n+"  copiado",timeout:1500,id:G()})};function N(n){let c=new Blob([n],{type:"application/pdf"});return(window.URL||window.webkitURL).createObjectURL(c)}const _=(n,c,d)=>{const o=c.widthOfTextAtSize(n,40),e=c.widthOfTextAtSize(n,10);return Math.floor(d/((o-e)/30))},Q=async(n,c,d)=>{const o=await A.create();o.registerFontkit(v);const e=await O(o);let f=265;const g=n.map(async(t,T)=>{const s=o.addPage([426,284]),{height:w}=s.getSize();let r=w-34;const h=await fetch(t?.qr).then(b=>b.arrayBuffer()),y=await o.embedPng(h);s&&y&&s.drawImage(y,{x:10,y:w-220,width:150,height:150});let u=_(a(t?.state),e.roboto_bold,f);u>42&&(u=42,r=r-6);let x=a(t?.bulto).trim();const S=e.Lexend_700?.widthOfTextAtSize(a(x),40);if(t?.isSSG){t?.state&&s.drawText(a(t?.state),{x:5,y:r-6,size:u,font:e.roboto_bold,color:l(0,0,0)}),s.drawText(a(x),{x:18,y:w-270,size:40,font:e.GSansBold,color:l(0,0,0)});const b=await fetch(U("SSG-black.png")).then(z=>z.arrayBuffer()),p=await o.embedPng(b);s&&p&&s.drawImage(p,{x:210,y:w-232,width:190,height:190})}else{let b=_(a(t?.name),e.GSansItalic,f);var m=e.GSansItalic?.widthOfTextAtSize(a(t?.name),b);if(m>f&&(b=b-1,m=e.GSansItalic?.widthOfTextAtSize(a(t?.name),b)),b=300/m*21,b=b>25?25:b*1,s.drawText(a(t?.name),{x:10,y:r-0,size:b,font:e.GSansItalic,color:l(0,0,0)}),t?.state){const B=e.roboto_bold?.widthOfTextAtSize(a(t?.state),u);s.drawText(a(t?.state),{x:420-B,y:r-46,size:u,font:e.roboto_bold,color:l(0,0,0)}),r=r-b}let p=29;const z=e.Lexend_700?.widthOfTextAtSize(a(t?.phoneNumber),p);s.drawText(a(t?.phoneNumber),{x:400-z,y:r-70,size:p,font:e.Lexend_700,color:l(0,0,0)});const C=e.Lexend_700?.widthOfTextAtSize(a(t?.altPhoneNumber),p);s.drawText(a(t?.altPhoneNumber),{x:400-C,y:r-105,size:p,font:e.Lexend_700,color:l(0,0,0)}),s.drawText(a(x),{x:418-S,y:r-205,size:40,font:e.GSansBold,color:l(0,0,0)})}});await Promise.all(g);{const t=await o.save();return N(t)}},K=async(n,c,d)=>{const o=await A.create();o.registerFontkit(v);const e=await O(o),f=n.map(async(g,t)=>{let T=2.795;const s=o.addPage([45*T,24*T]),{height:w}=s.getSize(),r=await fetch(g?.mtrx).then(i=>i.arrayBuffer()),h=await o.embedPng(r),y=await fetch(g?.mtrx2).then(i=>i.arrayBuffer()),u=await o.embedPng(y);s&&h&&s.drawImage(h,{x:0,y:w-32,width:30,height:30}),s.drawText(a(g?.lbl),{x:33,y:w-20,size:13,font:e.Lexend_700,color:l(0,0,0)}),s&&u&&s.drawImage(u,{x:0,y:w-66,width:30,height:30}),s.drawText(a(g?.lbl2),{x:33,y:w-56,size:13,font:e.Lexend_700,color:l(0,0,0)})});await Promise.all(f);{const g=await o.save();return N(g)}},J=async(n,c,d)=>{const o=await A.create();o.registerFontkit(v);const e=await O(o);let f=265;const g=n.map(async(t,T)=>{const s=o.addPage([426,284]),{height:w}=s.getSize();let r=w-34,h=_(a(t?.state),e.roboto_bold,f);h>42&&(h=42,r=r-6);let u=a(t?.bulto).trim();s.drawText("$"+(a(t?.amount)*1).toFixed(2),{x:10,y:w-260,size:50,font:e.Lexend_700,color:l(0,0,0)});let i=_(a(t?.name),e.GSansItalic,f);var x=e.GSansItalic?.widthOfTextAtSize(a(t?.name),i);x>f&&(i=i-1,x=e.GSansItalic?.widthOfTextAtSize(a(t?.name),i)),i=300/x*21,i=i>25?25:i,s.drawText(a(t?.name),{x:10,y:r-0,size:i,font:e.GSansItalic,color:l(0,0,0)});let S=29;if(t?.state){let p="CID: "+t?.state;const z=e.roboto_bold?.widthOfTextAtSize(a(p),S);s.drawText(a(p),{x:410-z,y:r-46,size:S,font:e.roboto_bold,color:l(0,0,0)}),r=r-S}let m=29;const b=e.Lexend_700?.widthOfTextAtSize(a(t?.phoneNumber),m);s.drawText(a(t?.phoneNumber),{x:400-b,y:r-60,size:m,font:e.Lexend_700,color:l(0,0,0)}),s.drawText(a(u),{x:10,y:r-95,size:10,font:e.GSansBold,color:l(0,0,0)}),s.drawText(a(t?.rpto),{x:10,y:r-115,size:12,font:e.Lexend_700,color:l(0,0,0)}),s.drawText(a(t?.city),{x:10,y:r-135,size:15,font:e.roboto_bold,color:l(0,0,0)})});await Promise.all(g);{const t=await o.save();return N(t)}},P=(n,c)=>c?" "+n+" "+c:"",E=n=>`${P("Calle",n?.ybstreet)}${P("#",n?.ybstreetNo)}${P("E/",n?.ybbetwen1)}${P("y",n?.ybbetwen2)}`,V=async(n,c,d)=>{const o=await A.create();o.registerFontkit(v);const e=await O(o);let f=0,g=0,t={0:[]};n.map(w=>{let r=0,h=c[w];r=25,L(h?.customers).map(y=>{r+=25}),f+r<800?(f+=r,h.height=r,t[g].push(h)):(g+=1,f=0,t[g]||(t[g]=[]))});let s=Math.ceil(n.length/36);Array.from(Array(s).keys()),L(t).map((w,r)=>{const h=o.addPage(),{height:y,width:u}=h.getSize();let i=y-34;t[w].map(async(x,S)=>{S%2&&h?.drawRectangle({x:5,y:i-x.height+15,width:580,height:x.height,color:l(.79,.79,.79)});let m=E(x?.address)+", Rpto "+a(x?.rpto)+" |  "+a(x?.city)+"  |  "+a(x?.estate);h.drawText(""+m.toUpperCase(),{x:13,y:i,size:7,font:e.roboto_bold,color:l(0,0,0)}),i=i-12,L(x?.customers).map(b=>{let p=x?.customers[b],z="";L(p?.bagsNumb).map(I=>{z=" | "+p?.bagsNumb?.[I]?.bagnumber});let C=""+b+"  |  "+p?.name+" |  "+p?.phoneNumber;h.drawText(""+C,{x:23,y:i,size:7.5,font:e.Lexend_700,color:l(0,0,0)}),i=i-11;let B=" No de envios:  "+z;h.drawText(""+B,{x:29,y:i,size:8,font:e.roboto_bold,color:l(0,0,0)}),i=i-13}),i=i-13})});{const w=await o.save();return N(w)}};export{J as C,V as P,Q as S,q as c,Z as g,K as l};
