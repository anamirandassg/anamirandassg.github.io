const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-reYm43bp.js","assets/index-f6stecah.js","assets/index-D4QuRvi-.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-DadnSIUb.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-4IJm61_C.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-Cp9i6xBZ.js","assets/debounces-F2J_Dp9O.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-C4ffH9WY.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm--sN9GrMq.js","assets/Util-dbxHFpkD.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DIlVRqMY.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DcqjzSWk.js","assets/manifestList-CSHEgbpJ.js","assets/DialogHRM-QxwQ4yr7.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-7NabApu8.js","assets/ShowQRPrintLabel-CVo-oWUv.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-BI_Od3nu.js","assets/Toast-C-ZHc6Nk.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-B76AuDkl.js"])))=>i.map(i=>d[i]);
import{l as D,_ as N,c as J,a as A,o as Ie,h as Be,b as Ge,i as r,d as t,f as R,e as Pe,t as v,j as ee,S as _,E as ae,q as X,F as W,g as H,s as Le,z as Z}from"./index-f6stecah.js";import{m as Me,c as Q,b as de,Z as Oe}from"./manifestList-CSHEgbpJ.js";import{h as ze,f as U,O as F,g as P,s as Fe}from"./Util-dbxHFpkD.js";import{u as qe}from"./debounces-F2J_Dp9O.js";import{i as T}from"./globalSignal-7NabApu8.js";import{g as te,S as Re,l as Ve}from"./ShowQRPrintLabel-CVo-oWUv.js";import{OpenToast as Te}from"./Toast-C-ZHc6Nk.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-BI_Od3nu.js";var Ye=v("<div style=padding:4px>"),re=v('<div class="icon_status centerBx">'),je=v('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),We=v('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Xe=v('<div><div class="_dsplFlx flxWrp spaceAround ">'),He=v('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),Ze=v('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Qe=v('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),le=v("<div> <!>."),ce=v("<div> "),oe=v("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ue=v("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ge=v("<h5 class=totalBagsNo> <!> / "),me=v('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),he=v("<div class=leftMrg> "),Ke=v("<div class=bottombx><h4>"),Je=v("<div>"),et=v('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),tt=v("<div style=padding:16px;margin-left:20px;>"),rt=v('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const q=D(()=>N(()=>import("./LoadingColorSpinner-reYm43bp.js"),__vite__mapDeps([0,1,2,3]))),nt=D(()=>N(()=>import("./InputHr-DadnSIUb.js"),__vite__mapDeps([4,1,2,5]))),I=D(()=>N(()=>import("./SVG-4IJm61_C.js"),__vite__mapDeps([6,1,2,7]))),it=D(()=>N(()=>import("./DropDwnSearch-Cp9i6xBZ.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),st=D(()=>N(()=>import("./ContainerElasticView-C4ffH9WY.js"),__vite__mapDeps([11,1,2,6,7,12]))),at=D(()=>N(()=>import("./ButonHrm--sN9GrMq.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ue=D(()=>N(()=>import("./CheckBoxSlide-DIlVRqMY.js"),__vite__mapDeps([16,1,2,17]))),lt=D(()=>N(()=>import("./ItemOnEnvios-DcqjzSWk.js"),__vite__mapDeps([18,1,2,14,7,19,20,21,11,6,12,22,23,24,25,26,27,28])));D(()=>N(()=>import("./ItemOnEnviosMobile-B76AuDkl.js"),__vite__mapDeps([29,1,2,14,7,19,20,21,11,6,12,9,22])));function Nt(){const[e,s]=J({list:{manifest:{id:"175-23834683",label:""},search:"",status:""}}),[i,p]=J({}),[f,u]=J({}),[b,w]=A(""),[$,L]=A(64),[M,E]=A(!1),[S,O]=A(!1),[K,Y]=A(""),z=qe(w,500),[fe,ne]=A(!1),[_e,ie]=A(!1),V=(c,d)=>{s("list",{[c]:d}),z(P())},ve=()=>{E(!M()),z(P())},pe=()=>{O(!S()),z(P())};Ie(()=>{}),Be(()=>{});const be=()=>{L(c=>c+64)},$e=c=>{let d=Math.ceil(c?.length/64);Fe(be,1250,d)},[B,{refetch:vt}]=Ge(b,async c=>{let d=e?.list?.manifest?.id;K()!==d&&Y(d);const G=await dt(d);p(G);let x=[],m={};var k={};return k=await ut(e?.list?.search,d,e?.list?.status,e?.list?.estate,e?.list?.city),u("prov",void 0),L(0),M()?F(k).map(y=>{let a=k[y],n=a?.estate||a?.consigneeInfo?.ybestate;Oe?.[a?.zone]?.[n]||x.push(a)}):S()?F(k).map(y=>{let a=k[y],n="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(n);a.tracking.length===13&&l.test(a.tracking)&&x.push(a),a?.currentStatus||x.push(a)}):(F(k).map(y=>{let a=k[y],n=a?.estate||a?.consigneeInfo?.ybestate,l=a?.city||a?.consigneeInfo?.ybcity;m[n]||(m[n]={cities:{},total:0}),m[n].cities?.[l]||(m[n].cities[l]=0),m[n].cities[l]+=1,m[n].total+=1,x.push(a)}),u("prov",m)),$e(x),x}),se=()=>B()?.length,ye=c=>{s("list",{manifest:c,status:void 0}),z(P())},ke=()=>{mt(B())},xe=()=>{ht(B())},Ce=()=>{},we=(c,d)=>{V("estate",c),V("city",d)},Se=(c,d)=>{s("list",{estate:void 0,city:void 0}),z(P())},j=c=>c?" "+c:"",Ae=c=>{let d=c?.consigneeInfo;return j(d?.firstName)+j(d?.middleName)+j(d?.lastName)+j(d?.lastName2)},De=async()=>{let c=[],d=360;if(ne(!0),B().length<d){const G=B().map(async(m,k)=>{let y=m?.tracking,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const n=new RegExp(a);y.length===13&&n.test(y)&&(y=y.slice(3,12));let o=await te(y),h={state:m?.consigneeInfo?.ybestate,name:Ae(m),phoneNumber:m?.consigneeInfo?.phoneNumber,altPhoneNumber:m?.consigneeInfo?.altPhoneNumber,guiaWeek:m?.guia,bulto:m?.bagnumber,tracking:y,qr:o};c.push(h)});await Promise.all(G);let x=await Re(c);window.open(x),ne(!1)}else Te({text:`El limite de etiquetas a imprimir es de ${d}`,timeout:2500,id:P()})},Ne=async()=>{let c=[];ie(!0),setTimeout(async()=>{let d=400,G=619124,x=[],m=new Date().getFullYear().toString().slice(2,4);for(let a=0;a<d;a++)x.push(a);const k=x.map(async(a,n)=>{let l=G+a*2,o=l+1;const h=await te("Y"+m+l),g=await te("Y"+m+o);let C={mtrx:h,mtrx2:g,lbl:"Y"+m+l,lbl2:"Y"+m+o};c.push(C)});await Promise.all(k);let y=await Ve(c);window.open(y),ie(!1)},760)},Ee=async c=>{await gt(e?.list?.manifest?.id)};return(()=>{var c=Qe(),d=c.firstChild,G=d.firstChild,x=G.nextSibling,m=x.firstChild,k=d.nextSibling,y=k.firstChild,a=k.nextSibling;return r(m,()=>e?.list?.manifest?.id),r(c,t(_,{get when(){return ee?.profile?.isAdmin},get children(){return t(at,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:ke})}}),k),r(y,t(it,{list:Me,lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:n=>ye(n),width:"260px"})),r(k,t(_,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var n=Ye();return r(n,t(nt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:l=>V("search",l)})),n})(),(()=>{var n=We(),l=n.firstChild,o=l.firstChild;return r(l,t(ue,{get initValue(){return M()},updChange:ve,color:"var(--background-red-ssg)"}),o),r(n,t(_,{get when(){return ee?.profile?.isAdmin},get children(){var h=je(),g=h.firstChild;return r(h,t(ue,{get initValue(){return S()},updChange:pe,color:"var(--background-red-ssg)"}),g),r(h,t(_,{get when(){return S()},get children(){var C=re();return C.$$click=xe,r(C,t(I,{name:"outline_delete",size:24})),C}}),null),h}}),null),n})()]}}),null),r(a,t(_,{get when(){return e?.list?.manifest?.id},get children(){var n=Xe(),l=n.firstChild;return r(l,t(ae,{fallback:o=>(()=>{var h=le(),g=h.firstChild,C=g.nextSibling;return C.nextSibling,r(h,()=>o.toString(),C),h})(),get children(){return t(X,{get fallback(){return(()=>{var o=ce();return o.firstChild,r(o,t(q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),o})()},get children(){return t(_,{get when(){return i?.total},get children(){return t(W,{get each(){return F(i)},children:(o,h)=>T()?t(ot,{keyG:o,total:se,get status(){return e?.list?.status},get amount(){return i?.[o]},updForm:V}):t(ct,{keyG:o,total:se,get status(){return e?.list?.status},get amount(){return i?.[o]},updForm:V})})}})}})}})),R(()=>H(n,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),n}}),null),r(a,t(_,{get when(){return ee?.profile?.isAdmin},get children(){var n=He(),l=n.firstChild,o=l.firstChild,h=o.nextSibling;return r(l,t(_,{get when(){return!_e()},get fallback(){return(()=>{var g=oe(),C=g.firstChild;return r(g,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),C),g})()},get children(){var g=re();return g.$$click=Ne,r(g,t(I,{name:"printer",size:24,color:"firebrick"})),g}}),o),o.$$click=Ee,r(o,t(I,{name:"tag-outline",size:24})),h.$$click=Ce,r(h,t(I,{name:"outline_renew",size:24})),r(l,t(_,{get when(){return!fe()},get fallback(){return(()=>{var g=oe(),C=g.firstChild;return r(g,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),C),g})()},get children(){var g=re();return g.$$click=De,r(g,t(I,{name:"printer",size:32})),g}}),null),n}}),null),r(a,t(_,{get when(){return f?.prov},get children(){var n=Ze(),l=n.firstChild,o=l.firstChild,h=l.nextSibling;return r(o,t(_,{get when(){return f?.prov},get children(){return t(W,{get each(){return F(f?.prov)},children:(g,C)=>t(_t,{ism:g,get item(){return f?.prov?.[g]},updS:we})})}})),h.$$click=Se,r(h,t(I,{name:"Xclose",size:22})),R(()=>H(n,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),n}}),null),r(a,t(ae,{fallback:n=>(()=>{var l=le(),o=l.firstChild,h=o.nextSibling;return h.nextSibling,r(l,()=>n.toString(),h),l})(),get children(){return t(X,{get fallback(){return(()=>{var n=ce();return n.firstChild,r(n,t(q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return t(_,{get when(){return B()},get children(){return t(W,{get each(){return B()?.slice(0,$())},children:(n,l)=>t(lt,{item:n,refresh:()=>z(P())})})}})}})}}),null),R(n=>Le(a,` ${T()?"":"width:94vw;"} margin: 0 auto;`,n)),c})()}const ct=e=>{const[s,i]=A(!1),[p,f]=A(0),u=()=>{let $=e?.keyG;e?.keyG==="total"&&($=null),e?.updForm("status",$)},b=()=>{s()||!T()&&e?.keyG!=="total"&&(f(Q?.[e?.keyG]?.length*8.5+"px"),i(!0))},w=()=>{f("0px"),s()&&i(!1)};return t(_,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var $=he();return $.firstChild,r($,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),$})()},get children(){var $=me(),L=$.firstChild,M=L.nextSibling;return $.$$mouseout=w,$.$$mousemove=b,$.$$click=u,r($,t(_,{get when(){return s()},get children(){var E=Ue(),S=E.firstChild,O=S.firstChild,K=O.firstChild;return r(K,()=>Q?.[e?.keyG]),R(Y=>(Y=p())!=null?S.style.setProperty("width",Y):S.style.removeProperty("width")),E}}),L),r(L,t(I,{get name(){return de?.[e?.keyG]},size:22})),r($,t(_,{get when(){return e?.keyG==="total"},get children(){var E=ge(),S=E.firstChild,O=S.nextSibling;return O.nextSibling,r(E,()=>e?.total(),O),E}}),M),r(M,()=>e?.amount),R(()=>H($,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),$}})}})},ot=e=>{const s=()=>{let i=e?.keyG;e?.keyG==="total"&&(i=null),e?.updForm("status",i)};return t(_,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var i=he();return i.firstChild,r(i,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),i})()},get children(){var i=me(),p=i.firstChild,f=p.nextSibling;return i.$$click=s,r(p,t(I,{get name(){return de?.[e?.keyG]},size:22})),r(i,t(_,{get when(){return Q?.[e?.keyG]},get children(){var u=Ke(),b=u.firstChild;return r(b,()=>Q?.[e?.keyG]),u}}),f),r(i,t(_,{get when(){return e?.keyG==="total"},get children(){var u=ge(),b=u.firstChild,w=b.nextSibling;return w.nextSibling,r(u,()=>e?.total(),w),u}}),f),r(f,()=>e?.amount),R(()=>H(i,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),i}})}})},ut=async(e,s,i,p,f)=>{let u={params:{idairguide:s,":search5":s},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((b,w)=>{b&&(u.params[":search"+w]=b.trim())}),i&&(u.params[":status"]=i),p&&(u.params[":estate"]=p),f&&(u.params[":city"]=f),Z?.roles?.agency&&(u.params[":agency"]=Z?.roles?.agency+""),s&&Object.keys(u.params).length>=2){const b=await U(u);return b?.data?.error?{}:b}return{}},dt=async e=>{let s={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};Z?.roles?.agency&&(s.params[":agency"]=Z?.roles?.agency+"");const i=await U(s);return i?.error?{}:i},gt=async e=>{const i=await U({params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"});return i?.error?{}:i},mt=async e=>{e.map(s=>{s?.ssg_track_key,s?.idairguide})},ht=async e=>{e.map(s=>{s?.ssg_track_key,s?.idairguide})},Et=async(e,s)=>{let i=[];e.map(p=>{let f={params:{ssg_track_key:p?.ssg_track_key,idairguide:p?.idairguide},data2update:{currentStatus:s},query:"updateLogisticYabaExpress"};i.push(f)}),ze(i,ft)},ft=async e=>{const i=await U(e);if(i)return i},_t=e=>(()=>{var s=Je();return r(s,t(_,{get when(){return e?.item?.total>0},get children(){var i=et(),p=i.firstChild,f=p.firstChild,u=f.firstChild,b=f.nextSibling;return p.$$click=()=>e?.updS(e?.ism),r(f,()=>e?.ism,u),r(b,()=>e?.item?.total),i}}),null),r(s,t(st,{get children(){var i=tt();return r(i,t(_,{get when(){return e?.item?.cities},get children(){return t(W,{get each(){return F(e?.item?.cities)},children:(p,f)=>(()=>{var u=rt(),b=u.firstChild,w=b.nextSibling;return u.$$click=()=>e?.updS(e?.ism,p),r(b,p),r(w,()=>e?.item?.cities?.[p]),u})()})}})),i}}),null),s})();Pe(["click","mousemove","mouseout"]);export{ct as StatusGroupItem,Nt as default,ht as deleteManifest,ft as fetchCSVInve,mt as loadManifest,Et as updateManifest};
