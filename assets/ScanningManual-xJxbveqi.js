const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-DuJj9O_F.js","assets/index-a9Kz_F82.js","assets/index-CKmXtXsd.css","assets/InputHr-JP7rYr91.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as F,_ as R,a as f,c as K,f as U,p as ee,q as te,b as re,i as n,d as c,k as A,s as se,S as V,B as ae,F as ne,a0 as ie,w as le,m as B,A as P,E as oe,e as ce,t as m,P as T,y as de,g as x,G as ge,n as N}from"./index-a9Kz_F82.js";import{status as ue,scannedQRs as pe}from"./Scanning-BQ4We37W.js";import be from"./FlexSpace-sfcDRSfN.js";var ve=m('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),ye=m('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div class=scrollH>'),fe=m("<div> <!>."),he=m("<div> "),_e=m('<div class=itm0hist><div><div class="icon_status centerBx"></div><p></p><p></p><div class="centerBx bottombx"><h5></h5><div class=vertseparator></div><h4>');const xe=F(()=>R(()=>import("./LoadingColorSpinner-DuJj9O_F.js"),__vite__mapDeps([0,1,2]))),me=F(()=>R(()=>import("./InputHr-JP7rYr91.js"),__vite__mapDeps([3,1,2,4]))),D=F(()=>R(()=>import("./index-a9Kz_F82.js").then(u=>u.a7),__vite__mapDeps([1,2])));function Ae(u){const[p,I]=f([]),[L,b]=K({}),[q,C]=f(""),[W,Ie]=f(""),[k,X]=f(""),[Ce,G]=f(""),[E,O]=f("");U(()=>{}),ee(()=>{}),te(()=>{});const h=(s,i)=>{X(i),G(s),setTimeout(()=>{G("")},300)},_=s=>{O(s),setTimeout(()=>{O("")},3e3)},Y=s=>{s||(s=q()),s=s.split("'").join("-"),C(""),E();let i={timeStamp:new Date().getTime(),latitude:T?.latitude,longitude:T?.longitude,statusId:ue(),userId:de?.profile?.userId},t=s.split("/");s.split("-").length>3&&(t=s.split("-"));let e=t?.[0],v="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const r=new RegExp(v);let l=t.length>4&&e.length===12,o=e.length===13&&r.test(e),a={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};o&&(a={idairguide:"175-2383"+e.slice(3,7),":search0":e});let S="^[0-9]{4}-[1-9]{4}";const y=new RegExp(S);let d=e.length===9&&y.test(e);d&&(a={idairguide:"175-2383"+e.slice(0,4),":search0":e}),o||l||d?Z(a,i):(h("","error"),b({consigneeInfo:{ybestate:"Codigo Incorrecto"}}),_(x()))},Z=async(s,i)=>{let t=await Se(s),e=Object.keys(t)?.[0];if(t[e]?.cidentity){let v=t[e]?.statusHistory||[];v.push(i),s.ssg_track_key=e;let r=t[e]?.estate||t[e]?.consigneeInfo?.ybestate,l=t[e]?.city||t[e]?.consigneeInfo?.ybcity,o={estate:r,city:l,tracking:t[e]?.tracking,currentStatus:t[e]?.currentStatus,timeStamp:new Date().getTime()};if(b(""),b(t[e]),_(x()),h("","success"),!ge?.roles?.[r])h("","warning"),b({consigneeInfo:{ybestate:"Zona incorrecta"}}),_(x());else if(t[e]?.currentStatus!==i.statusId){let a={statusHistory:v,currentStatus:i.statusId};await $e(s,a),I([...p(),o])}else h("","warning"),b({consigneeInfo:{ybcity:"Fue escaneado",ybestate:t[e]?.consigneeInfo?.ybestate}}),_(x())}else h("","error"),b({consigneeInfo:{ybestate:"Error con manifiesto"}}),_(x())};let w={error:{"--err-bx-color":"var(--background-red-ssg)","--err-bx-bgcolor":"var(--background-red35-ssg)",svg:"var(--err-bx-color)",icon:"alert"},success:{"--err-bx-color":"var(--hrm-palette-tertiary60)","--err-bx-bgcolor":"var(--hrm-palette-tertiary90)",svg:"var(--err-bx-color)",icon:"success"},warning:{"--err-bx-color":"#FF6F1D","--err-bx-bgcolor":"#ffdb99",svg:"var(--err-bx-color)",icon:"info"}};return re(W,async s=>pe?.codes),(()=>{var s=ye(),i=s.firstChild,t=i.nextSibling,e=t.firstChild,v=t.nextSibling;return i.style.setProperty("padding","16px"),n(i,c(V,{get when(){return E()},get children(){var r=ve(),l=r.firstChild,o=l.nextSibling;return n(l,c(D,{get name(){return w?.[k()]?.icon},size:32,get color(){return w?.[k()]?.svg}})),n(o,()=>L?.consigneeInfo?.ybestate),A(a=>se(r,w?.[k()],a)),r}})),t.style.setProperty("padding","16px"),t.style.setProperty("margin-top","35px"),n(t,c(me,{width:"250px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--hrm-palette-tertiary80)",get value(){return q()},placeholder:"codigo ...",colors:"#2b2b2b",handleClick:C,onEnter:Y}),e),e.$$click=()=>C(""),n(e,c(D,{name:"Xclose",size:32,color:"#2b2b2b"})),n(v,c(oe,{fallback:r=>(()=>{var l=fe(),o=l.firstChild,a=o.nextSibling;return a.nextSibling,n(l,()=>r.toString(),a),l})(),get children(){return c(ae,{get fallback(){return(()=>{var r=he();return r.firstChild,n(r,c(xe,{stroke:"rgb(200 25 60 / 1)",size:62}),null),r})()},get children(){return c(V,{get when(){return p()},get children(){return c(ne,{get each(){return ie(p(),"timeStamp",1)},children:(r,l)=>(()=>{var o=_e(),a=o.firstChild,S=a.firstChild,y=S.nextSibling,d=y.nextSibling,$=d.nextSibling,j=$.firstChild,Q=j.nextSibling,J=Q.nextSibling;return n(S,c(D,{get name(){return le?.[r?.currentStatus]},size:32})),y.style.setProperty("padding","8px"),n(y,()=>r?.tracking),d.style.setProperty("padding","8px"),n(d,()=>r?.currentStatus),n(a,c(be,{}),$),n(j,()=>r?.city),n(J,()=>r?.estate),A(g=>{var z=`client_item_box gWXAaj jlytmu manifest  ${B()?"isMobile":"centerBx"}`,H=` title_scan centerBx ${B(),""} `,M=` title_scan centerBx ${B(),""} `;return z!==g.e&&P(a,g.e=z),H!==g.t&&P(y,g.t=H),M!==g.a&&P(d,g.a=M),g},{e:void 0,t:void 0,a:void 0}),o})()})}})}})}})),A(r=>(r=E()?"block":"none")!=null?i.style.setProperty("display",r):i.style.removeProperty("display")),s})()}const Se=async u=>await N({params:u,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"}),$e=async(u,p)=>await N({params:u,query:"updateLogisticYabaExpress",data2update:p});ce(["click"]);export{Ae as default};
