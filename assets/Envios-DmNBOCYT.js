const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BfSj-Vy0.js","assets/index-Bl3fatDQ.js","assets/index-IeDM_K18.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-CyhwW2Jl.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-DTtjSFna.js","assets/DropDwnSearch-C7L8U_sN.js","assets/debounces-D0TIaeq3.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-Dh6d0iXp.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-CzzHcx31.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DS1JcIrK.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-CzXOiHu4.js","assets/DialogHRM-DmyX5u14.js","assets/DialogHRM-V9_lZntj.css","assets/ItemOnEnviosMobile-DxJTLQt3.js"])))=>i.map(i=>d[i]);
import{l as D,_ as N,c as J,a as A,p as Ee,k as Be,b as Pe,i as r,d as t,f as R,V as Ge,o as U,e as Le,t as v,n as ee,S as f,Y as Me,$ as se,y as X,F as W,O as F,h as T,g as H,j as G,s as Oe,w as K,v as de,a6 as ze,K as Q,a7 as Fe}from"./index-Bl3fatDQ.js";import{u as Ve}from"./debounces-D0TIaeq3.js";import{g as ae,S as Re,l as qe}from"./ShowQRPrintLabel-Dj12hwgU.js";import{OpenToast as Te}from"./Toast-Cz0XSNBS.js";import"./fontkit.es-D4yL_iDr.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-AoQzDf9Q.js";var je=v("<div style=padding:4px>"),te=v('<div class="icon_status centerBx">'),Ye=v('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),We=v('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Xe=v('<div><div class="_dsplFlx flxWrp spaceAround ">'),He=v('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),Ke=v('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Qe=v('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),le=v("<div> <!>."),ce=v("<div> "),oe=v("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ue=v("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ge=v("<h5 class=totalBagsNo> <!> / "),he=v('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),me=v("<div class=leftMrg> "),Ze=v("<div class=bottombx><h4>"),Je=v("<div>"),et=v('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),tt=v("<div style=padding:16px;margin-left:20px;>"),rt=v('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const V=D(()=>N(()=>import("./LoadingColorSpinner-BfSj-Vy0.js"),__vite__mapDeps([0,1,2,3]))),nt=D(()=>N(()=>import("./InputHr-CyhwW2Jl.js"),__vite__mapDeps([4,1,2,5]))),B=D(()=>N(()=>import("./SVG-DTtjSFna.js"),__vite__mapDeps([6,1,2]))),it=D(()=>N(()=>import("./DropDwnSearch-C7L8U_sN.js"),__vite__mapDeps([7,1,2,8,6,9]))),st=D(()=>N(()=>import("./ContainerElasticView-Dh6d0iXp.js"),__vite__mapDeps([10,1,2,6,11]))),at=D(()=>N(()=>import("./ButonHrm-CzzHcx31.js"),__vite__mapDeps([12,1,2,6,13]))),ue=D(()=>N(()=>import("./CheckBoxSlide-DS1JcIrK.js"),__vite__mapDeps([14,1,2,15]))),lt=D(()=>N(()=>import("./ItemOnEnvios-CzXOiHu4.js"),__vite__mapDeps([16,1,2,17,18,10,6,11])));D(()=>N(()=>import("./ItemOnEnviosMobile-DxJTLQt3.js"),__vite__mapDeps([19,1,2,17,18,10,6,11,8])));function wt(){const[e,s]=J({list:{manifest:{id:"175-23834650",label:""},search:"",status:""}}),[i,p]=J({}),[m,o]=J({}),[b,w]=A(""),[$,L]=A(64),[M,I]=A(!1),[S,O]=A(!1),[Z,j]=A(""),z=Ve(w,500),[_e,re]=A(!1),[fe,ne]=A(!1),q=(a,d)=>{s("list",{[a]:d}),z(G())},ve=()=>{I(!M()),z(G())},pe=()=>{O(!S()),z(G())};Ee(()=>{}),Be(()=>{});const be=()=>{L(a=>a+64)},$e=a=>{let d=Math.ceil(a?.length/64);Fe(be,1250,d)},[P,{refetch:vt}]=Pe(b,async a=>{let d=e?.list?.manifest?.id;Z()!==d&&j(d);const E=await dt(d);p(E);let x=[],_={};var k={};return k=await ut(e?.list?.search,d,e?.list?.status,e?.list?.estate,e?.list?.city),o("prov",void 0),L(0),M()?F(k).map(y=>{let l=k[y],n=l?.estate||l?.consigneeInfo?.ybestate;ze?.[l?.zone]?.[n]||x.push(l)}):S()?F(k).map(y=>{let l=k[y],n="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const c=new RegExp(n);l.tracking.length===13&&c.test(l.tracking)&&x.push(l),l?.currentStatus||x.push(l)}):(F(k).map(y=>{let l=k[y],n=l?.estate||l?.consigneeInfo?.ybestate,c=l?.city||l?.consigneeInfo?.ybcity;_[n]||(_[n]={cities:{},total:0}),_[n].cities?.[c]||(_[n].cities[c]=0),_[n].cities[c]+=1,_[n].total+=1,x.push(l)}),o("prov",_)),$e(x),x}),ie=()=>P()?.length,ye=a=>{s("list",{manifest:a,status:void 0}),z(G())},ke=()=>{ht(P())},xe=()=>{mt(P())},Ce=()=>{},we=(a,d)=>{q("estate",a),q("city",d)},Se=(a,d)=>{s("list",{estate:void 0,city:void 0}),z(G())},Y=a=>a?" "+a:"",Ae=a=>{let d=a?.consigneeInfo;return Y(d?.firstName)+Y(d?.middleName)+Y(d?.lastName)+Y(d?.lastName2)},De=async()=>{let a=[],d=360;if(re(!0),P().length<d){const E=P().map(async(_,k)=>{let y=_?.tracking,l="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const n=new RegExp(l);y.length===13&&n.test(y)&&(y=y.slice(3,12));let u=await ae(y),g={state:_?.consigneeInfo?.ybestate,name:Ae(_),phoneNumber:_?.consigneeInfo?.phoneNumber,altPhoneNumber:_?.consigneeInfo?.altPhoneNumber,guiaWeek:_?.guia,bulto:_?.bagnumber,tracking:y,qr:u};a.push(g)});await Promise.all(E);let x=await Re(a);window.open(x),re(!1)}else Te({text:`El limite de etiquetas a imprimir es de ${d}`,timeout:2500,id:G()})},Ne=async()=>{let a=[];ne(!0),setTimeout(async()=>{let d=3,E=301602,x=E+d,_=[],k=new Date().getFullYear().toString().slice(2,4);for(let n=E;n<x;n++)_.push("Y"+k+n);const y=_.map(async(n,c)=>{let g={mtrx:await ae(n),lbl:n};a.push(g)});await Promise.all(y);let l=await qe(a);window.open(l),ne(!1)},760)},Ie=async a=>{await gt(e?.list?.manifest?.id)};return(()=>{var a=Qe(),d=a.firstChild,E=d.firstChild,x=E.nextSibling,_=x.firstChild,k=d.nextSibling,y=k.firstChild,l=k.nextSibling;return r(_,()=>e?.list?.manifest?.id),r(a,t(f,{get when(){return ee?.profile?.isAdmin},get children(){return t(at,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:ke})}}),k),r(y,t(it,{list:Me,lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:n=>ye(n),width:"260px"})),r(k,t(f,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var n=je();return r(n,t(nt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:c=>q("search",c)})),n})(),(()=>{var n=We(),c=n.firstChild,u=c.firstChild;return r(c,t(ue,{get initValue(){return M()},updChange:ve,color:"var(--background-red-ssg)"}),u),r(n,t(f,{get when(){return ee?.profile?.isAdmin},get children(){var g=Ye(),h=g.firstChild;return r(g,t(ue,{get initValue(){return S()},updChange:pe,color:"var(--background-red-ssg)"}),h),r(g,t(f,{get when(){return S()},get children(){var C=te();return C.$$click=xe,r(C,t(B,{name:"outline_delete",size:24})),C}}),null),g}}),null),n})()]}}),null),r(l,t(f,{get when(){return e?.list?.manifest?.id},get children(){var n=Xe(),c=n.firstChild;return r(c,t(se,{fallback:u=>(()=>{var g=le(),h=g.firstChild,C=h.nextSibling;return C.nextSibling,r(g,()=>u.toString(),C),g})(),get children(){return t(X,{get fallback(){return(()=>{var u=ce();return u.firstChild,r(u,t(V,{stroke:"rgb(200 25 60 / 1)",size:62}),null),u})()},get children(){return t(f,{get when(){return i?.total},get children(){return t(W,{get each(){return F(i)},children:(u,g)=>T()?t(ot,{keyG:u,total:ie,get status(){return e?.list?.status},get amount(){return i?.[u]},updForm:q}):t(ct,{keyG:u,total:ie,get status(){return e?.list?.status},get amount(){return i?.[u]},updForm:q})})}})}})}})),R(()=>H(n,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),n}}),null),r(l,t(f,{get when(){return ee?.profile?.isAdmin},get children(){var n=He(),c=n.firstChild,u=c.firstChild,g=u.nextSibling;return r(c,t(f,{get when(){return!fe()},get fallback(){return(()=>{var h=oe(),C=h.firstChild;return r(h,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),C),h})()},get children(){var h=te();return h.$$click=Ne,r(h,t(B,{name:"printer",size:24,color:"firebrick"})),h}}),u),u.$$click=Ie,r(u,t(B,{name:"tag-outline",size:24})),g.$$click=Ce,r(g,t(B,{name:"outline_renew",size:24})),r(c,t(f,{get when(){return!_e()},get fallback(){return(()=>{var h=oe(),C=h.firstChild;return r(h,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),C),h})()},get children(){var h=te();return h.$$click=De,r(h,t(B,{name:"printer",size:32})),h}}),null),n}}),null),r(l,t(f,{get when(){return m?.prov},get children(){var n=Ke(),c=n.firstChild,u=c.firstChild,g=c.nextSibling;return r(u,t(f,{get when(){return m?.prov},get children(){return t(W,{get each(){return F(m?.prov)},children:(h,C)=>t(ft,{ism:h,get item(){return m?.prov?.[h]},updS:we})})}})),g.$$click=Se,r(g,t(B,{name:"Xclose",size:22})),R(()=>H(n,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),n}}),null),r(l,t(se,{fallback:n=>(()=>{var c=le(),u=c.firstChild,g=u.nextSibling;return g.nextSibling,r(c,()=>n.toString(),g),c})(),get children(){return t(X,{get fallback(){return(()=>{var n=ce();return n.firstChild,r(n,t(V,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return t(f,{get when(){return P()},get children(){return t(W,{get each(){return P()?.slice(0,$())},children:(n,c)=>t(lt,{item:n,refresh:()=>z(G())})})}})}})}}),null),R(n=>Oe(l,` ${T()?"":"width:94vw;"} margin: 0 auto;`,n)),a})()}const ct=e=>{const[s,i]=A(!1),[p,m]=A(0),o=()=>{let $=e?.keyG;e?.keyG==="total"&&($=null),e?.updForm("status",$)},b=()=>{s()||!T()&&e?.keyG!=="total"&&(m(K?.[e?.keyG]?.length*8.5+"px"),i(!0))},w=()=>{m("0px"),s()&&i(!1)};return t(f,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var $=me();return $.firstChild,r($,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),null),$})()},get children(){var $=he(),L=$.firstChild,M=L.nextSibling;return $.$$mouseout=w,$.$$mousemove=b,$.$$click=o,r($,t(f,{get when(){return s()},get children(){var I=Ue(),S=I.firstChild,O=S.firstChild,Z=O.firstChild;return r(Z,()=>K?.[e?.keyG]),R(j=>(j=p())!=null?S.style.setProperty("width",j):S.style.removeProperty("width")),I}}),L),r(L,t(B,{get name(){return de?.[e?.keyG]},size:22})),r($,t(f,{get when(){return e?.keyG==="total"},get children(){var I=ge(),S=I.firstChild,O=S.nextSibling;return O.nextSibling,r(I,()=>e?.total(),O),I}}),M),r(M,()=>e?.amount),R(()=>H($,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),$}})}})},ot=e=>{const s=()=>{let i=e?.keyG;e?.keyG==="total"&&(i=null),e?.updForm("status",i)};return t(f,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var i=me();return i.firstChild,r(i,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),null),i})()},get children(){var i=he(),p=i.firstChild,m=p.nextSibling;return i.$$click=s,r(p,t(B,{get name(){return de?.[e?.keyG]},size:22})),r(i,t(f,{get when(){return K?.[e?.keyG]},get children(){var o=Ze(),b=o.firstChild;return r(b,()=>K?.[e?.keyG]),o}}),m),r(i,t(f,{get when(){return e?.keyG==="total"},get children(){var o=ge(),b=o.firstChild,w=b.nextSibling;return w.nextSibling,r(o,()=>e?.total(),w),o}}),m),r(m,()=>e?.amount),R(()=>H(i,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),i}})}})},ut=async(e,s,i,p,m)=>{let o={params:{idairguide:s,":search5":s},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((b,w)=>{b&&(o.params[":search"+w]=b.trim())}),i&&(o.params[":status"]=i),p&&(o.params[":estate"]=p),m&&(o.params[":city"]=m),Q?.roles?.agency&&(o.params[":agency"]=Q?.roles?.agency+""),s&&Object.keys(o.params).length>=2){const b=await U(o);return b?.data?.error?{}:b}return{}},dt=async e=>{let s={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};Q?.roles?.agency&&(s.params[":agency"]=Q?.roles?.agency+"");const i=await U(s);return i?.error?{}:i},gt=async e=>{const i=await U({params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"});return i?.error?{}:i},ht=async e=>{e.map(s=>{s?.ssg_track_key,s?.idairguide})},mt=async e=>{e.map(s=>{s?.ssg_track_key,s?.idairguide})},St=async(e,s)=>{let i=[];e.map(p=>{let m={params:{ssg_track_key:p?.ssg_track_key,idairguide:p?.idairguide},data2update:{currentStatus:s},query:"updateLogisticYabaExpress"};i.push(m)}),Ge(i,_t)},_t=async e=>{const i=await U(e);if(i)return i},ft=e=>(()=>{var s=Je();return r(s,t(f,{get when(){return e?.item?.total>0},get children(){var i=et(),p=i.firstChild,m=p.firstChild,o=m.firstChild,b=m.nextSibling;return p.$$click=()=>e?.updS(e?.ism),r(m,()=>e?.ism,o),r(b,()=>e?.item?.total),i}}),null),r(s,t(st,{get children(){var i=tt();return r(i,t(f,{get when(){return e?.item?.cities},get children(){return t(W,{get each(){return F(e?.item?.cities)},children:(p,m)=>(()=>{var o=rt(),b=o.firstChild,w=b.nextSibling;return o.$$click=()=>e?.updS(e?.ism,p),r(b,p),r(w,()=>e?.item?.cities?.[p]),o})()})}})),i}}),null),s})();Le(["click","mousemove","mouseout"]);export{ct as StatusGroupItem,wt as default,mt as deleteManifest,_t as fetchCSVInve,ht as loadManifest,St as updateManifest};
