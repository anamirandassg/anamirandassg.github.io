const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BL_D4XZ6.js","assets/index-CS03C161.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-BSoaRE9A.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-B-oNkerH.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-B2vFSJET.js","assets/debounces-CH4RtgCJ.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-D37UU4Ya.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-BUkLBhV3.js","assets/Util-uEfv1z7O.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DopnnxAm.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-Dzhy_TBh.js","assets/DialogHRM-fuWvfnfl.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-D66ipSOS.js","assets/ShowQRPrintLabel-BZBsG3jz.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-khaE0HRx.js","assets/Toast-Cry8BLuA.js","assets/Toast-DLpFKn-Q.css","assets/ShowPdfResume-PxoQkuXA.js"])))=>i.map(i=>d[i]);
import{l as A,_ as D,c as se,a as S,o as je,h as qe,b as Qe,m as We,i as n,d as r,f as H,e as He,t as f,k as ie,S as m,j as Xe,E as de,q as te,F as ee,g as re,s as Ue,r as ne}from"./index-CS03C161.js";import{b as X,e as _e,f as le,a as O,O as W,g as B,h as Ye,s as Je}from"./Util-uEfv1z7O.js";import{u as Ke}from"./debounces-CH4RtgCJ.js";import{i as J}from"./globalSignal-D66ipSOS.js";import{g as ge,l as Ze}from"./ShowQRPrintLabel-BZBsG3jz.js";import"./Toast-Cry8BLuA.js";import{OpenModal as et}from"./DialogHRM-fuWvfnfl.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-khaE0HRx.js";var tt=f("<div style=padding:4px>"),Q=f('<div class="icon_status centerBx">'),rt=f('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),nt=f('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),lt=f('<div><div class="_dsplFlx flxWrp spaceAround ">'),st=f('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),it=f('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div><div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),me=f("<div> <!>."),he=f("<div> "),at=f("<div class=centerBx><h5 style=margin-left:12px>generando excel"),fe=f("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),ot=f("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ve=f("<h5 class=totalBagsNo> <!> / "),be=f('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),$e=f("<div class=leftMrg> "),ct=f("<div class=bottombx><h4>"),ut=f('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),dt=f("<div style=padding:16px;margin-left:20px;>"),gt=f("<div>"),mt=f('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const N=A(()=>D(()=>import("./LoadingColorSpinner-BL_D4XZ6.js"),__vite__mapDeps([0,1,2,3]))),ht=A(()=>D(()=>import("./InputHr-BSoaRE9A.js"),__vite__mapDeps([4,1,2,5]))),P=A(()=>D(()=>import("./SVG-B-oNkerH.js"),__vite__mapDeps([6,1,2,7]))),ft=A(()=>D(()=>import("./DropDwnSearch-B2vFSJET.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),_t=A(()=>D(()=>import("./ContainerElasticView-D37UU4Ya.js"),__vite__mapDeps([11,1,2,6,7,12]))),vt=A(()=>D(()=>import("./ButonHrm-BUkLBhV3.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ae=A(()=>D(()=>import("./CheckBoxSlide-DopnnxAm.js"),__vite__mapDeps([16,1,2,17]))),bt=A(()=>D(()=>import("./ItemOnEnvios-Dzhy_TBh.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27]))),$t=A(()=>D(()=>import("./ShowPdfResume-PxoQkuXA.js"),__vite__mapDeps([28,1,2,21,22,23,7,24,25,14,26,27])));function Rt(){const[e,i]=se({list:{manifest:{id:"",label:""},search:"",status:""}}),[l,a]=se({}),[u,o]=se({}),[p,y]=S(""),[d,U]=S(!1),[K,E]=S(64),[G,V]=S(!1),[R,Z]=S(!1),[ye,ke]=S(""),z=Ke(y,500),[xe,Mt]=S(!1),[Ce,oe]=S(!1),[we,ce]=S(!1),Y=(c,s)=>{i("list",{[c]:s}),z(B())},Se=()=>{V(!G()),z(B())},Ie=()=>{U(!d()),z(B())},Me=()=>{Z(!R()),z(B())};je(()=>{}),qe(()=>{});const Ee=()=>{E(c=>c+64)},Ge=c=>{let s=Math.ceil(c?.length/64);Je(Ee,1250,s)},[F,{refetch:Et}]=Qe(p,async c=>{a(void 0),o("prov",void 0);let s=e?.list?.manifest?.id;ye()!==s&&ke(s);let w={},k=[],C={};var x={};if(s&&(w=await xt(s)),!d())a(w?.sumary),o("prov",w?.provinceGroup);else{x=await kt(e?.list?.search,s,e?.list?.status,e?.list?.estate,e?.list?.city),a(w?.sumary),E(0);let j={};G()?W(x).map(v=>{let _=x[v],h=_?.estate||_?.consigneeInfo?.ybestate;j[v]?k.push(_):j[v]=1,O("M023009")?.ZoneCity?.[_?.zone]?.[h]||k.push(_)}):R()?W(x).map(v=>{let _=x[v];_?.estate||_?.consigneeInfo?.ybestate,_?.bagnumber||k.push(_)}):(W(x).map(v=>{let _=x[v],h=_?.estate||_?.consigneeInfo?.ybestate,I=_?.city||_?.consigneeInfo?.ybcity;(h||I)&&(C[h]||(C[h]={cities:{},total:0}),C[h].cities?.[I]||(C[h].cities[I]=0),C[h].cities[I]+=1,C[h].total+=1),k.push(_)}),o("prov",C)),Ge(k)}return k}),ue=()=>F()?.length,Be=c=>{i("list",{manifest:c,status:void 0}),z(B())},Pe=()=>{wt(F())},Ae=()=>{St(F())},De=()=>{},Oe=(c,s)=>{Y("estate",c),Y("city",s)},ze=(c,s)=>{i("list",{estate:void 0,city:void 0}),z(B())},T=c=>c?" "+c:"",Fe=c=>{let s=c?.consigneeInfo;return T(s?.firstName)+T(s?.middleName)+T(s?.lastName)+T(s?.lastName2)},Le=c=>{let s=c?.consigneeInfo,w=T(s?.altPhoneNumber);return T(s?.phoneNumber)+(w?" | "+w:"")},Ne=async()=>{let c=[];ce(!0),setTimeout(async()=>{let s=3,w=900204,k=[],C=new Date().getFullYear().toString().slice(2,4);for(let v=0;v<s;v++)k.push(v);const x=k.map(async(v,_)=>{let h=w+v*2,I=h+1,M="scanner"+C;M="scanner_",console.log(M+""+h);const t=await ge(M+""+h),g=await ge(M+""+I);let b={mtrx:t,mtrx2:g,lbl:M+""+h,lbl2:M+""+I};c.push(b)});await Promise.all(x);let j=await Ze(c);window.open(j),ce(!1)},760)},Ve=async()=>{oe(!0);let c=[];F().map(async(s,w)=>{let k=s?.estate||s?.consigneeInfo?.ybestate,C=s?.city||s?.consigneeInfo?.ybcity,x={provincia:k,ciudad:C,nombre:Fe(s),telefonos:Le(s),guia:s?.idairguide,bulto:s?.bagnumber,hbls:s?.hblS};c.push(x)}),Ye(`listas_caneados_${B()}.csv`,c),oe(!1)},Re=c=>{let s={};s.id=B(),s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=r($t,{get list(){return F()}}),et(s)},Te=async c=>{await Ct(e?.list?.manifest?.id)};return We(()=>{}),(()=>{var c=it(),s=c.firstChild,w=s.firstChild,k=w.nextSibling,C=k.firstChild,x=k.nextSibling,j=x.firstChild,v=s.nextSibling,_=v.firstChild,h=v.nextSibling,I=h.firstChild,M=I.firstChild;return n(C,()=>e?.list?.manifest?.id),n(x,r(ae,{get initValue(){return d()},updChange:Ie,color:"var(--background-red-ssg)"}),j),n(c,r(m,{get when(){return ie?.profile?.isAdmin},get children(){return r(vt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Pe})}}),v),n(_,r(ft,{get list(){return O("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:t=>Be(t),width:"260px"})),n(v,r(m,{get when(){return Xe(()=>!!e?.list?.manifest?.id)()&&d()},get children(){return[(()=>{var t=tt();return n(t,r(ht,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>Y("search",g)})),t})(),(()=>{var t=nt(),g=t.firstChild,b=g.firstChild;return n(g,r(ae,{get initValue(){return G()},updChange:Se,color:"var(--background-red-ssg)"}),b),n(t,r(m,{get when(){return ie?.profile?.isAdmin},get children(){var $=rt(),q=$.firstChild;return n($,r(ae,{get initValue(){return R()},updChange:Me,color:"var(--background-red-ssg)"}),q),n($,r(m,{get when(){return R()},get children(){var L=Q();return L.$$click=Ae,n(L,r(P,{name:"outline_delete",size:24})),L}}),null),$}}),null),t})()]}}),null),n(h,r(m,{get when(){return e?.list?.manifest?.id},get children(){var t=lt(),g=t.firstChild;return n(g,r(de,{fallback:b=>(()=>{var $=me(),q=$.firstChild,L=q.nextSibling;return L.nextSibling,n($,()=>b.toString(),L),$})(),get children(){return r(te,{get fallback(){return(()=>{var b=he();return b.firstChild,n(b,r(N,{stroke:"rgb(200 25 60 / 1)",size:62}),null),b})()},get children(){return r(m,{get when(){return l?.total},get children(){return r(ee,{get each(){return W(l)},children:(b,$)=>J()?r(yt,{keyG:b,total:ue,get status(){return e?.list?.status},get amount(){return l?.[b]},get showItems(){return d()},updForm:Y}):r(pt,{keyG:b,total:ue,get showItems(){return d()},get status(){return e?.list?.status},get amount(){return l?.[b]},updForm:Y})})}})}})}})),H(()=>re(t,`client_item_box gWXAaj jlytmu ${J()?"isMobile":""}`)),t}}),I),n(M,r(m,{get when(){return d()},get children(){return r(m,{get when(){return!Ce()},get fallback(){return(()=>{var t=at(),g=t.firstChild;return n(t,r(N,{stroke:"rgb(200 25 60 / 1)",size:32}),g),t})()},get children(){var t=Q();return t.$$click=Ve,n(t,r(P,{name:"grid",size:24,color:"firebrick"})),t}})}}),null),n(M,r(m,{get when(){return ie?.profile?.isAdmin},get children(){return[r(m,{get when(){return!we()},get fallback(){return(()=>{var t=fe(),g=t.firstChild;return n(t,r(N,{stroke:"rgb(200 25 60 / 1)",size:32}),g),t})()},get children(){var t=Q();return t.$$click=Ne,n(t,r(P,{name:"printer",size:24,color:"firebrick"})),t}}),(()=>{var t=Q();return t.$$click=Te,n(t,r(P,{name:"tag-outline",size:24})),t})(),(()=>{var t=Q();return t.$$click=De,n(t,r(P,{name:"outline_renew",size:24})),t})()]}}),null),n(M,r(m,{get when(){return!xe()},get fallback(){return(()=>{var t=fe(),g=t.firstChild;return n(t,r(N,{stroke:"rgb(200 25 60 / 1)",size:32}),g),t})()},get children(){var t=Q();return t.$$click=Re,n(t,r(P,{name:"printer",size:32})),t}}),null),n(h,r(m,{get when(){return u?.prov},get children(){var t=st(),g=t.firstChild,b=g.firstChild,$=g.nextSibling;return n(b,r(m,{get when(){return u?.prov},get children(){return r(ee,{get each(){return W(u?.prov)},children:(q,L)=>r(It,{ism:q,get item(){return u?.prov?.[q]},updS:Oe})})}})),$.$$click=ze,n($,r(P,{name:"Xclose",size:22})),H(()=>re(t,`client_item_box gWXAaj jlytmu ${J()?"isMobile":""}`)),t}}),null),n(h,r(de,{fallback:t=>(()=>{var g=me(),b=g.firstChild,$=b.nextSibling;return $.nextSibling,n(g,()=>t.toString(),$),g})(),get children(){return r(te,{get fallback(){return(()=>{var t=he();return t.firstChild,n(t,r(N,{stroke:"rgb(200 25 60 / 1)",size:62}),null),t})()},get children(){return r(m,{get when(){return F()},get children(){return r(ee,{get each(){return F()?.slice(0,K())},children:(t,g)=>r(bt,{item:t,refresh:()=>z(B())})})}})}})}}),null),H(t=>Ue(h,` ${J()?"":"width:94vw;"} margin: 0 auto;`,t)),c})()}const pt=e=>{const[i,l]=S(!1),[a,u]=S(0),o=()=>{let d=e?.keyG;e?.keyG==="total"&&(d=null),e?.updForm("status",d)},p=()=>{i()||!J()&&e?.keyG!=="total"&&(u(O("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),l(!0))},y=()=>{u("0px"),i()&&l(!1)};return r(m,{get when(){return e?.amount>0},get children(){return r(te,{get fallback(){return(()=>{var d=$e();return d.firstChild,n(d,r(N,{stroke:"rgb(200 25 60 / 1)",size:32}),null),d})()},get children(){var d=be(),U=d.firstChild,K=U.nextSibling;return d.$$mouseout=y,d.$$mousemove=p,d.$$click=o,n(d,r(m,{get when(){return i()},get children(){var E=ot(),G=E.firstChild,V=G.firstChild,R=V.firstChild;return n(R,()=>O("M023009")?.statusObjDesc?.[e?.keyG]),H(Z=>(Z=a())!=null?G.style.setProperty("width",Z):G.style.removeProperty("width")),E}}),U),n(U,r(P,{get name(){return O("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(d,r(m,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var E=ve(),G=E.firstChild,V=G.nextSibling;return V.nextSibling,n(E,()=>e?.total(),V),E}}),K),n(K,()=>e?.amount),H(()=>re(d,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),d}})}})},yt=e=>{const i=()=>{let l=e?.keyG;e?.keyG==="total"&&(l=null),e?.updForm("status",l)};return r(m,{get when(){return e?.amount>0},get children(){return r(te,{get fallback(){return(()=>{var l=$e();return l.firstChild,n(l,r(N,{stroke:"rgb(200 25 60 / 1)",size:32}),null),l})()},get children(){var l=be(),a=l.firstChild,u=a.nextSibling;return l.$$click=i,n(a,r(P,{get name(){return O("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(l,r(m,{get when(){return O("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var o=ct(),p=o.firstChild;return n(p,()=>O("M023009")?.statusObjDesc?.[e?.keyG]),o}}),u),n(l,r(m,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var o=ve(),p=o.firstChild,y=p.nextSibling;return y.nextSibling,n(o,()=>e?.total(),y),o}}),u),n(u,()=>e?.amount),H(()=>re(l,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),l}})}})},kt=async(e,i,l,a,u)=>{let o={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime"]};e&&e.split(" ").map((y,d)=>{y&&(o.params[":search"+d]=y.trim())}),l&&(o.params[":status"]=l),a&&(o.params[":estate"]=a),u&&(o.params[":city"]=u),ne?.roles?.agency&&(o.params[":agency"]=ne?.roles?.agency+"");let p=X(802001);if(o={...o,...p},i&&Object.keys(o.params)?.length>=2){const y=await le(o);return y?.data?.error?{}:y}return{}},xt=async e=>{let i={params:{idairguide:e}},l=X(802004);i={...i,...l},ne?.roles?.agency&&(i.params[":agency"]=ne?.roles?.agency+"");const a=await le(i);return a?.error?{}:a},Ct=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},l=X(802001);i={...i,...l};const a=await le(i);return a?.error?{}:a},wt=async e=>{e.map(i=>{let l={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},a=X(802002);l={...l,...a}})},St=async e=>{let i=[];e.map(l=>{let a={params:{ssg_track_key:l?.ssg_track_key,idairguide:l?.idairguide}},u=X(809005);a={...a,...u},i.push(a)}),_e(i,pe)},Tt=async(e,i)=>{let l=[];e.map(a=>{let u={params:{ssg_track_key:a?.ssg_track_key,idairguide:a?.idairguide},data2update:{currentStatus:i}},o=X(802004);u={...u,...o},l.push(u)}),_e(l,pe)},pe=async e=>{const l=await le(e);if(l)return l},It=e=>(()=>{var i=gt();return n(i,r(m,{get when(){return e?.item?.total>0},get children(){var l=ut(),a=l.firstChild,u=a.firstChild,o=u.firstChild,p=u.nextSibling;return a.$$click=()=>e?.updS(e?.ism),n(u,()=>e?.ism,o),n(p,()=>e?.item?.total),l}}),null),n(i,r(_t,{get children(){var l=dt();return n(l,r(m,{get when(){return e?.item?.cities},get children(){return r(ee,{get each(){return W(e?.item?.cities)},children:(a,u)=>(()=>{var o=mt(),p=o.firstChild,y=p.nextSibling;return o.$$click=()=>e?.updS(e?.ism,a),n(p,a),n(y,()=>e?.item?.cities?.[a]),o})()})}})),l}}),null),i})();He(["click","mousemove","mouseout"]);export{pt as StatusGroupItem,Rt as default,St as deleteManifest,pe as fetchCSVInve,wt as loadManifest,Tt as updateManifest};
