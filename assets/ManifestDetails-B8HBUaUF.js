const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-Bhmx-ykp.js","assets/index-CniYigvJ.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/FlexSpace-DCCod8RM.js","assets/SVG-BZ_yVFua.js"])))=>i.map(i=>d[i]);
import{l as T,_ as Q,G as se,c as U,a as H,o as ne,b as re,d as ae,i as s,e as l,S as N,R as le,F as ce,Q as oe,n as R,r as C,w as q,s as de,E as O,x as K,j as J,k as Z,U as me,z as ge,t as b,W as Y,Z as ee,O as ue,q as he,al as fe,as as X,aB as _e,an as ve,ao as pe}from"./index-CniYigvJ.js";import{u as be}from"./debounces-CfKLg9Vm.js";import"./ButonHrm-C6YG02GJ.js";import{P as $e}from"./ShowQRPrintLabel-DDdLrAvF.js";import{i as ye,h as xe}from"./DashManifest-DRuu3oNT.js";import"./Reports-Ce8pEs08.js";/* empty css                 */import"./SVG-BZ_yVFua.js";import"./fontkit.es-BNpdej5s.js";import"./qrcode-DHy8FFhS.js";import"./InitPrintServices-BAFhzBDa.js";import"./Toast-eB_QxONt.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-Dcam7oS8.js";import"./ScanningServices-CXiq7a7a.js";var ke=b('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg height=22 width=22><path>'),te=b("<h5>"),Se=b('<div><div class=bottombx style=padding:16px><div class="_dsplFlx flxWrp spaceAround centerBx"><h4></h4>|<h4></h4><div class="icon_status centerBx"><a class=centerBx></a></div>|<div class="icon_status centerBx"></div></div></div><div>'),we=b("<div> <!>."),Be=b("<div> "),Ne=b('<div class="bottombx flxWrp spaceAround centerBx"><h4></h4><div class="icon_status centerBx">'),Ae=b("<img width=48 height=24 class=picture-profile alt=ssg decoding=async>"),Ie=b('<div class="bottombx flxWrp spaceAround centerBx"><h4>'),Ce=b('<div class="icon_status centerBx">'),Oe=b("<h5 class=rpto>"),Le=b('<div><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="bag_number centerBx"><div class="icon_status centerBx"></div><h5></h5></div><div class=bottombx><div class="_dsplFlx flxWrp spaceAround centerBx"><h5></h5></div></div></div><div><p class=" textleft "></p><div class=vertseparator>');const je=T(()=>Q(()=>import("./LoadingColorSpinner-Bhmx-ykp.js"),__vite__mapDeps([0,1,2,3]))),G=T(()=>Q(()=>import("./FlexSpace-DCCod8RM.js"),__vite__mapDeps([4,1,2]))),j=T(()=>Q(()=>import("./SVG-BZ_yVFua.js"),__vite__mapDeps([5,1,2])));function Je(){const[t,g]=se(),[i,m]=U({search:""}),[x,o]=U(),[d,L]=H(0),[z,E]=U(),[M,W]=H("");be(W,400),ne(()=>{}),re(()=>{});const F=async()=>{if(t?.mId&&d()<X()){L(X()+7e3);let e={id:t?.mId},c=await Me(e);m("manifestObj",void 0),o("linked",void 0),m("manifestObj",c),o("linked",{...c?.linkedBags}),i?.province||(m("province",c?.province),m("city",c?.city))}};ae(async()=>{ye();let e=[];[33,46,40,41,42,50,52,54,56].map(h=>{let $=h,w=O("M023009")?.whStList?.[$];Y?.roles?.[w?.id]?.isActive&&e.push(w)}),E("list",e);let u=[];O("M023009")?.provincias.map(h=>{let $=h.label;Y?.roles?.[$]?.isActive&&u.push(h)}),E("prov",u),F()});const v=e=>e||"",k=e=>e?" "+e:"",P=e=>(v(e?.estate)+"_"+v(e?.city)+"_"+v(e?.rpto)+"_"+v(e?.streetName)+"_"+v(e?.streetNo)).toLowerCase(),n=e=>{if(e?.consigneeName)return e?.consigneeName;let c=e?.consigneeInfo;return k(c?.firstName)+k(c?.middleName)+k(c?.lastName)+k(c?.lastName2)},S=e=>{if(e?.ctelephone)return e?.ctelephone;let c=e?.consigneeInfo,u=k(c?.altPhoneNumber);return k(c?.phoneNumber)+(u?" |"+u:"")},A=e=>new Promise((c,u)=>{let h=(()=>{var _=ke(),B=_.firstChild;return R(()=>q(B,"d",_e?.[e])),_})(),$=h.cloneNode(!0);const w=new XMLSerializer().serializeToString($),y=`data:image/svg+xml;charset=utf-8;base64,${btoa(unescape(encodeURIComponent(w)))}`,f=new Image;f.addEventListener("load",()=>{const _=h.getAttribute("width"),B=h.getAttribute("height"),a=document.createElement("canvas");a.setAttribute("width",_),a.setAttribute("height",B),a.getContext("2d").drawImage(f,0,0,_,B);const I=a.toDataURL("image/png");c(I)}),f.src=y}),ie=async()=>{let e={},c={},u={};const $=["cellphone","receipt","home","open_package_file_outline","user"].map(async r=>{let y=await A(r);ee("icon_"+r,y)});await Promise.all($),i?.manifestObj?.linkedBagsInfo?.map(r=>{if(r?.currentStatus!="YABA_99"){let y=r?.address;r?.isSSG&&(y={streetName:"ANGEL GUERRA",streetNo:"16A",rpto:"PERALTA",betwen:"ESQUINA FOMENTO",city:"HOLGUIN",estate:"HOLGUIN"});let f=P(y),_=r?.cidentity,B=r?.address?.estate,a=r?.address?.city,p=r?.address?.Rpto||r?.address?.rpto;if(u[p]||(u[p]=1),c[a]||(c[a]=1),e[f]||(e[f]={city:a,estate:B,rpto:p,address:y,currentStatus:r?.currentStatus,customers:{},bagsNo:0}),!e[f].customers[_]){let D={name:n(r),phoneNumber:S(r),cid:r?.cidentity,nameshipper:r?.nameshipper},V={...r,...D};V.bagsNumb={},e[f].customers[_]=V}let I={bagnumber:r?.bagnumber,idairguide:r?.guia,tracking:r?.tracking,hbls:r?.hbls};e[f].customers[_].bagsNumb[r?.ssg_track_key]=I,e[f].bagsNo+=1}});let w=await $e(ue(e),e);window.open(w)};return(()=>{var e=Se(),c=e.firstChild,u=c.firstChild,h=u.firstChild,$=h.nextSibling,w=$.nextSibling,r=w.nextSibling,y=r.firstChild,f=r.nextSibling,_=f.nextSibling,B=c.nextSibling;return s(h,()=>i?.manifestObj?.name),s(u,l(N,{get when(){return i?.manifestObj?.city},get children(){return["|",(()=>{var a=te();return s(a,()=>i?.manifestObj?.city),a})()]}}),$),s(w,()=>i?.manifestObj?.province),r.$$click=()=>{},s(y,l(j,{name:"link",size:22})),_.$$click=ie,s(_,l(j,{name:"printer",size:24,color:"firebrick"})),s(B,l(oe,{fallback:a=>(()=>{var p=we(),I=p.firstChild,D=I.nextSibling;return D.nextSibling,s(p,()=>a.toString(),D),p})(),get children(){return l(le,{get fallback(){return(()=>{var a=Be();return a.firstChild,s(a,l(je,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){return l(N,{get when(){return i?.manifestObj?.linkedBagsInfo?.length>0},get children(){return l(ce,{get each(){return i?.manifestObj?.linkedBagsInfo},children:a=>l(Ee,{item:a,get city(){return i?.manifestObj?.city},get manifestObj(){return i?.manifestObj},get isAlready(){return i?.manifestObj?.linkedBags?.[a.ssg_track_key]},setFormsM:m,get mId(){return t?.mId}})})}})}})}})),R(a=>{var p=`/link-manifest?mId=${t?.mId}`,I=` ${C(),"width:86vw;"} margin: 0 auto;`;return p!==a.e&&q(y,"href",a.e=p),a.t=de(B,I,a.t),a},{e:void 0,t:void 0}),e})()}const Ee=t=>{const g=()=>{let o=t?.item?.street.split(",");return o.slice(0,o.length-2).join(",")},i=o=>o?" "+o:"",m=o=>{if(o?.consigneeName)return o?.consigneeName;let d=o?.consigneeInfo;return i(d?.firstName)+i(d?.middleName)+i(d?.lastName)+i(d?.lastName2)},x=async o=>{if(t?.item?.currentStatus!=="99"){let d=he(O("manifestList"));d[t?.mId].linkedBags[t?.item?.ssg_track_key]&&(delete d[t?.mId].linkedBags[t?.item?.ssg_track_key],ee("manifestList",d),await fe(pe,ve,d)),t?.setFormsM("manifestObj","linkedBags",t?.item?.ssg_track_key,void 0)}};return l(N,{get when(){return t?.manifestObj?.linkedBags[t?.item?.ssg_track_key]},get children(){var o=Le(),d=o.firstChild,L=d.firstChild,z=L.firstChild,E=z.nextSibling,M=L.nextSibling,W=M.firstChild,F=W.firstChild,v=d.nextSibling,k=v.firstChild,P=k.nextSibling;return s(o,l(N,{get when(){return C()},get children(){var n=Ne(),S=n.firstChild,A=S.nextSibling;return s(S,()=>m(t?.item)),s(n,l(G,{}),A),A.$$click=x,s(A,l(j,{name:"outline_delete",size:28,color:"var(--background-red-ssg)"})),n}}),d),s(d,l(N,{get when(){return t?.item?.isSSG},get children(){var n=Ae();return R(()=>q(n,"src",O("SSG.webp"))),n}}),L),s(z,l(j,{name:"open_package_file_outline",size:20})),s(E,()=>t?.item?.bagnumber),s(d,l(N,{get when(){return!C()},get children(){var n=Ie(),S=n.firstChild;return s(S,()=>m(t?.item)),n}}),M),s(d,l(G,{}),M),s(F,()=>t?.item?.idairguide),s(d,l(N,{get when(){return!C()},get children(){var n=Ce();return n.$$click=x,s(n,l(j,{get name(){return t?.item?.currentStatus==="YABA_99"?"check_circle":"outline_delete"},size:24,get color(){return t?.item?.currentStatus==="YABA_99"?"var(--hrm-palette-tertiary60)":"var(--background-red-ssg)"}})),n}}),null),s(k,g),s(v,l(G,{}),P),s(v,l(N,{get when(){return t?.item?.address?.rpto},get children(){return[(()=>{var n=Oe();return s(n,()=>t?.item?.address?.rpto),n})(),"|"]}}),P),s(v,l(N,{get when(){return!t?.city&&t?.item?.address?.city},get children(){var n=te();return s(n,()=>t?.item?.address?.city),n}}),null),R(n=>{var S=`client_item_box gWXAaj jlytmu manifest ${C()?"isMobile":""}`,A=` ${C(),"centerBx"} bottombx flxWrp  centerBx`;return S!==n.e&&K(o,n.e=S),A!==n.t&&K(v,n.t=A),n},{e:void 0,t:void 0}),o}})},Ze=async(t,g)=>{let i={params:t,data2update:g},m=J(709002);return i={...i,...m},await Z(i)},Me=async t=>{let g={...O("manifestList")?.[t?.id]};g||(g=await xe());let i=[],m=g?.linkedBags;return m&&Object.keys(m)?.map(async x=>{if(x){let o=O("manifestByKeys")?.[x];i.push(o)}}),g.linkedBagsInfo=i,g},et=async t=>{let g=[];t.map(i=>{let m={params:{id:i?.ssg_track_key,idairguide:"all"}},x=J(802002);m={...m,...x},g.push(m)}),me(g,Pe)},Pe=async t=>{const i=await Z(t);if(i)return i};ge(["click"]);export{Je as default,Pe as fetchCSVInve,et as loadManifest,Ze as updLinkedBags};
