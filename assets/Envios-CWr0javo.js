const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CPooZctw.js","assets/index-B8K3ByHh.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-DIonl_Br.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-higPq2wD.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-BAoNekMa.js","assets/debounces-XeQf352o.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-D-8ZGUdK.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-COD68OCk.js","assets/Util-uEfv1z7O.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-BfEQPviz.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DuaPf0x4.js","assets/DialogHRM-CZBDGOO4.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-3qkZqgvF.js","assets/ShowQRPrintLabel-DDJnxuS3.js","assets/PDFButton-B_0lS8EG.js","assets/qrcode-C5vWJp7P.js","assets/fontkit.es-BKe7DAJ7.js","assets/InitPrintServices-CprHcwF4.js","assets/Toast-uQtVKY3c.js","assets/Toast-DLpFKn-Q.css","assets/ShowPdfResume-GANkIKeI.js"])))=>i.map(i=>d[i]);
import{l as P,_ as A,c as se,a as S,o as je,h as qe,b as Qe,m as We,i as n,d as r,f as H,e as He,t as _,k as ie,S as m,j as Xe,E as de,q as te,F as ee,g as re,s as Ue,r as ne}from"./index-B8K3ByHh.js";import{b as X,e as _e,f as le,a as O,O as W,g as G,h as Ye,s as Je}from"./Util-uEfv1z7O.js";import{u as Ke}from"./debounces-XeQf352o.js";import{i as J}from"./globalSignal-3qkZqgvF.js";import{g as ge,l as Ze}from"./ShowQRPrintLabel-DDJnxuS3.js";import"./Toast-uQtVKY3c.js";import{OpenModal as et}from"./DialogHRM-CZBDGOO4.js";import"./index-Ci0zXM0r.js";import"./PDFButton-B_0lS8EG.js";import"./qrcode-C5vWJp7P.js";import"./fontkit.es-BKe7DAJ7.js";import"./InitPrintServices-CprHcwF4.js";var tt=_("<div style=padding:4px>"),Q=_('<div class="icon_status centerBx">'),rt=_('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),nt=_('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),lt=_('<div><div class="_dsplFlx flxWrp spaceAround ">'),st=_('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),it=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div><div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),me=_("<div> <!>."),he=_("<div> "),at=_("<div class=centerBx><h5 style=margin-left:12px>generando excel"),fe=_("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),ot=_("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ve=_("<h5 class=totalBagsNo> <!> / "),be=_('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),$e=_("<div class=leftMrg> "),ct=_("<div class=bottombx><h4>"),ut=_('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),dt=_("<div style=padding:16px;margin-left:20px;>"),gt=_("<div>"),mt=_('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const L=P(()=>A(()=>import("./LoadingColorSpinner-CPooZctw.js"),__vite__mapDeps([0,1,2,3]))),ht=P(()=>A(()=>import("./InputHr-DIonl_Br.js"),__vite__mapDeps([4,1,2,5]))),B=P(()=>A(()=>import("./SVG-higPq2wD.js"),__vite__mapDeps([6,1,2,7]))),ft=P(()=>A(()=>import("./DropDwnSearch-BAoNekMa.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),_t=P(()=>A(()=>import("./ContainerElasticView-D-8ZGUdK.js"),__vite__mapDeps([11,1,2,6,7,12]))),vt=P(()=>A(()=>import("./ButonHrm-COD68OCk.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ae=P(()=>A(()=>import("./CheckBoxSlide-BfEQPviz.js"),__vite__mapDeps([16,1,2,17]))),bt=P(()=>A(()=>import("./ItemOnEnvios-DuaPf0x4.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27,28]))),$t=P(()=>A(()=>import("./ShowPdfResume-GANkIKeI.js"),__vite__mapDeps([29,1,2,21,22,23,7,24,25,26,14,27,28])));function Tt(){const[e,i]=se({list:{manifest:{id:"",label:""},search:"",status:""}}),[l,a]=se({}),[u,o]=se({}),[y,k]=S(""),[d,U]=S(!1),[K,M]=S(64),[E,N]=S(!1),[R,Z]=S(!1),[ye,ke]=S(""),z=Ke(k,500),[xe,Mt]=S(!1),[Ce,oe]=S(!1),[we,ce]=S(!1),Y=(c,s)=>{i("list",{[c]:s}),z(G())},Se=()=>{N(!E()),z(G())},Ie=()=>{U(!d()),z(G())},Me=()=>{Z(!R()),z(G())};je(()=>{}),qe(()=>{});const Ee=()=>{M(c=>c+64)},Ge=c=>{let s=Math.ceil(c?.length/64);Je(Ee,1250,s)},[F,{refetch:Et}]=Qe(y,async c=>{a(void 0),o("prov",void 0);let s=e?.list?.manifest?.id;ye()!==s&&ke(s);let w={},$=[],C={};var x={};if(s&&(w=await xt(s)),!d())a(w?.sumary),o("prov",w?.provinceGroup);else{x=await kt(e?.list?.search,s,e?.list?.status,e?.list?.estate,e?.list?.city),a(w?.sumary),M(0);let j={};E()?W(x).map(v=>{let h=x[v],f=h?.estate||h?.consigneeInfo?.ybestate;j[v]?$.push(h):j[v]=1,O("M023009")?.ZoneCity?.[h?.zone]?.[f]||$.push(h)}):R()?W(x).map(v=>{let h=x[v];h?.estate||h?.consigneeInfo?.ybestate||$.push(h),h?.bagnumber||$.push(h)}):(W(x).map(v=>{let h=x[v],f=h?.estate||h?.consigneeInfo?.ybestate,I=h?.city||h?.consigneeInfo?.ybcity;(f||I)&&(C[f]||(C[f]={cities:{},total:0}),C[f].cities?.[I]||(C[f].cities[I]=0),C[f].cities[I]+=1,C[f].total+=1),$.push(h)}),o("prov",C)),Ge($)}return $}),ue=()=>F()?.length,Be=c=>{i("list",{manifest:c,status:void 0}),z(G())},Pe=()=>{wt(F())},Ae=()=>{St(F())},De=()=>{},Oe=(c,s)=>{Y("estate",c),Y("city",s)},ze=(c,s)=>{i("list",{estate:void 0,city:void 0}),z(G())},T=c=>c?" "+c:"",Fe=c=>{let s=c?.consigneeInfo;return T(s?.firstName)+T(s?.middleName)+T(s?.lastName)+T(s?.lastName2)},Ve=c=>{let s=c?.consigneeInfo,w=T(s?.altPhoneNumber);return T(s?.phoneNumber)+(w?" | "+w:"")},Le=async()=>{let c=[];ce(!0),setTimeout(async()=>{let s=30,w=900004,$=[],C=new Date().getFullYear().toString().slice(2,4);for(let v=0;v<s;v++)$.push(v);const x=$.map(async(v,h)=>{let f=w+v*2,I=f+1,D="SS"+C;const t=await ge(D+""+f),g=await ge(D+""+I);let b={mtrx:t,mtrx2:g,lbl:D+""+f,lbl2:D+""+I};c.push(b)});await Promise.all(x);let j=await Ze(c);window.open(j),ce(!1)},760)},Ne=async()=>{oe(!0);let c=[];F().map(async(s,w)=>{let $=s?.estate||s?.consigneeInfo?.ybestate,C=s?.city||s?.consigneeInfo?.ybcity,x={provincia:$,ciudad:C,nombre:Fe(s),telefonos:Ve(s),guia:s?.idairguide,bulto:s?.bagnumber,hbls:s?.hblS};c.push(x)}),Ye(`listas_caneados_${G()}.csv`,c),oe(!1)},Re=c=>{let s={};s.id=G(),s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=r($t,{get list(){return F()}}),et(s)},Te=async c=>{await Ct(e?.list?.manifest?.id)};return We(()=>{}),(()=>{var c=it(),s=c.firstChild,w=s.firstChild,$=w.nextSibling,C=$.firstChild,x=$.nextSibling,j=x.firstChild,v=s.nextSibling,h=v.firstChild,f=v.nextSibling,I=f.firstChild,D=I.firstChild;return n(C,()=>e?.list?.manifest?.id),n(x,r(ae,{get initValue(){return d()},updChange:Ie,color:"var(--background-red-ssg)"}),j),n(c,r(m,{get when(){return ie?.profile?.isAdmin},get children(){return r(vt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Pe})}}),v),n(h,r(ft,{get list(){return O("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:t=>Be(t),width:"260px"})),n(v,r(m,{get when(){return Xe(()=>!!e?.list?.manifest?.id)()&&d()},get children(){return[(()=>{var t=tt();return n(t,r(ht,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>Y("search",g)})),t})(),(()=>{var t=nt(),g=t.firstChild,b=g.firstChild;return n(g,r(ae,{get initValue(){return E()},updChange:Se,color:"var(--background-red-ssg)"}),b),n(t,r(m,{get when(){return ie?.profile?.isAdmin},get children(){var p=rt(),q=p.firstChild;return n(p,r(ae,{get initValue(){return R()},updChange:Me,color:"var(--background-red-ssg)"}),q),n(p,r(m,{get when(){return R()},get children(){var V=Q();return V.$$click=Ae,n(V,r(B,{name:"outline_delete",size:24})),V}}),null),p}}),null),t})()]}}),null),n(f,r(m,{get when(){return e?.list?.manifest?.id},get children(){var t=lt(),g=t.firstChild;return n(g,r(de,{fallback:b=>(()=>{var p=me(),q=p.firstChild,V=q.nextSibling;return V.nextSibling,n(p,()=>b.toString(),V),p})(),get children(){return r(te,{get fallback(){return(()=>{var b=he();return b.firstChild,n(b,r(L,{stroke:"rgb(200 25 60 / 1)",size:62}),null),b})()},get children(){return r(m,{get when(){return l?.total},get children(){return r(ee,{get each(){return W(l)},children:(b,p)=>J()?r(yt,{keyG:b,total:ue,get status(){return e?.list?.status},get amount(){return l?.[b]},get showItems(){return d()},updForm:Y}):r(pt,{keyG:b,total:ue,get showItems(){return d()},get status(){return e?.list?.status},get amount(){return l?.[b]},updForm:Y})})}})}})}})),H(()=>re(t,`client_item_box gWXAaj jlytmu ${J()?"isMobile":""}`)),t}}),I),n(D,r(m,{get when(){return d()},get children(){return r(m,{get when(){return!Ce()},get fallback(){return(()=>{var t=at(),g=t.firstChild;return n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),g),t})()},get children(){var t=Q();return t.$$click=Ne,n(t,r(B,{name:"grid",size:24,color:"firebrick"})),t}})}}),null),n(D,r(m,{get when(){return ie?.profile?.isAdmin},get children(){return[r(m,{get when(){return!we()},get fallback(){return(()=>{var t=fe(),g=t.firstChild;return n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),g),t})()},get children(){var t=Q();return t.$$click=Le,n(t,r(B,{name:"printer",size:24,color:"firebrick"})),t}}),(()=>{var t=Q();return t.$$click=Te,n(t,r(B,{name:"tag-outline",size:24})),t})(),(()=>{var t=Q();return t.$$click=De,n(t,r(B,{name:"outline_renew",size:24})),t})()]}}),null),n(D,r(m,{get when(){return!xe()},get fallback(){return(()=>{var t=fe(),g=t.firstChild;return n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),g),t})()},get children(){var t=Q();return t.$$click=Re,n(t,r(B,{name:"printer",size:32})),t}}),null),n(f,r(m,{get when(){return u?.prov},get children(){var t=st(),g=t.firstChild,b=g.firstChild,p=g.nextSibling;return n(b,r(m,{get when(){return u?.prov},get children(){return r(ee,{get each(){return W(u?.prov)},children:(q,V)=>r(It,{ism:q,get item(){return u?.prov?.[q]},updS:Oe})})}})),p.$$click=ze,n(p,r(B,{name:"Xclose",size:22})),H(()=>re(t,`client_item_box gWXAaj jlytmu ${J()?"isMobile":""}`)),t}}),null),n(f,r(de,{fallback:t=>(()=>{var g=me(),b=g.firstChild,p=b.nextSibling;return p.nextSibling,n(g,()=>t.toString(),p),g})(),get children(){return r(te,{get fallback(){return(()=>{var t=he();return t.firstChild,n(t,r(L,{stroke:"rgb(200 25 60 / 1)",size:62}),null),t})()},get children(){return r(m,{get when(){return F()},get children(){return r(ee,{get each(){return F()?.slice(0,K())},children:(t,g)=>r(bt,{item:t,refresh:()=>z(G())})})}})}})}}),null),H(t=>Ue(f,` ${J()?"":"width:94vw;"} margin: 0 auto;`,t)),c})()}const pt=e=>{const[i,l]=S(!1),[a,u]=S(0),o=()=>{let d=e?.keyG;e?.keyG==="total"&&(d=null),e?.updForm("status",d)},y=()=>{i()||!J()&&e?.keyG!=="total"&&(u(O("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),l(!0))},k=()=>{u("0px"),i()&&l(!1)};return r(m,{get when(){return e?.amount>0},get children(){return r(te,{get fallback(){return(()=>{var d=$e();return d.firstChild,n(d,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),d})()},get children(){var d=be(),U=d.firstChild,K=U.nextSibling;return d.$$mouseout=k,d.$$mousemove=y,d.$$click=o,n(d,r(m,{get when(){return i()},get children(){var M=ot(),E=M.firstChild,N=E.firstChild,R=N.firstChild;return n(R,()=>O("M023009")?.statusObjDesc?.[e?.keyG]),H(Z=>(Z=a())!=null?E.style.setProperty("width",Z):E.style.removeProperty("width")),M}}),U),n(U,r(B,{get name(){return O("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(d,r(m,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var M=ve(),E=M.firstChild,N=E.nextSibling;return N.nextSibling,n(M,()=>e?.total(),N),M}}),K),n(K,()=>e?.amount),H(()=>re(d,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),d}})}})},yt=e=>{const i=()=>{let l=e?.keyG;e?.keyG==="total"&&(l=null),e?.updForm("status",l)};return r(m,{get when(){return e?.amount>0},get children(){return r(te,{get fallback(){return(()=>{var l=$e();return l.firstChild,n(l,r(L,{stroke:"rgb(200 25 60 / 1)",size:32}),null),l})()},get children(){var l=be(),a=l.firstChild,u=a.nextSibling;return l.$$click=i,n(a,r(B,{get name(){return O("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(l,r(m,{get when(){return O("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var o=ct(),y=o.firstChild;return n(y,()=>O("M023009")?.statusObjDesc?.[e?.keyG]),o}}),u),n(l,r(m,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var o=ve(),y=o.firstChild,k=y.nextSibling;return k.nextSibling,n(o,()=>e?.total(),k),o}}),u),n(u,()=>e?.amount),H(()=>re(l,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),l}})}})},kt=async(e,i,l,a,u)=>{let o={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG"]};e&&e.split(" ").map((k,d)=>{k&&(o.params[":search"+d]=k.trim())}),l&&(o.params[":status"]=l),a&&(o.params[":estate"]=a),u&&(o.params[":city"]=u),ne?.roles?.agency&&(o.params[":agency"]=ne?.roles?.agency+"");let y=X(802001);if(o={...o,...y},i&&Object.keys(o.params)?.length>=2){const k=await le(o);return k?.data?.error?{}:k}return{}},xt=async e=>{let i={params:{idairguide:e}},l=X(802004);i={...i,...l},ne?.roles?.agency&&(i.params[":agency"]=ne?.roles?.agency+"");const a=await le(i);return a?.error?{}:a},Ct=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},l=X(802001);i={...i,...l};const a=await le(i);return a?.error?{}:a},wt=async e=>{e.map(i=>{let l={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},a=X(802002);l={...l,...a}})},St=async e=>{let i=[];e.map(l=>{let a={params:{ssg_track_key:l?.ssg_track_key,idairguide:l?.idairguide}},u=X(809005);a={...a,...u},i.push(a)}),_e(i,pe)},jt=async(e,i)=>{let l=[];e.map(a=>{let u={params:{ssg_track_key:a?.ssg_track_key,idairguide:a?.idairguide},data2update:{currentStatus:i}},o=X(802004);u={...u,...o},l.push(u)}),_e(l,pe)},pe=async e=>{const l=await le(e);if(l)return l},It=e=>(()=>{var i=gt();return n(i,r(m,{get when(){return e?.item?.total>0},get children(){var l=ut(),a=l.firstChild,u=a.firstChild,o=u.firstChild,y=u.nextSibling;return a.$$click=()=>e?.updS(e?.ism),n(u,()=>e?.ism,o),n(y,()=>e?.item?.total),l}}),null),n(i,r(_t,{get children(){var l=dt();return n(l,r(m,{get when(){return e?.item?.cities},get children(){return r(ee,{get each(){return W(e?.item?.cities)},children:(a,u)=>(()=>{var o=mt(),y=o.firstChild,k=y.nextSibling;return o.$$click=()=>e?.updS(e?.ism,a),n(y,a),n(k,()=>e?.item?.cities?.[a]),o})()})}})),l}}),null),i})();He(["click","mousemove","mouseout"]);export{pt as StatusGroupItem,Tt as default,St as deleteManifest,pe as fetchCSVInve,wt as loadManifest,jt as updateManifest};
