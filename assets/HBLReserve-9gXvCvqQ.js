const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-Bu84-Max.js","assets/index-dc5eSeYP.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-ylLIVQaj.js","assets/InputHr-BXFw4d2l.css","assets/SVG-MAqCdwYC.js","assets/DropDwnSearch-DaN4QC-Z.js","assets/debounces-Bl3ngZK1.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-Cx-4jsQv.js","assets/ContainerElasticView-LzOd6fDI.css","assets/CheckBoxSlide-CvkNWclj.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnHBLReserve-CLsu3Glb.js","assets/DialogHRM-x0qWQ7NN.js","assets/DialogHRM-V9_lZntj.css","assets/fontkit.es-xCUw1YGS.js","assets/qrcode-DHy8FFhS.js","assets/Toast-DAlxofoS.js","assets/Toast-DLpFKn-Q.css","assets/ItemOptions-vS_HRr-i.js","assets/ShowQRPrintLabel-CRb5aDZc.js","assets/InitPrintServices-DBL6eTO5.js","assets/DashInventory-D6gePscJ.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/Reports-RKQUtphb.js","assets/ScanningServices-BbSNw7ip.js","assets/parseUpsSta-A5QmduFK.js","assets/ShowPdfResume-C_XyJdcj.js","assets/AddOrLinkToManifest-DolnRyxV.js","assets/DashManifest-kaXmZK_U.js","assets/ShowUpdStatus-CfFz-vKR.js","assets/ShowPdfReceipt-ghvkuR89.js","assets/FlexSpace-C1R7-YiT.js"])))=>i.map(i=>d[i]);
import{l as C,_ as w,a as b,c as Q,o as Ee,b as Ne,D as Oe,d as Be,i as n,e as s,Y as U,S as f,E as Le,N as ae,h as I,p as T,y as K,v as W,Z as Pe,F as Z,O as E,R as ue,q as O,Q as Re,s as Ie,k as G,U as te,m as q,A as Me,t as _,$ as H,W as ie,X as Te}from"./index-dc5eSeYP.js";import{u as Ge}from"./debounces-Bl3ngZK1.js";import"./fontkit.es-xCUw1YGS.js";import"./qrcode-DHy8FFhS.js";import"./Toast-DAlxofoS.js";import{OpenModal as le}from"./DialogHRM-x0qWQ7NN.js";import{l as qe}from"./ScanningServices-BbSNw7ip.js";import"./App.module-CbHnVtRQ.js";var Ve=_('<div class="centerBx bottombx "><h5 class="">No Bag'),je=_('<div class="centerBx bottombx "><h5 class="">Duplicate HBL'),Fe=_('<div><div class="centerBx bottombx "><h5 class="">Mostrar Hbls'),ne=_("<div style=padding:4px>"),de=_("<div>"),Qe=_('<div><div class="_dsplFlx flxWrp spaceAround "><div style=padding:4px>'),z=_('<div class="icon_status centerBx">'),He=_('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),ze=_('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),We=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>HBL Reservas</h2><div class="centerBx bottombx"style=margin-top:10px;></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div>'),Xe=_("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ue=_("<div> <!>."),Ye=_("<div> "),Ke=_("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),Ze=_("<h5 class=totalBagsNo> <!> / "),Je=_('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),et=_("<div class=leftMrg> "),tt=_('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),rt=_("<div style=padding:16px;margin-left:20px;>"),st=_('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const J=C(()=>w(()=>import("./LoadingColorSpinner-Bu84-Max.js"),__vite__mapDeps([0,1,2,3]))),at=C(()=>w(()=>import("./InputHr-ylLIVQaj.js"),__vite__mapDeps([4,1,2,5]))),P=C(()=>w(()=>import("./SVG-MAqCdwYC.js"),__vite__mapDeps([6,1,2]))),oe=C(()=>w(()=>import("./DropDwnSearch-DaN4QC-Z.js"),__vite__mapDeps([7,1,2,8,6,9]))),it=C(()=>w(()=>import("./ContainerElasticView-Cx-4jsQv.js"),__vite__mapDeps([10,1,2,6,11]))),Y=C(()=>w(()=>import("./CheckBoxSlide-CvkNWclj.js"),__vite__mapDeps([12,1,2,13]))),lt=C(()=>w(()=>import("./ItemOnHBLReserve-CLsu3Glb.js"),__vite__mapDeps([14,1,2,15,16,10,6,11,17,18,19,20,21,22,23,24,25,26,27,8,28,29])));C(()=>w(()=>import("./ShowPdfResume-C_XyJdcj.js"),__vite__mapDeps([30,1,2,22,17,18,23,19,20])));C(()=>w(()=>import("./AddOrLinkToManifest-DolnRyxV.js"),__vite__mapDeps([31,1,2,22,17,18,23,19,20,15,16,32,25,26,28])));const nt=C(()=>w(()=>import("./ShowUpdStatus-CfFz-vKR.js"),__vite__mapDeps([33,1,2,22,17,18,23,19,20,28,25,26,29]))),ot=C(()=>w(()=>import("./ShowPdfReceipt-ghvkuR89.js"),__vite__mapDeps([34,1,2,22,17,18,23,19,20,35]))),[ct,ce]=b(),[ee,Nt]=b(!1);function Ot(){const[e,r]=b(""),[t,a]=Q({list:{manifest:{id:"",label:""},search:"",status:""}}),[i,d]=Q({resume:{}}),[p,$]=Q({}),[o,y]=Q({}),[m,x]=b(!1),[N,B]=b(64);b(!1),b(!1);const[V,j]=b(!1),[X,he]=b(!1),[me,_e]=b(""),M=Ge(r,500);b(!1),b(!1);const[pe,bt]=b(!1),[yt,re]=b(!1),F=(h,c)=>{a("list",{[h]:c}),M(O())},ve=()=>{x(!m()),M(O())},fe=()=>{he(!X()),M(O())};Ee(()=>{}),Ne(()=>{});const be=()=>{B(h=>h+64)},se=h=>{let c=Math.ceil(h?.length/64);Te(be,1250,c)},ye=()=>{let h=[];return I("M023009")?.manifestList&&E(I("M023009")?.manifestList).map(c=>{h.push({label:c,id:c})}),h};Oe(e,async h=>{d("resume",void 0),re(!0),$("prov",void 0);let c=t?.list?.manifest?.id;me()!==c&&_e(c);let S={},D=[];var k={};if(m()){if(k=await ut(t?.list?.search,c,t?.list?.agency?.id,t?.list?.isSSG,t?.list?.billedby?.id,t?.list?.status,t?.list?.estate,t?.list?.city),d("resume",S?.sumary),B(0),X())E(k).map(A=>{let l=k[A];l?.bagnumber||D.push(l)});else if(V()){let A=await dt(c),l={};E(A).map(g=>{A[g].hbls.map(v=>{l[v.hbl]=g})}),E(k).map(g=>{let u=k[g];l[g]||D.push(u)}),console.log("response",E(k)?.length),console.log("hblsN",E(l)?.length),console.log("ff",D?.length)}else E(k).map(A=>{let l=k[A];D.push(l)});y("result",D),t?.list?.search?.length>2?se(D):se([])}return re(!1),1});const $e=h=>{a("list",{manifest:h,status:void 0}),ce(h.id),r(O())},xe=()=>{pt(o?.result,t?.list?.manifest?.id)},ke=(h,c)=>{F("estate",h),F("city",c)},Ae=(h,c)=>{a("list",{estate:void 0,city:void 0}),M(O())},Se=h=>{let c={},S=O();c.id=S,c.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},c.content=s(ot,{get list(){return o?.result},modalId:S}),le(c)},Ce=h=>{let c={},S=O();c.id=S,c.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},c.content=s(nt,{get list(){return o?.result},modalId:S}),le(c)},we=async h=>{await gt(t?.list?.manifest?.id)};Be(()=>{ce(void 0),qe()});const De=async(h,c,S)=>{y("result",D=>D.ssg_track_key===h,c,S)};return(()=>{var h=We(),c=h.firstChild,S=c.firstChild;S.nextSibling;var D=c.nextSibling,k=D.nextSibling,A=k.nextSibling;return n(c,s(f,{get when(){return U()},get children(){var l=Fe(),g=l.firstChild,u=g.firstChild;return n(g,s(Y,{get initValue(){return m()},updChange:ve,color:"var(--background-red-ssg)"}),u),n(l,s(f,{get when(){return U()},get children(){return[(()=>{var v=Ve(),L=v.firstChild;return n(v,s(Y,{get initValue(){return X()},updChange:fe,color:"var(--background-red-ssg)"}),L),v})(),(()=>{var v=je(),L=v.firstChild;return n(v,s(Y,{get initValue(){return V()},updChange:j,color:"var(--background-red-ssg)"}),L),v})()]}}),null),l}}),null),n(k,s(f,{get when(){return U()},get children(){var l=ne();return n(l,s(oe,{get list(){return ye()},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:g=>$e(g),width:"260px"})),l}}),null),n(k,s(f,{get when(){return ee()||t?.list?.manifest?.id&&m()},get children(){return[(()=>{var l=ne();return n(l,s(at,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>F("search",g)})),l})(),de()]}}),null),n(A,s(f,{get when(){return Le(()=>!!((ee()||t?.list?.manifest?.id)&&m()))()&&ae()},get children(){var l=Qe(),g=l.firstChild,u=g.firstChild;return n(u,s(oe,{get list(){return I("M023009")?.agencies},lbl_empty:"Agencia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.list?.agency?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:v=>F("agency",v),width:"260px"})),T(()=>K(l,`client_item_box gWXAaj jlytmu ${W()?"isMobile":""}`)),l}}),null),n(A,s(f,{get when(){return m()},get children(){var l=He(),g=l.firstChild;return n(g,s(f,{get when(){return ae()},get children(){return[s(f,{get when(){return!pe()},get fallback(){return(()=>{var u=Xe(),v=u.firstChild;return n(u,s(J,{stroke:"rgb(200 25 60 / 1)",size:32}),v),u})()},get children(){var u=z();return u.$$click=Se,n(u,s(P,{name:"receipt",size:24})),u}}),(()=>{var u=z();return u.$$click=we,n(u,s(P,{name:"graph_sprite",size:24})),u})(),(()=>{var u=z();return u.$$click=xe,n(u,s(P,{name:"outline_renew",size:24})),u})(),s(f,{get when(){return Pe()},get children(){var u=z();return u.$$click=Ce,n(u,s(P,{name:"receipt",size:24})),u}})]}}),null),n(g,()=>o?.result?.length,null),l}}),null),n(A,s(f,{get when(){return p?.prov},get children(){var l=ze(),g=l.firstChild,u=g.firstChild,v=g.nextSibling;return n(u,s(f,{get when(){return p?.prov},get children(){return s(Z,{get each(){return E(p?.prov)},children:(L,$t)=>s(ht,{ism:L,get item(){return p?.prov?.[L]},updS:ke})})}})),v.$$click=Ae,n(v,s(P,{name:"Xclose",size:22})),T(()=>K(l,`client_item_box gWXAaj jlytmu ${W()?"isMobile":""}`)),l}}),null),n(A,s(Re,{fallback:l=>(()=>{var g=Ue(),u=g.firstChild,v=u.nextSibling;return v.nextSibling,n(g,()=>l.toString(),v),g})(),get children(){return s(ue,{get fallback(){return(()=>{var l=Ye();return l.firstChild,n(l,s(J,{stroke:"rgb(200 25 60 / 1)",size:62}),null),l})()},get children(){return s(f,{get when(){return o?.result?.length},get children(){return s(Z,{get each(){return o?.result?.slice(0,N())},children:(l,g)=>s(lt,{item:l,refresh:()=>M(O()),updItm:De})})}})}})}}),null),T(l=>Ie(A,` ${W()?"":"width:94vw;"} margin: 0 auto;`,l)),h})()}const Bt=e=>{const[r,t]=b(!1),[a,i]=b(0),d=()=>{let o=e?.keyG;e?.keyG==="total"&&(o=null),e?.updForm("status",o)},p=()=>{r()||!W()&&e?.keyG!=="total"&&(i(I("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),t(!0))},$=()=>{i("0px"),r()&&t(!1)};return s(f,{get when(){return e?.amount>0},get children(){return s(ue,{get fallback(){return(()=>{var o=et();return o.firstChild,n(o,s(J,{stroke:"rgb(200 25 60 / 1)",size:32}),null),o})()},get children(){var o=Je(),y=o.firstChild,m=y.nextSibling;return o.$$mouseout=$,o.$$mousemove=p,o.$$click=d,n(o,s(f,{get when(){return r()},get children(){var x=Ke(),N=x.firstChild,B=N.firstChild,V=B.firstChild;return n(V,()=>I("M023009")?.statusObjDesc?.[e?.keyG]),T(j=>(j=a())!=null?N.style.setProperty("width",j):N.style.removeProperty("width")),x}}),y),n(y,s(P,{get name(){return I("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(o,s(f,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var x=Ze(),N=x.firstChild,B=N.nextSibling;return B.nextSibling,n(x,()=>e?.total(),B),x}}),m),n(m,()=>e?.amount),T(()=>K(o,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),o}})}})},ut=async(e,r,t,a,i,d,p,$)=>{let o={params:{idairguide:r}};if(e&&e.split(" ").map((m,x)=>{m&&(o.params[":search"+x]=m.trim())}),!ee()&&r&&(o.params.guia=r+""),p&&(o.params[":estate"]=p),$&&(o.params[":city"]=$),ie?.roles?.agency?o.params[":agency"]=ie?.roles?.agency+"":t&&(o.params[":agency"]=t),o={...o,...{query:"getScanYabaHbls",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city AND guia = guia"}},r&&Object.keys(o.params)?.length>=1){const m=await q(o);return m?.data?.error?{}:m}return{}},dt=async(e,r,t)=>{let a={params:{idairguide:e}},i=G(802001);a={...a,...i};const d=await q(a);return d?.error?{}:d},gt=async e=>{let r={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},t=G(802001);r={...r,...t};const a=await q(r);return a?.error?{}:a},Lt=async e=>{e.map(r=>{let t={params:{id:r?.ssg_track_key,idairguide:r?.guia}},a=G(802002);t={...t,...a}})},Pt=async e=>{let r=[];e.map(t=>{let a={params:{ssg_track_key:t?.ssg_track_key,idairguide:t?.guia}},i=G(809005);a={...a,...i},r.push(a)}),te(r,ge)},Rt=async(e,r)=>{let t=[];e.map(a=>{let i={params:{ssg_track_key:a?.ssg_track_key,idairguide:a?.guia},data2update:{currentStatus:r}},d=G(802004);i={...i,...d},t.push(i)}),te(t,ge)},ge=async e=>{const t=await q(e);if(t)return t},ht=e=>(()=>{var r=de();return n(r,s(f,{get when(){return e?.item?.total>0},get children(){var t=tt(),a=t.firstChild,i=a.firstChild,d=i.firstChild,p=i.nextSibling;return a.$$click=()=>e?.updS(e?.ism),n(i,()=>e?.ism,d),n(p,()=>e?.item?.total),t}}),null),n(r,s(it,{get children(){var t=rt();return n(t,s(f,{get when(){return e?.item?.cities},get children(){return s(Z,{get each(){return E(e?.item?.cities)},children:(a,i)=>(()=>{var d=st(),p=d.firstChild,$=p.nextSibling;return d.$$click=()=>e?.updS(e?.ism,a),n(p,a),n($,()=>e?.item?.cities?.[a]),d})()})}})),t}}),null),r})(),mt=e=>{let r=e?.toUpperCase(),t=r?.split(","),a=t[t.length-2].trim(),i=r?.split(", "+a)?.[0],d={},p=["CALLE","#","RPTO.","REPARTO","E/","APTO","APT"];i.indexOf("REPARTO")===0?i="CALLE"+i.slice(7,i.length-1):i.indexOf("CALLE")!==0&&(i="CALLE "+i),i=i.split("  ").join(" "),i.indexOf("APTO")>=0&&(i=i.split("APTO").join("APT")),p.map(y=>{let m=i?.indexOf(y);m>=0&&(d[m]=y)});let $={estate:t[t.length-1].trim(),city:a},o={CALLE:"streetName","#":"streetNo","RPTO.":"Rpto",REPARTO:"Rpto","E/":"betwen",APT:"apt"};return Object.keys(d).map((y,m)=>{let x=y*1,N=Object.keys(d)[m+1]*1||i.length;$[o[d[y]]]=i?.slice(x,N)?.split(d[y])?.join("")?.trim()}),$},_t=async e=>{let t=await q({query:"getScanConsigneeYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND date > :date1 AND date < :date2",params:{":search0":e}}),a=E(t)?.[0];return t[a]};let R={};const pt=async(e,r)=>{let t=[];await te(e,vt);let a=0,i=R;return Object.keys(R).map(d=>{let p=i[d]?.bagnumber||!i[d]?.bagnumber&&i[d]?.hbls?.length===1;if(p=1,p){let $={query:"addLogisticYabaExpress",form:i[d],params:{idairguide:i[d]?.guia}};a+=1,t.push($)}}),console.log(" ==> ",a*1),console.log(t),t},vt=async e=>{if(e?.idairnumber){let r=btoa(e?.agency+"_"+e?.idairnumber+"_"+e?.cidentity+"_"+e?.bagnumber);if(r&&!R[r]){let t=await ft(e);t.agency=e?.agency+"",t.ssg_track_key=r,t.hbls=[],R[r]=t}if(r){let t={idreserve:e?.idreserve,hbl:e?.hbl,quantity:e?.quantity,weight:e?.weight,namegood:e?.namegood},a=R[r];a.hbls.push(t),R[r]=a}}return 1},ft=async e=>{let r={};r.guia=ct(),r.idairguide=e?.idairguide,r.datereserve=e?.datereserve,r.currentStatus="YABA_09",r.cidentity=e?.cidentity,r.street=e?.street,r.ctelephone=e?.ctelephone,r.nameshipper=e?.nameshipper,r.bagnumber=e?.bagnumber;let t=await _t(e?.cidentity);t&&(r.consigneeName=H(t?.firstName)+H(t?.middleName)+H(t?.lastName)+H(t?.lastName2));let a=mt(e?.street);return r.address=a,r};Me(["click","mousemove","mouseout"]);export{Bt as StatusGroupItem,Ot as default,Pt as deleteManifest,ge as fetchCSVInve,mt as getAddressPSS,Lt as loadManifest,Rt as updateManifest};
