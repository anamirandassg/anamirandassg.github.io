const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-D-CVGjt1.js","assets/index-8-XoMm4f.js","assets/index-lCkr9jrN.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-DPHbXl-D.js","assets/debounces-Cj2FIoKc.js","assets/SVG-MWXDsfjm.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-DtYN0wvr.js","assets/ButonUploadHrm-CUv0g-4W.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-IwVboU1f.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-CokapjAB.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as E,_ as O,u as ve,c as H,a as P,r as he,k as ge,s as me,i as e,d as r,S as C,e as ee,A as te,f as xe,m as fe,af as $e,o as K,F as re,O as le,y as ye,n as oe,p as Q,q as Y,I as Ce,h as Se,t as d,j as V}from"./index-8-XoMm4f.js";import{u as Be}from"./debounces-Cj2FIoKc.js";import"./ButonHrm-DELYKka-.js";import{c as we,i as ke,g as Ie,a as Pe,b as Ee,u as Oe}from"./handelImagesServices-Bu8PX2ua.js";import{LookupInventory as Ae}from"./DashInventory-D7-adRKh.js";/* empty css                 */import"./SVG-MWXDsfjm.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-DBDxQTtL.js";var je=d('<div class="icon_status centerBx">'),De=d("<div style=width:300px;max-height:300px;position:relative;><img alt=sf><div>"),Fe=d("<div style=width:300px;position:relative;><img alt=sf>"),qe=d('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Le=d('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px>'),Me=d("<div class=hseparator>"),Ve=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Te=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Re=d('<div class="bottombx centerBx unit"style=padding:30px>'),Ue=d('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),We=d('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><h4>Factura</h4></div><div class="tr_bar_40 "><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),Qe=d("<div> "),Ye=d("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),ze=d('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ne=d('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),ie=d("<div style=margin:8px>"),Ge=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),He=d("<div class=unitBx><h5>"),Ke=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const se=E(()=>O(()=>import("./LoadingColorSpinner-D-CVGjt1.js"),__vite__mapDeps([0,1,2,3]))),Je=E(()=>O(()=>import("./DropDwnSearch-DPHbXl-D.js"),__vite__mapDeps([4,1,2,5,6,7]))),Xe=E(()=>O(()=>import("./FlexSpace-DtYN0wvr.js"),__vite__mapDeps([8,1,2]))),Ze=E(()=>O(()=>import("./ButonUploadHrm-CUv0g-4W.js"),__vite__mapDeps([9,1,2,6,10]))),et=E(()=>O(()=>import("./CheckBoxSlide-IwVboU1f.js"),__vite__mapDeps([11,1,2,12]))),tt=E(()=>O(()=>import("./InputHr-CokapjAB.js"),__vite__mapDeps([13,1,2,14]))),ae=E(()=>O(()=>import("./SVG-MWXDsfjm.js"),__vite__mapDeps([6,1,2])));function mt(a){const[l,n]=ve(),[t,v]=H({search:""});H(),H();const[h,z]=P(null),[A,F]=P(!1),[q,S]=P(!1),[T,ce]=P(""),[nt,de]=P("");Be(de,400),he(()=>{}),ge(()=>{});const J=async()=>{if(l?.mId){let s={id:l?.mId,businessId:oe?.profile?.businessYId},_=await st(s),x=await Ae(l?.mId),w=0,f=0,i=[],o={};le(x)?.map(p=>{let c=x[p]?.store;x[p]?.products?.map(g=>{if(l?.mId===g?.product?.id){let m={...x[p]};delete m.products,m.qty=g?.qty*1,m.price=g?.price*1,w+=g?.price*1*g?.qty*1,o[c]||(o[c]={total:0}),o[c].total+=m.qty,f+=g?.qty*1,i.push(m)}})});const b=w/f;ce(Ie()+Pe()+"/"+_?.productImageUrl),v("stockList",i),v("stock",{Balance:w,Total:f,priceCost:b,stockByStore:o}),v("productObj",_)}};me(async()=>{J()});const N=async s=>{await lt(l?.mId,s),J()},X=async(s,_)=>{let x=await Ee(s.type,_,1);if(await Oe(x,s)){let f={...t?.productObj?.thumbnails};f[_]=1,await N({productImageUrl:_,thumbnails:f}),S(!1),F(!1)}else S(!1)},ue=async()=>{if(S(!0),h()?.name.split(".").pop()==="webp"){let s=t?.productObj?.code+"/"+V()+V()+".webp";X(h()?.file,s)}else{let s=await we(h()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),_=await ke(s),w=await(await fetch(_)).blob(),f=t?.productObj?.code+"/"+V()+V()+".webp";X(w,f)}},_e=s=>{z(s),F(!0)},pe=s=>{N({isPublic:s?"9":null})},B=async(s,_)=>{N({[s]:_})},be=async(s,_)=>{it(t?.productObj,s)};return(()=>{var s=We(),_=s.firstChild,x=_.firstChild,w=x.nextSibling,f=w.nextSibling;return f.nextSibling,e(s,r(C,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var i=Qe();return i.firstChild,e(i,r(se,{stroke:"rgb(200 25 60 / 1)",size:62}),null),i})()},get children(){var i=Le(),o=i.firstChild,b=o.firstChild,p=b.firstChild,c=p.nextSibling,g=c.firstChild,m=c.nextSibling,L=o.nextSibling,G=L.nextSibling,M=G.firstChild,$=M.nextSibling,I=$.nextSibling,R=I.nextSibling;return e(o,r(C,{get when(){return h()?.source},get children(){var y=De(),k=y.firstChild,j=k.nextSibling;return e(j,r(C,{get when(){return!q()},get fallback(){return(()=>{var u=Ye(),U=u.firstChild;return e(u,r(se,{stroke:"rgb(200 25 60 / 1)",size:32}),U),u})()},get children(){var u=je();return u.$$click=ue,e(u,r(ae,{name:"arrow_up_large",size:24})),u}})),ee(u=>{var U=h()?.source,Z=q()?"floatBtn loading":"floatBtn ";return U!==u.e&&te(k,"src",u.e=U),Z!==u.t&&xe(j,u.t=Z),u},{e:void 0,t:void 0}),y}}),b),e(o,r(C,{get when(){return fe(()=>!!T())()&&!h()?.source},get children(){var y=Fe(),k=y.firstChild;return ee(()=>te(k,"src",T())),y}}),b),e(p,()=>t?.productObj?.name),e(c,r(et,{get initValue(){return t?.productObj?.isPublic},updChange:pe,color:"var(--background-red-ssg)"}),g),e(m,r(Ze,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:_e})),e(b,r(C,{get when(){return $e()},get children(){var y=qe(),k=y.firstChild,j=k.nextSibling;return e(j,r(Je,{get list(){return K("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:u=>be(u.id),width:"260px"})),y}}),null),e(M,r(D,{get value(){return t?.productObj?.name},label:"Nombre:",key:"name",updItem:B})),e($,r(ne,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:B}),null),e($,r(W,{}),null),e($,r(ne,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:B}),null),e($,r(W,{}),null),e($,r(D,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:B}),null),e($,r(W,{}),null),e($,r(D,{get value(){return t?.productObj?.model},label:"Modelo:",key:"model",updItem:B}),null),e(I,r(D,{get value(){return t?.productObj?.ASIN},label:"ASIN:",key:"ASIN",updItem:B}),null),e(I,r(W,{}),null),e(I,r(D,{get value(){return t?.productObj?.UPC},label:"UPC:",key:"UPC",updItem:B}),null),e(R,r(D,{get value(){return t?.productObj?.description},label:"Description:",key:"description",updItem:B})),i}}),_),e(_,r(C,{get when(){return t?.stockList},get children(){return[Me(),(()=>{var i=Re();return e(i,r(C,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Ve(),b=o.firstChild,p=b.nextSibling,c=p.firstChild;return e(c,()=>(t?.stock?.Total*1).toFixed(2)),o})(),r(Xe,{}),(()=>{var o=Te(),b=o.firstChild,p=b.nextSibling,c=p.firstChild;return c.firstChild,e(c,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),i})(),(()=>{var i=Ue();return i.firstChild,e(i,r(re,{get each(){return le(t?.stock?.stockByStore)},children:(o,b)=>(()=>{var p=ze(),c=p.firstChild,g=c.firstChild,m=c.nextSibling,L=m.firstChild;return e(c,()=>K("storeGroupBy")?.[o]?.label,g),e(L,()=>(t?.stock?.stockByStore?.[o]?.total*1).toFixed(2)),p})()}),null),i})()]}}),x),e(_,r(re,{get each(){return t?.stockList},children:(i,o)=>(()=>{var b=Ne(),p=b.firstChild,c=p.nextSibling,g=c.firstChild,m=c.nextSibling,L=m.firstChild,G=L.firstChild,M=m.nextSibling,$=M.firstChild,I=M.nextSibling,R=I.firstChild,y=R.firstChild,k=I.nextSibling,j=k.firstChild,u=j.firstChild;return u.firstChild,e(p,r(ae,{get name(){return rt[i?.type]},size:24,color:"var(--background-red-ssg)"})),e(g,()=>ye(i?.createDate)),e(G,()=>(i?.qty*1).toFixed(2)),e($,()=>i?.invoice),e(R,()=>K("storeGroupBy")?.[i?.store]?.label,y),e(u,()=>(i?.price*1).toFixed(2),null),b})()}),null),s})()}let rt={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const W=()=>[ie(),"|",ie()],D=a=>{const[l,n]=P(!1),[t,v]=P(""),h=()=>{a?.updItem(a?.key,t()),n(!1)},z=()=>{let A=l();A||v(a?.value),n(!A)};return(()=>{var A=Ge(),F=A.firstChild,q=F.firstChild;return q.$$click=z,e(q,()=>a?.label),e(F,r(C,{get when(){return l()},get fallback(){return r(C,{get when(){return a?.value},get children(){var S=He(),T=S.firstChild;return e(T,()=>a?.value),S}})},get children(){return r(tt,{width:"160px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:S=>v(S),onEnter:h})}}),null),A})()},ne=a=>r(C,{get when(){return a?.value},get children(){var l=Ke(),n=l.firstChild,t=n.firstChild,v=t.nextSibling,h=v.firstChild;return e(t,()=>a?.label),e(h,()=>a?.value),l}}),lt=async(a,l)=>{let n={params:{id:a,businessId:oe?.profile?.businessYId},form:l},t=Q(129004);return n={...n,...t},await Y(n)},it=async(a,l)=>{let n={...a};n.ssg_product_key=V(),n.businessId=l;let t={params:{businessId:l},form:n},v=Q(129003);t={...t,...v};{const h=await Y(t);return h?.data?.error?{}:h?.data}},st=async a=>{let l={params:a},n=Q(122002);return l={...l,...n},await Y(l)},xt=async a=>{let l=[];a.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},v=Q(802002);t={...t,...v},l.push(t)}),Ce(l,at)},at=async a=>{const n=await Y(a);if(n)return n};Se(["click"]);export{mt as default,at as fetchCSVInve,xt as loadProduct,lt as updProducts};
