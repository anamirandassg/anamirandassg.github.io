const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CJi8GQBZ.js","assets/index-DGhRo2wx.js","assets/index-B8bAFC38.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-DEduB76I.js","assets/InputHr-BXFw4d2l.css","assets/SVG-DVps49vj.js","assets/DropDwnSearch-DVmunKhK.js","assets/debounces-6tkccrpv.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-DpZrJ4aL.js","assets/ContainerElasticView-LzOd6fDI.css","assets/CheckBoxSlide-B8gSVpTj.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnHBLReserve-DewifNYa.js","assets/DialogHRM-CBVy-hxZ.js","assets/DialogHRM-V9_lZntj.css","assets/fontkit.es-BEIeAbiX.js","assets/qrcode-DHy8FFhS.js","assets/Toast-BUTkYa29.js","assets/Toast-DLpFKn-Q.css","assets/ItemOptions-DjuPvcUU.js","assets/ShowQRPrintLabel-snXSHcrb.js","assets/InitPrintServices-rVU_HscE.js","assets/DashInventory-Ce8f4pjz.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/Reports-Br3_FhhJ.js","assets/ScanningServices-CP1jrtKs.js","assets/parseUpsSta-DHqftqGt.js","assets/ShowPdfResume-CPIZJpdJ.js","assets/AddOrLinkToManifest-DENq3Zd3.js","assets/DashManifest-ChRX--RE.js","assets/ShowUpdStatus-DslJZ_Ai.js","assets/ShowPdfReceipt-ExakTL5V.js","assets/FlexSpace-Dtv8S3Vs.js"])))=>i.map(i=>d[i]);
import{l as S,_ as w,a as f,c as Q,o as Ne,b as Be,D as Oe,d as Le,i,e as a,Y as K,S as b,E as Pe,N as le,h as I,p as G,y as Z,v as X,Z as Re,F as J,O as E,R as de,q as O,Q as Ie,s as Me,k as V,U as q,m as M,A as Te,t as _,$ as z,W as ie,X as Ge}from"./index-DGhRo2wx.js";import{u as qe}from"./debounces-6tkccrpv.js";import"./fontkit.es-BEIeAbiX.js";import"./qrcode-DHy8FFhS.js";import"./Toast-BUTkYa29.js";import{OpenModal as ne}from"./DialogHRM-CBVy-hxZ.js";import{l as Ve}from"./ScanningServices-CP1jrtKs.js";import"./App.module-CbHnVtRQ.js";var He=_('<div class="centerBx bottombx "><h5 class="">No Bag'),je=_('<div class="centerBx bottombx "><h5 class="">Duplicate HBL'),Fe=_('<div class="centerBx bottombx "><h5 class="">upd Hbls'),Qe=_('<div><div class="centerBx bottombx "><h5 class="">Mostrar Hbls'),oe=_("<div style=padding:4px>"),ge=_("<div>"),ze=_('<div><div class="_dsplFlx flxWrp spaceAround "><div style=padding:4px>'),W=_('<div class="icon_status centerBx">'),We=_('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),Ue=_('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Xe=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>HBL Reservas</h2><div class="centerBx bottombx"style=margin-top:10px;></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div>'),Ye=_("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ke=_("<div> <!>."),Ze=_("<div> "),Je=_("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),et=_("<h5 class=totalBagsNo> <!> / "),tt=_('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),rt=_("<div class=leftMrg> "),st=_('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),at=_("<div style=padding:16px;margin-left:20px;>"),lt=_('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const ee=S(()=>w(()=>import("./LoadingColorSpinner-CJi8GQBZ.js"),__vite__mapDeps([0,1,2,3]))),it=S(()=>w(()=>import("./InputHr-DEduB76I.js"),__vite__mapDeps([4,1,2,5]))),P=S(()=>w(()=>import("./SVG-DVps49vj.js"),__vite__mapDeps([6,1,2]))),ce=S(()=>w(()=>import("./DropDwnSearch-DVmunKhK.js"),__vite__mapDeps([7,1,2,8,6,9]))),nt=S(()=>w(()=>import("./ContainerElasticView-DpZrJ4aL.js"),__vite__mapDeps([10,1,2,6,11]))),U=S(()=>w(()=>import("./CheckBoxSlide-B8gSVpTj.js"),__vite__mapDeps([12,1,2,13]))),ot=S(()=>w(()=>import("./ItemOnHBLReserve-DewifNYa.js"),__vite__mapDeps([14,1,2,15,16,10,6,11,17,18,19,20,21,22,23,24,25,26,27,8,28,29])));S(()=>w(()=>import("./ShowPdfResume-CPIZJpdJ.js"),__vite__mapDeps([30,1,2,22,17,18,23,19,20])));S(()=>w(()=>import("./AddOrLinkToManifest-DENq3Zd3.js"),__vite__mapDeps([31,1,2,22,17,18,23,19,20,15,16,32,25,26,28])));const ct=S(()=>w(()=>import("./ShowUpdStatus-DslJZ_Ai.js"),__vite__mapDeps([33,1,2,22,17,18,23,19,20,28,25,26,29]))),ut=S(()=>w(()=>import("./ShowPdfReceipt-ExakTL5V.js"),__vite__mapDeps([34,1,2,22,17,18,23,19,20,35]))),[dt,ue]=f(),[te,Pt]=f(!1),[he,gt]=f(!1);function Rt(){const[e,r]=f(""),[t,s]=Q({list:{manifest:{id:"",label:""},search:"",status:""}}),[l,d]=Q({resume:{}}),[v,$]=Q({}),[o,y]=Q({}),[p,x]=f(!1),[N,L]=f(64);f(!1),f(!1);const[H,j]=f(!1),[Y,me]=f(!1),[_e,pe]=f(""),T=qe(r,500);f(!1),f(!1);const[ve,kt]=f(!1),[At,se]=f(!1),F=(h,c)=>{s("list",{[h]:c}),T(O())},fe=()=>{x(!p()),T(O())},be=()=>{me(!Y()),T(O())};Ne(()=>{}),Be(()=>{});const ye=()=>{L(h=>h+64)},ae=h=>{let c=Math.ceil(h?.length/64);Ge(ye,1250,c)},$e=()=>{let h=[];return I("M023009")?.manifestList&&E(I("M023009")?.manifestList).map(c=>{h.push({label:c,id:c})}),h};Oe(e,async h=>{d("resume",void 0),se(!0),$("prov",void 0);let c=t?.list?.manifest?.id;_e()!==c&&pe(c);let C={},D=[];var k={};if(p()){if(k=await ht(t?.list?.search,c,t?.list?.agency?.id,t?.list?.isSSG,t?.list?.billedby?.id,t?.list?.status,t?.list?.estate,t?.list?.city),d("resume",C?.sumary),L(0),Y())E(k).map(A=>{let n=k[A];n?.bagnumber||D.push(n)});else if(H()){let A=await mt(c),n={};E(A).map(g=>{A[g].hbls.map(m=>{n[m.hbl]=g})}),E(k).map(g=>{let u=k[g];n[g]||D.push(u)}),console.log("response",E(k)?.length),console.log("hblsN",E(n)?.length),console.log("ff",D?.length)}else E(k).map(A=>{let n=k[A];D.push(n)});y("result",D),t?.list?.search?.length>2?ae(D):ae([])}return se(!1),1});const xe=h=>{s("list",{manifest:h,status:void 0}),ue(h.id),r(O())},ke=()=>{bt(o?.result,t?.list?.manifest?.id)},Ae=(h,c)=>{F("estate",h),F("city",c)},Ce=(h,c)=>{s("list",{estate:void 0,city:void 0}),T(O())},Se=h=>{let c={},C=O();c.id=C,c.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},c.content=a(ut,{get list(){return o?.result},modalId:C}),ne(c)},we=h=>{let c={},C=O();c.id=C,c.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},c.content=a(ct,{get list(){return o?.result},modalId:C}),ne(c)},De=async h=>{await _t(t?.list?.manifest?.id)};Le(()=>{ue(void 0),Ve()});const Ee=async(h,c,C)=>{y("result",D=>D.ssg_track_key===h,c,C)};return(()=>{var h=Xe(),c=h.firstChild,C=c.firstChild;C.nextSibling;var D=c.nextSibling,k=D.nextSibling,A=k.nextSibling;return i(c,a(b,{get when(){return K()},get children(){var n=Qe(),g=n.firstChild,u=g.firstChild;return i(g,a(U,{get initValue(){return p()},updChange:fe,color:"var(--background-red-ssg)"}),u),i(n,a(b,{get when(){return K()},get children(){return[(()=>{var m=He(),B=m.firstChild;return i(m,a(U,{get initValue(){return Y()},updChange:be,color:"var(--background-red-ssg)"}),B),m})(),(()=>{var m=je(),B=m.firstChild;return i(m,a(U,{get initValue(){return H()},updChange:j,color:"var(--background-red-ssg)"}),B),m})(),(()=>{var m=Fe(),B=m.firstChild;return i(m,a(U,{get initValue(){return he()},updChange:gt,color:"var(--background-red-ssg)"}),B),m})()]}}),null),n}}),null),i(k,a(b,{get when(){return K()},get children(){var n=oe();return i(n,a(ce,{get list(){return $e()},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:g=>xe(g),width:"260px"})),n}}),null),i(k,a(b,{get when(){return te()||t?.list?.manifest?.id&&p()},get children(){return[(()=>{var n=oe();return i(n,a(it,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:g=>F("search",g)})),n})(),ge()]}}),null),i(A,a(b,{get when(){return Pe(()=>!!((te()||t?.list?.manifest?.id)&&p()))()&&le()},get children(){var n=ze(),g=n.firstChild,u=g.firstChild;return i(u,a(ce,{get list(){return I("M023009")?.agencies},lbl_empty:"Agencia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.list?.agency?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:m=>F("agency",m),width:"260px"})),G(()=>Z(n,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),n}}),null),i(A,a(b,{get when(){return p()},get children(){var n=We(),g=n.firstChild;return i(g,a(b,{get when(){return le()},get children(){return[a(b,{get when(){return!ve()},get fallback(){return(()=>{var u=Ye(),m=u.firstChild;return i(u,a(ee,{stroke:"rgb(200 25 60 / 1)",size:32}),m),u})()},get children(){var u=W();return u.$$click=Se,i(u,a(P,{name:"receipt",size:24})),u}}),(()=>{var u=W();return u.$$click=De,i(u,a(P,{name:"graph_sprite",size:24})),u})(),(()=>{var u=W();return u.$$click=ke,i(u,a(P,{name:"outline_renew",size:24})),u})(),a(b,{get when(){return Re()},get children(){var u=W();return u.$$click=we,i(u,a(P,{name:"receipt",size:24})),u}})]}}),null),i(g,()=>o?.result?.length,null),n}}),null),i(A,a(b,{get when(){return v?.prov},get children(){var n=Ue(),g=n.firstChild,u=g.firstChild,m=g.nextSibling;return i(u,a(b,{get when(){return v?.prov},get children(){return a(J,{get each(){return E(v?.prov)},children:(B,Ct)=>a(pt,{ism:B,get item(){return v?.prov?.[B]},updS:Ae})})}})),m.$$click=Ce,i(m,a(P,{name:"Xclose",size:22})),G(()=>Z(n,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),n}}),null),i(A,a(Ie,{fallback:n=>(()=>{var g=Ke(),u=g.firstChild,m=u.nextSibling;return m.nextSibling,i(g,()=>n.toString(),m),g})(),get children(){return a(de,{get fallback(){return(()=>{var n=Ze();return n.firstChild,i(n,a(ee,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return a(b,{get when(){return o?.result?.length},get children(){return a(J,{get each(){return o?.result?.slice(0,N())},children:(n,g)=>a(ot,{item:n,refresh:()=>T(O()),updItm:Ee})})}})}})}}),null),G(n=>Me(A,` ${X()?"":"width:94vw;"} margin: 0 auto;`,n)),h})()}const It=e=>{const[r,t]=f(!1),[s,l]=f(0),d=()=>{let o=e?.keyG;e?.keyG==="total"&&(o=null),e?.updForm("status",o)},v=()=>{r()||!X()&&e?.keyG!=="total"&&(l(I("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),t(!0))},$=()=>{l("0px"),r()&&t(!1)};return a(b,{get when(){return e?.amount>0},get children(){return a(de,{get fallback(){return(()=>{var o=rt();return o.firstChild,i(o,a(ee,{stroke:"rgb(200 25 60 / 1)",size:32}),null),o})()},get children(){var o=tt(),y=o.firstChild,p=y.nextSibling;return o.$$mouseout=$,o.$$mousemove=v,o.$$click=d,i(o,a(b,{get when(){return r()},get children(){var x=Je(),N=x.firstChild,L=N.firstChild,H=L.firstChild;return i(H,()=>I("M023009")?.statusObjDesc?.[e?.keyG]),G(j=>(j=s())!=null?N.style.setProperty("width",j):N.style.removeProperty("width")),x}}),y),i(y,a(P,{get name(){return I("M023009")?.statusListIcons?.[e?.keyG]},size:22})),i(o,a(b,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var x=et(),N=x.firstChild,L=N.nextSibling;return L.nextSibling,i(x,()=>e?.total(),L),x}}),p),i(p,()=>e?.amount),G(()=>Z(o,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),o}})}})},ht=async(e,r,t,s,l,d,v,$)=>{let o={params:{idairguide:r}};if(e&&e.split(" ").map((p,x)=>{p&&(o.params[":search"+x]=p.trim())}),!te()&&r&&(o.params.guia=r+""),v&&(o.params[":estate"]=v),$&&(o.params[":city"]=$),ie?.roles?.agency?o.params[":agency"]=ie?.roles?.agency+"":t&&(o.params[":agency"]=t),o={...o,...{query:"getScanYabaHbls",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city AND guia = guia"}},r&&Object.keys(o.params)?.length>=1){const p=await M(o);return p?.data?.error?{}:p}return{}},mt=async(e,r,t)=>{let s={params:{idairguide:e}},l=V(802001);s={...s,...l};const d=await M(s);return d?.error?{}:d},_t=async e=>{let r={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},t=V(802001);r={...r,...t};const s=await M(r);return s?.error?{}:s},Mt=async e=>{let r=[];e.map(t=>{let s={params:{id:t?.ssg_track_key,idairguide:t?.guia}},l=V(802002);s={...s,...l},r.push(s)}),q(r,re)},Tt=async e=>{let r=[];e.map(t=>{let s={params:{ssg_track_key:t?.ssg_track_key,idairguide:t?.guia}},l=V(809005);s={...s,...l},r.push(s)}),q(r,re)},Gt=async(e,r)=>{let t=[];e.map(s=>{let l={params:{ssg_track_key:s?.ssg_track_key,idairguide:s?.guia},data2update:{currentStatus:r}},d=V(802004);l={...l,...d},t.push(l)}),q(t,re)},re=async e=>{const t=await M(e);if(t)return t},pt=e=>(()=>{var r=ge();return i(r,a(b,{get when(){return e?.item?.total>0},get children(){var t=st(),s=t.firstChild,l=s.firstChild,d=l.firstChild,v=l.nextSibling;return s.$$click=()=>e?.updS(e?.ism),i(l,()=>e?.ism,d),i(v,()=>e?.item?.total),t}}),null),i(r,a(nt,{get children(){var t=at();return i(t,a(b,{get when(){return e?.item?.cities},get children(){return a(J,{get each(){return E(e?.item?.cities)},children:(s,l)=>(()=>{var d=lt(),v=d.firstChild,$=v.nextSibling;return d.$$click=()=>e?.updS(e?.ism,s),i(v,s),i($,()=>e?.item?.cities?.[s]),d})()})}})),t}}),null),r})(),vt=e=>{let r=e?.toUpperCase(),t=r?.split(","),s=t[t.length-2].trim(),l=r?.split(", "+s)?.[0],d={},v=["CALLE","#","RPTO.","REPARTO","E/","APTO","APT"];l.indexOf("REPARTO")===0?l="CALLE"+l.slice(7,l.length-1):l.indexOf("CALLE")!==0&&(l="CALLE "+l),l=l.split("  ").join(" "),l.indexOf("APTO")>=0&&(l=l.split("APTO").join("APT")),v.map(y=>{let p=l?.indexOf(y);p>=0&&(d[p]=y)});let $={estate:t[t.length-1].trim(),city:s},o={CALLE:"streetName","#":"streetNo","RPTO.":"Rpto",REPARTO:"Rpto","E/":"betwen",APT:"apt"};return Object.keys(d).map((y,p)=>{let x=y*1,N=Object.keys(d)[p+1]*1||l.length;$[o[d[y]]]=l?.slice(x,N)?.split(d[y])?.join("")?.trim()}),$},ft=async e=>{let t=await M({query:"getScanConsigneeYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND date > :date1 AND date < :date2",params:{":search0":e}}),s=E(t)?.[0];return t[s]};let R={};const bt=async(e,r)=>{let t=[];await q(e,yt);let s=0,l=R;return Object.keys(R).map(d=>{let v=l[d]?.bagnumber||!l[d]?.bagnumber&&l[d]?.hbls?.length===1;if(v=1,v){let $={query:"addLogisticYabaExpress",form:l[d],params:{idairguide:l[d]?.guia}};s+=1,t.push($)}}),console.log(" ==> ",s*1),he()&&(await q(t,xt),console.log(t)),t},yt=async e=>{if(e?.idairnumber){let r=btoa(e?.agency+"_"+e?.idairnumber+"_"+e?.cidentity+"_"+e?.bagnumber);if(r&&!R[r]){let t=await $t(e);t.agency=e?.agency+"",t.ssg_track_key=r,t.hbls=[],R[r]=t}if(r){let t={idreserve:e?.idreserve,hbl:e?.hbl,quantity:e?.quantity,weight:e?.weight,namegood:e?.namegood},s=R[r];s.hbls.push(t),R[r]=s}}return 1},$t=async e=>{let r={};r.guia=dt(),r.idairguide=e?.idairguide,r.datereserve=e?.datereserve,r.currentStatus="YABA_09",r.cidentity=e?.cidentity,r.street=e?.street,r.ctelephone=e?.ctelephone,r.nameshipper=e?.nameshipper,r.bagnumber=e?.bagnumber;let t=await ft(e?.cidentity);t&&(r.consigneeName=z(t?.firstName)+z(t?.middleName)+z(t?.lastName)+z(t?.lastName2));let s=vt(e?.street);return r.address=s,r},xt=async e=>{let r=await M(e);return console.log(e),console.log(r),r};Te(["click","mousemove","mouseout"]);export{It as StatusGroupItem,Rt as default,Tt as deleteManifest,re as fetchCSVInve,vt as getAddressPSS,Mt as loadManifest,Gt as updateManifest};
