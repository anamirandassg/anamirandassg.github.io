const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-87w8c03J.js","assets/index-9Aucx7lX.js","assets/index-DHvNTsK7.css","assets/InputHr-DPC1zQgQ.js","assets/InputHr-M3rJ9grQ.css"])))=>i.map(i=>d[i]);
import{l as P,_ as D,a as y,c as K,f as U,p as ee,q as te,b as re,i,d as c,k as A,s as se,S as z,B as ae,F as ne,a1 as ie,w as oe,m as G,A as M,E as le,e as ce,t as m,Q as V,y as de,g as _,H as ge,n as N}from"./index-9Aucx7lX.js";import{status as T,scannedQRs as ue}from"./Scanning-CKGVa0gy.js";import pe from"./FlexSpace-sLgx-Ydn.js";var be=m('<div class="errorBx _dsplFlx"><div class="icon_status centerBx"></div><p class=" centerBx">'),ye=m('<div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div class="icon_status centerBx"></div></div><div class=scrollH>'),fe=m("<div> <!>."),ve=m("<div> "),he=m('<div class=itm0hist><div><div class="centerBx bottombx"><div class="icon_status centerBx"></div><p></p></div><div class="centerBx bottombx"><h5></h5><div class=vertseparator></div><h4>');const _e=P(()=>D(()=>import("./LoadingColorSpinner-87w8c03J.js"),__vite__mapDeps([0,1,2]))),me=P(()=>D(()=>import("./InputHr-DPC1zQgQ.js"),__vite__mapDeps([3,1,2,4]))),B=P(()=>D(()=>import("./index-9Aucx7lX.js").then(d=>d.a7),__vite__mapDeps([1,2])));function we(d){const[g,I]=y([]),[F,u]=K({}),[R,k]=y(""),[Q,$e]=y(""),[C,W]=y(""),[Ie,L]=y(""),[E,q]=y("");U(()=>{}),ee(()=>{}),te(()=>{});const f=(s,n)=>{W(n),L(s),setTimeout(()=>{L("")},300)},v=s=>{q(s),setTimeout(()=>{q("")},3e3)},X=s=>{s||(s=R()),s=s.split("'").join("-"),k(""),E();let n={timeStamp:new Date().getTime(),latitude:V?.latitude,longitude:V?.longitude,statusId:T(),userId:de?.profile?.userId},t=s.split("/");s.split("-").length>3&&(t=s.split("-"));let e=t?.[0],p="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const r=new RegExp(p);let o=t.length>4&&e.length===12,l=e.length===13&&r.test(e),a={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};l&&(a={idairguide:"175-2383"+e.slice(3,7),":search0":e});let x="^[0-9]{4}-[1-9]{4}";const S=new RegExp(x);let b=e.length===9&&S.test(e);b&&(a={idairguide:"175-2383"+e.slice(0,4),":search0":e}),l||o||b?Y(a,n):(f("","error"),u({consigneeInfo:{ybestate:"Codigo Incorrecto"}}),v(_()))},Y=async(s,n)=>{let t=await xe(s),e=Object.keys(t)?.[0];if(t[e]?.idairguide){let p=t[e]?.statusHistory||[];p.push(n),s.ssg_track_key=e;let r=t[e]?.estate||t[e]?.consigneeInfo?.ybestate,o=t[e]?.city||t[e]?.consigneeInfo?.ybcity,l={estate:r,city:o,tracking:t[e]?.tracking,currentStatus:T(),timeStamp:new Date().getTime()};if(u(""),u(t[e]),v(_()),f("","success"),!ge?.roles?.[r])f("","warning"),u({consigneeInfo:{ybestate:"Zona incorrecta"}}),v(_());else if(t[e]?.currentStatus!==n.statusId){let a={statusHistory:p,currentStatus:n.statusId};await Se(s,a),I([...g(),l])}else f("","warning"),u({consigneeInfo:{ybcity:"Fue escaneado",ybestate:t[e]?.consigneeInfo?.ybestate}}),v(_())}else f("","error"),u({consigneeInfo:{ybestate:"Error con manifiesto"}}),v(_())};let w={error:{"--err-bx-color":"var(--background-red-ssg)","--err-bx-bgcolor":"var(--background-red35-ssg)",svg:"var(--err-bx-color)",icon:"alert"},success:{"--err-bx-color":"var(--hrm-palette-tertiary60)","--err-bx-bgcolor":"var(--hrm-palette-tertiary90)",svg:"var(--err-bx-color)",icon:"success"},warning:{"--err-bx-color":"#FF6F1D","--err-bx-bgcolor":"#ffdb99",svg:"var(--err-bx-color)",icon:"info"}};return re(Q,async s=>ue?.codes),(()=>{var s=ye(),n=s.firstChild,t=n.nextSibling,e=t.firstChild,p=t.nextSibling;return n.style.setProperty("padding","16px"),i(n,c(z,{get when(){return E()},get children(){var r=be(),o=r.firstChild,l=o.nextSibling;return i(o,c(B,{get name(){return w?.[C()]?.icon},size:32,get color(){return w?.[C()]?.svg}})),i(l,()=>F?.consigneeInfo?.ybestate),A(a=>se(r,w?.[C()],a)),r}})),t.style.setProperty("padding","16px"),t.style.setProperty("margin-top","35px"),i(t,c(me,{width:"250px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--hrm-palette-tertiary80)",get value(){return R()},placeholder:"codigo ...",colors:"#2b2b2b",handleClick:k,onEnter:X}),e),e.$$click=()=>k(""),i(e,c(B,{name:"Xclose",size:32,color:"#2b2b2b"})),i(p,c(le,{fallback:r=>(()=>{var o=fe(),l=o.firstChild,a=l.nextSibling;return a.nextSibling,i(o,()=>r.toString(),a),o})(),get children(){return c(ae,{get fallback(){return(()=>{var r=ve();return r.firstChild,i(r,c(_e,{stroke:"rgb(200 25 60 / 1)",size:62}),null),r})()},get children(){return c(z,{get when(){return g()},get children(){return c(ne,{get each(){return ie(g(),"timeStamp",0)},children:(r,o)=>(()=>{var l=he(),a=l.firstChild,x=a.firstChild,S=x.firstChild,b=S.nextSibling,$=x.nextSibling,H=$.firstChild,Z=H.nextSibling,J=Z.nextSibling;return i(S,c(B,{get name(){return oe?.[r?.currentStatus]},size:32})),b.style.setProperty("padding","8px"),i(b,()=>r?.tracking),i(a,c(pe,{}),$),i(H,()=>r?.city),i(J,()=>r?.estate),A(h=>{var O=`client_item_box gWXAaj jlytmu manifest  ${G()?"isMobile":"centerBx"}`,j=` title_scan centerBx ${G(),""} `;return O!==h.e&&M(a,h.e=O),j!==h.t&&M(b,h.t=j),h},{e:void 0,t:void 0}),l})()})}})}})}})),A(r=>(r=E()?"block":"none")!=null?n.style.setProperty("display",r):n.style.removeProperty("display")),s})()}const xe=async d=>await N({params:d,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2",fldsQry:["idairguide","currentStatus","ssg_track_key","statusHistory","tracking","estate","city","cidentity","consigneeInfo:ybestate","consigneeInfo:ybcity"]}),Se=async(d,g)=>await N({params:d,query:"updateLogisticYabaExpress",data2update:g});ce(["click"]);export{we as default};
