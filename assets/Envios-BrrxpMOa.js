const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BR8gh0k6.js","assets/index-Cw7fSnEU.js","assets/index-D4QuRvi-.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-OwizzHfO.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-rSFl6Pz6.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-CVWfKMjy.js","assets/debounces-CPYCnDwR.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-C8wWzoO6.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-CpVzQr_K.js","assets/Util-Ho0G8bBr.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-BvpqxPSY.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-D0y1MtDU.js","assets/DialogHRM-C06p0ZhP.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-DFzmMank.js","assets/ShowQRPrintLabel-BaxD1guq.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-DcGI8IYj.js","assets/Toast-DqFbOYVt.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-Dk_31YBk.js"])))=>i.map(i=>d[i]);
import{l as G,_ as P,c as re,a as M,o as Le,h as Ne,b as ze,i as r,d as t,f as T,e as Fe,t as p,j as ne,S as b,w as Ve,E as ue,q as K,F as Z,g as J,s as qe,x as ee}from"./index-Cw7fSnEU.js";import{c as Re,f as te,a as C,O as q,g as O,q as j,d as Te}from"./Util-Ho0G8bBr.js";import{u as je}from"./debounces-CPYCnDwR.js";import{i as Y}from"./globalSignal-DFzmMank.js";import{g as se,S as Qe,l as We}from"./ShowQRPrintLabel-BaxD1guq.js";import{OpenToast as Ye}from"./Toast-DqFbOYVt.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-DcGI8IYj.js";var Xe=p("<div style=padding:4px>"),ie=p('<div class="icon_status centerBx">'),He=p('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),Ue=p('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Ze=p('<div><div class="_dsplFlx flxWrp spaceAround ">'),Ke=p('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),Je=p('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),et=p('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),de=p("<div> <!>."),ge=p("<div> "),me=p("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),tt=p("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),he=p("<h5 class=totalBagsNo> <!> / "),fe=p('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),_e=p("<div class=leftMrg> "),rt=p("<div class=bottombx><h4>"),nt=p('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),st=p("<div style=padding:16px;margin-left:20px;>"),it=p("<div>"),lt=p('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const R=G(()=>P(()=>import("./LoadingColorSpinner-BR8gh0k6.js"),__vite__mapDeps([0,1,2,3]))),at=G(()=>P(()=>import("./InputHr-OwizzHfO.js"),__vite__mapDeps([4,1,2,5]))),L=G(()=>P(()=>import("./SVG-rSFl6Pz6.js"),__vite__mapDeps([6,1,2,7]))),ot=G(()=>P(()=>import("./DropDwnSearch-CVWfKMjy.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ct=G(()=>P(()=>import("./ContainerElasticView-C8wWzoO6.js"),__vite__mapDeps([11,1,2,6,7,12]))),ut=G(()=>P(()=>import("./ButonHrm-CpVzQr_K.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),le=G(()=>P(()=>import("./CheckBoxSlide-BvpqxPSY.js"),__vite__mapDeps([16,1,2,17]))),dt=G(()=>P(()=>import("./ItemOnEnvios-D0y1MtDU.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27])));G(()=>P(()=>import("./ItemOnEnviosMobile-Dk_31YBk.js"),__vite__mapDeps([28,1,2,14,7,19,20,9,21])));function Gt(){const[e,i]=re({list:{manifest:{id:"",label:""},search:"",status:""}}),[n,l]=re({}),[h,a]=re({}),[k,x]=M(""),[d,Q]=M(!1),[X,A]=M(64),[B,F]=M(!1),[V,H]=M(!1),[ve,be]=M(""),N=je(x,500),[pe,ae]=M(!1),[$e,oe]=M(!1),W=(u,g)=>{i("list",{[u]:g}),N(O())},ye=()=>{F(!B()),N(O())},ke=()=>{Q(!d()),N(O())},xe=()=>{H(!V()),N(O())};Le(()=>{}),Ne(()=>{});const Ce=()=>{A(u=>u+64)},we=u=>{let g=Math.ceil(u?.length/64);Te(Ce,1250,g)},[z,{refetch:yt}]=ze(k,async u=>{l(void 0),a("prov",void 0);let g=e?.list?.manifest?.id;ve()!==g&&be(g);const D=await ft(g);let $=[],f={};var w={};if(!d())l(D?.sumary),a("prov",D?.provinceGroup);else{w=await ht(e?.list?.search,g,e?.list?.status,e?.list?.estate,e?.list?.city),A(0);let y={};B()?q(w).map(S=>{let o=w[S],s=o?.estate||o?.consigneeInfo?.ybestate;y[S]?$.push(o):y[S]=1,C("M023009")?.ZoneCity?.[o?.zone]?.[s]||$.push(o)}):V()?q(w).map(S=>{let o=w[S],s="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const c=new RegExp(s);o.tracking.length===13&&c.test(o.tracking)&&$.push(o),o?.currentStatus||$.push(o)}):(q(w).map(S=>{let o=w[S],s=o?.estate||o?.consigneeInfo?.ybestate,c=o?.city||o?.consigneeInfo?.ybcity;f[s]||(f[s]={cities:{},total:0}),f[s].cities?.[c]||(f[s].cities[c]=0),f[s].cities[c]+=1,f[s].total+=1,$.push(o)}),a("prov",f)),we($)}return $}),ce=()=>z()?.length,Se=u=>{i("list",{manifest:u,status:void 0}),N(O())},Ie=()=>{vt(z())},Ee=()=>{bt(z())},Me=()=>{},Ae=(u,g)=>{W("estate",u),W("city",g)},Be=(u,g)=>{i("list",{estate:void 0,city:void 0}),N(O())},U=u=>u?" "+u:"",Ge=u=>{let g=u?.consigneeInfo;return U(g?.firstName)+U(g?.middleName)+U(g?.lastName)+U(g?.lastName2)},Pe=async()=>{let u=[],g=360;if(ae(!0),z().length<g){const D=z().map(async(f,w)=>{let I=f?.tracking,y="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const S=new RegExp(y);I.length===13&&S.test(I)&&(I=I.slice(3,12));let s=await se(I),c={state:f?.consigneeInfo?.ybestate,name:Ge(f),phoneNumber:f?.consigneeInfo?.phoneNumber,altPhoneNumber:f?.consigneeInfo?.altPhoneNumber,guiaWeek:f?.guia,bulto:f?.bagnumber,tracking:I,qr:s};u.push(c)});await Promise.all(D);let $=await Qe(u);window.open($),ae(!1)}else Ye({text:`El limite de etiquetas a imprimir es de ${g}`,timeout:2500,id:O()})},De=async()=>{let u=[];oe(!0),setTimeout(async()=>{let g=400,D=619124,$=[],f=new Date().getFullYear().toString().slice(2,4);for(let y=0;y<g;y++)$.push(y);const w=$.map(async(y,S)=>{let o=D+y*2,s=o+1;const c=await se("Y"+f+o),m=await se("Y"+f+s);let v={mtrx:c,mtrx2:m,lbl:"Y"+f+o,lbl2:"Y"+f+s};u.push(v)});await Promise.all(w);let I=await We(u);window.open(I),oe(!1)},760)},Oe=async u=>{await _t(e?.list?.manifest?.id)};return(()=>{var u=et(),g=u.firstChild,D=g.firstChild,$=D.nextSibling,f=$.firstChild,w=$.nextSibling,I=w.firstChild,y=g.nextSibling,S=y.firstChild,o=y.nextSibling;return r(f,()=>e?.list?.manifest?.id),r(w,t(le,{get initValue(){return d()},updChange:ke,color:"var(--background-red-ssg)"}),I),r(u,t(b,{get when(){return ne?.profile?.isAdmin},get children(){return t(ut,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Ie})}}),y),r(S,t(ot,{get list(){return C("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:s=>Se(s),width:"260px"})),r(y,t(b,{get when(){return Ve(()=>!!e?.list?.manifest?.id)()&&d()},get children(){return[(()=>{var s=Xe();return r(s,t(at,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:c=>W("search",c)})),s})(),(()=>{var s=Ue(),c=s.firstChild,m=c.firstChild;return r(c,t(le,{get initValue(){return B()},updChange:ye,color:"var(--background-red-ssg)"}),m),r(s,t(b,{get when(){return ne?.profile?.isAdmin},get children(){var v=He(),_=v.firstChild;return r(v,t(le,{get initValue(){return V()},updChange:xe,color:"var(--background-red-ssg)"}),_),r(v,t(b,{get when(){return V()},get children(){var E=ie();return E.$$click=Ee,r(E,t(L,{name:"outline_delete",size:24})),E}}),null),v}}),null),s})()]}}),null),r(o,t(b,{get when(){return e?.list?.manifest?.id},get children(){var s=Ze(),c=s.firstChild;return r(c,t(ue,{fallback:m=>(()=>{var v=de(),_=v.firstChild,E=_.nextSibling;return E.nextSibling,r(v,()=>m.toString(),E),v})(),get children(){return t(K,{get fallback(){return(()=>{var m=ge();return m.firstChild,r(m,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),m})()},get children(){return t(b,{get when(){return n?.total},get children(){return t(Z,{get each(){return q(n)},children:(m,v)=>Y()?t(mt,{keyG:m,total:ce,get status(){return e?.list?.status},get amount(){return n?.[m]},get showItems(){return d()},updForm:W}):t(gt,{keyG:m,total:ce,get showItems(){return d()},get status(){return e?.list?.status},get amount(){return n?.[m]},updForm:W})})}})}})}})),T(()=>J(s,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),s}}),null),r(o,t(b,{get when(){return ne?.profile?.isAdmin},get children(){var s=Ke(),c=s.firstChild,m=c.firstChild,v=m.nextSibling;return r(c,t(b,{get when(){return!$e()},get fallback(){return(()=>{var _=me(),E=_.firstChild;return r(_,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),E),_})()},get children(){var _=ie();return _.$$click=De,r(_,t(L,{name:"printer",size:24,color:"firebrick"})),_}}),m),m.$$click=Oe,r(m,t(L,{name:"tag-outline",size:24})),v.$$click=Me,r(v,t(L,{name:"outline_renew",size:24})),r(c,t(b,{get when(){return!pe()},get fallback(){return(()=>{var _=me(),E=_.firstChild;return r(_,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),E),_})()},get children(){var _=ie();return _.$$click=Pe,r(_,t(L,{name:"printer",size:32})),_}}),null),s}}),null),r(o,t(b,{get when(){return h?.prov},get children(){var s=Je(),c=s.firstChild,m=c.firstChild,v=c.nextSibling;return r(m,t(b,{get when(){return h?.prov},get children(){return t(Z,{get each(){return q(h?.prov)},children:(_,E)=>t($t,{ism:_,get item(){return h?.prov?.[_]},updS:Ae})})}})),v.$$click=Be,r(v,t(L,{name:"Xclose",size:22})),T(()=>J(s,`client_item_box gWXAaj jlytmu ${Y()?"isMobile":""}`)),s}}),null),r(o,t(ue,{fallback:s=>(()=>{var c=de(),m=c.firstChild,v=m.nextSibling;return v.nextSibling,r(c,()=>s.toString(),v),c})(),get children(){return t(K,{get fallback(){return(()=>{var s=ge();return s.firstChild,r(s,t(R,{stroke:"rgb(200 25 60 / 1)",size:62}),null),s})()},get children(){return t(b,{get when(){return z()},get children(){return t(Z,{get each(){return z()?.slice(0,X())},children:(s,c)=>t(dt,{item:s,refresh:()=>N(O())})})}})}})}}),null),T(s=>qe(o,` ${Y()?"":"width:94vw;"} margin: 0 auto;`,s)),u})()}const gt=e=>{const[i,n]=M(!1),[l,h]=M(0),a=()=>{let d=e?.keyG;e?.keyG==="total"&&(d=null),e?.updForm("status",d)},k=()=>{i()||!Y()&&e?.keyG!=="total"&&(h(C("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),n(!0))},x=()=>{h("0px"),i()&&n(!1)};return t(b,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var d=_e();return d.firstChild,r(d,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),d})()},get children(){var d=fe(),Q=d.firstChild,X=Q.nextSibling;return d.$$mouseout=x,d.$$mousemove=k,d.$$click=a,r(d,t(b,{get when(){return i()},get children(){var A=tt(),B=A.firstChild,F=B.firstChild,V=F.firstChild;return r(V,()=>C("M023009")?.statusObjDesc?.[e?.keyG]),T(H=>(H=l())!=null?B.style.setProperty("width",H):B.style.removeProperty("width")),A}}),Q),r(Q,t(L,{get name(){return C("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(d,t(b,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var A=he(),B=A.firstChild,F=B.nextSibling;return F.nextSibling,r(A,()=>e?.total(),F),A}}),X),r(X,()=>e?.amount),T(()=>J(d,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),d}})}})},mt=e=>{const i=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t(b,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var n=_e();return n.firstChild,r(n,t(R,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=fe(),l=n.firstChild,h=l.nextSibling;return n.$$click=i,r(l,t(L,{get name(){return C("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(n,t(b,{get when(){return C("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var a=rt(),k=a.firstChild;return r(k,()=>C("M023009")?.statusObjDesc?.[e?.keyG]),a}}),h),r(n,t(b,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var a=he(),k=a.firstChild,x=k.nextSibling;return x.nextSibling,r(a,()=>e?.total(),x),a}}),h),r(h,()=>e?.amount),T(()=>J(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},ht=async(e,i,n,l,h)=>{let a={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"]};e&&e.split(" ").map((x,d)=>{x&&(a.params[":search"+d]=x.trim())}),n&&(a.params[":status"]=n),l&&(a.params[":estate"]=l),h&&(a.params[":city"]=h),ee?.roles?.agency&&(a.params[":agency"]=ee?.roles?.agency+"");let k={...C(j())}[802001];if(a={...a,...k},i&&Object.keys(a.params).length>=2){const x=await te(a);return x?.data?.error?{}:x}return{}},ft=async e=>{let i={params:{idairguide:e}},n={...C(j())}[802004];i={...i,...n},ee?.roles?.agency&&(i.params[":agency"]=ee?.roles?.agency+"");const l=await te(i);return l?.error?{}:l},_t=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n={...C(j())}[802001];i={...i,...n};const l=await te(i);return l?.error?{}:l},vt=async e=>{e.map(i=>{let n={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},l={...C(j())}[802002];n={...n,...l}})},bt=async e=>{e.map(i=>{let n={params:{ssg_track_key:i?.ssg_track_key,idairguide:i?.idairguide}},l={...C(j())}[802005];n={...n,...l}})},Pt=async(e,i)=>{let n=[];e.map(l=>{let h={params:{ssg_track_key:l?.ssg_track_key,idairguide:l?.idairguide},data2update:{currentStatus:i}},a={...C(j())}[802004];h={...h,...a},n.push(h)}),Re(n,pt)},pt=async e=>{const n=await te(e);if(n)return n},$t=e=>(()=>{var i=it();return r(i,t(b,{get when(){return e?.item?.total>0},get children(){var n=nt(),l=n.firstChild,h=l.firstChild,a=h.firstChild,k=h.nextSibling;return l.$$click=()=>e?.updS(e?.ism),r(h,()=>e?.ism,a),r(k,()=>e?.item?.total),n}}),null),r(i,t(ct,{get children(){var n=st();return r(n,t(b,{get when(){return e?.item?.cities},get children(){return t(Z,{get each(){return q(e?.item?.cities)},children:(l,h)=>(()=>{var a=lt(),k=a.firstChild,x=k.nextSibling;return a.$$click=()=>e?.updS(e?.ism,l),r(k,l),r(x,()=>e?.item?.cities?.[l]),a})()})}})),n}}),null),i})();Fe(["click","mousemove","mouseout"]);export{gt as StatusGroupItem,Gt as default,bt as deleteManifest,pt as fetchCSVInve,vt as loadManifest,Pt as updateManifest};
