const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-C3_C8V1O.js","assets/index-twYRq3uj.js","assets/index-DaYrm968.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-DOASs3Ju.js","assets/debounces-DDQWqeGf.js","assets/SVG-CpHyQroA.js","assets/Util-B8-DWw-6.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-DK0Sss4S.js","assets/ButonUploadHrm-NppuSBWu.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-C3aEhwTH.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-SJJYSczn.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as A,_ as j,r as me,c as K,a as L,o as xe,b as fe,e as $e,i as e,f as l,S as I,h as re,k as ie,m as ye,q as Ce,O as Se,F as se,g as ue,d as Be,t as d}from"./index-twYRq3uj.js";import{e as J,O as ae,h as ke,g as W,f as Q,m as Ie,a as V}from"./Util-B8-DWw-6.js";import{u as we}from"./debounces-DDQWqeGf.js";import{c as Pe,i as Ee,g as Oe,a as Le,b as Ae,u as je}from"./handelImagesServices-B9p2PKdw.js";import{LookupInventory as Ue}from"./DashInventory-BQcKYrF0.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-B0ugz95c.js";var Xe=d('<div class="icon_status centerBx">'),De=d("<div style=width:300px;max-height:300px;position:relative;><img alt=sf><div>"),Fe=d("<div style=width:300px;position:relative;><img alt=sf>"),Me=d('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),qe=d('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div style=margin:16px><div class=bottombx><h4>Codigos X tallas:</h4></div><div class="centerBx flxWrp "style=margin:16px>'),Ve=d("<div class=hseparator>"),Te=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Ze=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Re=d('<div class="bottombx centerBx unit"style=padding:30px>'),We=d('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),Qe=d('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class="icon_status centerBx "style=margin-right:52px></div><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><div class=" centerBx spaceAround"><h4>Factura</h4></div></div><div class="tr_bar_40 centerBx spaceAround"><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),Ye=d("<div> "),ze=d("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Ne=d('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ge=d('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),ne=d("<div style=margin:8px>"),He=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>'),Ke=d("<div class=unitBx><h5>"),Je=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const oe=A(()=>j(()=>import("./LoadingColorSpinner-C3_C8V1O.js"),__vite__mapDeps([0,1,2,3]))),et=A(()=>j(()=>import("./DropDwnSearch-DOASs3Ju.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),tt=A(()=>j(()=>import("./FlexSpace-DK0Sss4S.js"),__vite__mapDeps([9,1,2]))),lt=A(()=>j(()=>import("./ButonUploadHrm-NppuSBWu.js"),__vite__mapDeps([10,1,2,6,7,11]))),rt=A(()=>j(()=>import("./CheckBoxSlide-C3aEhwTH.js"),__vite__mapDeps([12,1,2,13]))),it=A(()=>j(()=>import("./InputHr-SJJYSczn.js"),__vite__mapDeps([14,1,2,15]))),ce=A(()=>j(()=>import("./SVG-CpHyQroA.js"),__vite__mapDeps([6,1,2,7])));function xt(a){const[r,n]=me(),[t,h]=K({search:""});K(),K();const[m,Y]=L(null),[U,D]=L(!1),[F,P]=L(!1),[T,_e]=L(""),[dt,be]=L("");we(be,400),xe(()=>{}),fe(()=>{});const ee=async()=>{if(r?.mId){let s={id:r?.mId,businessId:ue?.profile?.businessYId};console.log(s);let u=await ot(s);console.log(u);let y=await Ue(r?.mId);console.log(y);let E=0,B=0,i=[],o={};ae(y)?.map(b=>{let c=y[b]?.store;y[b]?.products?.map(f=>{if(r?.mId===f?.product?.id){let $={...y[b]};delete $.products,$.qty=f?.qty*1,$.price=f?.price*1,E+=f?.price*1*f?.qty*1,o[c]||(o[c]={total:0}),o[c].total+=$.qty,B+=f?.qty*1,i.push($)}})});const v=E/B;_e(Oe()+Le()+"/"+u?.productImageUrl),h("stockList",i),h("stock",{Balance:E,Total:B,priceCost:v,stockByStore:o}),h("productObj",u)}};$e(async()=>{ee()});const z=async s=>{await at(r?.mId,s),ee()},te=async(s,u)=>{let y=await Ae(s.type,u,1);if(await je(y,s)){let B={...t?.productObj?.thumbnails};B[u]=1,await z({productImageUrl:u,thumbnails:B}),P(!1),D(!1)}else P(!1)},pe=async()=>{if(P(!0),m()?.name.split(".").pop()==="webp"){let s=t?.productObj?.code+"/"+V()+V()+".webp";te(m()?.file,s)}else{let s=await Pe(m()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),u=await Ee(s),E=await(await fetch(u)).blob(),B=t?.productObj?.code+"/"+V()+V()+".webp";te(E,B)}},ve=s=>{Y(s),D(!0)},ge=s=>{z({isPublic:s?"9":null})},_=async(s,u)=>{z({[s]:u})},he=async(s,u)=>{nt(t?.productObj,s)};return(()=>{var s=Qe(),u=s.firstChild,y=u.firstChild,E=y.nextSibling,B=E.nextSibling;return B.nextSibling,e(s,l(I,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var i=Ye();return i.firstChild,e(i,l(oe,{stroke:"rgb(200 25 60 / 1)",size:62}),null),i})()},get children(){var i=qe(),o=i.firstChild,v=o.firstChild,b=v.firstChild,c=b.nextSibling,f=c.firstChild,$=c.nextSibling,M=o.nextSibling,N=M.nextSibling,q=N.firstChild,k=q.nextSibling,w=k.nextSibling,O=w.nextSibling,G=O.nextSibling,H=G.firstChild,x=H.nextSibling;return e(o,l(I,{get when(){return m()?.source},get children(){var C=De(),X=C.firstChild,Z=X.nextSibling;return e(Z,l(I,{get when(){return!F()},get fallback(){return(()=>{var p=ze(),R=p.firstChild;return e(p,l(oe,{stroke:"rgb(200 25 60 / 1)",size:32}),R),p})()},get children(){var p=Xe();return p.$$click=pe,e(p,l(ce,{name:"arrow_up_large",size:24})),p}})),re(p=>{var R=m()?.source,le=F()?"floatBtn loading":"floatBtn ";return R!==p.e&&ie(X,"src",p.e=R),le!==p.t&&ye(Z,p.t=le),p},{e:void 0,t:void 0}),C}}),v),e(o,l(I,{get when(){return Ce(()=>!!T())()&&!m()?.source},get children(){var C=Fe(),X=C.firstChild;return re(()=>ie(X,"src",T())),C}}),v),e(b,()=>t?.productObj?.name),e(c,l(rt,{get initValue(){return t?.productObj?.isPublic},updChange:ge,color:"var(--background-red-ssg)"}),f),e($,l(lt,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ve})),e(v,l(I,{get when(){return Se()},get children(){var C=Me(),X=C.firstChild,Z=X.nextSibling;return e(Z,l(et,{get list(){return J("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:p=>he(p.id),width:"260px"})),C}}),null),e(q,l(g,{get value(){return t?.productObj?.name},label:"Nombre:",key:"name",updItem:_,width:"600px"})),e(k,l(de,{get value(){return t?.productObj?.category},label:"Categoria:",key:"category",updItem:_}),null),e(k,l(S,{}),null),e(k,l(de,{get value(){return t?.productObj?.unit},label:"U/M:",key:"unit",updItem:_}),null),e(k,l(S,{}),null),e(k,l(g,{get value(){return t?.productObj?.brand},label:"Marca:",key:"brand",updItem:_}),null),e(k,l(S,{}),null),e(k,l(g,{get value(){return t?.productObj?.model},label:"Modelo:",key:"model",updItem:_}),null),e(w,l(g,{get value(){return t?.productObj?.ASIN},label:"ASIN:",key:"ASIN",updItem:_}),null),e(w,l(S,{}),null),e(w,l(g,{get value(){return t?.productObj?.UPC},label:"UPC:",key:"UPC",updItem:_}),null),e(w,l(S,{}),null),e(w,l(g,{get value(){return t?.productObj?.code},label:"codigo:",key:"code",updItem:_}),null),e(O,l(g,{get value(){return t?.productObj?.description},label:"Description:",key:"description",updItem:_}),null),e(O,l(S,{}),null),e(O,l(g,{get value(){return t?.productObj?.salePrice},label:"Precio Venta:",key:"salePrice",updItem:_}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_XXXL},label:"XXXL:",key:"UPC_SIZE_XXXL",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_XXL},label:"XXL:",key:"UPC_SIZE_XXL",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_XL},label:"XL:",key:"UPC_SIZE_XL",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_L},label:"L:",key:"UPC_SIZE_L",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_M},label:"M:",key:"UPC_SIZE_M",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_S},label:"S:",key:"UPC_SIZE_S",updItem:_}),null),i}}),u),e(u,l(I,{get when(){return t?.stockList},get children(){return[Ve(),(()=>{var i=Re();return e(i,l(I,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Te(),v=o.firstChild,b=v.nextSibling,c=b.firstChild;return e(c,()=>(t?.stock?.Total*1).toFixed(2)),o})(),l(tt,{}),(()=>{var o=Ze(),v=o.firstChild,b=v.nextSibling,c=b.firstChild;return c.firstChild,e(c,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),i})(),(()=>{var i=We();return i.firstChild,e(i,l(se,{get each(){return ae(t?.stock?.stockByStore)},children:(o,v)=>(()=>{var b=Ne(),c=b.firstChild,f=c.firstChild,$=c.nextSibling,M=$.firstChild;return e(c,()=>J("storeGroupBy")?.[o]?.label,f),e(M,()=>(t?.stock?.stockByStore?.[o]?.total*1).toFixed(2)),b})()}),null),i})()]}}),y),e(u,l(se,{get each(){return t?.stockList},children:(i,o)=>(()=>{var v=Ge(),b=v.firstChild,c=b.nextSibling,f=c.firstChild,$=c.nextSibling,M=$.firstChild,N=M.firstChild,q=$.nextSibling,k=q.firstChild,w=q.nextSibling,O=w.firstChild,G=O.firstChild,H=w.nextSibling,x=H.firstChild,C=x.firstChild;return C.firstChild,e(b,l(ce,{get name(){return st[i?.type]},size:24,color:"var(--background-red-ssg)"})),e(f,()=>ke(i?.createDate)),e(N,()=>(i?.qty*1).toFixed(2)),e(k,()=>i?.invoice),e(O,()=>J("storeGroupBy")?.[i?.store]?.label,G),e(C,()=>(i?.price*1).toFixed(2),null),v})()}),null),s})()}let st={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const S=()=>[ne(),"|",ne()],g=a=>{const[r,n]=L(!1),[t,h]=L(""),m=()=>{a?.updItem(a?.key,t()),n(!1)},Y=()=>{let U=r();U||h(a?.value),n(!U)};return(()=>{var U=He(),D=U.firstChild,F=D.firstChild;return F.$$click=Y,e(F,()=>a?.label),e(D,l(I,{get when(){return r()},get fallback(){return l(I,{get when(){return a?.value},get children(){var P=Ke(),T=P.firstChild;return e(T,()=>a?.value),P}})},get children(){return l(it,{get width(){return a?.width||"160px"},backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()},placeholder:"Modelo",colors:"#2b2b2b",handleClick:P=>h(P),onEnter:m})}}),null),U})()},de=a=>l(I,{get when(){return a?.value},get children(){var r=Je(),n=r.firstChild,t=n.firstChild,h=t.nextSibling,m=h.firstChild;return e(t,()=>a?.label),e(m,()=>a?.value),r}}),at=async(a,r)=>{let n={params:{id:a,businessId:ue?.profile?.businessYId},form:r},t=W(129004);return n={...n,...t},await Q(n)},nt=async(a,r)=>{let n={...a};n.ssg_product_key=V(),n.businessId=r;let t={params:{businessId:r},form:n},h=W(129003);t={...t,...h};{const m=await Q(t);return m?.data?.error?{}:m?.data}},ot=async a=>{let r={params:a},n=W(122002);return r={...r,...n},await Q(r)},ft=async a=>{let r=[];a.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},h=W(802002);t={...t,...h},r.push(t)}),Ie(r,ct)},ct=async a=>{const n=await Q(a);if(n)return n};Be(["click"]);export{xt as default,ct as fetchCSVInve,ft as loadProduct,at as updProducts};
