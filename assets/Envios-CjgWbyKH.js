const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-C7wCiJkP.js","assets/index-_Au11fjV.js","assets/index-D4QuRvi-.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-EBG3H7Qk.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-gl2VBkJF.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-UYuD5oX9.js","assets/debounces-DRmn-3nm.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-DbHPRHg-.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-KPNC3t2L.js","assets/Util-dbxHFpkD.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-DTtBzFnH.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-BkkAYGxw.js","assets/manifestList-CSHEgbpJ.js","assets/DialogHRM-CrEu5ACj.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-B8iPyfuq.js","assets/ShowQRPrintLabel-C3tWOlip.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-BI_Od3nu.js","assets/Toast-Dlmcn-PH.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-B9GytgOI.js"])))=>i.map(i=>d[i]);
import{l as D,_ as N,c as J,a as A,o as Ie,h as Be,b as Ge,i as n,d as t,f as R,e as Pe,t as v,j as ee,S as _,E as le,q as X,F as W,g as H,s as Le,z as Z}from"./index-_Au11fjV.js";import{m as Me,c as Q,b as de,Z as Oe}from"./manifestList-CSHEgbpJ.js";import{h as ze,f as U,O as F,g as P,s as Fe}from"./Util-dbxHFpkD.js";import{u as qe}from"./debounces-DRmn-3nm.js";import{i as T}from"./globalSignal-B8iPyfuq.js";import{g as te,S as Re,l as Ve}from"./ShowQRPrintLabel-C3tWOlip.js";import{OpenToast as Te}from"./Toast-Dlmcn-PH.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-BI_Od3nu.js";var Ye=v("<div style=padding:4px>"),re=v('<div class="icon_status centerBx">'),je=v('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),We=v('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Xe=v('<div><div class="_dsplFlx flxWrp spaceAround ">'),He=v('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),Ze=v('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Qe=v('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),ae=v("<div> <!>."),ce=v("<div> "),oe=v("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ue=v("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ge=v("<h5 class=totalBagsNo> <!> / "),me=v('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),he=v("<div class=leftMrg> "),Ke=v("<div class=bottombx><h4>"),Je=v("<div>"),et=v('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),tt=v("<div style=padding:16px;margin-left:20px;>"),rt=v('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const q=D(()=>N(()=>import("./LoadingColorSpinner-C7wCiJkP.js"),__vite__mapDeps([0,1,2,3]))),nt=D(()=>N(()=>import("./InputHr-EBG3H7Qk.js"),__vite__mapDeps([4,1,2,5]))),I=D(()=>N(()=>import("./SVG-gl2VBkJF.js"),__vite__mapDeps([6,1,2,7]))),it=D(()=>N(()=>import("./DropDwnSearch-UYuD5oX9.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),st=D(()=>N(()=>import("./ContainerElasticView-DbHPRHg-.js"),__vite__mapDeps([11,1,2,6,7,12]))),lt=D(()=>N(()=>import("./ButonHrm-KPNC3t2L.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ue=D(()=>N(()=>import("./CheckBoxSlide-DTtBzFnH.js"),__vite__mapDeps([16,1,2,17]))),at=D(()=>N(()=>import("./ItemOnEnvios-BkkAYGxw.js"),__vite__mapDeps([18,1,2,14,7,19,20,21,11,6,12,22,23,24,25,26,27,28])));D(()=>N(()=>import("./ItemOnEnviosMobile-B9GytgOI.js"),__vite__mapDeps([29,1,2,14,7,19,20,21,11,6,12,9,22])));function Nt(){const[e,a]=J({list:{manifest:{id:"175-23834683",label:""},search:"",status:""}}),[i,p]=J({}),[h,o]=J({}),[b,w]=A(""),[$,L]=A(64),[M,E]=A(!1),[S,O]=A(!1),[K,Y]=A(""),z=qe(w,500),[fe,ne]=A(!1),[_e,ie]=A(!1),V=(c,u)=>{a("list",{[c]:u}),z(P())},ve=()=>{E(!M()),z(P())},pe=()=>{O(!S()),z(P())};Ie(()=>{}),Be(()=>{});const be=()=>{L(c=>c+64)},$e=c=>{let u=Math.ceil(c?.length/64);Fe(be,1250,u)},[B,{refetch:vt}]=Ge(b,async c=>{let u=e?.list?.manifest?.id;K()!==u&&Y(u);const G=await dt(u);p(G);let k=[],m={};var y={};{y=await ut(e?.list?.search,u,e?.list?.status,e?.list?.estate,e?.list?.city),o("prov",void 0),L(0);let x={};M()?F(y).map(f=>{let r=y[f],s=r?.estate||r?.consigneeInfo?.ybestate;x[f]?k.push(r):x[f]=1,Oe?.[r?.zone]?.[s]||k.push(r)}):S()?F(y).map(f=>{let r=y[f],s="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(s);r.tracking.length===13&&l.test(r.tracking)&&k.push(r),r?.currentStatus||k.push(r)}):(F(y).map(f=>{let r=y[f],s=r?.estate||r?.consigneeInfo?.ybestate,l=r?.city||r?.consigneeInfo?.ybcity;s&&!m[s]&&(m[s]={cities:{},total:0}),l&&!m[s].cities?.[l]&&(m[s].cities[l]=0),s&&l&&(m[s].cities[l]+=1,m[s].total+=1,k.push(r))}),o("prov",m)),$e(k)}return k}),se=()=>B()?.length,ye=c=>{a("list",{manifest:c,status:void 0}),z(P())},ke=()=>{mt(B())},xe=()=>{ht(B())},Ce=()=>{},we=(c,u)=>{V("estate",c),V("city",u)},Se=(c,u)=>{a("list",{estate:void 0,city:void 0}),z(P())},j=c=>c?" "+c:"",Ae=c=>{let u=c?.consigneeInfo;return j(u?.firstName)+j(u?.middleName)+j(u?.lastName)+j(u?.lastName2)},De=async()=>{let c=[],u=360;if(ne(!0),B().length<u){const G=B().map(async(m,y)=>{let x=m?.tracking,f="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const r=new RegExp(f);x.length===13&&r.test(x)&&(x=x.slice(3,12));let l=await te(x),g={state:m?.consigneeInfo?.ybestate,name:Ae(m),phoneNumber:m?.consigneeInfo?.phoneNumber,altPhoneNumber:m?.consigneeInfo?.altPhoneNumber,guiaWeek:m?.guia,bulto:m?.bagnumber,tracking:x,qr:l};c.push(g)});await Promise.all(G);let k=await Re(c);window.open(k),ne(!1)}else Te({text:`El limite de etiquetas a imprimir es de ${u}`,timeout:2500,id:P()})},Ne=async()=>{let c=[];ie(!0),setTimeout(async()=>{let u=400,G=619124,k=[],m=new Date().getFullYear().toString().slice(2,4);for(let f=0;f<u;f++)k.push(f);const y=k.map(async(f,r)=>{let s=G+f*2,l=s+1;const g=await te("Y"+m+s),d=await te("Y"+m+l);let C={mtrx:g,mtrx2:d,lbl:"Y"+m+s,lbl2:"Y"+m+l};c.push(C)});await Promise.all(y);let x=await Ve(c);window.open(x),ie(!1)},760)},Ee=async c=>{await gt(e?.list?.manifest?.id)};return(()=>{var c=Qe(),u=c.firstChild,G=u.firstChild,k=G.nextSibling,m=k.firstChild,y=u.nextSibling,x=y.firstChild,f=y.nextSibling;return n(m,()=>e?.list?.manifest?.id),n(c,t(_,{get when(){return ee?.profile?.isAdmin},get children(){return t(lt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:ke})}}),y),n(x,t(it,{list:Me,lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:r=>ye(r),width:"260px"})),n(y,t(_,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var r=Ye();return n(r,t(nt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:s=>V("search",s)})),r})(),(()=>{var r=We(),s=r.firstChild,l=s.firstChild;return n(s,t(ue,{get initValue(){return M()},updChange:ve,color:"var(--background-red-ssg)"}),l),n(r,t(_,{get when(){return ee?.profile?.isAdmin},get children(){var g=je(),d=g.firstChild;return n(g,t(ue,{get initValue(){return S()},updChange:pe,color:"var(--background-red-ssg)"}),d),n(g,t(_,{get when(){return S()},get children(){var C=re();return C.$$click=xe,n(C,t(I,{name:"outline_delete",size:24})),C}}),null),g}}),null),r})()]}}),null),n(f,t(_,{get when(){return e?.list?.manifest?.id},get children(){var r=Xe(),s=r.firstChild;return n(s,t(le,{fallback:l=>(()=>{var g=ae(),d=g.firstChild,C=d.nextSibling;return C.nextSibling,n(g,()=>l.toString(),C),g})(),get children(){return t(X,{get fallback(){return(()=>{var l=ce();return l.firstChild,n(l,t(q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),l})()},get children(){return t(_,{get when(){return i?.total},get children(){return t(W,{get each(){return F(i)},children:(l,g)=>T()?t(ot,{keyG:l,total:se,get status(){return e?.list?.status},get amount(){return i?.[l]},updForm:V}):t(ct,{keyG:l,total:se,get status(){return e?.list?.status},get amount(){return i?.[l]},updForm:V})})}})}})}})),R(()=>H(r,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),r}}),null),n(f,t(_,{get when(){return ee?.profile?.isAdmin},get children(){var r=He(),s=r.firstChild,l=s.firstChild,g=l.nextSibling;return n(s,t(_,{get when(){return!_e()},get fallback(){return(()=>{var d=oe(),C=d.firstChild;return n(d,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),C),d})()},get children(){var d=re();return d.$$click=Ne,n(d,t(I,{name:"printer",size:24,color:"firebrick"})),d}}),l),l.$$click=Ee,n(l,t(I,{name:"tag-outline",size:24})),g.$$click=Ce,n(g,t(I,{name:"outline_renew",size:24})),n(s,t(_,{get when(){return!fe()},get fallback(){return(()=>{var d=oe(),C=d.firstChild;return n(d,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),C),d})()},get children(){var d=re();return d.$$click=De,n(d,t(I,{name:"printer",size:32})),d}}),null),r}}),null),n(f,t(_,{get when(){return h?.prov},get children(){var r=Ze(),s=r.firstChild,l=s.firstChild,g=s.nextSibling;return n(l,t(_,{get when(){return h?.prov},get children(){return t(W,{get each(){return F(h?.prov)},children:(d,C)=>t(_t,{ism:d,get item(){return h?.prov?.[d]},updS:we})})}})),g.$$click=Se,n(g,t(I,{name:"Xclose",size:22})),R(()=>H(r,`client_item_box gWXAaj jlytmu ${T()?"isMobile":""}`)),r}}),null),n(f,t(le,{fallback:r=>(()=>{var s=ae(),l=s.firstChild,g=l.nextSibling;return g.nextSibling,n(s,()=>r.toString(),g),s})(),get children(){return t(X,{get fallback(){return(()=>{var r=ce();return r.firstChild,n(r,t(q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),r})()},get children(){return t(_,{get when(){return B()},get children(){return t(W,{get each(){return B()?.slice(0,$())},children:(r,s)=>t(at,{item:r,refresh:()=>z(P())})})}})}})}}),null),R(r=>Le(f,` ${T()?"":"width:94vw;"} margin: 0 auto;`,r)),c})()}const ct=e=>{const[a,i]=A(!1),[p,h]=A(0),o=()=>{let $=e?.keyG;e?.keyG==="total"&&($=null),e?.updForm("status",$)},b=()=>{a()||!T()&&e?.keyG!=="total"&&(h(Q?.[e?.keyG]?.length*8.5+"px"),i(!0))},w=()=>{h("0px"),a()&&i(!1)};return t(_,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var $=he();return $.firstChild,n($,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),$})()},get children(){var $=me(),L=$.firstChild,M=L.nextSibling;return $.$$mouseout=w,$.$$mousemove=b,$.$$click=o,n($,t(_,{get when(){return a()},get children(){var E=Ue(),S=E.firstChild,O=S.firstChild,K=O.firstChild;return n(K,()=>Q?.[e?.keyG]),R(Y=>(Y=p())!=null?S.style.setProperty("width",Y):S.style.removeProperty("width")),E}}),L),n(L,t(I,{get name(){return de?.[e?.keyG]},size:22})),n($,t(_,{get when(){return e?.keyG==="total"},get children(){var E=ge(),S=E.firstChild,O=S.nextSibling;return O.nextSibling,n(E,()=>e?.total(),O),E}}),M),n(M,()=>e?.amount),R(()=>H($,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),$}})}})},ot=e=>{const a=()=>{let i=e?.keyG;e?.keyG==="total"&&(i=null),e?.updForm("status",i)};return t(_,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var i=he();return i.firstChild,n(i,t(q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),i})()},get children(){var i=me(),p=i.firstChild,h=p.nextSibling;return i.$$click=a,n(p,t(I,{get name(){return de?.[e?.keyG]},size:22})),n(i,t(_,{get when(){return Q?.[e?.keyG]},get children(){var o=Ke(),b=o.firstChild;return n(b,()=>Q?.[e?.keyG]),o}}),h),n(i,t(_,{get when(){return e?.keyG==="total"},get children(){var o=ge(),b=o.firstChild,w=b.nextSibling;return w.nextSibling,n(o,()=>e?.total(),w),o}}),h),n(h,()=>e?.amount),R(()=>H(i,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),i}})}})},ut=async(e,a,i,p,h)=>{let o={params:{idairguide:a,":search5":a},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((b,w)=>{b&&(o.params[":search"+w]=b.trim())}),i&&(o.params[":status"]=i),p&&(o.params[":estate"]=p),h&&(o.params[":city"]=h),Z?.roles?.agency&&(o.params[":agency"]=Z?.roles?.agency+""),a&&Object.keys(o.params).length>=2){const b=await U(o);return b?.data?.error?{}:b}return{}},dt=async e=>{let a={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};Z?.roles?.agency&&(a.params[":agency"]=Z?.roles?.agency+"");const i=await U(a);return i?.error?{}:i},gt=async e=>{const i=await U({params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"});return i?.error?{}:i},mt=async e=>{e.map(a=>{a?.ssg_track_key,a?.idairguide})},ht=async e=>{e.map(a=>{a?.ssg_track_key,a?.idairguide})},Et=async(e,a)=>{let i=[];e.map(p=>{let h={params:{ssg_track_key:p?.ssg_track_key,idairguide:p?.idairguide},data2update:{currentStatus:a},query:"updateLogisticYabaExpress"};i.push(h)}),ze(i,ft)},ft=async e=>{const i=await U(e);if(i)return i},_t=e=>(()=>{var a=Je();return n(a,t(_,{get when(){return e?.item?.total>0},get children(){var i=et(),p=i.firstChild,h=p.firstChild,o=h.firstChild,b=h.nextSibling;return p.$$click=()=>e?.updS(e?.ism),n(h,()=>e?.ism,o),n(b,()=>e?.item?.total),i}}),null),n(a,t(st,{get children(){var i=tt();return n(i,t(_,{get when(){return e?.item?.cities},get children(){return t(W,{get each(){return F(e?.item?.cities)},children:(p,h)=>(()=>{var o=rt(),b=o.firstChild,w=b.nextSibling;return o.$$click=()=>e?.updS(e?.ism,p),n(b,p),n(w,()=>e?.item?.cities?.[p]),o})()})}})),i}}),null),a})();Pe(["click","mousemove","mouseout"]);export{ct as StatusGroupItem,Nt as default,ht as deleteManifest,ft as fetchCSVInve,mt as loadManifest,Et as updateManifest};
