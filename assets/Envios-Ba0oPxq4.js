const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-31rekYeJ.js","assets/index-B0l8WTNe.js","assets/index-C8O1wSFC.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-BTu0l7U3.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-B_Pm6hj5.js","assets/DropDwnSearch-B2uh9hSi.js","assets/debounces-P1AazJ4v.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-B189mQVU.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-BmYLh4wA.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-tzwWiQyb.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-ColjmA-K.js","assets/DialogHRM-Bl4bJf-w.js","assets/DialogHRM-V9_lZntj.css","assets/ItemOnEnviosMobile-Bpxt-O4e.js"])))=>i.map(i=>d[i]);
import{l as I,_ as A,c as Z,a as S,p as Ne,k as De,b as Pe,i as r,d as t,f as R,Y as Ge,o as te,e as Be,t as f,n as J,S as h,a6 as Le,G as se,y as X,F as Y,O as z,h as q,g as H,j as G,s as Me,w as U,v as de,a7 as Oe,P as K,a8 as Fe}from"./index-B0l8WTNe.js";import{u as ze}from"./debounces-P1AazJ4v.js";import{g as le,S as Ve,l as Re}from"./ShowQRPrintLabel-CGXHAoO0.js";import{OpenToast as Te}from"./Toast-DIejShaM.js";import"./fontkit.es-D-v5Kvuq.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-DuxNkdeY.js";var qe=f("<div style=padding:4px>"),ee=f('<div class="icon_status centerBx">'),je=f('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),We=f('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Ye=f('<div><div class="_dsplFlx flxWrp spaceAround ">'),Xe=f('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx">'),He=f('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Ue=f('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),ae=f("<div> <!>."),oe=f("<div> "),ce=f("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),Ke=f("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ge=f("<h5 class=totalBagsNo> <!> / "),me=f('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),_e=f("<div class=leftMrg> "),Qe=f("<div class=bottombx><h4>"),Ze=f("<div>"),Je=f('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),et=f("<div style=padding:16px;margin-left:20px;>"),tt=f('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const V=I(()=>A(()=>import("./LoadingColorSpinner-31rekYeJ.js"),__vite__mapDeps([0,1,2,3]))),rt=I(()=>A(()=>import("./InputHr-BTu0l7U3.js"),__vite__mapDeps([4,1,2,5]))),B=I(()=>A(()=>import("./SVG-B_Pm6hj5.js"),__vite__mapDeps([6,1,2]))),nt=I(()=>A(()=>import("./DropDwnSearch-B2uh9hSi.js"),__vite__mapDeps([7,1,2,8,6,9]))),it=I(()=>A(()=>import("./ContainerElasticView-B189mQVU.js"),__vite__mapDeps([10,1,2,6,11]))),st=I(()=>A(()=>import("./ButonHrm-BmYLh4wA.js"),__vite__mapDeps([12,1,2,6,13]))),ue=I(()=>A(()=>import("./CheckBoxSlide-tzwWiQyb.js"),__vite__mapDeps([14,1,2,15]))),lt=I(()=>A(()=>import("./ItemOnEnvios-ColjmA-K.js"),__vite__mapDeps([16,1,2,17,18,10,6,11])));I(()=>A(()=>import("./ItemOnEnviosMobile-Bpxt-O4e.js"),__vite__mapDeps([19,1,2,17,18,10,6,11,8])));function xt(){const[e,l]=Z({list:{manifest:{id:"175-23834613",label:""},search:"",status:""}}),[i,v]=Z({}),[m,o]=Z({}),[b,x]=S(""),[p,L]=S(64),[M,E]=S(!1),[C,O]=S(!1),[Q,j]=S(""),F=ze(x,500),[he,re]=S(!1),[fe,ne]=S(!1),T=(a,c)=>{l("list",{[a]:c}),F(G())},ve=()=>{E(!M()),F(G())},be=()=>{O(!C()),F(G())};Ne(()=>{}),De(()=>{});const pe=()=>{L(a=>a+64)},$e=a=>{let c=Math.ceil(a?.length/64);Fe(pe,1250,c)},[D,{refetch:ht}]=Pe(b,async a=>{let c=e?.list?.manifest?.id;Q()!==c&&j(c);const N=await ut(c);v(N);let k=[],_={};var y={};return y=await ct(e?.list?.search,c,e?.list?.status,e?.list?.estate,e?.list?.city),o("prov",void 0),L(0),M()?z(y).map($=>{let d=y[$],n=d?.estate||d?.consigneeInfo?.ybestate;Oe?.[d?.zone]?.[n]||k.push(d)}):C()?z(y).map($=>{let d=y[$];d?.currentStatus||k.push(d)}):(z(y).map($=>{let d=y[$],n=d?.estate||d?.consigneeInfo?.ybestate,u=d?.city||d?.consigneeInfo?.ybcity;_[n]||(_[n]={cities:{},total:0}),_[n].cities?.[u]||(_[n].cities[u]=0),_[n].cities[u]+=1,_[n].total+=1,k.push(d)}),o("prov",_)),$e(k),k}),ie=()=>D()?.length,ye=a=>{l("list",{manifest:a,status:void 0}),F(G())},ke=()=>{dt(D())},xe=()=>{gt(D())},Ce=()=>{},we=(a,c)=>{T("estate",a),T("city",c)},Se=(a,c)=>{l("list",{estate:void 0,city:void 0}),F(G())},W=a=>a?" "+a:"",Ie=a=>{let c=a?.consigneeInfo;return W(c?.firstName)+W(c?.middleName)+W(c?.lastName)+W(c?.lastName2)},Ae=async()=>{let a=[],c=360;if(re(!0),D().length<c){const N=D().map(async(_,y)=>{let $=_?.tracking,d="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const n=new RegExp(d);$.length===13&&n.test($)&&($=$.slice(3,12));let g=await le($),s={state:_?.consigneeInfo?.ybestate,name:Ie(_),phoneNumber:_?.consigneeInfo?.phoneNumber,altPhoneNumber:_?.consigneeInfo?.altPhoneNumber,guiaWeek:_?.guia,bulto:_?.bagnumber,tracking:$,qr:g};a.push(s)});await Promise.all(N);let k=await Ve(a);window.open(k),re(!1)}else Te({text:`El limite de etiquetas a imprimir es de ${c}`,timeout:2500,id:G()})},Ee=async()=>{let a=[];ne(!0),setTimeout(async()=>{let c=3,N=301602,k=N+c,_=[],y=new Date().getFullYear().toString().slice(2,4);for(let n=N;n<k;n++)_.push("Y"+y+n);const $=_.map(async(n,u)=>{let s={mtrx:await le(n),lbl:n};a.push(s)});await Promise.all($);let d=await Re(a);window.open(d),ne(!1)},760)};return(()=>{var a=Ue(),c=a.firstChild,N=c.firstChild,k=N.nextSibling,_=k.firstChild,y=c.nextSibling,$=y.firstChild,d=y.nextSibling;return r(_,()=>e?.list?.manifest?.id),r(a,t(h,{get when(){return J?.profile?.isAdmin},get children(){return t(st,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:ke})}}),y),r($,t(nt,{list:Le,lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:n=>ye(n),width:"260px"})),r(y,t(h,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var n=qe();return r(n,t(rt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:u=>T("search",u)})),n})(),(()=>{var n=We(),u=n.firstChild,g=u.firstChild;return r(u,t(ue,{get initValue(){return M()},updChange:ve,color:"var(--background-red-ssg)"}),g),r(n,t(h,{get when(){return J?.profile?.isAdmin},get children(){var s=je(),w=s.firstChild;return r(s,t(ue,{get initValue(){return C()},updChange:be,color:"var(--background-red-ssg)"}),w),r(s,t(h,{get when(){return C()},get children(){var P=ee();return P.$$click=xe,r(P,t(B,{name:"outline_delete",size:24})),P}}),null),s}}),null),n})()]}}),null),r(d,t(h,{get when(){return e?.list?.manifest?.id},get children(){var n=Ye(),u=n.firstChild;return r(u,t(se,{fallback:g=>(()=>{var s=ae(),w=s.firstChild,P=w.nextSibling;return P.nextSibling,r(s,()=>g.toString(),P),s})(),get children(){return t(X,{get fallback(){return(()=>{var g=oe();return g.firstChild,r(g,t(V,{stroke:"rgb(200 25 60 / 1)",size:62}),null),g})()},get children(){return t(h,{get when(){return i?.total},get children(){return t(Y,{get each(){return z(i)},children:(g,s)=>q()?t(ot,{keyG:g,total:ie,get status(){return e?.list?.status},get amount(){return i?.[g]},updForm:T}):t(at,{keyG:g,total:ie,get status(){return e?.list?.status},get amount(){return i?.[g]},updForm:T})})}})}})}})),R(()=>H(n,`client_item_box gWXAaj jlytmu ${q()?"isMobile":""}`)),n}}),null),r(d,t(h,{get when(){return J?.profile?.isAdmin},get children(){var n=Xe(),u=n.firstChild,g=u.firstChild;return r(u,t(h,{get when(){return!fe()},get fallback(){return(()=>{var s=ce(),w=s.firstChild;return r(s,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),w),s})()},get children(){var s=ee();return s.$$click=Ee,r(s,t(B,{name:"printer",size:24,color:"firebrick"})),s}}),g),g.$$click=Ce,r(g,t(B,{name:"outline_renew",size:24})),r(u,t(h,{get when(){return!he()},get fallback(){return(()=>{var s=ce(),w=s.firstChild;return r(s,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),w),s})()},get children(){var s=ee();return s.$$click=Ae,r(s,t(B,{name:"printer",size:32})),s}}),null),n}}),null),r(d,t(h,{get when(){return m?.prov},get children(){var n=He(),u=n.firstChild,g=u.firstChild,s=u.nextSibling;return r(g,t(h,{get when(){return m?.prov},get children(){return t(Y,{get each(){return z(m?.prov)},children:(w,P)=>t(_t,{ism:w,get item(){return m?.prov?.[w]},updS:we})})}})),s.$$click=Se,r(s,t(B,{name:"Xclose",size:22})),R(()=>H(n,`client_item_box gWXAaj jlytmu ${q()?"isMobile":""}`)),n}}),null),r(d,t(se,{fallback:n=>(()=>{var u=ae(),g=u.firstChild,s=g.nextSibling;return s.nextSibling,r(u,()=>n.toString(),s),u})(),get children(){return t(X,{get fallback(){return(()=>{var n=oe();return n.firstChild,r(n,t(V,{stroke:"rgb(200 25 60 / 1)",size:62}),null),n})()},get children(){return t(h,{get when(){return D()},get children(){return t(Y,{get each(){return D()?.slice(0,p())},children:(n,u)=>t(lt,{item:n,refresh:()=>F(G())})})}})}})}}),null),R(n=>Me(d,` ${q()?"":"width:94vw;"} margin: 0 auto;`,n)),a})()}const at=e=>{const[l,i]=S(!1),[v,m]=S(0),o=()=>{let p=e?.keyG;e?.keyG==="total"&&(p=null),e?.updForm("status",p)},b=()=>{l()||!q()&&e?.keyG!=="total"&&(m(U?.[e?.keyG]?.length*8.5+"px"),i(!0))},x=()=>{m("0px"),l()&&i(!1)};return t(h,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var p=_e();return p.firstChild,r(p,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),null),p})()},get children(){var p=me(),L=p.firstChild,M=L.nextSibling;return p.$$mouseout=x,p.$$mousemove=b,p.$$click=o,r(p,t(h,{get when(){return l()},get children(){var E=Ke(),C=E.firstChild,O=C.firstChild,Q=O.firstChild;return r(Q,()=>U?.[e?.keyG]),R(j=>(j=v())!=null?C.style.setProperty("width",j):C.style.removeProperty("width")),E}}),L),r(L,t(B,{get name(){return de?.[e?.keyG]},size:22})),r(p,t(h,{get when(){return e?.keyG==="total"},get children(){var E=ge(),C=E.firstChild,O=C.nextSibling;return O.nextSibling,r(E,()=>e?.total(),O),E}}),M),r(M,()=>e?.amount),R(()=>H(p,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),p}})}})},ot=e=>{const l=()=>{let i=e?.keyG;e?.keyG==="total"&&(i=null),e?.updForm("status",i)};return t(h,{get when(){return e?.amount>0},get children(){return t(X,{get fallback(){return(()=>{var i=_e();return i.firstChild,r(i,t(V,{stroke:"rgb(200 25 60 / 1)",size:32}),null),i})()},get children(){var i=me(),v=i.firstChild,m=v.nextSibling;return i.$$click=l,r(v,t(B,{get name(){return de?.[e?.keyG]},size:22})),r(i,t(h,{get when(){return U?.[e?.keyG]},get children(){var o=Qe(),b=o.firstChild;return r(b,()=>U?.[e?.keyG]),o}}),m),r(i,t(h,{get when(){return e?.keyG==="total"},get children(){var o=ge(),b=o.firstChild,x=b.nextSibling;return x.nextSibling,r(o,()=>e?.total(),x),o}}),m),r(m,()=>e?.amount),R(()=>H(i,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),i}})}})},ct=async(e,l,i,v,m)=>{let o={params:{idairguide:l,":search5":l},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((b,x)=>{b&&(o.params[":search"+x]=b.trim())}),i&&(o.params[":status"]=i),v&&(o.params[":estate"]=v),m&&(o.params[":city"]=m),K?.roles?.agency&&(o.params[":agency"]=K?.roles?.agency+""),l&&Object.keys(o.params).length>=2){const b=await te(o);return b?.data?.error?{}:b}return{}},ut=async e=>{let l={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};K?.roles?.agency&&(l.params[":agency"]=K?.roles?.agency+"");const i=await te(l);return i?.data?.error?{}:i},dt=async e=>{e.map(l=>{l?.ssg_track_key,l?.idairguide})},gt=async e=>{e.map(l=>{l?.ssg_track_key,l?.idairguide})},Ct=async(e,l)=>{let i=[];e.map(v=>{let m={params:{ssg_track_key:v?.ssg_track_key,idairguide:v?.idairguide},data2update:{currentStatus:l},query:"updateLogisticYabaExpress"};i.push(m)}),Ge(i,mt)},mt=async e=>{const i=await te(e);if(i)return i},_t=e=>(()=>{var l=Ze();return r(l,t(h,{get when(){return e?.item?.total>0},get children(){var i=Je(),v=i.firstChild,m=v.firstChild,o=m.firstChild,b=m.nextSibling;return v.$$click=()=>e?.updS(e?.ism),r(m,()=>e?.ism,o),r(b,()=>e?.item?.total),i}}),null),r(l,t(it,{get children(){var i=et();return r(i,t(h,{get when(){return e?.item?.cities},get children(){return t(Y,{get each(){return z(e?.item?.cities)},children:(v,m)=>(()=>{var o=tt(),b=o.firstChild,x=b.nextSibling;return o.$$click=()=>e?.updS(e?.ism,v),r(b,v),r(x,()=>e?.item?.cities?.[v]),o})()})}})),i}}),null),l})();Be(["click","mousemove","mouseout"]);export{at as StatusGroupItem,xt as default,gt as deleteManifest,mt as fetchCSVInve,dt as loadManifest,Ct as updateManifest};
