const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BvUsLCUT.js","assets/index-BG1XGd9a.js","assets/index-DHvNTsK7.css","assets/InputHr-CtorjaJr.js","assets/InputHr-M3rJ9grQ.css","assets/DropDwnSearch-D_rXHoPV.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-Cp7SSLkC.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-Dybn4ql0.js","assets/ButonHrm-BPLzySnX.css","assets/CheckBoxSlide-D96pXDsx.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DNM_4WEK.js","assets/ItemOnEnviosMobile-BGutg9-U.js"])))=>i.map(i=>d[i]);
import{l as C,_ as S,c as H,a as E,u as be,p as $e,f as pe,b as ye,i as n,d as r,y as K,S as h,z as xe,F as T,j as O,m as P,k as N,A as V,B as U,g as I,E as ke,s as Ce,x as q,w as ee,D as Se,n as Y,e as we,t as _,Z as Ae,G as Ie,H as W,I as Ee}from"./index-BG1XGd9a.js";import{g as Ne,b as Be,S as De}from"./ShowQRPrintLabel-3dyhF4U3.js";var Ge=_("<div style=padding:4px>"),Le=_('<div class="icon_status centerBx">'),Me=_('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),Oe=_('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),Pe=_('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx">'),Fe=_('<div><div class="_dsplFlx flxWrp spaceAround ">'),Re=_('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),Ve=_('<div><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx">'),je=_('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),ze=_("<div> <!>."),Te=_("<div> "),qe=_("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),te=_("<h5 class=totalBagsNo> <!> / "),re=_('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),ne=_("<div class=leftMrg> "),We=_("<div class=bottombx><h4>"),Xe=_("<div>"),He=_('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),Ue=_("<div style=padding:16px;margin-left:20px;>"),Ye=_('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const Q=C(()=>S(()=>import("./LoadingColorSpinner-BvUsLCUT.js"),__vite__mapDeps([0,1,2]))),Qe=C(()=>S(()=>import("./InputHr-CtorjaJr.js"),__vite__mapDeps([3,1,2,4]))),F=C(()=>S(()=>import("./index-BG1XGd9a.js").then(e=>e.a7),__vite__mapDeps([1,2]))),Ze=C(()=>S(()=>import("./DropDwnSearch-D_rXHoPV.js"),__vite__mapDeps([5,1,2,6]))),Ke=C(()=>S(()=>import("./ContainerElasticView-Cp7SSLkC.js"),__vite__mapDeps([7,1,2,8]))),Je=C(()=>S(()=>import("./ButonHrm-Dybn4ql0.js"),__vite__mapDeps([9,1,2,10]))),J=C(()=>S(()=>import("./CheckBoxSlide-D96pXDsx.js"),__vite__mapDeps([11,1,2,12]))),et=C(()=>S(()=>import("./ItemOnEnvios-DNM_4WEK.js"),__vite__mapDeps([13,1,2,7,8])));C(()=>S(()=>import("./ItemOnEnviosMobile-BGutg9-U.js"),__vite__mapDeps([14,1,2,7,8])));function gt(){const[e,l]=H({list:{manifest:{id:"175-23834613",label:""},search:"",status:""}}),[s,m]=H({}),[u,c]=H({}),[f,y]=E(""),[v,B]=E(64),[D,w]=E(!1),[x,G]=E(!1),[X,j]=E(""),L=be(y,400),R=(o,g)=>{l("list",{[o]:g}),L(I())},se=()=>{w(!D()),L(I())},ie=()=>{G(!x()),L(I())};$e(()=>{}),pe(()=>{});const le=()=>{B(o=>o+64)},ae=o=>{let g=Math.ceil(o?.length/64);Ee(le,1250,g)},[A,{refetch:ot}]=ye(f,async o=>{let g=e?.list?.manifest?.id;X()!==g&&j(g);const b=await nt(e?.list?.search,g,e?.list?.status,e?.list?.estate,e?.list?.city),p=await st(g);m(p),c("prov",void 0),B(0);let $=[],t={};return D()?O(b).map(a=>{let i=b[a],d=i?.estate||i?.consigneeInfo?.ybestate;Ae?.[i?.zone]?.[d]||$.push(i)}):x()?O(b).map(a=>{let i=b[a];i?.currentStatus||$.push(i)}):(O(b).map(a=>{let i=b[a],d=i?.estate||i?.consigneeInfo?.ybestate,k=i?.city||i?.consigneeInfo?.ybcity;t[d]||(t[d]={cities:{},total:0}),t[d].cities?.[k]||(t[d].cities[k]=0),t[d].cities[k]+=1,t[d].total+=1,$.push(i)}),c("prov",t)),ae($),$}),Z=()=>A()?.length,ce=o=>{l("list",{manifest:o,status:void 0}),L(I())},oe=()=>{it(A())},ue=()=>{lt(A())},de=()=>{e.status},ge=(o,g)=>{R("estate",o),R("city",g)},_e=(o,g)=>{l("list",{estate:void 0,city:void 0}),L(I())},z=o=>o?" "+o:"",me=o=>{let g=o?.consigneeInfo;return z(g?.firstName)+z(g?.middleName)+z(g?.lastName)+z(g?.lastName2)},he=async()=>{let o=[];if(A().length<80){const g=A().map(async(p,$)=>{let t=p?.tracking,a="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const i=new RegExp(a);t.length===13&&i.test(t)&&(t=t.slice(3,12));let k=Ne(t);var M=await Be(k,"image/png");let fe=URL.createObjectURL(M),ve={state:p?.consigneeInfo?.ybestate,name:me(p),phoneNumber:p?.consigneeInfo?.phoneNumber,altPhoneNumber:p?.consigneeInfo?.altPhoneNumber,guiaWeek:p?.guia,bulto:p?.bagnumber,tracking:t,qr:fe};o.push(ve)});await Promise.all(g);let b=await De(o);window.open(b)}else Ie({text:"El limite de etiquetas a imprimir es de 80",timeout:2500,id:I()})};return(()=>{var o=je(),g=o.firstChild,b=g.nextSibling,p=b.firstChild,$=b.nextSibling;return n(o,r(h,{get when(){return K?.profile?.isAdmin},get children(){return r(Je,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:oe})}}),b),n(p,r(Ze,{list:xe,lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:t=>ce(t),width:"260px"})),n(b,r(h,{get when(){return e?.list?.manifest?.id},get children(){return[(()=>{var t=Ge();return n(t,r(Qe,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:a=>R("search",a)})),t})(),(()=>{var t=Oe(),a=t.firstChild,i=a.firstChild;return n(a,r(J,{get initValue(){return D()},updChange:se,color:"var(--background-red-ssg)"}),i),n(t,r(h,{get when(){return K?.profile?.isAdmin},get children(){var d=Me(),k=d.firstChild;return n(d,r(J,{get initValue(){return x()},updChange:ie,color:"var(--background-red-ssg)"}),k),n(d,r(h,{get when(){return x()},get children(){var M=Le();return M.$$click=ue,n(M,r(F,{name:"outline_delete",size:24})),M}}),null),d}}),null),t})()]}}),null),n($,r(h,{get when(){return!1},get children(){var t=Pe(),a=t.firstChild,i=a.firstChild;return i.$$click=de,n(i,r(F,{name:"outline_renew",size:24})),t}}),null),n($,r(h,{get when(){return e?.list?.manifest?.id},get children(){var t=Fe(),a=t.firstChild;return n(a,r(h,{get when(){return s?.total},get children(){return r(T,{get each(){return O(s)},children:(i,d)=>P()?r(rt,{keyG:i,total:Z,get status(){return e?.list?.status},get amount(){return s?.[i]},updForm:R}):r(tt,{keyG:i,total:Z,get status(){return e?.list?.status},get amount(){return s?.[i]},updForm:R})})}})),N(()=>V(t,`client_item_box gWXAaj jlytmu ${P()?"isMobile":""}`)),t}}),null),n($,r(h,{get when(){return u?.prov},get children(){var t=Re(),a=t.firstChild,i=a.firstChild,d=a.nextSibling;return n(i,r(h,{get when(){return u?.prov},get children(){return r(T,{get each(){return O(u?.prov)},children:(k,M)=>r(ct,{ism:k,get item(){return u?.prov?.[k]},updS:ge})})}})),d.$$click=_e,n(d,r(F,{name:"Xclose",size:22})),N(()=>V(t,`client_item_box gWXAaj jlytmu ${P()?"isMobile":""}`)),t}}),null),n($,r(h,{get when(){return e?.list?.manifest?.id},get children(){var t=Ve(),a=t.firstChild,i=a.firstChild;return i.$$click=he,n(i,r(F,{name:"printer",size:32})),N(()=>V(t,`client_item_box gWXAaj jlytmu ${P()?"isMobile":""}`)),t}}),null),n($,r(ke,{fallback:t=>(()=>{var a=ze(),i=a.firstChild,d=i.nextSibling;return d.nextSibling,n(a,()=>t.toString(),d),a})(),get children(){return r(U,{get fallback(){return(()=>{var t=Te();return t.firstChild,n(t,r(Q,{stroke:"rgb(200 25 60 / 1)",size:62}),null),t})()},get children(){return r(h,{get when(){return A()},get children(){return r(T,{get each(){return A()?.slice(0,v())},children:(t,a)=>r(et,{item:t,refresh:()=>L(I())})})}})}})}}),null),N(t=>Ce($,` ${P()?"":"width:94vw;"} margin: 0 auto;`,t)),o})()}const tt=e=>{const[l,s]=E(!1),[m,u]=E(0),c=()=>{let v=e?.keyG;e?.keyG==="total"&&(v=null),e?.updForm("status",v)},f=()=>{l()||!P()&&e?.keyG!=="total"&&(u(q?.[e?.keyG]?.length*8.5+"px"),s(!0))},y=()=>{u("0px"),l()&&s(!1)};return r(h,{get when(){return e?.amount>0},get children(){return r(U,{get fallback(){return(()=>{var v=ne();return v.firstChild,n(v,r(Q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),v})()},get children(){var v=re(),B=v.firstChild,D=B.nextSibling;return v.$$mouseout=y,v.$$mousemove=f,v.$$click=c,n(v,r(h,{get when(){return l()},get children(){var w=qe(),x=w.firstChild,G=x.firstChild,X=G.firstChild;return n(X,()=>q?.[e?.keyG]),N(j=>(j=m())!=null?x.style.setProperty("width",j):x.style.removeProperty("width")),w}}),B),n(B,r(F,{get name(){return ee?.[e?.keyG]},size:22})),n(v,r(h,{get when(){return e?.keyG==="total"},get children(){var w=te(),x=w.firstChild,G=x.nextSibling;return G.nextSibling,n(w,()=>e?.total(),G),w}}),D),n(D,()=>e?.amount),N(()=>V(v,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),v}})}})},rt=e=>{const l=()=>{let s=e?.keyG;e?.keyG==="total"&&(s=null),e?.updForm("status",s)};return r(h,{get when(){return e?.amount>0},get children(){return r(U,{get fallback(){return(()=>{var s=ne();return s.firstChild,n(s,r(Q,{stroke:"rgb(200 25 60 / 1)",size:32}),null),s})()},get children(){var s=re(),m=s.firstChild,u=m.nextSibling;return s.$$click=l,n(m,r(F,{get name(){return ee?.[e?.keyG]},size:22})),n(s,r(h,{get when(){return q?.[e?.keyG]},get children(){var c=We(),f=c.firstChild;return n(f,()=>q?.[e?.keyG]),c}}),u),n(s,r(h,{get when(){return e?.keyG==="total"},get children(){var c=te(),f=c.firstChild,y=f.nextSibling;return y.nextSibling,n(c,()=>e?.total(),y),c}}),u),n(u,()=>e?.amount),N(()=>V(s,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),s}})}})},nt=async(e,l,s,m,u)=>{let c={params:{idairguide:l,":search5":l},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"],query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND !* contain :search5 AND currentStatus = :status AND agency = :agency AND estate = :estate AND city = :city"};if(e&&e.split(" ").map((f,y)=>{f&&(c.params[":search"+y]=f.trim())}),s&&(c.params[":status"]=s),m&&(c.params[":estate"]=m),u&&(c.params[":city"]=u),W?.roles?.agency&&(c.params[":agency"]=W?.roles?.agency+""),l&&Object.keys(c.params).length>=2){const f=await Y(c);return f?.data?.error?{}:f}return{}},st=async e=>{let l={params:{idairguide:e},query:"getGroupStatusLogisticYabaExpress",queryString:"agency = :agency"};W?.roles?.agency&&(l.params[":agency"]=W?.roles?.agency+"");const s=await Y(l);return s?.data?.error?{}:s},it=async e=>{e.map(l=>{l?.ssg_track_key,l?.idairguide})},lt=async e=>{e.map(l=>{l?.ssg_track_key,l?.idairguide})},_t=async(e,l)=>{let s=[];e.map(m=>{let u={params:{ssg_track_key:m?.ssg_track_key,idairguide:m?.idairguide},data2update:{currentStatus:l},query:"updateLogisticYabaExpress"};s.push(u)}),Se(s,at)},at=async e=>{const s=await Y(e);if(s)return s},ct=e=>(()=>{var l=Xe();return n(l,r(h,{get when(){return e?.item?.total>0},get children(){var s=He(),m=s.firstChild,u=m.firstChild,c=u.firstChild,f=u.nextSibling;return m.$$click=()=>e?.updS(e?.ism),n(u,()=>e?.ism,c),n(f,()=>e?.item?.total),s}}),null),n(l,r(Ke,{get children(){var s=Ue();return n(s,r(h,{get when(){return e?.item?.cities},get children(){return r(T,{get each(){return O(e?.item?.cities)},children:(m,u)=>(()=>{var c=Ye(),f=c.firstChild,y=f.nextSibling;return c.$$click=()=>e?.updS(e?.ism,m),n(f,m),n(y,()=>e?.item?.cities?.[m]),c})()})}})),s}}),null),l})();we(["click","mousemove","mouseout"]);export{gt as default,lt as deleteManifest,at as fetchCSVInve,it as loadManifest,_t as updateManifest};
