import{a as n,c as ee,h as te,o as re,m as se,d as o,S as I,G as oe,i as a,f as ae,g as B,t as P}from"./index-B8K3ByHh.js";import{a as ne,u as le,g as h}from"./Util-uEfv1z7O.js";import{H as ie,a as ce}from"./html5-qrcode-scanner-Cl8XE5pu.js";import{u as de}from"./debounces-XeQf352o.js";import l from"./FlexSpace-CW2r0w84.js";import{h as me,S as ue}from"./ShowSSG-C31jtTxi.js";import{OpenToast as ge}from"./Toast-uQtVKY3c.js";import{OpenModal as L,CloseModal as q}from"./DialogHRM-CZBDGOO4.js";import"./index-Ci0zXM0r.js";import"./globalSignal-3qkZqgvF.js";var ye=P('<div class=scanWrp><div><div class=" _dsplFlx"><h3 class="errTxt err centerBx "></h3></div><div class=" _dsplFlx"><h3 class="errTxt ybcity centerBx"></h3></div><div class=" _dsplFlx"><h3 class="errTxt centerBx"></h3></div></div><div></div><div id=qr-reader style=width:300px>'),he=P("<slot name=plans style=margin-top:35px><div>"),pe=P("<div>esta funcion es solo para dispositivos mobiles");function $e(N){const[Q,j]=n([]),[c,_]=ee({}),[W,Y]=n(""),[$,T]=n(),[Z,z]=n(),[A,J]=n(""),[D,M]=n(""),[p,R]=n("");te(()=>{}),re(()=>{T(!1),ne("cameraScanLoc")?.clear()}),se(()=>{setTimeout(()=>{X()},90)});const k=(t,e)=>{J(e),M(t),setTimeout(()=>{M("")},1300)},K=t=>{R(t),setTimeout(()=>{R("")},2e3)},E=(t,e)=>{t!==Z()&&(z(t),setTimeout(()=>{z("")},3e3),U(t))},U=t=>{t||(t=W()),t=t.split("'").join("-"),Y(""),!p()&&V(t)},V=async t=>{let e=await me(t,N?.status);if(e?.data){if(e?.data?.isSSG)F();else{k("","success"),ge({text:`Pertenece a ${e?.data?.city?e?.data?.city:""}${e?.data?.estate?" :: "+e?.data?.estate:""}`,timeout:3500,theme:"green",id:h()});let r={consigneeInfo:{ybcity:e?.data?.city,ybestate:e?.data?.estate}};_(r),K(h()),G({color:e?.color,msg1:e?.data?.city,msg2:e?.data?.estate,bagnumber:e?.data?.bagnumber})}j([...Q(),e.data])}else e?.error&&(e?.error?.isSSG?F():(G({color:e?.error?.color,msg1:e?.error?.scanData?.consigneeInfo?.ybcity,msg2:e?.error?.scanData?.consigneeInfo?.ybestate,bagnumber:e?.error?.scanData?.consigneeInfo?.bagnumber}),k("",e?.error?.alert),_(e?.error?.scanData)))},X=()=>{T(!0);let t={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[ie.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0},e=new ce("qr-reader",t);e.render(E),le("cameraScanLoc",e)};de(E,400);const F=t=>{let e=h(),r={};r.id=e,r.overlayColor="rgb(200 25 60)",r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=o(ue,{modalId:e}),L(r),setTimeout(()=>{q(e)},1e3)},G=t=>{let e=h(),r={};r.id=e,r.overlayColor=t.overlayColor,r.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},r.content=o(ShowScanAlert,{modalId:e,get bagnumber(){return t.bagnumber},get msg1(){return t.msg1},get msg2(){return t.msg2}}),L(r),setTimeout(()=>{q(e)},1e3)};return o(I,{when:!0,get fallback(){return pe()},get children(){return o(I,{get when(){return $()},get children(){var t=he(),e=t.firstChild;return t._$owner=oe(),a(t,o(I,{get when(){return $()},style:"margin-top: 35px",get children(){var r=ye(),i=r.firstChild,d=i.firstChild,m=d.firstChild,u=d.nextSibling,g=u.firstChild,v=u.nextSibling,y=v.firstChild,f=i.nextSibling;return a(d,o(l,{}),m),a(m,D),a(d,o(l,{}),null),a(u,o(l,{}),g),a(g,()=>c?.consigneeInfo?.ybcity),a(u,o(l,{}),null),a(v,o(l,{}),y),a(y,()=>c?.consigneeInfo?.ybestate),a(v,o(l,{}),null),ae(s=>{var H=`scanOverlayFront ${A()}`,S=p()?"block":"none",b=300/D()?.length*1.73+"px",w=300/c?.consigneeInfo?.ybcity?.length*1.13+"px",x=300/c?.consigneeInfo?.ybestate?.length*1.23+"px",O=`scanOverlay  ${A()} `,C=p()?"block":"none";return H!==s.e&&B(i,s.e=H),S!==s.t&&((s.t=S)!=null?i.style.setProperty("display",S):i.style.removeProperty("display")),b!==s.a&&((s.a=b)!=null?m.style.setProperty("font-size",b):m.style.removeProperty("font-size")),w!==s.o&&((s.o=w)!=null?g.style.setProperty("font-size",w):g.style.removeProperty("font-size")),x!==s.i&&((s.i=x)!=null?y.style.setProperty("font-size",x):y.style.removeProperty("font-size")),O!==s.n&&B(f,s.n=O),C!==s.s&&((s.s=C)!=null?f.style.setProperty("display",C):f.style.removeProperty("display")),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),r}}),e),t}})}})}export{$e as default};
