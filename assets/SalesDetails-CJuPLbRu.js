const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-Bqi6dCjg.js","assets/index-BVfadb6y.js","assets/index-DI_XrWgU.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-pvCX2wTj.js","assets/debounces-CElaE6xx.js","assets/SVG-LCo5ObZa.js","assets/DropDwnSearch-DMkLkRPc.css","assets/CheckBoxSlide-ajo7he9w.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/FlexSpace-CFLL4crq.js","assets/ButonHrm-C3-e3Mom.js","assets/ButonHrm-BSeWNUGQ.css","assets/UpdInventory-CGE6Mqgm.js","assets/DialogHRM-DfFAgRQ9.js","assets/DialogHRM-V9_lZntj.css","assets/DashProducts-CwOIdxyA.js","assets/App.module-CbHnVtRQ.js","assets/App-BDG5NEkI.css","assets/InputHr-DAw4euwU.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as Q,_ as V,c as D,G as ve,a as K,o as Ce,b as xe,d as X,i as t,e as a,S,F as le,b4 as ce,f as R,b5 as Se,J as we,k as de,m as N,z as me,g as Oe,x as fe,n as F,p as T,U as Pe,D as ke,r as Ie,t as w,b6 as qe,w as ne,v as L,b7 as oe,O as ie,al as ue,ax as je}from"./index-BVfadb6y.js";import{u as Be}from"./debounces-CElaE6xx.js";import{OpenModal as Ee}from"./DialogHRM-DfFAgRQ9.js";import{g as be,a as pe}from"./handelImagesServices-sE9KGXuO.js";import{LookupInventory as he}from"./DashInventoryMov-C97mfNPj.js";import{LookupProducts as re}from"./DashProducts-CwOIdxyA.js";import{a as Ae}from"./print_invoice_service-DZA7Ff1M.js";import{OpenToast as Y}from"./Toast-C1SPobmY.js";import"./browser-image-compression-BVJ4p9S0.js";import"./AddInventory-C3gfmRz2.js";import"./FlexSpace-CFLL4crq.js";import"./App.module-CbHnVtRQ.js";import"./fontkit.es-17Zq-CjM.js";import"./InitPrintServices-BPaecJE-.js";import"./qrcode-DHy8FFhS.js";var Ne=w('<div style="padding:50px 0"><section class=qsuVSc><section class=bLl6je><section class=dvPdhb>'),ge=w('<div style=margin:15px class=" spaceAround centerBx">'),Te=w('<section class=KgyCAd><section class=WirBi><div class=EMijzc><p class=jhB0af>Agregar reserva</p><section class="Jm2qx centerBx flxWrp spaceAround "><span class=label aria-hidden=true>Mercancia:</span><select class=RIw0b aria-label=merchandise></select><div class="centerBx bottombx "><h5 class="">Solo Arancel</h5></div></section><div style=margin:15px class=" spaceAround centerBx"><div style=margin:7px></div><div style=margin:7px>'),Ue=w('<section class=qsuVSc><section class=bLl6je><section class=dvPdhb></section></section><section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b">'),De=w("<option> "),Fe=w('<div class="centerBx spaceAround"><div class="centerBx bottombx "><h5 class="">Taxes'),Qe=w('<p class=B7xUP><span data-test-integ-cart-subtotal-label="">Taxes Estimado</span><span data-test-integ-cart-subtotal-value="">$'),Ve=w('<section class=rtS8wf><div class=X3QHFf><div class="LhAUHc evth2b"><div class=kDdWge><div class=QCNFEe><p class=jhB0af>Sumario de la Orden</p></div><div class=qntUl><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Subtotal</span><span data-test-integ-cart-subtotal-value="">$</span></p><p class=B7xUP><span data-test-integ-cart-subtotal-label=""class=OGw7rb>Total Estimado</span><span data-test-integ-cart-subtotal-value=""class=OGw7rb> $</span></p></div></div><div class=oPYFfd><section class=BQHvme><section class=wo08ff><span class=PwY8l2>Fecha:</span><span class=PwY8l33> </span></section><section class=wo08ff><span class=PwY8l2>Invoice:</span><span class=PwY8l33></span></section><section class=wo08ff><span class=PwY8l2>Almacen:</span><span class=PwY8l33> </span></section></section></div><section class="JM2zDb RW86"><div class="centerBx bottombx flxWrp spaceAround">'),_e=w("<section class=dEfaq><section class=JpKBkb><button class=yjHiqb><span>Remove"),Le=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Me=w("<span class=arancelSep> | "),Ye=w('<span class="arancel pricePq"> $'),Je=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx><span aria-hidden=true>Qty:</span><span aria-hidden=true class=PwY8l33></span></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price=""class=pricePq>$</span>'),Re=w('<div class=option-header style=padding:17px;margin:5px><span class=option-icon> </span><div class=" centerBx"><span class="option-name ">Env√≠o <!> '),Ge=w("<div class=separator>"),ze=w('<div class="icon_status centerBx "style="margin:0 4px">'),He=w('<div style=padding:8px><div class=" centerBx"><p class=jhB0af>Envia</p></div><div class="bottombx flxWrp spaceAround centerBx"><h4 class=centerBx></h4><h4 class="centerBx phonesNum"></h4></div><div class=separator></div><div class=centerBx><p class=jhB0af>Recibe</p><div class="icon_status centerBx "style="margin:0 4px"></div></div><div class="bottombx spaceAround "><h5></h5><h4></h4><h4 class=" textleft phonesNum"></h4></div><div class="bottombx flxWrp spaceAround centerBx"><p class="textleft "></p><h4></h4></div><div class="bottombx flxWrp spaceAround centerBx"><h5 class="textleft "></h5><h4>'),We=w('<section class="h6rxkc ">'),Ke=w('<section class=KgyCAd><section class=WirBi><section class=""><div class=QCNFEe><p class=jhB0af>Agregar mercancias</p></div><section class="EMijzc centerBx"><div class="icon_status centerBx "style="margin:0 4px"></div><div class="icon_status centerBx "style="margin:0 4px">'),Xe=w('<section class=kGEQJf><section class=Z722Ge><section class=VcJUVb><section class=h7Oog><span class=YdB1ac><img class=bwpkad alt=sf></span><section class=pFJUxe><section class=wDj5sf><span data-line-number=1><span class=XNnpOb href=#> </span></span></section><section class=DHk3Fe><section class=Jm2qx></section><p class=GehUpe data-test-line-item-price=""><span data-test-integ-cart-current-price="">$'),Ze=w('<div class="bottombx centerBx streetcmp"><h5></h5><h4>'),et=w('<div class="centerBx flxWrp">'),tt=w('<div><div class=QCNFEe><p class=jhB0af>Enviar a Solve D Cargo</p></div><p class=B7xUP><span data-test-integ-cart-subtotal-label="">Esta seguro de querer enviar a Solve D Cargo tenga en cuenta que puede duplicar la informacion</span></p><div class=separator></div><div style=margin:15px class=" spaceAround centerBx">');Q(()=>V(()=>import("./LoadingColorSpinner-Bqi6dCjg.js"),__vite__mapDeps([0,1,2,3])));Q(()=>V(()=>import("./DropDwnSearch-pvCX2wTj.js"),__vite__mapDeps([4,1,2,5,6,7])));const $e=Q(()=>V(()=>import("./CheckBoxSlide-ajo7he9w.js"),__vite__mapDeps([8,1,2,9]))),ae=Q(()=>V(()=>import("./FlexSpace-CFLL4crq.js"),__vite__mapDeps([10,1,2]))),J=Q(()=>V(()=>import("./ButonHrm-C3-e3Mom.js"),__vite__mapDeps([11,1,2,6,12])));Q(()=>V(()=>import("./UpdInventory-CGE6Mqgm.js"),__vite__mapDeps([13,1,2,14,15,5,16,17,18,10])));const W=Q(()=>V(()=>import("./InputHr-DAw4euwU.js"),__vite__mapDeps([19,1,2,20]))),se=Q(()=>V(()=>import("./SVG-LCo5ObZa.js"),__vite__mapDeps([6,1,2]))),[y,j]=D({manifestObj:{}});let it=864e5;function kt(){const[e,s]=ve();D(),D(),D();const[o,p]=K("");Be(p,400),Ce(()=>{}),xe(()=>{});const g=async()=>{if(e?.mId){let m={":search0":e?.mId,businessId:N?.profile?.businessYId},r=await ye(m);j("manifestObj",r[e?.mId])}};return X(async()=>{j("manifestObj",void 0),g(),qe()}),(()=>{var m=Ne(),r=m.firstChild,n=r.firstChild,h=n.firstChild;return t(m,a(S,{get when(){return y?.manifestObj?.packagesOrder},get children(){return a(lt,{})}}),r),t(h,a(S,{get when(){return y?.manifestObj?.products},get children(){return a(le,{get each(){return y?.manifestObj?.products},children:(C,u)=>a(st,{itm:C})})}})),t(r,a(S,{get when(){return y?.manifestObj?.packagesOrder&&!y?.manifestObj?.isCompleted},get children(){return a(ot,{})}}),null),t(r,a(rt,{get item(){return y?.manifestObj},get list(){return y?.manifestObj}}),null),m})()}const lt=e=>{const s={type:"",qty:0,arancel:0,price:0},[o,p]=D({frm:{...s}}),g=(n,h)=>{p("frm",n,h)},m=n=>{let h={...o?.frm};h.key=je();let C=y?.manifestObj?.reservas||[],u=ne(C);u.push(h),console.log(h),j("manifestObj","reservas",u),p("frm",{...s})},r=n=>{g("type",n),ce?.list.filter(C=>C.id===n)?.[0]?.isA?g("onlyTariff",!0):g("onlyTariff",!1)};return(()=>{var n=Ue(),h=n.firstChild,C=h.firstChild,u=h.nextSibling,_=u.firstChild,f=_.firstChild;return t(C,a(S,{get when(){return y?.manifestObj?.reservas},get children(){return a(le,{get each(){return y?.manifestObj?.reservas},children:(d,l)=>a(nt,{itm:d})})}})),t(n,a(S,{get when(){return!y?.manifestObj?.isCompleted},get children(){var d=Te(),l=d.firstChild,i=l.firstChild,c=i.firstChild,b=c.nextSibling,v=b.firstChild,$=v.nextSibling,k=$.nextSibling,P=k.firstChild,x=b.nextSibling,E=x.firstChild,U=E.nextSibling;return $.addEventListener("change",O=>{r(O?.target?.value)}),t($,a(le,{get each(){return ce?.list},children:(O,Z)=>(()=>{var q=De();return q.firstChild,t(q,()=>O.label,null),R(()=>q.selected=O.id===o?.frm?.type),R(()=>q.value=O.id),q})()})),t(k,a($e,{get initValue(){return o?.frm?.onlyTariff},updChange:O=>g("onlyTariff",O),color:"var(--background-red-ssg)"}),P),t(x,a(S,{get when(){return!o?.frm?.onlyTariff&&o?.frm?.type},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return o?.frm?.qty||""},label:"cantidad (lbs)",colors:"#2b2b2b",type:"number",handleClick:O=>g("qty",Se(O))})}}),E),t(x,a(S,{get when(){return o?.frm?.qty&&o?.frm?.type},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return o?.frm?.price||""},label:"precio",colors:"#2b2b2b",handleClick:O=>g("price",O)})}}),U),t(x,a(S,{get when(){return o?.frm?.type},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",type:"number",get value(){return o?.frm?.arancel||""},label:"Arancel",colors:"#2b2b2b",handleClick:O=>g("arancel",O)})}}),null),t(i,a(S,{get when(){return(o?.frm?.price&&o?.frm?.qty||o?.frm?.onlyTariff&&o?.frm?.arancel)&&o?.frm?.type},get children(){var O=ge();return t(O,a(J,{color:"#646cff",label:"Agregar",handleClick:m})),O}}),null),d}}),u),t(f,a(at,{get item(){return y?.manifestObj?.shipper_consignee}})),n})()},rt=e=>{const s=m=>{let r=0;return e?.item?.products?.map(n=>{r+=H(n?.qty)*H(n?.salePrice)*-1}),e?.item?.reservas?.map(n=>{r+=H(n?.qty)*H(n?.price)+H(n?.arancel)}),r},o=async m=>{let r={...e?.item};r.amount=s();let n=await Ae(r);window.open(n)},p=async()=>{let m={...e?.item},r={params:{businessId:N?.profile?.businessYId,id:m.ssg_sorder_key},form:{isCompleted:!1}},n=F(431007);r={...r,...n},await T(r)},g=async m=>{let r=ne(e?.item);r.isCompleted=!0,r.dayNum=r?.createDate/it;let n={params:{businessId:N?.profile?.businessYId,id:r.ssg_sorder_key},form:r},h=F(431007);if(n={...n,...h},await T(n),r?.products?.length>0){let _={params:{businessId:N?.profile?.businessYId},form:r},f=F(139003);_={..._,...f},await T(_)}let C={":search0":r.ssg_sorder_key,businessId:N?.profile?.businessYId},u=await ye(C);j("manifestObj",u[r.ssg_sorder_key])};return(()=>{var m=Ve(),r=m.firstChild,n=r.firstChild,h=n.firstChild,C=h.firstChild,u=C.nextSibling,_=u.firstChild,f=_.firstChild,d=f.nextSibling;d.firstChild;var l=_.nextSibling,i=l.firstChild,c=i.nextSibling;c.firstChild;var b=h.nextSibling,v=b.firstChild,$=v.firstChild,k=$.firstChild,P=k.nextSibling;P.firstChild;var x=$.nextSibling,E=x.firstChild,U=E.nextSibling,O=x.nextSibling,Z=O.firstChild,q=Z.nextSibling;q.firstChild;var ee=b.nextSibling,G=ee.firstChild;return t(h,a(S,{get when(){return!y?.manifestObj?.isCompleted},get children(){return[(()=>{var B=Fe(),A=B.firstChild,M=A.firstChild;return t(A,a($e,{get initValue(){return y?.manifestObj?.hasTax},updChange:z=>j("manifestObj","hasTax",z),color:"var(--background-red-ssg)"}),M),B})(),(()=>{var B=ge();return t(B,a(S,{get when(){return y?.manifestObj?.hasTax},get children(){return a(W,{width:"80px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return y?.manifestObj?.TaxPercent||""},label:"Porciento de Impuestos",colors:"#2b2b2b",type:"number",handleClick:A=>j("manifestObj","TaxPercent",A)})}})),B})()]}}),u),t(d,()=>s().toFixed(2),null),t(u,a(S,{get when(){return y?.manifestObj?.hasTax&&y?.manifestObj?.TaxPercent},get children(){var B=Qe(),A=B.firstChild,M=A.nextSibling;return M.firstChild,t(M,()=>(s()*(y?.manifestObj?.TaxPercent/100)).toFixed(2),null),B}}),l),t(c,()=>(s()*((y?.manifestObj?.TaxPercent?y?.manifestObj?.TaxPercent:0)/100)+s()).toFixed(2),null),t(P,()=>we(e?.item?.createDate),null),t(U,()=>e?.item?.invoice),t(q,()=>de("storeGroupBy")?.[e?.item?.store]?.label,null),t(G,a(J,{color:"#646cff",label:"Imprimir",handleClick:o}),null),t(G,a(S,{get when(){return!e?.item?.isCompleted},get children(){return a(J,{color:"#646cff",label:"Confirmar",handleClick:g})}}),null),t(G,a(S,{get when(){return e?.item?.isCompleted&&N?.profile?.isAdmin},get children(){return a(J,{color:"#646cff",label:"arrow",handleClick:p})}}),null),m})()},st=e=>{const[s,o]=D(),p=()=>s?.[e?.itm?.product?.id]?.productImageUrl?be()+pe()+"/"+s?.[e?.itm?.product?.id]?.productImageUrl:null,g=async()=>{let r=e?.itm?.product?.id,n=`${r}`,h=await re(n);h?.[r]?.productImageUrl&&o(r,h?.[r])};X(()=>{g()});const m=()=>{console.log(e?.itm);let r=ne(y?.manifestObj?.products);delete r[e?.itm?.product?.id],j("manifestObj","products",r)};return a(S,{get when(){return e?.itm?.salePrice},get children(){var r=Le(),n=r.firstChild,h=n.firstChild,C=h.firstChild,u=C.firstChild,_=u.firstChild,f=u.nextSibling,d=f.firstChild,l=d.firstChild,i=l.firstChild;i.firstChild;var c=d.nextSibling,b=c.firstChild,v=b.firstChild,$=v.nextSibling,k=b.nextSibling,P=k.firstChild;return P.firstChild,t(i,()=>e?.itm?.product?.label,null),t($,()=>e?.itm?.qty*-1),t(P,()=>(e?.itm?.salePrice*1).toFixed(2),null),t(c,a(S,{get when(){return!y?.manifestObj?.isCompleted},get children(){var x=_e(),E=x.firstChild,U=E.firstChild;return U.$$click=m,x}}),null),R(()=>me(_,"src",p())),r}})},nt=e=>{const[s,o]=D(),p=async()=>{let m=e?.itm?.product?.id,r=`${m}`,n=await re(r);n?.[m]?.productImageUrl&&o(m,n?.[m])};X(()=>{p()});const g=()=>{let r=ne(y?.manifestObj?.reservas).filter(n=>n.key!==e?.itm?.key);j("manifestObj","reservas",r)};return(()=>{var m=Je(),r=m.firstChild,n=r.firstChild,h=n.firstChild,C=h.firstChild,u=C.firstChild,_=u.firstChild,f=_.firstChild;f.firstChild;var d=u.nextSibling,l=d.firstChild,i=l.firstChild,c=i.nextSibling,b=l.nextSibling,v=b.firstChild;return v.firstChild,t(f,()=>e?.itm?.type,null),t(c,()=>e?.itm?.qty*1),t(v,()=>(e?.itm?.price*1).toFixed(2),null),t(b,a(S,{get when(){return e?.itm?.arancel},get children(){return[Me(),(()=>{var $=Ye();return $.firstChild,t($,()=>(e?.itm?.arancel*1).toFixed(2),null),$})()]}}),null),t(d,a(S,{get when(){return!y?.manifestObj?.isCompleted},get children(){var $=_e(),k=$.firstChild,P=k.firstChild;return P.$$click=g,$}}),null),m})()},at=e=>{const[s,o]=K(),[p,g]=K(!0),m=l=>l?" "+l:"",r=l=>m(l?.firstName)+m(l?.middleName)+m(l?.lastName)+m(l?.lastName2),n=l=>{let i=m(l?.altPhoneNumber);return m(l?.phoneNumber)+(i?" |"+i:"")},h=async()=>{let l={};l.id=L(),l.closeEvent=()=>{},l.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},l.content=a(ft,{confirm:C}),Ee(l)},C=async()=>{let l=N?.profile?.agency?.id;if(l&&e?.item?.citiId&&e?.item?.provinceId){let i=e?.item,c=`;${I(i?.firstName)};${I(i?.middleName)};${I(i?.lastName)};${I(i?.lastName2)};N/A;${I(i?.cid)};CUB;${I(i?.phoneNumber)};${I(i?.altPhoneNumber)};${I(i?.ybstreet)};${I(i?.ybstreetNo)};${I(i?.ybbetwen1)};${I(i?.ybbetwen2)};${I(i?.ybreparto)};;${i?.citiId};${i?.provinceId};${I(i?.email)};;${l}`;u("consignee",c)}},u=async(l,i,c)=>{let b=`funcname=insertRecord&option=${l}&params=${i}`,v={query:"querySolveGlobal"};v.params={query:b},await T(v)},_=async()=>{let l={params:{id:e?.item?.name,key:"shipper"}},i=F(181009);l={...l,...i};const c=await T(l);let b=oe(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],c,e?.item);console.log(b),c.cid===e?.item?.cid&&console.log()},f=async()=>{let l={params:{id:e?.item?.cid,key:"consignee"}},i=F(181009);l={...l,...i};const c=await T(l);return console.log(c),oe(["cid","firstName","phoneNumber","lastName","lastName2","middleName","ybbetwen1","ybbetwen2","ybcity","ybestate","ybreparto","ybstreet","ybstreetNo"],c,e?.item).hasChange&&c.cid===e?.item?.cid?e?.item:c},d=async(l,i)=>{let c=await f();console.log(c)};return X(()=>{if(e?.item?.ybestate){let l=de("M023009")?.provincias?.filter?.(i=>i.label===e?.item?.ybestate)?.[0];if(l?.id&&o(l),e?.item?.ybcity){let i=l?.cities?.filter?.(c=>c.label===e?.item?.ybcity)?.[0];i?.id&&j("manifestObj","shipper_consignee","citiId",i?.id)}}d()}),console.log(e?.item),a(S,{get when(){return e?.item?.name},get children(){return[a(S,{get when(){return e?.item?.shipping},get children(){return[(()=>{var l=Re(),i=l.firstChild;i.firstChild;var c=i.nextSibling,b=c.firstChild,v=b.firstChild,$=v.nextSibling;return $.nextSibling,t(i,()=>e?.item?.shipping==="AEREO"?"‚úàÔ∏è":"üö¢",null),t(b,()=>e?.item?.shipping==="AEREO"?"a√©reo":"mar√≠timo",$),l})(),Ge()]}}),(()=>{var l=He(),i=l.firstChild;i.firstChild;var c=i.nextSibling,b=c.firstChild,v=b.nextSibling,$=c.nextSibling,k=$.nextSibling,P=k.firstChild,x=P.nextSibling,E=k.nextSibling,U=E.firstChild,O=U.nextSibling,Z=O.nextSibling,q=E.nextSibling,ee=q.firstChild,G=ee.nextSibling,B=q.nextSibling,A=B.firstChild,M=A.nextSibling;return t(i,a(ae,{}),null),t(b,()=>e?.item?.name),v.$$click=_,t(v,()=>e?.item?.phoneNumberS),t(k,a(ae,{}),x),x.$$click=f,t(x,a(se,{name:"success",size:22,get color(){return p()?"#37be5fff":"#c6c6c6"}})),t(k,a(S,{get when(){return!p()},get children(){var z=ze();return z.$$click=h,t(z,a(se,{name:"send",size:22,color:"#646cff"})),z}}),null),t(U,()=>e?.item?.cid),t(O,()=>r(e?.item)),t(Z,()=>n(e?.item)),t(ee,()=>mt(e?.item)),t(G,()=>e?.item?.ybreparto),t(A,()=>e?.item?.ybcity),t(M,()=>e?.item?.ybestate),R(()=>Oe(l,`    ${fe()?"isMobile":""}`)),l})()]}})},It=async(e,s)=>{let o={params:e,data2update:s},p=F(431007);return o={...o,...p},await T(o)},ye=async e=>{let s={params:e},o=F(431002);return s={...s,...o},await T(s)},qt=async e=>{let s=[];e.map(o=>{let p={params:{id:o?.ssg_track_key,idairguide:"all"}},g=F(802002);p={...p,...g},s.push(p)}),Pe(s,ct)},ct=async e=>{const o=await T(e);if(o)return o},ot=e=>{const[s,o]=K(""),[p,g]=K(1),m=()=>{p()===1&&s().length>5&&r(s())},r=async u=>{N?.profile?.agencyStore?.id;let _=`${u}`,f=await re(_),d=ie(f)?.[0],l=`${d} `,i=await he(l),c=0,b=0;ie(i)?.map(P=>{i[P]?.products?.map(x=>{d===x?.product?.id&&(c+=x?.price*1*x?.qty*1,b+=x?.qty*1)})});let v=1,$={};y?.manifestObj?.products?.map(P=>{let x={...P};d===P.product.id&&(x.qty=x.qty*-1),$[P.product.id]=x}),$?.[d]&&(v=$?.[d].qty*1+1);const k=b?c/b:0;if(f?.[d]?.salePrice)if(b&&f?.[d]?.salePrice&&b-v>=0){if($?.[d])$[d].qty=v*-1;else{let x={product:{id:d,label:f?.[d]?.name,code:f?.[d]?.code},qty:v*-1,price:k,salePrice:f?.[d]?.salePrice};$[d]=x}let P=ue($);j("manifestObj","products",P),o(""),Y({text:f?.[d]?.name+" agregado al carrito",timeout:3500,theme:"blue",id:L()})}else Y({text:"Sin Existencia",timeout:3500,theme:"red",id:L()});else{Y({text:"Sin precio de venta",timeout:3500,theme:"red",id:L()});return}},[n,{refetch:h}]=ke(s,async u=>{if(p()===2&&u.length>3){const _=await re(u);let f=[];return ie(_).map(d=>{let l=_[d];f.push(l)}),f}else return[]}),C=()=>{o(""),g(1)};return(()=>{var u=Ke(),_=u.firstChild,f=_.firstChild,d=f.firstChild,l=d.nextSibling,i=l.firstChild,c=i.nextSibling;return t(f,a(S,{get when(){return n()?.length>0},get children(){var b=We();return t(b,a(le,{get each(){return n()},children:(v,$)=>a(dt,{itm:v,clearTx:C})})),b}}),l),t(l,a(W,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return s()},placeholder:"buscar productos ...",colors:"#2b2b2b",handleClick:o,onEnter:m}),i),i.$$click=()=>g(1),t(i,a(se,{name:"qrcode-scan",size:22,get color(){return p()===1?"#646cff":""}})),c.$$click=()=>g(2),t(c,a(se,{name:"keyboard",size:22,get color(){return p()===2?"#646cff":""}})),u})()},dt=e=>{const[s,o]=D(),p=()=>s?.prod?.productImageUrl?be()+pe()+"/"+s?.prod?.productImageUrl:null;X(()=>{o("prod",e?.itm)}),Array.from(Array(10).keys());const g=async m=>{let r=N?.profile?.agencyStore?.id,n=s?.prod?.ssg_product_key,h=`${n} ${r}`,C=await he(h),u=0,_=0;ie(C)?.map(i=>{C[i]?.products?.map(c=>{n===c?.product?.id&&(u+=c?.price*1*c?.qty*1,_+=c?.qty*1)})});let f=1,d={};y?.manifestObj?.products?.map(i=>{let c={...i};n===i.product.id&&(c.qty=c.qty*-1),d[i.product.id]=c}),d?.[n]&&(f=d?.[n].qty*1+1);const l=_?u/_:0;if(s?.prod?.salePrice)if(_&&s?.prod?.salePrice&&_-f>=0){if(d?.[n])d[n].qty=f*-1;else{let c={product:{id:n,label:s?.prod?.name,code:s?.prod?.code},qty:f*-1,price:l,salePrice:s?.prod?.salePrice};d[n]=c}let i=ue(d);j("manifestObj","products",i),e?.clearTx(),Y({text:s?.prod?.name+" agregado al carrito",timeout:3500,theme:"blue",id:L()})}else e?.clearTx(),Y({text:"Sin Existencia",timeout:3500,theme:"red",id:L()});else{Y({text:"Sin precio de venta",timeout:3500,theme:"red",id:L()});return}};return a(S,{get when(){return e?.itm?.salePrice},get children(){var m=Xe(),r=m.firstChild,n=r.firstChild,h=n.firstChild,C=h.firstChild,u=C.firstChild,_=C.nextSibling,f=_.firstChild,d=f.firstChild,l=d.firstChild;l.firstChild;var i=f.nextSibling,c=i.firstChild,b=c.nextSibling,v=b.firstChild;return v.firstChild,t(l,()=>e?.itm?.name,null),t(c,a(J,{color:"#646cff",label:"Agregar",handleClick:g})),t(v,()=>(e?.itm?.salePrice*1).toFixed(2),null),R(()=>me(u,"src",p())),m}})},te=(e,s)=>s?(()=>{var o=Ze(),p=o.firstChild,g=p.nextSibling;return t(p," "+e),t(g,s),o})():"",mt=e=>(()=>{var s=et();return t(s,()=>te("Calle",e?.ybstreet),null),t(s,()=>te("#",e?.ybstreetNo),null),t(s,()=>te("E/",e?.ybbetwen1),null),t(s,()=>te("y",e?.ybbetwen2),null),s})(),H=e=>e?e*1:0,I=e=>e?e.toString().toUpperCase().trim():"";function ft(e){return(()=>{var s=tt(),o=s.firstChild,p=o.nextSibling,g=p.nextSibling,m=g.nextSibling;return s.style.setProperty("max-height","80vh"),s.style.setProperty("overflow","auto"),s.style.setProperty("background","#fff"),s.style.setProperty("border-radius","11px"),s.style.setProperty("padding"," 0 21px"),o.style.setProperty("padding","21px"),t(m,a(ae,{}),null),t(m,a(J,{color:"#646cff",icon:"send",label:"Enviar",get handleClick(){return e.confirm}}),null),R(r=>(r=fe()?"96vw":"420px")!=null?s.style.setProperty("width",r):s.style.removeProperty("width")),s})()}Ie(["click"]);export{kt as default,ct as fetchCSVInve,mt as getAddress,H as isValNum,qt as loadInventory,It as updConfirmSale};
