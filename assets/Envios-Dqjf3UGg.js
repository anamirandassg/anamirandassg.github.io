const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BslwOo_k.js","assets/index-Bw9zjTY_.js","assets/index-lCkr9jrN.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-CdLCZs0_.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-BaZuCb4a.js","assets/Util-D2O-IqKB.js","assets/DropDwnSearch-Dma0ZOpG.js","assets/debounces-BAQxtSR9.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-BmYmZ_8G.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-BTqmP-Fh.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-yBWjUd0b.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-BWFQn7x-.js","assets/DialogHRM-C941CJHx.js","assets/DialogHRM-V9_lZntj.css","assets/ShowQRPrintLabel-3TqYO2zP.js","assets/PDFButton-85Y0gBbC.js","assets/qrcode-DHy8FFhS.js","assets/fontkit.es-AFz-JHBR.js","assets/InitPrintServices-DgotkDNu.js","assets/Toast-CacXzZdD.js","assets/Toast-DLpFKn-Q.css","assets/ShowPdfResume-BYlUnSLo.js"])))=>i.map(i=>d[i]);
import{l as B,_ as D,c as ie,a as M,o as je,j as qe,b as Qe,n as We,i as n,d as t,m as ae,S as h,k as Xe,v as He,E as he,w as ne,F as re,g as K,e as H,f as le,s as Ue,h as Ye,t as b,x as se}from"./index-Bw9zjTY_.js";import{l as Je,a as G,O as W,g as P,b as z,e as ve,f as Z,h as Ke,s as Ze}from"./Util-D2O-IqKB.js";import{u as et}from"./debounces-BAQxtSR9.js";import{g as fe,l as tt}from"./ShowQRPrintLabel-3TqYO2zP.js";import"./Toast-CacXzZdD.js";import"./DialogHRM-C941CJHx.js";import"./PDFButton-85Y0gBbC.js";import"./qrcode-DHy8FFhS.js";import"./fontkit.es-AFz-JHBR.js";import"./InitPrintServices-DgotkDNu.js";var oe=b("<div style=padding:4px>"),J=b('<div class="icon_status centerBx">'),rt=b('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),nt=b('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),lt=b('<div><div class="_dsplFlx flxWrp spaceAround ">'),st=b('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),it=b('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div><div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround ">'),_e=b("<div> <!>."),be=b("<div> "),at=b("<div class=centerBx><h5 style=margin-left:12px>generando excel"),ot=b("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),ct=b("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),ye=b("<h5 class=totalBagsNo> <!> / "),pe=b('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),$e=b("<div class=leftMrg> "),ut=b("<div class=bottombx><h4>"),dt=b('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),gt=b("<div style=padding:16px;margin-left:20px;>"),mt=b("<div>"),ht=b('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const X=B(()=>D(()=>import("./LoadingColorSpinner-BslwOo_k.js"),__vite__mapDeps([0,1,2,3]))),ft=B(()=>D(()=>import("./InputHr-CdLCZs0_.js"),__vite__mapDeps([4,1,2,5]))),O=B(()=>D(()=>import("./SVG-BaZuCb4a.js"),__vite__mapDeps([6,1,2,7]))),ce=B(()=>D(()=>import("./DropDwnSearch-Dma0ZOpG.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),_t=B(()=>D(()=>import("./ContainerElasticView-BmYmZ_8G.js"),__vite__mapDeps([11,1,2,6,7,12]))),bt=B(()=>D(()=>import("./ButonHrm-BTqmP-Fh.js"),__vite__mapDeps([13,1,2,6,7,14]))),ue=B(()=>D(()=>import("./CheckBoxSlide-yBWjUd0b.js"),__vite__mapDeps([15,1,2,16]))),vt=B(()=>D(()=>import("./ItemOnEnvios-BWFQn7x-.js"),__vite__mapDeps([17,1,2,7,18,19,11,6,12,20,21,22,23,24,25,26])));B(()=>D(()=>import("./ShowPdfResume-BYlUnSLo.js"),__vite__mapDeps([27,1,2,20,21,7,22,23,24,25,26])));function Lt(){const[e,s]=ie({list:{manifest:{id:"",label:""},guia:{id:"",label:""},search:"",status:""}}),[l,a]=ie({}),[c,g]=ie({}),[p,f]=M(""),[u,I]=M(!1),[R,E]=M(64),[A,T]=M(!1),[j,ee]=M(!1),[xe,Ce]=M(""),F=et(f,500);M(!1);const[we,de]=M(!1),[Se,ge]=M(!1),N=(o,i)=>{s("list",{[o]:i}),F(P())},Ie=()=>{T(!A()),F(P())},Me=()=>{I(!u()),F(P())},Ee=()=>{ee(!j()),F(P())};je(()=>{}),qe(()=>{});const Ae=()=>{E(o=>o+64)},Ge=o=>{let i=Math.ceil(o?.length/64);Ze(Ae,1250,i)},[U,{refetch:It}]=Qe(p,async o=>{a(void 0),g("prov",void 0);let i=e?.list?.guia?.id;xe()!==i&&Ce(i);let S={},x=[],C={};var $={};if(i&&(S=await kt(i)),!u())a(S?.sumary),g("prov",S?.provinceGroup);else{let Y=e?.list?.manifest?.id;console.log(e?.list?.search,i,Y),$=await $t(e?.list?.search,i,Y,e?.list?.status,e?.list?.estate,e?.list?.city,e?.list?.agency?.id),a(S?.sumary),E(0);let L={};if(A())W($).map(v=>{let _=$[v],d=_?.estate||_?.consigneeInfo?.ybestate;L[v]?x.push(_):L[v]=1,G("M023009")?.ZoneCity?.[_?.zone]?.[d]||x.push(_)});else if(j()){let v={};W($).map(_=>{let d=$[_];d?.estate||d?.consigneeInfo?.ybestate,d?.hbls.map(w=>{v[w?.hbl]?(x.push(d),x.push(v[w?.hbl])):v[w?.hbl]=d}),d?.bagnumber})}else W($).map(v=>{let _=$[v],d=_?.estate||_?.consigneeInfo?.ybestate,w=_?.city||_?.consigneeInfo?.ybcity;(d||w)&&(C[d]||(C[d]={cities:{},total:0}),C[d].cities?.[w]||(C[d].cities[w]=0),C[d].cities[w]+=1,C[d].total+=1),x.push(_)}),g("prov",C);Ge(x)}return x}),me=()=>U()?.length,Be=o=>{s("list",{guia:o,status:void 0}),F(P())},De=()=>{wt()},Pe=()=>{Ct(U())},Oe=()=>{},Fe=(o,i)=>{N("estate",o),N("city",i)},Ne=(o,i)=>{s("list",{estate:void 0,city:void 0}),F(P())},q=o=>o?" "+o:"",Le=o=>{let i=o?.consigneeInfo;return q(i?.firstName)+q(i?.middleName)+q(i?.lastName)+q(i?.lastName2)},Ve=o=>{let i=o?.consigneeInfo,S=q(i?.altPhoneNumber);return q(i?.phoneNumber)+(S?" | "+S:"")},ze=async()=>{let o=[];ge(!0),setTimeout(async()=>{let i=[[900115,900114],[900107,900106]],S=new Date().getFullYear().toString().slice(2,4);const x=i.map(async($,Y)=>{let L=$[0],v=$[1],_="SS"+S;const d=await fe(_+""+L),w=await fe(_+""+v);let te={mtrx:d,mtrx2:w,lbl:_+""+L,lbl2:_+""+v};o.push(te)});await Promise.all(x);let C=await tt(o);window.open(C),ge(!1)},760)},Re=async()=>{de(!0);let o=[];U().map(async(i,S)=>{let x=i?.estate||i?.consigneeInfo?.ybestate,C=i?.city||i?.consigneeInfo?.ybcity,$={provincia:x,ciudad:C,nombre:Le(i),telefonos:Ve(i),bulto:i?.bagnumber,hbls:i?.hblS};o.push($)}),Ke(`guia_${P()}.csv`,o),de(!1)},Te=async o=>{await xt(e?.list?.manifest?.id)};return We(()=>{}),(()=>{var o=it(),i=o.firstChild,S=i.firstChild,x=S.nextSibling,C=x.firstChild,$=x.nextSibling,Y=$.firstChild,L=i.nextSibling,v=L.nextSibling,_=v.firstChild,d=v.nextSibling,w=d.firstChild,te=w.firstChild;return n(C,()=>e?.list?.guia?.id),n($,t(ue,{get initValue(){return u()},updChange:Me,color:"var(--background-red-ssg)"}),Y),n(o,t(h,{get when(){return ae?.profile?.isAdmin},get children(){return t(bt,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:De})}}),v),n(_,t(ce,{get list(){return Je()},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.guia?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:r=>Be(r),width:"160px"})),n(v,t(h,{get when(){return Xe(()=>!!e?.list?.guia?.id)()&&u()},get children(){return[(()=>{var r=oe();return n(r,t(ce,{get list(){return G("M023009")?.manifestList[e?.list?.guia?.id]},lbl_empty:"Manifiesto",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",hasDebounce:!0,borderActiveColor:"var(--background-red-ssg)",onSelect:m=>N("manifest",m),width:"180px"})),r})(),(()=>{var r=oe();return n(r,t(h,{get when(){return He()},get children(){return t(ce,{get list(){return G("M023009")?.agencies},lbl_empty:"Agencia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.agency?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:m=>N("agency",m),width:"260px"})}})),r})(),(()=>{var r=oe();return n(r,t(ft,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:m=>N("search",m)})),r})(),(()=>{var r=nt(),m=r.firstChild,y=m.firstChild;return n(m,t(ue,{get initValue(){return A()},updChange:Ie,color:"var(--background-red-ssg)"}),y),n(r,t(h,{get when(){return ae?.profile?.isAdmin},get children(){var k=rt(),Q=k.firstChild;return n(k,t(ue,{get initValue(){return j()},updChange:Ee,color:"var(--background-red-ssg)"}),Q),n(k,t(h,{get when(){return j()},get children(){var V=J();return V.$$click=Pe,n(V,t(O,{name:"outline_delete",size:24})),V}}),null),k}}),null),r})()]}}),null),n(d,t(h,{get when(){return e?.list?.guia?.id},get children(){var r=lt(),m=r.firstChild;return n(m,t(he,{fallback:y=>(()=>{var k=_e(),Q=k.firstChild,V=Q.nextSibling;return V.nextSibling,n(k,()=>y.toString(),V),k})(),get children(){return t(ne,{get fallback(){return(()=>{var y=be();return y.firstChild,n(y,t(X,{stroke:"rgb(200 25 60 / 1)",size:62}),null),y})()},get children(){return t(h,{get when(){return l?.total},get children(){return t(re,{get each(){return W(l)},children:(y,k)=>K()?t(pt,{keyG:y,total:me,get status(){return e?.list?.status},get amount(){return l?.[y]},get showItems(){return u()},updForm:N}):t(yt,{keyG:y,total:me,get showItems(){return u()},get status(){return e?.list?.status},get amount(){return l?.[y]},updForm:N})})}})}})}})),H(()=>le(r,`client_item_box gWXAaj jlytmu ${K()?"isMobile":""}`)),r}}),w),n(te,t(h,{get when(){return u()},get children(){return t(h,{get when(){return!we()},get fallback(){return(()=>{var r=at(),m=r.firstChild;return n(r,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),m),r})()},get children(){var r=J();return r.$$click=Re,n(r,t(O,{name:"grid",size:24,color:"firebrick"})),r}})}}),null),n(te,t(h,{get when(){return ae?.profile?.isAdmin},get children(){return[t(h,{get when(){return!Se()},get fallback(){return(()=>{var r=ot(),m=r.firstChild;return n(r,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),m),r})()},get children(){var r=J();return r.$$click=ze,n(r,t(O,{name:"printer",size:24,color:"firebrick"})),r}}),(()=>{var r=J();return r.$$click=Te,n(r,t(O,{name:"tag-outline",size:24})),r})(),(()=>{var r=J();return r.$$click=Oe,n(r,t(O,{name:"outline_renew",size:24})),r})()]}}),null),n(d,t(h,{get when(){return c?.prov},get children(){var r=st(),m=r.firstChild,y=m.firstChild,k=m.nextSibling;return n(y,t(h,{get when(){return c?.prov},get children(){return t(re,{get each(){return W(c?.prov)},children:(Q,V)=>t(St,{ism:Q,get item(){return c?.prov?.[Q]},updS:Fe})})}})),k.$$click=Ne,n(k,t(O,{name:"Xclose",size:22})),H(()=>le(r,`client_item_box gWXAaj jlytmu ${K()?"isMobile":""}`)),r}}),null),n(d,t(he,{fallback:r=>(()=>{var m=_e(),y=m.firstChild,k=y.nextSibling;return k.nextSibling,n(m,()=>r.toString(),k),m})(),get children(){return t(ne,{get fallback(){return(()=>{var r=be();return r.firstChild,n(r,t(X,{stroke:"rgb(200 25 60 / 1)",size:62}),null),r})()},get children(){return t(h,{get when(){return U()},get children(){return t(re,{get each(){return U()?.slice(0,R())},children:(r,m)=>t(vt,{item:r,refresh:()=>F(P())})})}})}})}}),null),H(r=>Ue(d,` ${K()?"":"width:94vw;"} margin: 0 auto;`,r)),o})()}const yt=e=>{const[s,l]=M(!1),[a,c]=M(0),g=()=>{let u=e?.keyG;e?.keyG==="total"&&(u=null),e?.updForm("status",u)},p=()=>{s()||!K()&&e?.keyG!=="total"&&(c(G("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),l(!0))},f=()=>{c("0px"),s()&&l(!1)};return t(h,{get when(){return e?.amount>0},get children(){return t(ne,{get fallback(){return(()=>{var u=$e();return u.firstChild,n(u,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),null),u})()},get children(){var u=pe(),I=u.firstChild,R=I.nextSibling;return u.$$mouseout=f,u.$$mousemove=p,u.$$click=g,n(u,t(h,{get when(){return s()},get children(){var E=ct(),A=E.firstChild,T=A.firstChild,j=T.firstChild;return n(j,()=>G("M023009")?.statusObjDesc?.[e?.keyG]),H(ee=>(ee=a())!=null?A.style.setProperty("width",ee):A.style.removeProperty("width")),E}}),I),n(I,t(O,{get name(){return G("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(u,t(h,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var E=ye(),A=E.firstChild,T=A.nextSibling;return T.nextSibling,n(E,()=>e?.total(),T),E}}),R),n(R,()=>e?.amount),H(()=>le(u,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),u}})}})},pt=e=>{const s=()=>{let l=e?.keyG;e?.keyG==="total"&&(l=null),e?.updForm("status",l)};return t(h,{get when(){return e?.amount>0},get children(){return t(ne,{get fallback(){return(()=>{var l=$e();return l.firstChild,n(l,t(X,{stroke:"rgb(200 25 60 / 1)",size:32}),null),l})()},get children(){var l=pe(),a=l.firstChild,c=a.nextSibling;return l.$$click=s,n(a,t(O,{get name(){return G("M023009")?.statusListIcons?.[e?.keyG]},size:22})),n(l,t(h,{get when(){return G("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var g=ut(),p=g.firstChild;return n(p,()=>G("M023009")?.statusObjDesc?.[e?.keyG]),g}}),c),n(l,t(h,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var g=ye(),p=g.firstChild,f=p.nextSibling;return f.nextSibling,n(g,()=>e?.total(),f),g}}),c),n(c,()=>e?.amount),H(()=>le(l,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),l}})}})},$t=async(e,s,l,a,c,g,p)=>{let f={params:{idairguide:s},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:lastName2","consigneeInfo:ybstreet","consigneeInfo:ybstreetNo","consigneeInfo:ybbetwen1","consigneeInfo:ybbetwen2","consigneeInfo:ybreparto","consigneeInfo:ybestate","consigneeInfo:ybcity","deliveryUserId","deliveryTime","isSSG","hbls"]};e&&e.split(" ").map((I,R)=>{I&&(f.params[":search"+R]=I.trim())}),s&&(f.params[":guia"]=s+""),l&&(f.params[":search5"]=l),a&&(f.params[":status"]=a),c&&(f.params[":estate"]=c),g&&(f.params[":city"]=g),se?.roles?.agency?f.params[":agency"]=se?.roles?.agency+"":p&&(f.params[":agency"]=p);let u=z(802001);if(f={...f,...u},s&&Object.keys(f.params)?.length>=2){const I=await Z(f);return I?.data?.error?{}:I}return{}},kt=async e=>{let s={params:{idairguide:e,":guia":e}},l=z(802004);s={...s,...l},se?.roles?.agency&&(s.params[":agency"]=se?.roles?.agency+"");const a=await Z(s);return a?.error?{}:a},xt=async e=>{let s={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},l=z(802001);s={...s,...l};const a=await Z(s);return a?.error?{}:a},Vt=async e=>{e.map(s=>{let l={params:{id:s?.ssg_track_key,idairguide:s?.guia}},a=z(802002);l={...l,...a}})},Ct=async e=>{let s=[];e.map(l=>{let a={params:{ssg_track_key:l?.ssg_track_key,idairguide:l?.guia}},c=z(809005);a={...a,...c},s.push(a)}),ve(s,ke)},zt=async(e,s)=>{let l=[];e.map(a=>{let c={params:{ssg_track_key:a?.ssg_track_key,idairguide:a?.guia},data2update:{currentStatus:s}},g=z(802004);c={...c,...g},l.push(c)}),ve(l,ke)},ke=async e=>{const l=await Z(e);if(l)return l},wt=async()=>{let e=z(9898298);const l=await Z(e);if(l)return l},St=e=>(()=>{var s=mt();return n(s,t(h,{get when(){return e?.item?.total>0},get children(){var l=dt(),a=l.firstChild,c=a.firstChild,g=c.firstChild,p=c.nextSibling;return a.$$click=()=>e?.updS(e?.ism),n(c,()=>e?.ism,g),n(p,()=>e?.item?.total),l}}),null),n(s,t(_t,{get children(){var l=gt();return n(l,t(h,{get when(){return e?.item?.cities},get children(){return t(re,{get each(){return W(e?.item?.cities)},children:(a,c)=>(()=>{var g=ht(),p=g.firstChild,f=p.nextSibling;return g.$$click=()=>e?.updS(e?.ism,a),n(p,a),n(f,()=>e?.item?.cities?.[a]),g})()})}})),l}}),null),s})();Ye(["click","mousemove","mouseout"]);export{yt as StatusGroupItem,Lt as default,Ct as deleteManifest,ke as fetchCSVInve,wt as getList,Vt as loadManifest,zt as updateManifest};
