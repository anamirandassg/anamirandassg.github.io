const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CrhjULV4.js","assets/index-CuNkZEd1.js","assets/index-DGHHyjai.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/InputHr-C5LKwhL3.js","assets/InputHr-M3rJ9grQ.css","assets/SVG-ZhpDD54Q.js","assets/index-Ci0zXM0r.js","assets/DropDwnSearch-BJ6oh8hO.js","assets/debounces-B9SXNqdh.js","assets/DropDwnSearch-DMkLkRPc.css","assets/ContainerElasticView-DN2lx85k.js","assets/ContainerElasticView-LzOd6fDI.css","assets/ButonHrm-DOt2etrg.js","assets/Util-C3g4YF4U.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-BSfZRonz.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/ItemOnEnvios-DiCnoTf4.js","assets/DialogHRM-BM3AJvrK.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-CvhqR1_P.js","assets/ShowQRPrintLabel-DOIqoxLB.js","assets/fontkit.es-DEjOtITv.js","assets/qrcode-C5vWJp7P.js","assets/InitPrintServices-DbRso5zn.js","assets/Toast-5eMTqcJQ.js","assets/Toast-DLpFKn-Q.css","assets/ItemOnEnviosMobile-DjaX0EMt.js"])))=>i.map(i=>d[i]);
import{l as O,_ as L,c as ne,a as P,o as Ve,h as qe,b as Re,i as r,d as t,f as j,e as Te,t as p,j as le,S as $,w as je,E as ge,q as K,F as J,g as ee,s as Qe,x as te}from"./index-CuNkZEd1.js";import{c as We,f as re,a as I,O as T,g as G,d as Ye,q as Q,e as Xe}from"./Util-C3g4YF4U.js";import{u as He}from"./debounces-B9SXNqdh.js";import{i as X}from"./globalSignal-CvhqR1_P.js";import{g as se,S as Ue,l as Ze}from"./ShowQRPrintLabel-DOIqoxLB.js";import{OpenToast as Je}from"./Toast-5eMTqcJQ.js";import"./index-Ci0zXM0r.js";import"./fontkit.es-DEjOtITv.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-DbRso5zn.js";var Ke=p("<div style=padding:4px>"),Z=p('<div class="icon_status centerBx">'),et=p('<div class="centerBx bottombx"style=margin-top:10px;><h5>Duplicados'),tt=p('<div><div class="centerBx bottombx "><h5 class="">Manifiesto Incorrecto'),rt=p('<div><div class="_dsplFlx flxWrp spaceAround ">'),nt=p('<div class="client_item_box gWXAaj jlytmu"><div class="_dsplFlx flxWrp spaceAround "><div class="icon_status centerBx"></div><div class="icon_status centerBx">'),lt=p('<div><div class="centerBx100 centerBx"><div class=plans></div></div><div class="icon_status centerBx">'),st=p('<div><div class="_dsplFlx flxWrp spaceAround centerBx"><h2>Envios</h2><div class="centerBx bottombx"style=margin-top:10px;><h4></h4></div><div class="centerBx bottombx "><h5 class="">Mostrar Envios</h5></div></div><div class="_dsplFlx flxWrp spaceAround centerBx"><div style=padding:4px></div></div><div>'),it=p("<div class=centerBx><h5 style=margin-left:12px>generando excel"),me=p("<div> <!>."),he=p("<div> "),fe=p("<div class=centerBx><h5 style=margin-left:12px>generando etiquetas"),at=p("<div class=icon_info><div class=boxOpenInfo><div class=boxInfo><span>"),_e=p("<h5 class=totalBagsNo> <!> / "),ve=p('<div><div class="icon_status centerBx"></div><h5 class=""></h5>'),be=p("<div class=leftMrg> "),ot=p("<div class=bottombx><h4>"),ct=p('<div class="_dsplFlx bottombx lowbordr"><div class=" bottombx spaceAround centerBx"><h5> :</h5><h4>'),ut=p("<div style=padding:16px;margin-left:20px;>"),dt=p("<div>"),gt=p('<div class="bottombx left centerBx"style=text-align:left;><h4></h4><h5>');const F=O(()=>L(()=>import("./LoadingColorSpinner-CrhjULV4.js"),__vite__mapDeps([0,1,2,3]))),mt=O(()=>L(()=>import("./InputHr-C5LKwhL3.js"),__vite__mapDeps([4,1,2,5]))),D=O(()=>L(()=>import("./SVG-ZhpDD54Q.js"),__vite__mapDeps([6,1,2,7]))),ht=O(()=>L(()=>import("./DropDwnSearch-BJ6oh8hO.js"),__vite__mapDeps([8,1,2,9,6,7,10]))),ft=O(()=>L(()=>import("./ContainerElasticView-DN2lx85k.js"),__vite__mapDeps([11,1,2,6,7,12]))),_t=O(()=>L(()=>import("./ButonHrm-DOt2etrg.js"),__vite__mapDeps([13,1,2,6,7,14,15]))),ie=O(()=>L(()=>import("./CheckBoxSlide-BSfZRonz.js"),__vite__mapDeps([16,1,2,17]))),vt=O(()=>L(()=>import("./ItemOnEnvios-DiCnoTf4.js"),__vite__mapDeps([18,1,2,14,7,19,20,11,6,12,21,22,23,24,25,26,27])));O(()=>L(()=>import("./ItemOnEnviosMobile-DjaX0EMt.js"),__vite__mapDeps([28,1,2,14,7,19,20,9,21])));function zt(){const[e,i]=ne({list:{manifest:{id:"",label:""},search:"",status:""}}),[n,o]=ne({}),[h,u]=ne({}),[C,w]=P(""),[d,W]=P(!1),[H,B]=P(64),[A,V]=P(!1),[q,U]=P(!1),[$e,pe]=P(""),z=He(w,500),[ye,ae]=P(!1),[ke,oe]=P(!1),[xe,ce]=P(!1),Y=(a,s)=>{i("list",{[a]:s}),z(G())},Ce=()=>{V(!A()),z(G())},we=()=>{W(!d()),z(G())},Se=()=>{U(!q()),z(G())};Ve(()=>{}),qe(()=>{});const Ie=()=>{B(a=>a+64)},Ee=a=>{let s=Math.ceil(a?.length/64);Xe(Ie,1250,s)},[N,{refetch:It}]=Re(C,async a=>{o(void 0),u("prov",void 0);let s=e?.list?.manifest?.id;$e()!==s&&pe(s);let S={},k=[],g={};var x={};if(s&&(S=await yt(s)),!d())o(S?.sumary),u("prov",S?.provinceGroup);else{x=await pt(e?.list?.search,s,e?.list?.status,e?.list?.estate,e?.list?.city),o(S?.sumary),B(0);let E={};A()?T(x).map(y=>{let f=x[y],_=f?.estate||f?.consigneeInfo?.ybestate;E[y]?k.push(f):E[y]=1,I("M023009")?.ZoneCity?.[f?.zone]?.[_]||k.push(f)}):q()?T(x).map(y=>{let f=x[y],_="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const l=new RegExp(_);f.tracking?.length===13&&l.test(f.tracking)&&k.push(f),f?.currentStatus||k.push(f)}):(T(x).map(y=>{let f=x[y],_=f?.estate||f?.consigneeInfo?.ybestate,l=f?.city||f?.consigneeInfo?.ybcity;(_||l)&&(g[_]||(g[_]={cities:{},total:0}),g[_].cities?.[l]||(g[_].cities[l]=0),g[_].cities[l]+=1,g[_].total+=1),k.push(f)}),u("prov",g)),Ee(k)}return k}),ue=()=>N()?.length,Me=a=>{i("list",{manifest:a,status:void 0}),z(G())},Pe=()=>{xt(N())},Be=()=>{Ct(N())},Ae=()=>{},Ge=(a,s)=>{Y("estate",a),Y("city",s)},De=(a,s)=>{i("list",{estate:void 0,city:void 0}),z(G())},R=a=>a?" "+a:"",de=a=>{let s=a?.consigneeInfo;return R(s?.firstName)+R(s?.middleName)+R(s?.lastName)+R(s?.lastName2)},Oe=a=>{let s=a?.consigneeInfo,S=R(s?.altPhoneNumber);return R(s?.phoneNumber)+(S?" | "+S:"")},Le=async()=>{let a=[],s=360;if(ae(!0),N()?.length<s){const S=N().map(async(g,x)=>{let E=g?.tracking,y="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const f=new RegExp(y);E?.length===13&&f.test(E)&&(E=E.slice(3,12));let l=await se(E),m={provincia:g?.consigneeInfo?.ybestate,name:de(g),phoneNumber:get(g),altPhoneNumber:g?.consigneeInfo?.altPhoneNumber,guiaWeek:g?.guia,bulto:g?.bagnumber,tracking:E,qr:l};a.push(m)});await Promise.all(S);let k=await Ue(a);window.open(k),ae(!1)}else Je({text:`El limite de etiquetas a imprimir es de ${s}`,timeout:2500,id:G()})},Ne=async()=>{let a=[];ce(!0),setTimeout(async()=>{let s=400,S=619124,k=[],g=new Date().getFullYear().toString().slice(2,4);for(let y=0;y<s;y++)k.push(y);const x=k.map(async(y,f)=>{let _=S+y*2,l=_+1;const m=await se("Y"+g+_),c=await se("Y"+g+l);let v={mtrx:m,mtrx2:c,lbl:"Y"+g+_,lbl2:"Y"+g+l};a.push(v)});await Promise.all(x);let E=await Ze(a);window.open(E),ce(!1)},760)},ze=async()=>{oe(!0);let a=[];N().map(async(s,S)=>{let k=s?.estate||s?.consigneeInfo?.ybestate,g=s?.city||s?.consigneeInfo?.ybcity,x={provincia:k,ciudad:g,nombre:de(s),telefonos:Oe(s),guia:s?.idairguide,bulto:s?.bagnumber,hbls:s?.hblS};a.push(x)}),Ye(`listas_caneados_${G()}.csv`,a),oe(!1)},Fe=async a=>{await kt(e?.list?.manifest?.id)};return(()=>{var a=st(),s=a.firstChild,S=s.firstChild,k=S.nextSibling,g=k.firstChild,x=k.nextSibling,E=x.firstChild,y=s.nextSibling,f=y.firstChild,_=y.nextSibling;return r(g,()=>e?.list?.manifest?.id),r(x,t(ie,{get initValue(){return d()},updChange:we,color:"var(--background-red-ssg)"}),E),r(a,t($,{get when(){return le?.profile?.isAdmin},get children(){return t(_t,{color:"rgb(200 25 60 / 1)",label:"updManifest",handleClick:Pe})}}),y),r(f,t(ht,{get list(){return I("M023009")?.manifestList},lbl_empty:"Guia",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return e?.list?.manifest?.id},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:l=>Me(l),width:"260px"})),r(y,t($,{get when(){return je(()=>!!e?.list?.manifest?.id)()&&d()},get children(){return[(()=>{var l=Ke();return r(l,t(mt,{width:"260px",backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return e?.list?.search},placeholder:"search...",colors:"#2b2b2b",handleClick:m=>Y("search",m)})),l})(),(()=>{var l=tt(),m=l.firstChild,c=m.firstChild;return r(m,t(ie,{get initValue(){return A()},updChange:Ce,color:"var(--background-red-ssg)"}),c),r(l,t($,{get when(){return le?.profile?.isAdmin},get children(){var v=et(),b=v.firstChild;return r(v,t(ie,{get initValue(){return q()},updChange:Se,color:"var(--background-red-ssg)"}),b),r(v,t($,{get when(){return q()},get children(){var M=Z();return M.$$click=Be,r(M,t(D,{name:"outline_delete",size:24})),M}}),null),v}}),null),l})()]}}),null),r(_,t($,{get when(){return e?.list?.manifest?.id},get children(){var l=rt(),m=l.firstChild;return r(l,t($,{get when(){return d()},get children(){return t($,{get when(){return!ke()},get fallback(){return(()=>{var c=it(),v=c.firstChild;return r(c,t(F,{stroke:"rgb(200 25 60 / 1)",size:32}),v),c})()},get children(){var c=Z();return c.$$click=ze,r(c,t(D,{name:"grid",size:24,color:"firebrick"})),c}})}}),m),r(m,t(ge,{fallback:c=>(()=>{var v=me(),b=v.firstChild,M=b.nextSibling;return M.nextSibling,r(v,()=>c.toString(),M),v})(),get children(){return t(K,{get fallback(){return(()=>{var c=he();return c.firstChild,r(c,t(F,{stroke:"rgb(200 25 60 / 1)",size:62}),null),c})()},get children(){return t($,{get when(){return n?.total},get children(){return t(J,{get each(){return T(n)},children:(c,v)=>X()?t($t,{keyG:c,total:ue,get status(){return e?.list?.status},get amount(){return n?.[c]},get showItems(){return d()},updForm:Y}):t(bt,{keyG:c,total:ue,get showItems(){return d()},get status(){return e?.list?.status},get amount(){return n?.[c]},updForm:Y})})}})}})}})),j(()=>ee(l,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),l}}),null),r(_,t($,{get when(){return le?.profile?.isAdmin},get children(){var l=nt(),m=l.firstChild,c=m.firstChild,v=c.nextSibling;return r(m,t($,{get when(){return!xe()},get fallback(){return(()=>{var b=fe(),M=b.firstChild;return r(b,t(F,{stroke:"rgb(200 25 60 / 1)",size:32}),M),b})()},get children(){var b=Z();return b.$$click=Ne,r(b,t(D,{name:"printer",size:24,color:"firebrick"})),b}}),c),c.$$click=Fe,r(c,t(D,{name:"tag-outline",size:24})),v.$$click=Ae,r(v,t(D,{name:"outline_renew",size:24})),r(m,t($,{get when(){return!ye()},get fallback(){return(()=>{var b=fe(),M=b.firstChild;return r(b,t(F,{stroke:"rgb(200 25 60 / 1)",size:32}),M),b})()},get children(){var b=Z();return b.$$click=Le,r(b,t(D,{name:"printer",size:32})),b}}),null),l}}),null),r(_,t($,{get when(){return h?.prov},get children(){var l=lt(),m=l.firstChild,c=m.firstChild,v=m.nextSibling;return r(c,t($,{get when(){return h?.prov},get children(){return t(J,{get each(){return T(h?.prov)},children:(b,M)=>t(St,{ism:b,get item(){return h?.prov?.[b]},updS:Ge})})}})),v.$$click=De,r(v,t(D,{name:"Xclose",size:22})),j(()=>ee(l,`client_item_box gWXAaj jlytmu ${X()?"isMobile":""}`)),l}}),null),r(_,t(ge,{fallback:l=>(()=>{var m=me(),c=m.firstChild,v=c.nextSibling;return v.nextSibling,r(m,()=>l.toString(),v),m})(),get children(){return t(K,{get fallback(){return(()=>{var l=he();return l.firstChild,r(l,t(F,{stroke:"rgb(200 25 60 / 1)",size:62}),null),l})()},get children(){return t($,{get when(){return N()},get children(){return t(J,{get each(){return N()?.slice(0,H())},children:(l,m)=>t(vt,{item:l,refresh:()=>z(G())})})}})}})}}),null),j(l=>Qe(_,` ${X()?"":"width:94vw;"} margin: 0 auto;`,l)),a})()}const bt=e=>{const[i,n]=P(!1),[o,h]=P(0),u=()=>{let d=e?.keyG;e?.keyG==="total"&&(d=null),e?.updForm("status",d)},C=()=>{i()||!X()&&e?.keyG!=="total"&&(h(I("M023009")?.statusObjDesc?.[e?.keyG]?.length*8.5+"px"),n(!0))},w=()=>{h("0px"),i()&&n(!1)};return t($,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var d=be();return d.firstChild,r(d,t(F,{stroke:"rgb(200 25 60 / 1)",size:32}),null),d})()},get children(){var d=ve(),W=d.firstChild,H=W.nextSibling;return d.$$mouseout=w,d.$$mousemove=C,d.$$click=u,r(d,t($,{get when(){return i()},get children(){var B=at(),A=B.firstChild,V=A.firstChild,q=V.firstChild;return r(q,()=>I("M023009")?.statusObjDesc?.[e?.keyG]),j(U=>(U=o())!=null?A.style.setProperty("width",U):A.style.removeProperty("width")),B}}),W),r(W,t(D,{get name(){return I("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(d,t($,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var B=_e(),A=B.firstChild,V=A.nextSibling;return V.nextSibling,r(B,()=>e?.total(),V),B}}),H),r(H,()=>e?.amount),j(()=>ee(d,`resumeStatus centerBx ${e?.keyG==="total"?"witXs":""}  ${e?.status===e?.keyG?"active":""}`)),d}})}})},$t=e=>{const i=()=>{let n=e?.keyG;e?.keyG==="total"&&(n=null),e?.updForm("status",n)};return t($,{get when(){return e?.amount>0},get children(){return t(K,{get fallback(){return(()=>{var n=be();return n.firstChild,r(n,t(F,{stroke:"rgb(200 25 60 / 1)",size:32}),null),n})()},get children(){var n=ve(),o=n.firstChild,h=o.nextSibling;return n.$$click=i,r(o,t(D,{get name(){return I("M023009")?.statusListIcons?.[e?.keyG]},size:22})),r(n,t($,{get when(){return I("M023009")?.statusObjDesc?.[e?.keyG]},get children(){var u=ot(),C=u.firstChild;return r(C,()=>I("M023009")?.statusObjDesc?.[e?.keyG]),u}}),h),r(n,t($,{get when(){return e?.keyG==="total"&&e?.showItems},get children(){var u=_e(),C=u.firstChild,w=C.nextSibling;return w.nextSibling,r(u,()=>e?.total(),w),u}}),h),r(h,()=>e?.amount),j(()=>ee(n,`resumeStatus centerBx  spaceAround ${e?.status===e?.keyG?"active":""}`)),n}})}})},pt=async(e,i,n,o,h)=>{let u={params:{idairguide:i,":search5":i},fldsQry:["street","agency","idairguide","currentStatus","cidentity","ssg_track_key","bagnumber","tracking","estate","city","zone","consigneeInfo:phoneNumber","consigneeInfo:altPhoneNumber","consigneeInfo:firstName","consigneeInfo:middleName","consigneeInfo:lastName","consigneeInfo:ybestate","consigneeInfo:ybcity"]};e&&e.split(" ").map((w,d)=>{w&&(u.params[":search"+d]=w.trim())}),n&&(u.params[":status"]=n),o&&(u.params[":estate"]=o),h&&(u.params[":city"]=h),te?.roles?.agency&&(u.params[":agency"]=te?.roles?.agency+"");let C={...I(Q())}[802001];if(u={...u,...C},i&&Object.keys(u.params)?.length>=2){const w=await re(u);return w?.data?.error?{}:w}return{}},yt=async e=>{let i={params:{idairguide:e}},n={...I(Q())}[802004];i={...i,...n},te?.roles?.agency&&(i.params[":agency"]=te?.roles?.agency+"");const o=await re(i);return o?.error?{}:o},kt=async e=>{let i={params:{idairguide:e,":search5":e,checkDuplicate:!0},fldsQry:["street"]},n={...I(Q())}[802001];i={...i,...n};const o=await re(i);return o?.error?{}:o},xt=async e=>{e.map(i=>{let n={params:{id:i?.ssg_track_key,idairguide:i?.idairguide}},o={...I(Q())}[802002];n={...n,...o}})},Ct=async e=>{e.map(i=>{let n={params:{ssg_track_key:i?.ssg_track_key,idairguide:i?.idairguide}},o={...I(Q())}[802005];n={...n,...o}})},Ft=async(e,i)=>{let n=[];e.map(o=>{let h={params:{ssg_track_key:o?.ssg_track_key,idairguide:o?.idairguide},data2update:{currentStatus:i}},u={...I(Q())}[802004];h={...h,...u},n.push(h)}),We(n,wt)},wt=async e=>{const n=await re(e);if(n)return n},St=e=>(()=>{var i=dt();return r(i,t($,{get when(){return e?.item?.total>0},get children(){var n=ct(),o=n.firstChild,h=o.firstChild,u=h.firstChild,C=h.nextSibling;return o.$$click=()=>e?.updS(e?.ism),r(h,()=>e?.ism,u),r(C,()=>e?.item?.total),n}}),null),r(i,t(ft,{get children(){var n=ut();return r(n,t($,{get when(){return e?.item?.cities},get children(){return t(J,{get each(){return T(e?.item?.cities)},children:(o,h)=>(()=>{var u=gt(),C=u.firstChild,w=C.nextSibling;return u.$$click=()=>e?.updS(e?.ism,o),r(C,o),r(w,()=>e?.item?.cities?.[o]),u})()})}})),n}}),null),i})();Te(["click","mousemove","mouseout"]);export{bt as StatusGroupItem,zt as default,Ct as deleteManifest,wt as fetchCSVInve,xt as loadManifest,Ft as updateManifest};
