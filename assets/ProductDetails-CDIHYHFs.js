const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-CNyyL-vs.js","assets/index-i8UwSibR.js","assets/index-DaYrm968.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/DropDwnSearch-C5yvsjOu.js","assets/debounces-C8AwctGF.js","assets/SVG-DyP6fYvf.js","assets/Util-B8-DWw-6.js","assets/DropDwnSearch-DMkLkRPc.css","assets/FlexSpace-D3YlFcAO.js","assets/ButonUploadHrm-BTNPjHOt.js","assets/ButonHrm-BSeWNUGQ.css","assets/CheckBoxSlide-C8qkI9Je.js","assets/CheckBoxSlide-uVD3DHDO.css","assets/InputHr-BQujK-DH.js","assets/InputHr-BXFw4d2l.css"])))=>i.map(i=>d[i]);
import{l as A,_ as j,r as me,c as J,a as L,o as xe,b as fe,e as $e,i as e,f as l,S as I,h as ie,k as se,m as ye,q as Ce,O as Se,F as ae,g as _e,d as Be,t as d}from"./index-i8UwSibR.js";import{e as ee,O as ne,h as ke,g as W,f as Q,m as Ie,a as T}from"./Util-B8-DWw-6.js";import{u as we}from"./debounces-C8AwctGF.js";import{c as Pe,i as Ee,g as Oe,a as Le,b as Ae,u as je}from"./handelImagesServices-DzQNChRW.js";import{LookupInventory as Ue}from"./DashInventory-CLubRsKM.js";import"./browser-image-compression-BVJ4p9S0.js";import"./App.module-CbHnVtRQ.js";import"./DialogHRM-Cjd6MYEy.js";var Xe=d('<div class="icon_status centerBx">'),De=d("<div style=width:300px;max-height:300px;position:relative;><img alt=sf><div>"),Fe=d("<div style=width:300px;position:relative;><img alt=sf>"),qe=d('<div class=" spaceAround centerBx"><h5 class="">Publicar</h5><div style=padding:4px>'),Me=d('<div><div class=" spaceAround centerBx"><div class=bottombx style=padding:16px><h4></h4><div class="centerBx bottombx "><h5 class="">Publicar</h5></div><div class=" spaceAround centerBx"></div></div></div><div class="elastic_view_bx show"></div><div class=" flxWrp spaceAround "><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div class="centerBx flxWrp "style=margin:16px></div><div style=margin:16px><div class=bottombx><h4>Codigos X tallas:</h4></div><div class="centerBx flxWrp "style=margin:16px>'),Ve=d("<div class=hseparator>"),Te=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Existencia:</h5><div class=bag_number><h5>'),Ze=d('<div class="bottombx centerBx unit tr_bar_40"><h5>Precio Costo:</h5><div class=unitBx><h5>$'),Re=d('<div class="bottombx centerBx unit"style=padding:30px>'),We=d('<div style="width:640px;margin-left:2vw;padding:30px "><div class="bottombx centerBx unit tr_bar_40"style="padding:10px "><h4>Existencia por Almacen:'),Qe=d('<div><div style="width:640px;margin-left:2vw "><div class=hseparator></div><div class="bottombx spaceAround centerBx"><h4>Movimientos</h4></div><div class="bottombx centerBx unit"><div class="icon_status centerBx "style=margin-right:52px></div><div class=tr_bar_20><h5>Fecha</h5></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Qty</h5></div></div><div class="tr_bar_40 "><div class=" centerBx spaceAround"><h4>Factura</h4></div></div><div class="tr_bar_40 centerBx spaceAround"><h4>Almacen</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>Precio</h5></div></div></div><div class=hseparator></div></div><div style=padding:30px>'),Ye=d("<div> "),ze=d("<div class=centerBx><h5 style=margin-left:12px>Subiendo imagen"),Ne=d('<div class="bottombx centerBx unit "><h5 class="bottombx centerBx unit tr_bar_50">:</h5><div class=unitBx><h5>'),Ge=d('<div class="bottombx centerBx unit"><div class="icon_status centerBx bag_number"style=margin-right:12px></div><div class=tr_bar_20><h5></h5></div><div class="tr_bar_20 centerBx"><div class="unitBx "><h5></h5></div></div><div class="tr_bar_30 "><h4></h4></div><div class="tr_bar_30 "><h4>:</h4></div><div class="tr_bar_10 centerBx"><div class="unitBx "><h5>$'),oe=d("<div style=margin:8px>"),He=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5>:'),Ke=d("<div class=unitBx><h5>"),Je=d('<div class="centerBx flxWrp "><div class="bottombx centerBx unit"><h5></h5><div class=bag_number><h5>');const ce=A(()=>j(()=>import("./LoadingColorSpinner-CNyyL-vs.js"),__vite__mapDeps([0,1,2,3]))),et=A(()=>j(()=>import("./DropDwnSearch-C5yvsjOu.js"),__vite__mapDeps([4,1,2,5,6,7,8]))),tt=A(()=>j(()=>import("./FlexSpace-D3YlFcAO.js"),__vite__mapDeps([9,1,2]))),lt=A(()=>j(()=>import("./ButonUploadHrm-BTNPjHOt.js"),__vite__mapDeps([10,1,2,6,7,11]))),rt=A(()=>j(()=>import("./CheckBoxSlide-C8qkI9Je.js"),__vite__mapDeps([12,1,2,13]))),it=A(()=>j(()=>import("./InputHr-BQujK-DH.js"),__vite__mapDeps([14,1,2,15]))),de=A(()=>j(()=>import("./SVG-DyP6fYvf.js"),__vite__mapDeps([6,1,2,7])));function xt(s){const[r,n]=me(),[t,h]=J({search:""});J(),J();const[m,Y]=L(null),[U,F]=L(!1),[X,q]=L(!1),[E,z]=L(""),[dt,be]=L("");we(be,400),xe(()=>{}),fe(()=>{});const te=async()=>{if(r?.mId){let a={id:r?.mId,businessId:_e?.profile?.businessYId};console.log(a);let u=await ot(a);console.log(u);let y=await Ue(r?.mId);console.log(y);let P=0,B=0,i=[],o={};ne(y)?.map(b=>{let c=y[b]?.store;y[b]?.products?.map(f=>{if(r?.mId===f?.product?.id){let $={...y[b]};delete $.products,$.qty=f?.qty*1,$.price=f?.price*1,P+=f?.price*1*f?.qty*1,o[c]||(o[c]={total:0}),o[c].total+=$.qty,B+=f?.qty*1,i.push($)}})});const v=P/B;z(Oe()+Le()+"/"+u?.productImageUrl),h("stockList",i),h("stock",{Balance:P,Total:B,priceCost:v,stockByStore:o}),h("productObj",u)}};$e(async()=>{te()});const N=async a=>{await at(r?.mId,a),te()},le=async(a,u)=>{let y=await Ae(a.type,u,1);if(await je(y,a)){let B={...t?.productObj?.thumbnails};B[u]=1,await N({productImageUrl:u,thumbnails:B}),q(!1),F(!1)}else q(!1)},pe=async()=>{if(q(!0),m()?.name.split(".").pop()==="webp"){let a=t?.productObj?.code+"/"+T()+T()+".webp";le(m()?.file,a)}else{let a=await Pe(m()?.file,{maxSizeMB:.5,maxWidthOrHeight:1080}),u=await Ee(a),P=await(await fetch(u)).blob(),B=t?.productObj?.code+"/"+T()+T()+".webp";le(P,B)}},ve=a=>{Y(a),F(!0)},ge=a=>{N({isPublic:a?"9":null})},_=async(a,u)=>{N({[a]:u})},he=async(a,u)=>{nt(t?.productObj,a)};return(()=>{var a=Qe(),u=a.firstChild,y=u.firstChild,P=y.nextSibling,B=P.nextSibling;return B.nextSibling,e(a,l(I,{get when(){return t?.productObj?.code},get fallback(){return(()=>{var i=Ye();return i.firstChild,e(i,l(ce,{stroke:"rgb(200 25 60 / 1)",size:62}),null),i})()},get children(){var i=Me(),o=i.firstChild,v=o.firstChild,b=v.firstChild,c=b.nextSibling,f=c.firstChild,$=c.nextSibling,M=o.nextSibling,G=M.nextSibling,V=G.firstChild,k=V.nextSibling,w=k.nextSibling,O=w.nextSibling,H=O.nextSibling,K=H.firstChild,x=K.nextSibling;return e(o,l(I,{get when(){return m()?.source},get children(){var C=De(),D=C.firstChild,Z=D.nextSibling;return e(Z,l(I,{get when(){return!X()},get fallback(){return(()=>{var p=ze(),R=p.firstChild;return e(p,l(ce,{stroke:"rgb(200 25 60 / 1)",size:32}),R),p})()},get children(){var p=Xe();return p.$$click=pe,e(p,l(de,{name:"arrow_up_large",size:24})),p}})),ie(p=>{var R=m()?.source,re=X()?"floatBtn loading":"floatBtn ";return R!==p.e&&se(D,"src",p.e=R),re!==p.t&&ye(Z,p.t=re),p},{e:void 0,t:void 0}),C}}),v),e(o,l(I,{get when(){return Ce(()=>!!E())()&&!m()?.source},get children(){var C=Fe(),D=C.firstChild;return ie(()=>se(D,"src",E())),C}}),v),e(b,()=>t?.productObj?.name),e(c,l(rt,{get initValue(){return t?.productObj?.isPublic},updChange:ge,color:"var(--background-red-ssg)"}),f),e($,l(lt,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Subir Imagen",handleClick:ve})),e(v,l(I,{get when(){return Se()},get children(){var C=qe(),D=C.firstChild,Z=D.nextSibling;return e(Z,l(et,{get list(){return ee("M023009")?.bussinesSSGList},lbl_empty:"Business",backColor:"var(--hrm-palette-primary100)",color:"var(--background-red-ssg)",get value(){return t?.productObj.businessId},borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",onSelect:p=>he(p.id),width:"260px"})),C}}),null),e(V,l(g,{get value(){return t?.productObj?.name},label:"Nombre",key:"name",updItem:_,width:"600px"})),e(k,l(ue,{get value(){return t?.productObj?.category},label:"Categoria",key:"category",updItem:_}),null),e(k,l(S,{}),null),e(k,l(ue,{get value(){return t?.productObj?.unit},label:"U/M",key:"unit",updItem:_}),null),e(k,l(S,{}),null),e(k,l(g,{get value(){return t?.productObj?.brand},label:"Marca",key:"brand",updItem:_}),null),e(k,l(S,{}),null),e(k,l(g,{get value(){return t?.productObj?.model},label:"Modelo",key:"model",updItem:_}),null),e(w,l(g,{get value(){return t?.productObj?.ASIN},label:"ASIN",key:"ASIN",updItem:_}),null),e(w,l(S,{}),null),e(w,l(g,{get value(){return t?.productObj?.UPC},label:"UPC",key:"UPC",updItem:_}),null),e(w,l(S,{}),null),e(w,l(g,{get value(){return t?.productObj?.code},label:"codigo",key:"code",updItem:_}),null),e(O,l(g,{get value(){return t?.productObj?.description},label:"Description",key:"description",updItem:_}),null),e(O,l(S,{}),null),e(O,l(g,{get value(){return t?.productObj?.salePrice},label:"Precio Venta",key:"salePrice",updItem:_}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_XXXL},label:"XXXL",key:"UPC_SIZE_XXXL",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_XXL},label:"XXL",key:"UPC_SIZE_XXL",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_XL},label:"XL",key:"UPC_SIZE_XL",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_L},label:"L",key:"UPC_SIZE_L",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_M},label:"M",key:"UPC_SIZE_M",updItem:_}),null),e(x,l(S,{}),null),e(x,l(g,{get value(){return t?.productObj?.UPC_SIZE_S},label:"S",key:"UPC_SIZE_S",updItem:_}),null),i}}),u),e(u,l(I,{get when(){return t?.stockList},get children(){return[Ve(),(()=>{var i=Re();return e(i,l(I,{get when(){return t?.stock?.Total>0},get children(){return[(()=>{var o=Te(),v=o.firstChild,b=v.nextSibling,c=b.firstChild;return e(c,()=>(t?.stock?.Total*1).toFixed(2)),o})(),l(tt,{}),(()=>{var o=Ze(),v=o.firstChild,b=v.nextSibling,c=b.firstChild;return c.firstChild,e(c,()=>(t?.stock?.priceCost*1).toFixed(2),null),o})()]}})),i})(),(()=>{var i=We();return i.firstChild,e(i,l(ae,{get each(){return ne(t?.stock?.stockByStore)},children:(o,v)=>(()=>{var b=Ne(),c=b.firstChild,f=c.firstChild,$=c.nextSibling,M=$.firstChild;return e(c,()=>ee("storeGroupBy")?.[o]?.label,f),e(M,()=>(t?.stock?.stockByStore?.[o]?.total*1).toFixed(2)),b})()}),null),i})()]}}),y),e(u,l(ae,{get each(){return t?.stockList},children:(i,o)=>(()=>{var v=Ge(),b=v.firstChild,c=b.nextSibling,f=c.firstChild,$=c.nextSibling,M=$.firstChild,G=M.firstChild,V=$.nextSibling,k=V.firstChild,w=V.nextSibling,O=w.firstChild,H=O.firstChild,K=w.nextSibling,x=K.firstChild,C=x.firstChild;return C.firstChild,e(b,l(de,{get name(){return st[i?.type]},size:24,color:"var(--background-red-ssg)"})),e(f,()=>ke(i?.createDate)),e(G,()=>(i?.qty*1).toFixed(2)),e(k,()=>i?.invoice),e(O,()=>ee("storeGroupBy")?.[i?.store]?.label,H),e(C,()=>(i?.price*1).toFixed(2),null),v})()}),null),a})()}let st={ENTRY:"arrow_down_large",SALES:"money_outline",TRANSFER:"arrows_compare"};const S=()=>[oe(),"|",oe()],g=s=>{const[r,n]=L(!1),[t,h]=L(""),m=()=>{s?.updItem(s?.key,t()),n(!1)},Y=()=>{let U=r();U||h(s?.value),n(!U)};return(()=>{var U=He(),F=U.firstChild,X=F.firstChild,q=X.firstChild;return X.$$click=Y,e(X,()=>s?.label,q),e(F,l(I,{get when(){return r()},get fallback(){return l(I,{get when(){return s?.value},get children(){var E=Ke(),z=E.firstChild;return e(z,()=>s?.value),E}})},get children(){return l(it,{get width(){return s?.width||"160px"},backColor:"#ffffff",borderColor:"#b2b2b2",borderActiveColor:"var(--background-red-ssg)",get value(){return t()||""},get placeholder(){return s?.label},colors:"#2b2b2b",handleClick:E=>h(E),onEnter:m})}}),null),U})()},ue=s=>l(I,{get when(){return s?.value},get children(){var r=Je(),n=r.firstChild,t=n.firstChild,h=t.nextSibling,m=h.firstChild;return e(t,()=>s?.label),e(m,()=>s?.value),r}}),at=async(s,r)=>{let n={params:{id:s,businessId:_e?.profile?.businessYId},form:r},t=W(129004);return n={...n,...t},await Q(n)},nt=async(s,r)=>{let n={...s};n.ssg_product_key=T(),n.businessId=r;let t={params:{businessId:r},form:n},h=W(129003);t={...t,...h};{const m=await Q(t);return m?.data?.error?{}:m?.data}},ot=async s=>{let r={params:s},n=W(122002);return r={...r,...n},await Q(r)},ft=async s=>{let r=[];s.map(n=>{let t={params:{id:n?.ssg_track_key,idairguide:"all"}},h=W(802002);t={...t,...h},r.push(t)}),Ie(r,ct)},ct=async s=>{const n=await Q(s);if(n)return n};Be(["click"]);export{xt as default,ct as fetchCSVInve,ft as loadProduct,at as updProducts};
