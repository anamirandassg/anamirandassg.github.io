const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadingColorSpinner-BfSj-Vy0.js","assets/index-Bl3fatDQ.js","assets/index-IeDM_K18.css","assets/LoadingColorSpinner-DPNLfwBi.css","assets/ContainerElasticView-Dh6d0iXp.js","assets/SVG-DTtjSFna.js","assets/ContainerElasticView-LzOd6fDI.css","assets/FlexSpace-ZNi351rT.js"])))=>i.map(i=>d[i]);
import{c as H,l as P,_ as E,a as R,a9 as se,u as ae,aa as ne,k as le,p as Z,q as Y,i as r,d as i,f as V,e as K,t as $,j as Q,O as k,S as N,y as U,F as J,$ as X,h as L,g as M,s as oe,D as ee,B as ce,C as W,n as de,o as ue}from"./index-Bl3fatDQ.js";import{H as pe,a as ge}from"./html5-qrcode-scanner-mZ8t2Ei8.js";import"./DashManifest-C48-prpd.js";import"./ManifestDetails-FO-i8WJi.js";import{OpenModal as me}from"./DialogHRM-DmyX5u14.js";import{stop2Deliver as d}from"./DeliveryView-DsXf-wJ1.js";import{g as he,S as ve}from"./ShowQRPrintLabel-Dj12hwgU.js";import"./App.module-CbHnVtRQ.js";import"./debounces-D0TIaeq3.js";import"./fontkit.es-D4yL_iDr.js";import"./ButonHrm-CzzHcx31.js";/* empty css                 */import"./SVG-DTtjSFna.js";import"./qrcode-C5vWJp7P.js";import"./InitPrintServices-AoQzDf9Q.js";import"./Toast-Cz0XSNBS.js";var _e=$("<h5 class=rpto>"),be=$("<h5>"),fe=$('<div><div class=" flxWrp spaceAround centerBx"><h2>Completar Entrega</h2><div class="icon_status centerBx"></div></div><div style=padding:16px><div class=" flxWrp centerBx "style=" margin:0 auto;;padding:8px 9px;"><div class="icon_status centerBx"></div><div class=bagsNo></div></div><div><div class=vertseparator></div><div class=vertseparator></div><h4></h4></div><div class="icon_status centerBx"></div></div><p class=" textleft "style=padding:18px>;</p><div>'),te=$("<div> <!>."),re=$("<div> "),xe=$('<div class="_dsplFlx flxWrp spaceAround "style=" margin:0 auto;;padding:8px 9px;">'),Se=$('<div class="icon_status centerBx">'),$e=$("<div style=max-width:120px;margin:8px;><h5>"),ye=$('<div><div class=separator></div><div><h5></h5><h4></h4><div class="_dsplFlx bottombx flxWrp spaceAround "><div class=""><h5></h5></div></div></div><div class="_dsplFlx bottombx flxWrp spaceAround ">');const[Ye,Ke]=H(),ie=P(()=>E(()=>import("./LoadingColorSpinner-BfSj-Vy0.js"),__vite__mapDeps([0,1,2,3])));P(()=>E(()=>import("./ContainerElasticView-Dh6d0iXp.js"),__vite__mapDeps([4,1,2,5,6])));const G=P(()=>E(()=>import("./SVG-DTtjSFna.js"),__vite__mapDeps([5,1,2]))),Ce=P(()=>E(()=>import("./FlexSpace-ZNi351rT.js"),__vite__mapDeps([7,1,2]))),[Ue,Je]=R(""),[j,De]=H();function Xe(c){se();const[f,u]=ae();R(0);const v=ne();le(()=>{y()}),Z(()=>{}),Y(async()=>{d?.stopD?.addressId||v(`/delivery-detail?dId=${f?.dId}`,{replace:!0})});function o(){return"geolocation"in navigator}function _(l){ce({latitude:l?.coords?.latitude,longitude:l?.coords?.longitude})}function y(){o()?navigator.geolocation.getCurrentPosition(_):showMessage("Geolocation isn't supported by your browser")}const w=l=>{l.cidentity,{...d?.stopD}},I=l=>{let e=Q(),t={};t.id=e,t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=i(Ae,{get item(){return d?.stopD},modalId:e,callback:w}),me(t)},A=async()=>{let l=[],e=360,t=k(d?.stopD?.customers);if(t.length<e){const s=t.map(async(g,b)=>{let m=d?.stopD?.customers[g],h=k(m?.bagsNumb),n=m?.tracking,x="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const S=new RegExp(x);n.length===13&&S.test(n)&&(n=n.slice(3,12));let B=await he(n),O=m?.phoneNumber.split("|");h.map(async(T,a)=>{let D={state:d?.stopD?.estate,name:m?.name,phoneNumber:O[0],altPhoneNumber:O[1],bulto:m?.bagsNumb?.[T]?.bagnumber,tracking:n,qr:B};l.push(D)})});await Promise.all(s);let p=await ve(l);window.open(p),setLoadingPdf(!1)}else OpenToast({text:`El limite de etiquetas a imprimir es de ${e}`,timeout:2500,id:Q()})};return(()=>{var l=fe(),e=l.firstChild,t=e.firstChild,s=t.nextSibling,p=e.nextSibling,g=p.firstChild,b=g.firstChild,m=b.nextSibling,h=g.nextSibling,n=h.firstChild,x=n.nextSibling,S=x.nextSibling,C=h.nextSibling,B=p.nextSibling,O=B.firstChild,T=B.nextSibling;return s.$$click=I,r(s,i(G,{name:"qr_code",size:32,color:"#2b2b2b"})),r(b,i(G,{name:"open_package_file_outline",size:32})),r(m,()=>d?.stopD?.bagsNo),r(p,i(Ce,{}),h),r(h,i(N,{get when(){return d?.stopD?.consigneeInfo?.ybreparto},get children(){return[(()=>{var a=_e();return r(a,()=>d?.stopD?.consigneeInfo?.ybreparto),a})(),"|"]}}),n),r(h,i(N,{get when(){return d?.stopD?.city},get children(){return[(()=>{var a=be();return r(a,()=>d?.stopD?.city),a})(),"|"]}}),x),r(S,()=>d?.stopD?.estate),C.$$click=A,r(C,i(G,{name:"printer",size:32})),r(B,()=>d?.stopD?.addressId,O),r(T,i(X,{fallback:a=>(()=>{var D=te(),q=D.firstChild,z=q.nextSibling;return z.nextSibling,r(D,()=>a.toString(),z),D})(),get children(){return i(U,{get fallback(){return(()=>{var a=re();return a.firstChild,r(a,i(ie,{stroke:"rgb(200 25 60 / 1)",size:62}),null),a})()},get children(){return i(N,{get when(){return k(d?.stopD?.customers)?.length>0},get children(){return i(J,{get each(){return k(d?.stopD?.customers)},children:(a,D)=>i(ke,{get item(){return d?.stopD?.customers?.[a]}})})}})}})}})),V(a=>{var D=` ${L(),"centerBx"}  topbx `,q=` ${L(),"centerBx"} bottombx`,z=` ${L()?"":"width:94vw;"} margin: 0 auto; ; padding: 18px 29px;`;return D!==a.e&&M(p,a.e=D),q!==a.t&&M(h,a.t=q),a.a=oe(T,z,a.a),a},{e:void 0,t:void 0,a:void 0}),l})()}const we=c=>(()=>{var f=xe();return r(f,i(X,{fallback:u=>(()=>{var v=te(),o=v.firstChild,_=o.nextSibling;return _.nextSibling,r(v,()=>u.toString(),_),v})(),get children(){return i(U,{get fallback(){return(()=>{var u=re();return u.firstChild,r(u,i(ie,{stroke:"rgb(200 25 60 / 1)",size:62}),null),u})()},get children(){return i(N,{get when(){return k(c?.list)?.length>0},get children(){return i(J,{get each(){return k(c?.list)},children:(u,v)=>(()=>{var o=$e(),_=o.firstChild;return ee(o,"data-id",`${u}`),r(o,i(N,{get when(){return j?.[u]?.scanned==="ST200"},get children(){var y=Se();return r(y,i(G,{name:"success",size:32,color:"var(--hrm-palette-tertiary50)"})),y}}),_),r(_,()=>c?.list?.[u]?.bagnumber),V(()=>M(o,`bag_number centerBx ${j?.[u]?.scanned==="ST200"?"checked":""} `)),o})()})}})}})}})),f})(),ke=c=>(()=>{var f=ye(),u=f.firstChild,v=u.nextSibling,o=v.firstChild,_=o.nextSibling,y=_.nextSibling,w=y.firstChild,I=w.firstChild,A=v.nextSibling;return r(o,()=>c?.item?.name),r(_,()=>c?.item?.phoneNumber),r(I,()=>c?.item?.tracking),r(A,i(we,{get list(){return c?.item?.bagsNumb}})),V(l=>{var e=c?.item?.cidentity,t=` ${L()?"":"centerBx"} bottombx`;return e!==l.e&&ee(f,"data-cid",l.e=e),t!==l.t&&M(v,l.t=t),l},{e:void 0,t:void 0}),f})();K(["click"]);var Pe=$('<div><div><div class="_dsplFlx bottombx lowbordr"><h5>Confirmar Entrega</h5><div class="icon_status centerBx"></div></div></div><div class=" flxWrp spaceAround centerBx"style="margin:30px 0"><div style=position:relative;><div></div><div id=qr-reader_SSDM style=width:350px>');const Ee=P(()=>E(()=>import("./SVG-DTtjSFna.js"),__vite__mapDeps([5,1,2]))),Ie=P(()=>E(()=>import("./FlexSpace-ZNi351rT.js"),__vite__mapDeps([7,1,2])));let F;function Ae(c){const[f,u]=R(""),[v,o]=R(""),[_,y]=R();Z(()=>{F?.clear()}),Y(()=>{setTimeout(()=>{l()},90)});const w=(e,t)=>{e!==_()&&(y(e),setTimeout(()=>{y("")},3e3),I(e))},I=e=>{e||(e=f()),e=e.split("'").join("-"),new Date().getTime(),W?.latitude,W?.longitude,c?.status,de?.profile?.userId;let t=e.split("/");e.split("-").length>3&&(t=e.split("-").join);let s=t?.[0],p="^[A-Z]{3}[0-9]{4}-[1-9]{5}";const g=new RegExp(p);let b=s.length===13&&g.test(s),m="^[0-9]{4}-[1-9]{4}";const h=new RegExp(m);let n=s.length===9&&h.test(s),x=t.length>4&&s.length===12,S={idairguide:t?.[0],":search0":t?.[1],":search1":t?.[3]};b&&(S={idairguide:"175-2383"+s.slice(3,7),":search0":s}),n&&(S={idairguide:"175-2383"+s.slice(0,4),":search0":s}),b||x||n?A(S):(o("alert"),setTimeout(()=>{o("")},1800))},A=async e=>{let t=await Be(e),s=Object.keys(t)?.[0];if(t[s]?.cidentity){let p=t[s]?.cidentity,g=t[s]?.ssg_track_key,b={...c?.item},m=b?.customers?.[p]?.bagsNumb?.[g];console.log(p,g,m,b?.customers),m?(o("success"),De(g,{scanned:"ST200"})):o("alert"),setTimeout(()=>{o("")},1800),b?.customers?.[p]?.bagsNumb?.[g],c?.callback(t[s])}},l=()=>{let e={fps:10,qrbox:{width:350,height:200},supportedScanTypes:[pe.SCAN_TYPE_CAMERA],showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,verbose:!0};F=new ge("qr-reader_SSDM",e),F.render(w)};return(()=>{var e=Pe(),t=e.firstChild,s=t.firstChild,p=s.firstChild,g=p.nextSibling,b=t.nextSibling,m=b.firstChild,h=m.firstChild;return e.style.setProperty("max-height","80vh"),e.style.setProperty("overflow","auto"),e.style.setProperty("background","#ffffff"),e.style.setProperty("border-radius","13"),e.style.setProperty("padding","10px 19px"),p.$$click=w,r(s,i(Ie,{}),g),g.$$click=()=>{},r(g,i(Ee,{name:"keyboard",size:32,color:"#2b2b2b"})),V(n=>{var x=L()?"92vw":"420px",S=`scanOverlay ${v()} `,C=v()?"block":"none";return x!==n.e&&((n.e=x)!=null?e.style.setProperty("width",x):e.style.removeProperty("width")),S!==n.t&&M(h,n.t=S),C!==n.a&&((n.a=C)!=null?h.style.setProperty("display",C):h.style.removeProperty("display")),n},{e:void 0,t:void 0,a:void 0}),e})()}const Be=async c=>await ue({params:c,query:"getScanLogisticYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2"});K(["click"]);export{Xe as default,Ye as scannedQRs,Ke as setScannedQRs,Je as setStatus,De as setStatusD,Ue as status,j as statusD};
